<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Pi Networkäº”å­æ£‹Web3æ¸¸æˆ" />
    <!-- Pi Browser å…¼å®¹æ€§é…ç½® -->
    <meta name="pi-network-app" content="true" />
    <meta name="pi-browser-compatible" content="true" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <title>Pi Network äº”å­æ£‹</title>

    <!-- Pi Network SDK -->
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    <script>
      // åˆå§‹åŒ–Pi SDK - ä½¿ç”¨æ­£å¼App ID
      Pi.init({
        version: "2.0",
        sandbox: false, // ä½¿ç”¨æ­£å¼ç¯å¢ƒ
        appId: "gomoku-5d5b20e8b1d13f8", // ä½ çš„App ID
      });
    </script>

    <!-- å¤–éƒ¨CSSæ–‡ä»¶ -->
    <link rel="stylesheet" href="styles.css?v=2024" />

    <style>
      /* æ¸¸æˆç•Œé¢ç‰¹å®šæ ·å¼ - åªä¿ç•™å¿…è¦çš„é¢å¤–æ ·å¼ */
    </style>
  </head>
  <body>
    <noscript data-i18n="noscript"
      >æ‚¨éœ€è¦å¯ç”¨JavaScriptæ‰èƒ½è¿è¡Œæ­¤åº”ç”¨ç¨‹åºã€‚</noscript
    >

    <div id="root">
      <!-- ç™»å½•ç•Œé¢ -->
      <div class="login-screen">
        <div class="container">
          <div class="login-content">
            <div class="login-card card" style="position: relative">
              <!-- è¯­è¨€åˆ‡æ¢å™¨ -->
              <div class="language-selector">
                <span class="globe-icon">ğŸŒ</span>
                <select
                  id="language-selector"
                  onchange="changeLanguage(this.value)"
                >
                  <option value="zh" data-i18n="lang_zh">ä¸­æ–‡</option>
                  <option value="en" data-i18n="lang_en">English</option>
                  <option value="ko" data-i18n="lang_ko">í•œêµ­ì–´</option>
                  <option value="ja" data-i18n="lang_ja">æ—¥æœ¬èª</option>
                  <option value="vi" data-i18n="lang_vi">Tiáº¿ng Viá»‡t</option>
                </select>
              </div>

              <div class="card-header text-center" style="padding-top: 25px">
                <div class="title-with-icon">
                  <div class="board-icon">
                    <div class="stones-container">
                      <div class="stone-jar black">
                        <div class="stone"></div>
                      </div>
                      <div class="stone-jar white">
                        <div class="stone"></div>
                      </div>
                    </div>
                  </div>
                  <h1 class="game-title" data-i18n="game_title">äº”å­æ£‹</h1>
                </div>
                <p class="game-subtitle" data-i18n="game_subtitle">
                  è¿è¡Œåœ¨pinetworkåŒºå—é“¾ä¹‹ä¸Šçš„äº”å­æ£‹æ¸¸æˆ
                </p>
              </div>

              <div class="card-content">
                <div class="game-modes">
                  <div class="game-mode-row">
                    <button class="game-mode-btn online-mode" onclick="handleOnlineMatch()">
                      <span class="mode-icon">ğŸŒ</span>
                      <span class="mode-text" data-i18n="online_match"
                        >åœ¨çº¿åŒ¹é…</span
                      >
                    </button>
                  </div>
                  <div class="game-mode-row">
                    <button class="game-mode-btn" onclick="showGlobalRanking()">
                      <span class="mode-icon">ğŸ†</span>
                      <span class="mode-text" data-i18n="global_ranking"
                        >å…¨çƒæ’è¡Œ</span
                      >
                    </button>
                  </div>
                  <div class="game-mode-row">
                    <button
                      class="game-mode-btn ai-mode"
                      onclick="handleAIGame()"
                    >
                      <span class="mode-icon">ğŸ§ </span>
                      <span class="mode-text" data-i18n="ai_battle"
                        >AIå¯¹æˆ˜</span
                      >
                    </button>
                  </div>
                  <div class="game-mode-row">
                    <button
                      class="game-mode-btn"
                      onclick="showPersonalCenter()"
                    >
                      <span class="mode-icon">ğŸ‘¤</span>
                      <span class="mode-text" data-i18n="personal_center"
                        >ä¸ªäººä¸­å¿ƒ</span
                      >
                    </button>
                  </div>
                  <div class="game-mode-row">
                    <button
                      class="game-mode-btn"
                      onclick="showGameInstructions()"
                    >
                      <span class="mode-icon">â“</span>
                      <span class="mode-text" data-i18n="game_instructions"
                        >æ¸¸æˆè¯´æ˜</span
                      >
                    </button>
                  </div>
                </div>

                <div
                  class="error-message"
                  id="error-message"
                  style="display: none"
                >
                  <p id="error-text" data-i18n="error_message">âŒ é”™è¯¯ä¿¡æ¯</p>
                </div>
              </div>

              <div class="card-footer">
                <button
                  class="btn btn-primary btn-lg pi-login-btn"
                  onclick="handleSignIn()"
                  id="login-btn"
                >
                  <span class="pi-icon">Ï€</span>
                  <span data-i18n="login_with_pi">ä½¿ç”¨Pi Networkç™»å½•</span>
                </button>

                <p class="login-note" data-i18n="login_note">
                  ç‚¹å‡»ç™»å½•å³è¡¨ç¤ºæ‚¨åŒæ„ä½¿ç”¨Pi Networkè´¦æˆ·è¿›è¡Œèº«ä»½éªŒè¯
                </p>

                <!-- éšç§æ”¿ç­–å’ŒæœåŠ¡æ¡æ¬¾é“¾æ¥ -->
                <div class="legal-links" style="margin-top: 20px; text-align: center;">
                  <a href="public/privacy-policy.html" target="_blank" style="color: #c77dff; text-decoration: none; margin: 0 10px; font-size: 14px;" data-i18n="privacy_policy">éšç§æ”¿ç­–</a>
                  <span style="color: #ffffff80;">|</span>
                  <a href="public/terms-of-service.html" target="_blank" style="color: #c77dff; text-decoration: none; margin: 0 10px; font-size: 14px;" data-i18n="terms_of_service">æœåŠ¡æ¡æ¬¾</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // å¤šè¯­è¨€é…ç½®
      const LANGUAGES = {
        zh: {
          // åŸºç¡€ç•Œé¢
          noscript: "æ‚¨éœ€è¦å¯ç”¨JavaScriptæ‰èƒ½è¿è¡Œæ­¤åº”ç”¨ç¨‹åºã€‚",
          game_title: "äº”å­æ£‹",
          game_subtitle: "è¿è¡Œåœ¨pinetworkåŒºå—é“¾ä¹‹ä¸Šçš„äº”å­æ£‹æ¸¸æˆ",
          global_ranking: "å…¨çƒæ’è¡Œ",
          ai_battle: "AIå¯¹æˆ˜",
          personal_center: "ä¸ªäººä¸­å¿ƒ",
          game_instructions: "æ¸¸æˆè¯´æ˜",
          error_message: "âŒ é”™è¯¯ä¿¡æ¯",
          login_with_pi: "ä½¿ç”¨Pi Networkç™»å½•",
          login_note: "ç‚¹å‡»ç™»å½•å³è¡¨ç¤ºæ‚¨åŒæ„ä½¿ç”¨Pi Networkè´¦æˆ·è¿›è¡Œèº«ä»½éªŒè¯",
          privacy_policy: "éšç§æ”¿ç­–",
          terms_of_service: "æœåŠ¡æ¡æ¬¾",

          // è¯­è¨€é€‰é¡¹
          lang_zh: "ä¸­æ–‡",
          lang_en: "English",
          lang_ko: "í•œêµ­ì–´",
          lang_ja: "æ—¥æœ¬èª",
          lang_vi: "Tiáº¿ng Viá»‡t",

          // æ¸¸æˆç›¸å…³
          current_player: "å½“å‰ç©å®¶",
          your_turn: "è½®åˆ°æˆ‘æ–¹è½å­",
          opponent_turn: "è½®åˆ°å¯¹æ–¹è½å­",
          ai_thinking: "ğŸ¤– AIæ­£åœ¨æ€è€ƒä¸­...",
          thinking_time: "â±ï¸ æ€è€ƒæ—¶é—´ï¼š{0}ç§’",
          remaining_time: "âš ï¸ å‰©ä½™æ—¶é—´ï¼š{0}ç§’",
          timeout_warning: "ğŸš¨ å³å°†è¶…æ—¶ï¼š{0}ç§’",
          timeout: "â° æ€è€ƒè¶…æ—¶",

          // æ¸¸æˆç»“æœ
          you_win: "ğŸ‰ æ­å–œæ‚¨è·èƒœï¼",
          you_lose: "ğŸ˜” å¾ˆé—æ†¾ï¼Œæ‚¨è´¥äº†",
          draw: "ğŸ¤ å¹³å±€",
          game_over: "æ¸¸æˆç»“æŸ",

          // æŒ‰é’®å’Œæ“ä½œ
          new_game: "æ–°æ¸¸æˆ",
          undo: "æ‚”æ£‹",
          restart: "é‡æ–°å¼€å§‹",
          back_to_menu: "è¿”å›ä¸»èœå•",
          confirm: "ç¡®è®¤",
          cancel: "å–æ¶ˆ",
          close: "å…³é—­",
          save: "ä¿å­˜",
          update: "æ›´æ–°",
          enter_game: "è¿›å…¥æ¸¸æˆ",

          // ä¸ªäººä¸­å¿ƒ
          personal_info: "ä¸ªäººä¿¡æ¯",
          game_stats: "æ¸¸æˆç»Ÿè®¡",
          total_games: "æ€»å±€æ•°",
          wins: "èƒœåˆ©",
          losses: "å¤±è´¥",
          win_rate: "èƒœç‡",
          current_rank: "å½“å‰æ’å",
          wallet_address: "é’±åŒ…åœ°å€",
          balance: "ä½™é¢",
          nickname: "æ˜µç§°",
          avatar: "å¤´åƒ",

          // é”™è¯¯å’Œæç¤º
          connection_failed: "è¿æ¥å¤±è´¥",
          network_error: "ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•",
          login_failed: "ç™»å½•å¤±è´¥",
          insufficient_balance: "ä½™é¢ä¸è¶³",
          invalid_move: "æ— æ•ˆè½å­",
          game_not_started: "æ¸¸æˆæœªå¼€å§‹",

          // æ”¯ä»˜ç›¸å…³
          payment_confirm: "ç¡®è®¤æ”¯ä»˜",
          payment_success: "æ”¯ä»˜æˆåŠŸ",
          payment_failed: "æ”¯ä»˜å¤±è´¥",
          payment_cancelled: "æ”¯ä»˜å·²å–æ¶ˆ",
          recharge: "å……å€¼",

          // æ’è¡Œæ¦œ
          leaderboard: "æ’è¡Œæ¦œ",
          rank: "æ’å",
          player: "ç©å®¶",
          score: "ç§¯åˆ†",
          games_played: "æ¸¸æˆå±€æ•°",

          // å…¶ä»–
          loading: "åŠ è½½ä¸­...",
          connecting: "æ­£åœ¨è¿æ¥...",
          please_wait: "è¯·ç¨å€™...",
          success: "æˆåŠŸ",
          failed: "å¤±è´¥",
          connecting_pi_network: "æ­£åœ¨è¿æ¥Pi Network...",
          entering_game: "æ­£åœ¨è¿›å…¥æ¸¸æˆ...",

          // å¼¹çª—å’Œæç¤º
          hint: "æç¤º",
          confirm_purchase: "ç¡®è®¤è´­ä¹°",
          confirm_payment: "ç¡®è®¤æ”¯ä»˜",
          payment_amount: "{0} Ï€",
          enter_nickname: "è¯·è¾“å…¥æ˜µç§°",
          nickname_too_long: "æ˜µç§°ä¸èƒ½è¶…è¿‡20ä¸ªå­—ç¬¦",
          nickname_forbidden: "æ˜µç§°åŒ…å«æ•æ„Ÿè¯ï¼Œè¯·é‡æ–°è¾“å…¥",
          logout_confirm: "é€€å‡ºç¡®è®¤",
          logout_message: "ç¡®å®šè¦é€€å‡ºè´¦æˆ·å—ï¼Ÿæ‚¨çš„æ¸¸æˆæ•°æ®å°†è¢«ä¿ç•™ã€‚",
          logout_success: "é€€å‡ºæˆåŠŸ",
          logout_success_message: "å·²æˆåŠŸé€€å‡ºè´¦æˆ·ï¼",
          please_login_first: "è¯·å…ˆç™»å½•",

          // æ¸¸æˆè¯´æ˜
          game_instructions_title: "æ¸¸æˆè¯´æ˜",
          game_history_title: "äº”å­æ£‹å†å²æ¸Šæº",
          game_history_desc:
            'ç›¸ä¼ äº”å­æ£‹è¯ç”Ÿäº4000å¤šå¹´å‰çš„å°§å¸æ—¶æœŸã€‚å°§ä¸ºæ•™è‚²å„¿å­ä¸¹æœ±ï¼Œå‘æ˜äº†çŸ³å­æ£‹ï¼Œåç»èˆœæ”¹è‰¯ä¸º"äº”æ˜Ÿè¿ç "ç©æ³•ï¼Œé€æ¸å½¢æˆç°ä»£äº”å­æ£‹çš„é›å½¢ã€‚\nä»å°§èˆœæ—¶æœŸçš„æ°‘é—´æ¸¸æˆï¼Œåˆ°å—åŒ—æœä¼ æ’­è‡³ä¸œäºšï¼Œå†ç»æ—¥æœ¬æ”¹è‰¯ä¸ºç«æŠ€è¿åŠ¨ï¼Œæœ€ç»ˆæˆä¸ºå…¨çƒæ€§æ£‹ç±»é¡¹ç›®ã€‚',

          // ä¸ªäººä¸­å¿ƒ
          personal_center_title: "ä¸ªäººä¸­å¿ƒ",
          wallet_address_placeholder: "è¾“å…¥50ä½é’±åŒ…åœ°å€ (å¤§å†™å­—æ¯å’Œæ•°å­—)",
          wallet_address_format: "é’±åŒ…åœ°å€æ ¼å¼ï¼š50ä½å¤§å†™å­—æ¯å’Œæ•°å­—",

          // æ”¯ä»˜ç›¸å…³
          insufficient_balance_title: "ä½™é¢ä¸è¶³",
          insufficient_balance_message:
            "æ‚”æ£‹éœ€è¦æ¶ˆè´¹ 0.1 Ï€ï¼Œå½“å‰ä½™é¢ {0} Ï€ï¼Œä½™é¢ä¸è¶³ã€‚\n\næ˜¯å¦è¦å……å€¼ï¼Ÿ",
          recharge_prompt: "ä¸ºæ‚¨çš„æ¸¸æˆè´¦æˆ·å……å€¼Piå¸ï¼Œäº«å—æ›´å¤šæ¸¸æˆåŠŸèƒ½ï¼",
          continue_without_recharge:
            "æ‚¨å¯ä»¥ç»§ç»­å½“å‰æ¸¸æˆï¼Œä½†æ— æ³•é‡æ–°å¼€å§‹ã€‚å……å€¼åå³å¯è§£é”æ­¤åŠŸèƒ½ã€‚",
          undo_success: "æ‚”æ£‹æˆåŠŸ",
          undo_success_message: "å·²æ¶ˆè´¹ 0.1 Ï€ï¼Œä½™é¢ï¼š{0} Ï€",
          undo_failed: "æ‚”æ£‹å¤±è´¥",
          network_error_retry: "ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•",
          invalid_amount: "è¯·è¾“å…¥æœ‰æ•ˆçš„å……å€¼é‡‘é¢ï¼ˆæœ€ä½0.1Ï€ï¼‰",

          // é“å…·åç§°
          item_hint: "æç¤ºé“å…·",
          item_undo: "æ‚”æ£‹åˆ¸",
          item_theme: "ä¸»é¢˜åŒ…",
          item_vip: "VIPä¼šå‘˜",
          item_unknown: "æœªçŸ¥é“å…·",

          // æ’è¡Œæ¦œå’Œç»Ÿè®¡
          current_ranking: "ğŸ¯ å½“å‰æ’åï¼šç¬¬{0}å | ({1}èƒœ{2}è´Ÿ) | èƒœç‡ï¼š{3}%",
          leaderboard_update_tip: "æ’è¡Œæ¦œå®æ—¶æ›´æ–°ï¼Œç»§ç»­æ¸¸æˆæå‡æ‚¨çš„æ’åï¼",
          ranking_header_rank: "æ’å",
          ranking_header_nickname: "æ˜µç§°",
          ranking_header_games: "æ€»å¯¹å±€",
          ranking_header_winrate: "èƒœç‡",
          current_rank_not_listed: "å½“å‰æ’åï¼šæœªä¸Šæ¦œ",
          current_rank_label: "å½“å‰æ’å",
          not_listed: "æœªä¸Šæ¦œ",
          play_one_game_to_rank:
            "ğŸ® å®Œæˆ1å±€æ¸¸æˆå³å¯ä¸Šæ¦œï¼å¼€å§‹æ‚¨çš„äº”å­æ£‹ä¹‹æ—…å§ï¼",

          // ä¸ªäººä¸­å¿ƒè¯¦ç»†å†…å®¹
          personal_profile: "ä¸ªäººæ¡£æ¡ˆ",
          avatar_nickname: "å¤´åƒå’Œæ˜µç§°",
          click_to_edit: "ç‚¹å‡»ç¼–è¾‘",
          account_info: "è´¦æˆ·ä¿¡æ¯",
          game_statistics: "æ¸¸æˆç»Ÿè®¡",
          account_balance_label: "è´¦æˆ·ä½™é¢",
          refresh_balance: "åˆ·æ–°ä½™é¢",
          logout_account: "é€€å‡ºè´¦æˆ·",

          // æ¸¸æˆè¯´æ˜è¯¦ç»†å†…å®¹
          game_history_section: "äº”å­æ£‹å†å²æ¸Šæº",
          game_rules_section: "æ¸¸æˆè§„åˆ™",
          game_rules_title: "ğŸ¯ åŸºæœ¬è§„åˆ™",
          game_rules_desc: "ä¸¤äººè½®æµåœ¨15Ã—15æ£‹ç›˜ä¸Šè½å­ï¼Œç‡å…ˆè¿æˆ5å­è€…è·èƒœ",
          game_features_title: "ğŸŒŸ æ¸¸æˆç‰¹è‰²",
          game_features_desc:
            "â€¢ æ”¯æŒäººæœºå¯¹æˆ˜ï¼ŒAIæ™ºèƒ½å¼ºå¤§\nâ€¢ å®æ—¶æ’è¡Œæ¦œç³»ç»Ÿ\nâ€¢ Piå¸å¥–åŠ±æœºåˆ¶\nâ€¢ å¤šè¯­è¨€æ”¯æŒ",
          game_controls_title: "ğŸ® æ“ä½œè¯´æ˜",
          game_controls_desc:
            "â€¢ ç‚¹å‡»æ£‹ç›˜ç©ºä½è½å­\nâ€¢ æ”¯æŒæ‚”æ£‹åŠŸèƒ½ï¼ˆéœ€æ¶ˆè´¹Piå¸ï¼‰\nâ€¢ å¯éšæ—¶é‡æ–°å¼€å§‹æ¸¸æˆ",

          // å……å€¼å’Œæ”¯ä»˜
          recharge_title: "ğŸ’° è´¦æˆ·å……å€¼",
          payment_title: "ğŸ’³ Piå¸æ”¯ä»˜",
          recharge_amount: "å……å€¼ {0} Ï€",
          order_number: "è®¢å•å·ï¼š{0}",
          quick_recharge: "å¿«é€Ÿå……å€¼",
          custom_amount: "è‡ªå®šä¹‰é‡‘é¢",
          min_amount_note: "æœ€ä½å……å€¼0.1Ï€",
          recharge_benefits: "å……å€¼åå¯äº«å—ï¼š",
          recharge_benefit_1: "â€¢ æ— é™æ¬¡æ‚”æ£‹",
          recharge_benefit_2: "â€¢ æ¸¸æˆé‡æ–°å¼€å§‹",
          recharge_benefit_3: "â€¢ ä¸“å±é“å…·è´­ä¹°",
          recharge_benefit_4: "â€¢ å‚ä¸æœˆåº¦å¥–åŠ±",

          // é”™è¯¯å’ŒçŠ¶æ€
          error_title: "é”™è¯¯",
          loading_text: "æ­£åœ¨åŠ è½½...",
          connecting_text: "æ­£åœ¨è¿æ¥...",
          balance_query: "æŸ¥è¯¢ä¸­...",
          balance_query_failed: "æŸ¥è¯¢å¤±è´¥",
          pi_login_failed: "Pi Network ç™»å½•å¤±è´¥",
          login_error: "ç™»å½•è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯",
          pi_sdk_not_loaded: "Pi Network SDKæœªåŠ è½½ï¼Œæ— æ³•ä½¿ç”¨æ”¯ä»˜åŠŸèƒ½",
          pi_sdk_not_available: "Pi Network SDKä¸å¯ç”¨",
          pi_sdk_required_message: "æ­¤æ¸¸æˆéœ€è¦Pi Networkç¯å¢ƒæ‰èƒ½æ­£å¸¸è¿è¡Œã€‚\n\nè¯·åœ¨Piæµè§ˆå™¨ä¸­æ‰“å¼€æ­¤æ¸¸æˆï¼Œæˆ–ç¡®ä¿Pi Network SDKå·²æ­£ç¡®åŠ è½½ã€‚",
          create_payment_failed: "åˆ›å»ºæ”¯ä»˜å¤±è´¥",

          // æ¸¸æˆè¯´æ˜è¯¦ç»†è§„åˆ™
          basic_rules_detail_1: "åœ¨15Ã—15çš„æ£‹ç›˜ä¸Šï¼Œç©å®¶æ‰§é»‘å­ï¼ŒAIæ‰§ç™½å­",
          basic_rules_detail_2: "åŒæ–¹è½®æµè½å­ï¼Œå…ˆè¿æˆäº”å­ä¸€çº¿è€…è·èƒœ",
          basic_rules_detail_3: "äº”å­å¯ä»¥æ˜¯æ¨ªã€ç«–ã€æ–œä»»æ„æ–¹å‘çš„è¿çº¿",
          basic_rules_detail_4: "æ£‹ç›˜å¡«æ»¡ä¸”æ— äººè·èƒœåˆ™ä¸ºå¹³å±€",

          // å›åˆæ—¶é—´è§„åˆ™
          turn_time_rules: "â±ï¸ å›åˆæ—¶é—´è§„åˆ™",
          thinking_time_rule: "æ€è€ƒæ—¶é—´ï¼šæ¯å›åˆ60ç§’æ€è€ƒæ—¶é—´",
          time_warning_rule: "æ—¶é—´æé†’ï¼šå‰©ä½™30ç§’æ—¶é»„è‰²è­¦å‘Š",
          urgent_warning_rule: "ç´§æ€¥æé†’ï¼šæœ€å10ç§’çº¢è‰²é—ªçƒ",
          timeout_rule: "è¶…æ—¶åˆ¤è´Ÿï¼šè¶…æ—¶è‡ªåŠ¨è®°å½•ä¸ºå¤±è´¥",

          // æ¸¸æˆæ“ä½œè¯¦ç»†
          game_operations: "ğŸ® æ¸¸æˆæ“ä½œ",
          place_stone: "è½å­ï¼šç‚¹å‡»ç©ºç™½æ ¼å­ä¸‹æ£‹",
          undo_move: "æ‚”æ£‹ï¼šå¯æ’¤é”€æœ€è¿‘ä¸€æ­¥ï¼ˆç©å®¶+AIå„ä¸€æ­¥ï¼‰",
          new_game_op: "æ–°æ¸¸æˆï¼šé‡æ–°å¼€å§‹ï¼Œè¿›è¡Œä¸­çš„æ¸¸æˆè®°å½•ä¸ºå¤±è´¥",
          return_op: "è¿”å›ï¼šé€€å‡ºæ¸¸æˆï¼Œè¿›è¡Œä¸­çš„æ¸¸æˆè®°å½•ä¸ºå¤±è´¥",

          // èƒœç‡æ’è¡Œç³»ç»Ÿ
          score_system: "ğŸ† èƒœç‡æ’è¡Œç³»ç»Ÿ",
          initial_score: "æ’è¡Œä¾æ®ï¼šæŒ‰èƒœç‡æ’åº",
          win_score: "è·èƒœï¼šæå‡èƒœç‡",
          draw_score: "å¹³å±€ï¼šå½±å“èƒœç‡",
          lose_score: "å¤±è´¥ï¼šé™ä½èƒœç‡",
          quit_score: "æ”¾å¼ƒ/è¶…æ—¶ï¼šè®°ä¸ºå¤±è´¥",

          // æœˆåº¦æ’åè§„åˆ™
          monthly_ranking_rules: "ğŸ¯ æœˆåº¦æ’åè§„åˆ™ï¼š",
          ranking_requirement: "â€¢ éœ€è¦è‡³å°‘1å±€å¯¹å±€æ‰èƒ½å‚ä¸æ’å",
          ranking_criteria: "â€¢ æŒ‰å‰©ä½™åˆ†æ•°é«˜ä½æ’åï¼Œåˆ†æ•°ç›¸åŒæŒ‰èƒœç‡æ’åº",
          ranking_rewards: "â€¢ æœˆåº•æ ¹æ®æ’åå‘æ”¾å¥–åŠ±",
          anti_farming: "âš ï¸ é˜²åˆ·åˆ†æœºåˆ¶ï¼šä¸å¯¹å±€æˆ–å¯¹å±€å¤ªå°‘çš„ç©å®¶ä¸å‚ä¸æ’å",

          // æœˆåº¦å¥–åŠ±è§„åˆ™
          monthly_rewards: "ğŸ† æœˆåº¦å¥–åŠ±è§„åˆ™",
          reward_pool_allocation: "ğŸ’° å¥–åŠ±æ± åˆ†é…",
          reward_settlement: "æ¯æœˆæœˆåº•æœ€åä¸€å¤©æœ€åä¸€å°æ—¶è¿›è¡Œç»“ç®—",
          reward_pool_percentage: "å¥–åŠ±æ± ä¸ºå½“æœˆå¹³å°æ€»ç›ˆåˆ©çš„ 50%",
          reward_example: "ä¾‹ï¼šæœ¬æœˆç›ˆåˆ©100Ï€ï¼Œå¥–åŠ±æ± ä¸º50Ï€",

          // å‰ä¸‰ååˆ†é…
          top_three_distribution: "ğŸ¥‡ å‰ä¸‰ååˆ†é…æ¯”ä¾‹",
          first_place: "ğŸ¥‡ ç¬¬ä¸€å",
          second_place: "ğŸ¥ˆ ç¬¬äºŒå",
          third_place: "ğŸ¥‰ ç¬¬ä¸‰å",

          // å‘æ”¾æ–¹å¼
          distribution_method: "ğŸ“‹ å‘æ”¾æ–¹å¼",
          wallet_distribution: "æŒ‰ç…§ä¸ªäººä¸­å¿ƒä¿å­˜çš„é’±åŒ…åœ°å€æ‰‹åŠ¨å‘æ”¾",
          valid_wallet_required: "è·å¥–è€…éœ€ç¡®ä¿é’±åŒ…åœ°å€æ­£ç¡®æœ‰æ•ˆ",
          next_day_distribution: "å¥–åŠ±å°†åœ¨ç»“ç®—æ¬¡æ—¥å‘æ”¾",
          invalid_wallet_rollover: "å¦‚é’±åŒ…åœ°å€æ— æ•ˆï¼Œå¥–åŠ±å°†é¡ºå»¶è‡³ä¸‹æœˆ",

          // æ’è¡Œæ¦œè§„åˆ™
          leaderboard_rules: "ğŸ“Š æ’è¡Œæ¦œè§„åˆ™",
          ranking_condition: "ä¸Šæ¦œæ¡ä»¶ï¼šå®Œæˆ1å±€æ¸¸æˆå³å¯ä¸Šæ¦œ",
          ranking_basis: "æ’åä¾æ®ï¼šæŒ‰èƒœç‡æ’åºï¼ˆèƒœç‡ç›¸åŒæ—¶æŒ‰æ€»å±€æ•°æ’åºï¼‰",
          data_statistics: "æ•°æ®ç»Ÿè®¡ï¼šæœˆåº¦æ’è¡Œæ¦œï¼Œæ¯æœˆ1æ—¥é‡ç½®",
          realtime_update: "å®æ—¶æ›´æ–°ï¼šæ¯å±€ç»“æŸåç«‹å³æ›´æ–°",

          // æ¸©é¦¨æç¤º
          warm_tips:
            "ğŸ‹ ä¼ æ‰¿åƒå¹´æ™ºæ…§ï¼Œä½“éªŒå¤å…¸æ£‹è‰ºä¹‹ç¾\nğŸ’¡ åˆç†å®‰æ’æ—¶é—´ï¼Œäº«å—æ€è€ƒä¹è¶£",

          // æ¸¸æˆç»“æœç›¸å…³
          game_result: "æ¸¸æˆç»“æœ",
          congratulations_win: "ğŸ‰ æ­å–œè·èƒœï¼",
          sorry_lose: "ğŸ˜” å¾ˆé—æ†¾å¤±è´¥äº†",
          draw_result: "ğŸ¤ å¹³å±€",
          current_score: "å½“å‰ç§¯åˆ†",
          win_rate_display: "èƒœç‡",
          total_games_display: "æ€»å¯¹å±€",
          current_rank_display: "å½“å‰æ’å",
          not_ranked: "æœªä¸Šæ¦œ",
          guest_mode: "æ¸¸å®¢æ¨¡å¼",
          guest_mode_desc: "æ‚¨å½“å‰ä»¥æ¸¸å®¢èº«ä»½æ¸¸æˆï¼Œæ¸¸æˆç»“æœä¸ä¼šè®°å½•åˆ°æ’è¡Œæ¦œä¸­ã€‚",
          login_benefits: "ç™»å½•åå¯äº«å—ï¼š",
          benefit_stats: "â€¢ ğŸ“Š æ¸¸æˆæ•°æ®ç»Ÿè®¡",
          benefit_leaderboard: "â€¢ ğŸ† å‚ä¸æ’è¡Œæ¦œç«äº‰",
          benefit_pi_service: "â€¢ ğŸ’° Piå¸å¢å€¼æœåŠ¡",
          benefit_monthly_rewards: "â€¢ ğŸ æœˆåº¦å¥–åŠ±æ´»åŠ¨",
          play_again: "å†æ¥ä¸€å±€",
          view_leaderboard: "æŸ¥çœ‹æ’è¡Œæ¦œ",
          login_now: "ç«‹å³ç™»å½•",
          monthly_games: "æœ¬æœˆå¯¹å±€",
          rank_position: "ç¬¬{0}å",

          // æ¸¸æˆç•Œé¢
          return_to_menu: "è¿”å›",
          guest_mode_short: "ğŸ® æ¸¸å®¢æ¨¡å¼",
          ai_battle_title: "ğŸ§  AIå¯¹æˆ˜",
          player_label: "ç©å®¶",
          ai_label: "AI",
          vs_label: "VS",
          undo_button: "æ‚”æ£‹",
          new_game_button: "æ–°æ¸¸æˆ",

          // æ‚”æ£‹ç›¸å…³
          undo_confirm: "æ‚”æ£‹ç¡®è®¤",
          undo_confirm_message:
            "æ‚”æ£‹éœ€è¦æ¶ˆè´¹ 0.1 Ï€\nå½“å‰ä½™é¢ï¼š{0} Ï€\n\nç¡®å®šè¦æ‚”æ£‹å—ï¼Ÿ",
          undo_success_title: "æ‚”æ£‹æˆåŠŸ",
          undo_success_detail: "å·²æ¶ˆè´¹ 0.1 Ï€ï¼Œä½™é¢ï¼š{0} Ï€",
          undo_failed_title: "æ‚”æ£‹å¤±è´¥",
          undo_failed_message: "æ‰£è´¹å¤±è´¥",
          insufficient_balance_undo:
            "æ‚”æ£‹éœ€è¦æ¶ˆè´¹ 0.1 Ï€ï¼Œå½“å‰ä½™é¢ {0} Ï€ï¼Œä½™é¢ä¸è¶³ã€‚\n\næ˜¯å¦è¦å……å€¼ï¼Ÿ",
          continue_game_tip:
            "æ‚¨å¯ä»¥ç»§ç»­å½“å‰æ¸¸æˆï¼Œä½†æ— æ³•é‡æ–°å¼€å§‹ã€‚å……å€¼åå³å¯è§£é”æ­¤åŠŸèƒ½ã€‚",

          // å……å€¼ç›¸å…³
          recharge_dialog_title: "ğŸ’° è´¦æˆ·å……å€¼",
          payment_dialog_title: "ğŸ’³ Piå¸æ”¯ä»˜",
          recharge_amount_display: "å……å€¼ {0} Ï€",
          order_id_display: "è®¢å•å·ï¼š{0}",
          custom_amount_error: "è¯·è¾“å…¥æœ‰æ•ˆçš„å……å€¼é‡‘é¢ï¼ˆæœ€ä½0.1Ï€ï¼‰",

          // ä¸ªäººä¸­å¿ƒè¯¦ç»†å†…å®¹
          monthly_reward_reminder: "ğŸ† æœˆåº¦å¥–åŠ±æé†’",
          monthly_reward_desc: "æ¯æœˆåˆ©æ¶¦çš„50%å°†åˆ†é…ç»™æ’åå‰ä¸‰çš„ç©å®¶ä½œä¸ºå¥–åŠ±",

          // æœˆåº¦é‡ç½®ç³»ç»Ÿ
          monthly_reset_system: "ğŸ“… æœˆåº¦é‡ç½®ç³»ç»Ÿ",
          monthly_reset_desc: "æ¯æœˆ1æ—¥è‡ªåŠ¨é‡ç½®æ’è¡Œæ¦œï¼Œå¼€å§‹æ–°çš„æœˆåº¦ç«èµ›",
          historical_data_preserved: "å†å²æ€»å¯¹å±€æ•°æ®æ°¸ä¹…ä¿å­˜ï¼Œä¸ä¼šæ¸…é›¶",
          monthly_ranking_only: "ä»…æœˆåº¦æ’è¡Œæ¦œæ•°æ®é‡ç½®ï¼Œä¸ªäººå†å²è®°å½•ä¿ç•™",

          // å…¨çƒæ’è¡Œæ¦œ
          global_ranking_title: "å…¨çƒæ’è¡Œ",
          ranking_subtitle: "ğŸ“Š åŸºäºæœˆåº¦èƒœç‡çš„æ’å",
          ranking_header_rank: "æ’å",
          ranking_header_nickname: "æ˜µç§°",
          ranking_header_games: "æ€»å¯¹å±€",
          ranking_header_winrate: "èƒœç‡",

          // ä¸ªäººä¸­å¿ƒè¯¦ç»†æ ‡ç­¾
          personal_profile_section: "ä¸ªäººæ¡£æ¡ˆ",
          avatar_nickname_section: "å¤´åƒå’Œæ˜µç§°",
          click_avatar_edit: "ç‚¹å‡»å¤´åƒç¼–è¾‘",
          click_nickname_edit: "ç‚¹å‡»æ˜µç§°ç¼–è¾‘",
          account_info_section: "è´¦æˆ·ä¿¡æ¯",
          game_stats_section: "æ¸¸æˆç»Ÿè®¡",
          wallet_address_label: "é’±åŒ…åœ°å€",
          account_balance_display: "è´¦æˆ·ä½™é¢",
          refresh_balance_btn: "åˆ·æ–°ä½™é¢",
          logout_btn: "é€€å‡ºè´¦æˆ·",

          // æ¸¸æˆç»Ÿè®¡æ ‡ç­¾
          total_games_label: "æ€»å¯¹å±€",
          wins_label: "èƒœåˆ©",
          win_rate_label: "èƒœç‡",
          current_score_label: "å½“å‰ç§¯åˆ†",
          current_rank_label: "å½“å‰æ’å",

          // ä½™é¢æŸ¥è¯¢çŠ¶æ€
          balance_querying: "æŸ¥è¯¢ä¸­...",
          balance_query_failed_display: "æŸ¥è¯¢å¤±è´¥",
          balance_tooltip: "æ€»å……å€¼ï¼š{0} Ï€\næ€»æ¶ˆè´¹ï¼š{1} Ï€",

          // æ”¯ä»˜æˆåŠŸä¿¡æ¯
          payment_success_title: "æ”¯ä»˜æˆåŠŸ",
          payment_success_message: "æ”¯ä»˜æˆåŠŸï¼",
          purchase_success_message: "æ‚¨å·²æˆåŠŸè´­ä¹° {0}",
          transaction_id: "äº¤æ˜“ID: {0}",

          // ä¸ªäººä¸­å¿ƒè¾“å…¥æç¤º
          enter_avatar_emoji: "è¾“å…¥emojiå¤´åƒ (å¦‚: ğŸ˜Š)",
          click_to_set_nickname: "ç‚¹å‡»è®¾ç½®æ˜µç§°",
          enter_your_nickname: "è¾“å…¥æ‚¨çš„æ˜µç§°",
          loading_text_display: "åŠ è½½ä¸­...",
          refresh_balance_text: "ğŸ”„ åˆ·æ–°ä½™é¢",
          recharge_text: "ğŸ’° å……å€¼",
          wallet_format_hint: "é’±åŒ…åœ°å€æ ¼å¼ï¼š50ä½å¤§å†™å­—æ¯å’Œæ•°å­—",
          save_wallet: "ğŸ’¾ ä¿å­˜",
          edit_wallet: "âœï¸ ç¼–è¾‘",
          logout_account_text: "â†©ï¸ é€€å‡ºè´¦æˆ·",

          // ä¸ªäººä¸­å¿ƒæç¤ºä¿¡æ¯
          enter_avatar_hint: "è¯·è¾“å…¥å¤´åƒemoji",
          single_emoji_hint: "è¯·è¾“å…¥å•ä¸ªemojiè¡¨æƒ…",
          avatar_updated: "å¤´åƒå·²æ›´æ–°ï¼",
          nickname_updated: "æ˜µç§°å·²æ›´æ–°ï¼",
          enter_wallet_hint: "è¯·è¾“å…¥é’±åŒ…åœ°å€",
          wallet_length_error:
            "âŒ è¿™ä¸æ˜¯æ ‡å‡†é’±åŒ…åœ°å€ï¼\n\nå½“å‰é•¿åº¦ï¼š{0}ä½\næ ‡å‡†é•¿åº¦ï¼š50ä½\n\nè¯·è¾“å…¥å®Œæ•´çš„50ä½é’±åŒ…åœ°å€",
          wallet_format_error:
            "âŒ é’±åŒ…åœ°å€æ ¼å¼é”™è¯¯ï¼\n\nåªèƒ½åŒ…å«å¤§å†™å­—æ¯(A-Z)å’Œæ•°å­—(0-9)\nè¯·æ£€æŸ¥è¾“å…¥å†…å®¹",
          wallet_saved_success: "âœ… é’±åŒ…åœ°å€å·²ä¿å­˜æˆåŠŸï¼",
          edit_mode_title: "ç¼–è¾‘æ¨¡å¼",
          edit_mode_message: "ğŸ’¡ ç¼–è¾‘æ¨¡å¼å·²å¯ç”¨\n\nè¯·ä¿®æ”¹é’±åŒ…åœ°å€åç‚¹å‡»ä¿å­˜",
          success_title: "æˆåŠŸ",

          // æ¸¸æˆç»“æŸç›¸å…³
          you_win: "ğŸ‰ æ­å–œæ‚¨è·èƒœï¼",
          you_lose: "ğŸ˜” AIè·èƒœï¼Œå†æ¥å†å‰ï¼",
          draw: "ğŸ¤ å¹³å±€ï¼",
          game_over: "æ¸¸æˆç»“æŸ",

          // ä¸»ç•Œé¢æŒ‰é’®
          online_match: "åœ¨çº¿åŒ¹é…",
          global_ranking: "å…¨çƒæ’è¡Œ",
          ai_battle: "AIå¯¹æˆ˜",
          personal_center: "ä¸ªäººä¸­å¿ƒ",
          game_instructions: "æ¸¸æˆè¯´æ˜",

          // åœ¨çº¿åŒ¹é…ç›¸å…³
          searching_opponent: "æ­£åœ¨å¯»æ‰¾å¯¹æ‰‹...",
          online_players: "å½“å‰åœ¨çº¿ç©å®¶",
          people_suffix: "äºº",
          match_description: "ç³»ç»Ÿå°†ä¸ºæ‚¨åŒ¹é…å®åŠ›ç›¸è¿‘çš„å¯¹æ‰‹",
          estimated_wait: "é¢„è®¡ç­‰å¾…æ—¶é—´ï¼š30-60ç§’",
          match_found: "æ‰¾åˆ°å¯¹æ‰‹ï¼",
          ai_opponent_name: "AIæ™ºèƒ½å¯¹æ‰‹",
          black_stone: "é»‘å­",
          white_stone: "ç™½å­",
          opponent_label: "å¯¹æ‰‹ï¼š",
          your_color: "æ‚¨çš„æ£‹å­",
          your_turn: "è½®åˆ°æ‚¨äº†",
          opponent_turn: "å¯¹æ‰‹å›åˆ",
          not_your_turn: "è¿˜æ²¡è½®åˆ°æ‚¨",
          game_not_ready: "æ¸¸æˆæœªå‡†å¤‡å°±ç»ª",
          waiting_for_game: "ç­‰å¾…æ¸¸æˆå¼€å§‹...",
          connection_failed: "è¿æ¥æœåŠ¡å™¨å¤±è´¥",
          please_login_first: "è¯·å…ˆç™»å½•",
          surrender: "æŠ•é™",
          surrender_confirm_title: "ç¡®è®¤æŠ•é™",
          surrender_confirm_message: "æ‚¨ç¡®å®šè¦æŠ•é™å—ï¼Ÿ",
          opponent_surrendered: "ğŸ‰ å¯¹æ‰‹æŠ•é™ï¼Œæ‚¨è·èƒœï¼",
          you_surrendered: "ğŸ˜” æ‚¨å·²æŠ•é™",
          opponent_disconnected: "å¯¹æ‰‹å·²æ–­å¼€è¿æ¥",
          cancel_match: "å–æ¶ˆåŒ¹é…",
          match_found: "âœ… æ‰¾åˆ°å¯¹æ‰‹ï¼",
          opponent_label: "å¯¹æ‰‹ï¼š",
          level_label: "ç­‰çº§ï¼šâ­â­â­",
          start_game: "å¼€å§‹æ¸¸æˆ",
          rematch: "é‡æ–°åŒ¹é…",
          cancel_match_confirm: "ç¡®å®šè¦å–æ¶ˆå½“å‰åŒ¹é…å—ï¼Ÿ",
          cancel_match_title: "å–æ¶ˆåŒ¹é…",
          cancel_match_options: "æ‚¨å¯ä»¥é€‰æ‹©ï¼š",
          rematch_option: "é‡æ–°åŒ¹é…",
          return_main_option: "è¿”å›ä¸»ç•Œé¢",
          continue_match_option: "ç»§ç»­åŒ¹é…",
          online_game_info: "åœ¨çº¿å¯¹æˆ˜éœ€è¦åç«¯æœåŠ¡å™¨æ”¯æŒï¼š\n\nâ€¢ WebSocketå®æ—¶é€šä¿¡\nâ€¢ ç©å®¶åŒ¹é…ç®—æ³•\nâ€¢ æ¸¸æˆæˆ¿é—´ç®¡ç†\nâ€¢ å®æ—¶æ£‹å±€åŒæ­¥\n\nåç«¯ä»£ç å·²å®Œæˆï¼Œæ­£åœ¨éƒ¨ç½²æœåŠ¡å™¨...\nç›®å‰å¯ä½“éªŒAIå¯¹æˆ˜æ¨¡å¼ï¼",

          // è¿æ¥é”™è¯¯
          connection_failed: "è¿æ¥å¤±è´¥",
          connection_error_detail: "æ— æ³•è¿æ¥åˆ°Pi Networkï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•",
          login_with_pi: "ä½¿ç”¨Piè´¦å·ç™»å½•",
          login_benefits_note: "ç™»å½•åå¯äº«å—å®Œæ•´æ¸¸æˆåŠŸèƒ½å’ŒPiå¸å¥–åŠ±",

          // å……å€¼å¯¹è¯æ¡†
          recharge_amount_selection: "å……å€¼é‡‘é¢é€‰æ‹©",
          custom_amount_placeholder: "è‡ªå®šä¹‰é‡‘é¢",
          custom_recharge: "è‡ªå®šä¹‰å……å€¼",
          cancel: "å–æ¶ˆ",

          // é”™è¯¯æç¤º
          please_login_first: "è¯·å…ˆç™»å½•",
          create_order_failed: "åˆ›å»ºè®¢å•å¤±è´¥",
          network_error_retry: "ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•",

          // æ”¯ä»˜å¯¹è¯æ¡†
          payment_method: "æ”¯ä»˜æ–¹å¼",
          pi_wallet_transfer: "ğŸ“± Pié’±åŒ…è½¬è´¦",
          transfer_instruction: "è¯·ä½¿ç”¨Pié’±åŒ…å‘ä»¥ä¸‹åœ°å€è½¬è´¦ï¼š",
          transfer_amount_warning: "âš ï¸ è¯·ç¡®ä¿è½¬è´¦é‡‘é¢ä¸º <strong>{0} Ï€</strong>",
          transfer_memo: "è½¬è´¦å¤‡æ³¨ï¼š{0}",
          transaction_hash_placeholder: "è¯·è¾“å…¥è½¬è´¦äº¤æ˜“å“ˆå¸Œ",
          transaction_hash_instruction:
            "è½¬è´¦å®Œæˆåï¼Œè¯·åœ¨Pié’±åŒ…ä¸­å¤åˆ¶äº¤æ˜“å“ˆå¸Œå¹¶ç²˜è´´åˆ°ä¸Šæ–¹è¾“å…¥æ¡†",
          verify_payment: "éªŒè¯æ”¯ä»˜",
          order_validity: "è®¢å•æœ‰æ•ˆæœŸï¼š30åˆ†é’Ÿ",

          // æ”¯ä»˜éªŒè¯
          please_enter_transaction_hash: "è¯·è¾“å…¥äº¤æ˜“å“ˆå¸Œ",
          recharge_success: "å……å€¼æˆåŠŸ",
          recharge_success_message: "æ­å–œï¼å……å€¼ {0} Ï€ æˆåŠŸï¼\nå½“å‰ä½™é¢ï¼š{1} Ï€",
          verification_failed: "éªŒè¯å¤±è´¥",

          // æ¸¸æˆæµç¨‹ç¡®è®¤
          timeout_game_over: "â° æ€è€ƒè¶…æ—¶ï¼Œæ¸¸æˆå¤±è´¥ï¼",
          login_success: "ç™»å½•æˆåŠŸ",
          welcome_user: "æ¬¢è¿ï¼Œ{0}",
          abandon_current_game: "æ”¾å¼ƒå½“å‰æ¸¸æˆ",
          abandon_game_warning:
            "å½“å‰æ¸¸æˆæ­£åœ¨è¿›è¡Œä¸­ï¼Œé‡æ–°å¼€å§‹å°†è®°å½•ä¸ºå¤±è´¥ã€‚\n\nç¡®å®šè¦æ”¾å¼ƒå½“å‰æ¸¸æˆå—ï¼Ÿ",
          restart_game: "é‡æ–°å¼€å§‹æ¸¸æˆ",
          restart_game_confirm: "ç¡®å®šè¦é‡æ–°å¼€å§‹å—ï¼Ÿ",
          abandon_game_return_warning:
            "å½“å‰æ¸¸æˆæ­£åœ¨è¿›è¡Œä¸­ï¼Œè¿”å›ä¸»ç•Œé¢å°†è®°å½•ä¸ºå¤±è´¥ã€‚\n\nç¡®å®šè¦æ”¾å¼ƒå½“å‰æ¸¸æˆå—ï¼Ÿ",

          // èƒœè´Ÿæ˜¾ç¤ºæ ¼å¼
          wins_losses_format: "({0}èƒœ{1}è´Ÿ)",

          // æœˆåº¦å¥–åŠ±è¯¦ç»†è¯´æ˜
          reward_settlement_detail: "æ¯æœˆæœˆåº•æœ€åä¸€å¤©æœ€åä¸€å°æ—¶è¿›è¡Œç»“ç®—",
          reward_pool_50_percent: "å¥–åŠ±æ± ä¸ºå½“æœˆå¹³å°æ€»ç›ˆåˆ©çš„ 50%",
          reward_example_detail: "ä¾‹ï¼šæœ¬æœˆç›ˆåˆ©100Ï€ï¼Œå¥–åŠ±æ± ä¸º50Ï€",
          reward_distribution_manual: "æŒ‰ç…§ä¸ªäººä¸­å¿ƒä¿å­˜çš„é’±åŒ…åœ°å€æ‰‹åŠ¨å‘æ”¾",
          reward_wallet_valid: "è·å¥–è€…éœ€ç¡®ä¿é’±åŒ…åœ°å€æ­£ç¡®æœ‰æ•ˆ",
          reward_next_day: "å¥–åŠ±å°†åœ¨ç»“ç®—æ¬¡æ—¥å‘æ”¾",
          reward_invalid_rollover: "å¦‚é’±åŒ…åœ°å€æ— æ•ˆï¼Œå¥–åŠ±å°†é¡ºå»¶è‡³ä¸‹æœˆ",
          reward_example_calculation: "ğŸ’¡ ç¤ºä¾‹ï¼šæœ¬æœˆç›ˆåˆ©100Ï€ï¼Œå¥–åŠ±æ± 50Ï€",
          first_place_reward: "ğŸ¥‡ç¬¬ä¸€åï¼š25Ï€",
          second_place_reward: "ğŸ¥ˆç¬¬äºŒåï¼š15Ï€",
          third_place_reward: "ğŸ¥‰ç¬¬ä¸‰åï¼š10Ï€",
        },

        en: {
          // åŸºç¡€ç•Œé¢
          noscript: "You need to enable JavaScript to run this application.",
          game_title: "Gomoku",
          game_subtitle: "Gomoku game running on pinetwork blockchain",
          online_match: "Online Match",
          global_ranking: "Global Ranking",
          ai_battle: "AI Battle",
          personal_center: "Personal Center",
          game_instructions: "Game Instructions",

          // Online match related
          searching_opponent: "Searching for opponent...",
          online_players: "Online players",
          people_suffix: "people",
          match_description: "System will match you with players of similar skill",
          estimated_wait: "Estimated wait time: 30-60 seconds",
          match_found: "Match found!",
          ai_opponent_name: "AI Smart Opponent",
          black_stone: "Black",
          white_stone: "White",
          opponent_label: "Opponent: ",
          your_color: "Your pieces",
          your_turn: "Your turn",
          opponent_turn: "Opponent's turn",
          not_your_turn: "Not your turn",
          game_not_ready: "Game not ready",
          waiting_for_game: "Waiting for game to start...",
          connection_failed: "Failed to connect to server",
          please_login_first: "Please login first",
          surrender: "Surrender",
          surrender_confirm_title: "Confirm Surrender",
          surrender_confirm_message: "Are you sure you want to surrender?",
          opponent_surrendered: "ğŸ‰ Opponent surrendered, you win!",
          you_surrendered: "ğŸ˜” You surrendered",
          opponent_disconnected: "Opponent disconnected",
          cancel_match_confirm: "Are you sure you want to cancel current matching?",
          cancel_match_title: "Cancel Match",
          cancel_match_options: "You can choose:",
          rematch_option: "Rematch",
          return_main_option: "Return to Main",
          continue_match_option: "Continue Matching",
          online_game_info: "Online battle requires backend server support:\n\nâ€¢ WebSocket real-time communication\nâ€¢ Player matching algorithm\nâ€¢ Game room management\nâ€¢ Real-time game synchronization\n\nBackend code is ready, deploying server...\nCurrently you can experience AI battle mode!",
          error_message: "âŒ Error Message",
          login_with_pi: "Login with Pi Network",
          login_note:
            "By clicking login, you agree to use Pi Network account for authentication",
          privacy_policy: "Privacy Policy",
          terms_of_service: "Terms of Service",

          // è¯­è¨€é€‰é¡¹
          lang_zh: "ä¸­æ–‡",
          lang_en: "English",
          lang_ko: "í•œêµ­ì–´",
          lang_ja: "æ—¥æœ¬èª",
          lang_vi: "Tiáº¿ng Viá»‡t",

          // æ¸¸æˆç›¸å…³
          current_player: "Current Player",
          your_turn: "Your Turn",
          opponent_turn: "Opponent's Turn",
          ai_thinking: "ğŸ¤– AI is thinking...",
          thinking_time: "â±ï¸ Thinking time: {0}s",
          remaining_time: "âš ï¸ Time remaining: {0}s",
          timeout_warning: "ğŸš¨ Timeout warning: {0}s",
          timeout: "â° Timeout",

          // æ¸¸æˆç»“æœ
          you_win: "ğŸ‰ Congratulations! You Win!",
          you_lose: "ğŸ˜” Sorry, You Lose",
          draw: "ğŸ¤ Draw",
          game_over: "Game Over",

          // æŒ‰é’®å’Œæ“ä½œ
          new_game: "New Game",
          undo: "Undo",
          restart: "Restart",
          back_to_menu: "Back to Menu",
          confirm: "Confirm",
          cancel: "Cancel",
          close: "Close",
          save: "Save",
          update: "Update",
          enter_game: "Enter Game",

          // ä¸ªäººä¸­å¿ƒ
          personal_info: "Personal Info",
          game_stats: "Game Statistics",
          total_games: "Total Games",
          wins: "Wins",
          losses: "Losses",
          win_rate: "Win Rate",
          current_rank: "Current Rank",
          wallet_address: "Wallet Address",
          balance: "Balance",
          nickname: "Nickname",
          avatar: "Avatar",

          // é”™è¯¯å’Œæç¤º
          connection_failed: "Connection Failed",
          network_error:
            "Network error, please check your connection and try again",
          login_failed: "Login Failed",
          insufficient_balance: "Insufficient Balance",
          invalid_move: "Invalid Move",
          game_not_started: "Game Not Started",

          // æ”¯ä»˜ç›¸å…³
          payment_confirm: "Confirm Payment",
          payment_success: "Payment Successful",
          payment_failed: "Payment Failed",
          payment_cancelled: "Payment Cancelled",
          recharge: "Recharge",

          // æ’è¡Œæ¦œ
          leaderboard: "Leaderboard",
          rank: "Rank",
          player: "Player",
          score: "Score",
          games_played: "Games Played",

          // å…¶ä»–
          loading: "Loading...",
          connecting: "Connecting...",
          please_wait: "Please wait...",
          success: "Success",
          failed: "Failed",
          connecting_pi_network: "Connecting to Pi Network...",
          entering_game: "Entering game...",

          // å¼¹çª—å’Œæç¤º
          hint: "Hint",
          confirm_purchase: "Confirm Purchase",
          confirm_payment: "Confirm Payment",
          payment_amount: "{0} Ï€",
          enter_nickname: "Please enter nickname",
          nickname_too_long: "Nickname cannot exceed 20 characters",
          nickname_forbidden:
            "Nickname contains forbidden words, please re-enter",
          logout_confirm: "Logout Confirmation",
          logout_message:
            "Are you sure you want to logout? This will clear all locally saved data.",
          logout_success: "Logout Successful",
          logout_success_message: "Successfully logged out!",
          please_login_first: "Please login first",

          // æ¸¸æˆè¯´æ˜
          game_instructions_title: "Game Instructions",
          game_history_title: "Gomoku History",
          game_history_desc:
            'Legend says Gomoku was born over 4000 years ago during Emperor Yao\'s era. Yao invented stone chess to educate his son Danzhu, later improved by Shun into the "Five Stars in a Row" gameplay, gradually forming the prototype of modern Gomoku.\nFrom folk games in the Yao-Shun era, to spreading to East Asia during the Northern and Southern Dynasties, then refined by Japan into competitive sports, finally becoming a global chess project.',

          // ä¸ªäººä¸­å¿ƒ
          personal_center_title: "Personal Center",
          wallet_address_placeholder:
            "Enter 50-character wallet address (uppercase letters and numbers)",
          wallet_address_format:
            "Wallet address format: 50 uppercase letters and numbers",

          // æ”¯ä»˜ç›¸å…³
          insufficient_balance_title: "Insufficient Balance",
          insufficient_balance_message:
            "Undo requires 0.1 Ï€, current balance {0} Ï€, insufficient balance.\n\nWould you like to recharge?",
          recharge_prompt:
            "Recharge Pi coins for your gaming account and enjoy more game features!",
          continue_without_recharge:
            "You can continue the current game, but cannot restart. Unlock this feature after recharging.",
          undo_success: "Undo Successful",
          undo_success_message: "Consumed 0.1 Ï€, balance: {0} Ï€",
          undo_failed: "Undo Failed",
          network_error_retry: "Network error, please try again later",
          invalid_amount: "Please enter a valid recharge amount (minimum 0.1Ï€)",

          // é“å…·åç§°
          item_hint: "Hint Item",
          item_undo: "Undo Ticket",
          item_theme: "Theme Pack",
          item_vip: "VIP Membership",
          item_unknown: "Unknown Item",

          // æ’è¡Œæ¦œå’Œç»Ÿè®¡
          current_ranking:
            "ğŸ¯ Current Rank: #{0} | ({1}W {2}L) | Win Rate: {3}%",
          leaderboard_update_tip:
            "Leaderboard updates in real-time, keep playing to improve your ranking!",
          ranking_header_rank: "Rank",
          ranking_header_nickname: "Nickname",
          ranking_header_games: "Total Games",
          ranking_header_winrate: "Win Rate",
          current_rank_not_listed: "Current Rank: Not Listed",
          current_rank_label: "Current Rank",
          not_listed: "Not Listed",
          play_one_game_to_rank:
            "ğŸ® Complete 1 game to get on the leaderboard! Start your Gomoku journey!",

          // ä¸ªäººä¸­å¿ƒè¯¦ç»†å†…å®¹
          personal_profile: "Personal Profile",
          avatar_nickname: "Avatar & Nickname",
          click_to_edit: "Click to Edit",
          account_info: "Account Information",
          game_statistics: "Game Statistics",
          account_balance_label: "Account Balance",
          refresh_balance: "Refresh Balance",
          logout_account: "Logout Account",

          // æ¸¸æˆè¯´æ˜è¯¦ç»†å†…å®¹
          game_history_section: "Gomoku History",
          game_rules_section: "Game Rules",
          game_rules_title: "ğŸ¯ Basic Rules",
          game_rules_desc:
            "Two players take turns placing stones on a 15Ã—15 board, first to connect 5 wins",
          game_features_title: "ğŸŒŸ Game Features",
          game_features_desc:
            "â€¢ AI battle with intelligent opponent\nâ€¢ Real-time leaderboard system\nâ€¢ Pi coin reward mechanism\nâ€¢ Multi-language support",
          game_controls_title: "ğŸ® Controls",
          game_controls_desc:
            "â€¢ Click empty board position to place stone\nâ€¢ Undo function available (costs Pi coins)\nâ€¢ Restart game anytime",

          // å……å€¼å’Œæ”¯ä»˜
          recharge_title: "ğŸ’° Account Recharge",
          payment_title: "ğŸ’³ Pi Coin Payment",
          recharge_amount: "Recharge {0} Ï€",
          order_number: "Order Number: {0}",
          quick_recharge: "Quick Recharge",
          custom_amount: "Custom Amount",
          min_amount_note: "Minimum recharge 0.1Ï€",
          recharge_benefits: "After recharge, enjoy:",
          recharge_benefit_1: "â€¢ Unlimited undo moves",
          recharge_benefit_2: "â€¢ Game restart function",
          recharge_benefit_3: "â€¢ Exclusive item purchases",
          recharge_benefit_4: "â€¢ Monthly reward participation",

          // é”™è¯¯å’ŒçŠ¶æ€
          error_title: "Error",
          loading_text: "Loading...",
          connecting_text: "Connecting...",
          balance_query: "Querying...",
          balance_query_failed: "Query Failed",
          pi_login_failed: "Pi Network login failed",
          login_error: "Error occurred during login",
          pi_sdk_not_loaded:
            "Pi Network SDK not loaded, payment features unavailable",
          pi_sdk_not_available: "Pi Network SDK not available",
          pi_sdk_required_message: "This game requires Pi Network environment to run properly.\n\nPlease open this game in Pi Browser, or ensure Pi Network SDK is properly loaded.",
          create_payment_failed: "Failed to create payment",

          // æ¸¸æˆè¯´æ˜è¯¦ç»†è§„åˆ™
          basic_rules_detail_1:
            "On a 15Ã—15 board, player uses black stones, AI uses white stones",
          basic_rules_detail_2:
            "Players take turns placing stones, first to connect five wins",
          basic_rules_detail_3:
            "Five stones can be connected horizontally, vertically, or diagonally",
          basic_rules_detail_4:
            "If the board is full with no winner, it's a draw",

          // å›åˆæ—¶é—´è§„åˆ™
          turn_time_rules: "â±ï¸ Turn Time Rules",
          thinking_time_rule: "Thinking time: 60 seconds per turn",
          time_warning_rule:
            "Time warning: Yellow warning at 30 seconds remaining",
          urgent_warning_rule:
            "Urgent warning: Red flashing in last 10 seconds",
          timeout_rule:
            "Timeout penalty: Timeout automatically recorded as loss",

          // æ¸¸æˆæ“ä½œè¯¦ç»†
          game_operations: "ğŸ® Game Operations",
          place_stone: "Place stone: Click empty grid to play",
          undo_move: "Undo: Can retract last move (player + AI each one step)",
          new_game_op: "New game: Restart, ongoing game recorded as loss",
          return_op: "Return: Exit game, ongoing game recorded as loss",

          // èƒœç‡æ’è¡Œç³»ç»Ÿ
          score_system: "ğŸ† Win Rate Ranking System",
          initial_score: "Ranking basis: Sorted by win rate",
          win_score: "Win: Improves win rate",
          draw_score: "Draw: Affects win rate",
          lose_score: "Loss: Reduces win rate",
          quit_score: "Quit/Timeout: Counts as loss",

          // æœˆåº¦æ’åè§„åˆ™
          monthly_ranking_rules: "ğŸ¯ Monthly Ranking Rules:",
          ranking_requirement:
            "â€¢ At least 1 game required to participate in ranking",
          ranking_criteria:
            "â€¢ Ranked by remaining points, same points sorted by win rate",
          ranking_rewards:
            "â€¢ Rewards distributed at month end based on ranking",
          anti_farming:
            "âš ï¸ Anti-farming mechanism: Players with no games or too few games don't participate in ranking",

          // æœˆåº¦å¥–åŠ±è§„åˆ™
          monthly_rewards: "ğŸ† Monthly Reward Rules",
          reward_pool_allocation: "ğŸ’° Reward Pool Allocation",
          reward_settlement:
            "Settlement on the last hour of the last day of each month",
          reward_pool_percentage:
            "Reward pool is 50% of platform's monthly profit",
          reward_example: "Example: Monthly profit 100Ï€, reward pool 50Ï€",

          // å‰ä¸‰ååˆ†é…
          top_three_distribution: "ğŸ¥‡ Top Three Distribution",
          first_place: "ğŸ¥‡ First Place",
          second_place: "ğŸ¥ˆ Second Place",
          third_place: "ğŸ¥‰ Third Place",

          // å‘æ”¾æ–¹å¼
          distribution_method: "ğŸ“‹ Distribution Method",
          wallet_distribution:
            "Distributed manually according to wallet address saved in personal center",
          valid_wallet_required:
            "Winners must ensure wallet address is correct and valid",
          next_day_distribution:
            "Rewards will be distributed the day after settlement",
          invalid_wallet_rollover:
            "If wallet address is invalid, rewards will be rolled over to next month",

          // æ’è¡Œæ¦œè§„åˆ™
          leaderboard_rules: "ğŸ“Š Leaderboard Rules",
          ranking_condition:
            "Ranking condition: Complete 60 games to be listed",
          ranking_basis: "Ranking basis: Sorted by cumulative points",
          data_statistics:
            "Data statistics: Based on historical cumulative data",
          realtime_update:
            "Real-time update: Updated immediately after each game",

          // æ¸©é¦¨æç¤º
          warm_tips:
            "ğŸ‹ Inherit thousand-year wisdom, experience classical chess beauty\nğŸ’¡ Manage time wisely, enjoy thinking pleasure",

          // æ¸¸æˆç»“æœç›¸å…³
          game_result: "Game Result",
          congratulations_win: "ğŸ‰ Congratulations! You Win!",
          sorry_lose: "ğŸ˜” Sorry, You Lost",
          draw_result: "ğŸ¤ Draw",
          current_score: "Current Score",
          win_rate_display: "Win Rate",
          total_games_display: "Total Games",
          current_rank_display: "Current Rank",
          not_ranked: "Not Ranked",
          guest_mode: "Guest Mode",
          guest_mode_desc:
            "You are currently playing as a guest, game results will not be recorded in leaderboard.",
          login_benefits: "After login, enjoy:",
          benefit_stats: "â€¢ ğŸ“Š Game data statistics",
          benefit_leaderboard: "â€¢ ğŸ† Participate in leaderboard competition",
          benefit_pi_service: "â€¢ ğŸ’° Pi coin value-added services",
          benefit_monthly_rewards: "â€¢ ğŸ Monthly reward activities",
          play_again: "Play Again",
          view_leaderboard: "View Leaderboard",
          login_now: "Login Now",

          // æ¸¸æˆç•Œé¢
          return_to_menu: "Return",
          guest_mode_short: "ğŸ® Guest Mode",
          ai_battle_title: "ğŸ§  AI Battle",
          player_label: "Player",
          ai_label: "AI",
          vs_label: "VS",
          undo_button: "Undo",
          new_game_button: "New Game",

          // æ‚”æ£‹ç›¸å…³
          undo_confirm: "Undo Confirmation",
          undo_confirm_message:
            "Undo requires 0.1 Ï€\nCurrent balance: {0} Ï€\n\nConfirm undo?",
          undo_success_title: "Undo Successful",
          undo_success_detail: "Consumed 0.1 Ï€, balance: {0} Ï€",
          undo_failed_title: "Undo Failed",
          undo_failed_message: "Payment failed",
          insufficient_balance_undo:
            "Undo requires 0.1 Ï€, current balance {0} Ï€, insufficient balance.\n\nWould you like to recharge?",
          continue_game_tip:
            "You can continue the current game, but cannot restart. Unlock this feature after recharging.",

          // å……å€¼ç›¸å…³
          recharge_dialog_title: "ğŸ’° Account Recharge",
          payment_dialog_title: "ğŸ’³ Pi Coin Payment",
          recharge_amount_display: "Recharge {0} Ï€",
          order_id_display: "Order ID: {0}",
          custom_amount_error:
            "Please enter a valid recharge amount (minimum 0.1Ï€)",

          // ä¸ªäººä¸­å¿ƒè¯¦ç»†å†…å®¹
          monthly_reward_reminder: "ğŸ† Monthly Reward Reminder",
          monthly_reward_desc:
            "50% of monthly profits will be distributed to the top three players as rewards",

          // æœˆåº¦å¥–åŠ±è¯¦ç»†è¯´æ˜
          reward_settlement_detail:
            "Settlement on the last hour of the last day of each month",
          reward_pool_50_percent:
            "Reward pool is 50% of platform's monthly profit",
          reward_example_detail:
            "Example: Monthly profit 100Ï€, reward pool 50Ï€",
          reward_distribution_manual:
            "Distributed manually according to wallet address saved in personal center",
          reward_wallet_valid:
            "Winners must ensure wallet address is correct and valid",
          reward_next_day:
            "Rewards will be distributed the day after settlement",
          reward_invalid_rollover:
            "If wallet address is invalid, rewards will be rolled over to next month",
          reward_example_calculation:
            "ğŸ’¡ Example: Monthly profit 100Ï€, reward pool 50Ï€",
          first_place_reward: "ğŸ¥‡First place: 25Ï€",
          second_place_reward: "ğŸ¥ˆSecond place: 15Ï€",
          third_place_reward: "ğŸ¥‰Third place: 10Ï€",

          // å…¨çƒæ’è¡Œæ¦œ
          global_ranking_title: "Global Ranking",
          ranking_subtitle: "ğŸ“Š Ranking based on monthly win rate",
          ranking_header_rank: "Rank",
          ranking_header_nickname: "Nickname",
          ranking_header_games: "Total Games",
          ranking_header_winrate: "Win Rate",

          // ä¸ªäººä¸­å¿ƒè¯¦ç»†æ ‡ç­¾
          personal_profile_section: "Personal Profile",
          avatar_nickname_section: "Avatar and Nickname",
          click_avatar_edit: "Click avatar to edit",
          click_nickname_edit: "Click nickname to edit",
          account_info_section: "Account Information",
          game_stats_section: "Game Statistics",
          wallet_address_label: "Wallet Address",
          account_balance_display: "Account Balance",
          refresh_balance_btn: "Refresh Balance",
          logout_btn: "Logout",

          // æ¸¸æˆç»Ÿè®¡æ ‡ç­¾
          total_games_label: "Total Games",
          wins_label: "Wins",
          win_rate_label: "Win Rate",
          current_score_label: "Current Score",
          current_rank_label: "Current Rank",

          // ä½™é¢æŸ¥è¯¢çŠ¶æ€
          balance_querying: "Querying...",
          balance_query_failed_display: "Query Failed",
          balance_tooltip: "Total Recharged: {0} Ï€\nTotal Spent: {1} Ï€",

          // æ”¯ä»˜æˆåŠŸä¿¡æ¯
          payment_success_title: "Payment Successful",
          payment_success_message: "Payment Successful!",
          purchase_success_message: "You have successfully purchased {0}",
          transaction_id: "Transaction ID: {0}",

          // ä¸ªäººä¸­å¿ƒè¾“å…¥æç¤º
          enter_avatar_emoji: "Enter emoji avatar (e.g.: ğŸ˜Š)",
          click_to_set_nickname: "Click to set nickname",
          enter_your_nickname: "Enter your nickname",
          loading_text_display: "Loading...",
          refresh_balance_text: "ğŸ”„ Refresh Balance",
          recharge_text: "ğŸ’° Recharge",
          wallet_format_hint:
            "Wallet address format: 50 uppercase letters and numbers",
          save_wallet: "ğŸ’¾ Save",
          edit_wallet: "âœï¸ Edit",
          logout_account_text: "â†©ï¸ Logout",

          // ä¸ªäººä¸­å¿ƒæç¤ºä¿¡æ¯
          enter_avatar_hint: "Please enter avatar emoji",
          single_emoji_hint: "Please enter a single emoji",
          avatar_updated: "Avatar updated!",
          nickname_updated: "Nickname updated!",
          enter_wallet_hint: "Please enter wallet address",
          wallet_length_error:
            "âŒ This is not a standard wallet address!\n\nCurrent length: {0} characters\nStandard length: 50 characters\n\nPlease enter a complete 50-character wallet address",
          wallet_format_error:
            "âŒ Wallet address format error!\n\nOnly uppercase letters (A-Z) and numbers (0-9) are allowed\nPlease check your input",
          wallet_saved_success: "âœ… Wallet address saved successfully!",
          edit_mode_title: "Edit Mode",
          edit_mode_message:
            "ğŸ’¡ Edit mode enabled\n\nPlease modify the wallet address and click save",
          success_title: "Success",
          error_title: "Error",

          // æ¸¸æˆç»“æŸç›¸å…³
          you_win: "ğŸ‰ Congratulations! You win!",
          you_lose: "ğŸ˜” AI wins, keep trying!",
          draw: "ğŸ¤ Draw!",
          game_over: "Game Over",

          // ä¸»ç•Œé¢æŒ‰é’®
          global_ranking: "Global Ranking",
          ai_battle: "AI Battle",
          personal_center: "Personal Center",
          game_instructions: "Game Instructions",

          // è¿æ¥é”™è¯¯
          connection_failed: "Connection Failed",
          connection_error_detail:
            "Unable to connect to Pi Network, please check your network connection and try again",
          login_with_pi: "Login with Pi Account",
          login_benefits_note:
            "Login to enjoy full game features and Pi coin rewards",

          // å……å€¼å¯¹è¯æ¡†
          recharge_amount_selection: "Recharge Amount Selection",
          custom_amount_placeholder: "Custom Amount",
          custom_recharge: "Custom Recharge",
          cancel: "Cancel",

          // é”™è¯¯æç¤º
          please_login_first: "Please login first",
          create_order_failed: "Failed to create order",
          network_error_retry: "Network error, please try again later",

          // æ”¯ä»˜å¯¹è¯æ¡†
          payment_method: "Payment Method",
          pi_wallet_transfer: "ğŸ“± Pi Wallet Transfer",
          transfer_instruction:
            "Please use Pi wallet to transfer to the following address:",
          transfer_amount_warning:
            "âš ï¸ Please ensure the transfer amount is <strong>{0} Ï€</strong>",
          transfer_memo: "Transfer memo: {0}",
          transaction_hash_placeholder: "Please enter transaction hash",
          transaction_hash_instruction:
            "After transfer completion, please copy the transaction hash from Pi wallet and paste it in the input box above",
          verify_payment: "Verify Payment",
          order_validity: "Order validity: 30 minutes",

          // æ”¯ä»˜éªŒè¯
          please_enter_transaction_hash: "Please enter transaction hash",
          recharge_success: "Recharge Successful",
          recharge_success_message:
            "Congratulations! Recharge {0} Ï€ successful!\nCurrent balance: {1} Ï€",
          verification_failed: "Verification Failed",

          // æ¸¸æˆæµç¨‹ç¡®è®¤
          timeout_game_over: "â° Thinking timeout, game failed!",
          login_success: "Login Successful",
          welcome_user: "Welcome, {0}",
          abandon_current_game: "Abandon Current Game",
          abandon_game_warning:
            "Current game is in progress, restarting will be recorded as a loss.\n\nAre you sure you want to abandon the current game?",
          restart_game: "Restart Game",
          restart_game_confirm: "Are you sure you want to restart?",
          abandon_game_return_warning:
            "Current game is in progress, returning to main menu will be recorded as a loss.\n\nAre you sure you want to abandon the current game?",

          // èƒœè´Ÿæ˜¾ç¤ºæ ¼å¼
          wins_losses_format: "({0}W {1}L)",
          monthly_games: "Monthly Games",
          play_again: "Play Again",
          view_leaderboard: "View Leaderboard",
          login_now: "Login Now",
          guest_mode: "Guest Mode",
          guest_mode_desc:
            "You are currently playing as a guest, game results will not be recorded on the leaderboard.",
          login_benefits: "Benefits after login:",
          benefit_stats: "â€¢ ğŸ“Š Game statistics",
          benefit_leaderboard: "â€¢ ğŸ† Participate in leaderboard competition",
          benefit_pi_service: "â€¢ ğŸ’° Pi coin value-added services",
          benefit_monthly_rewards: "â€¢ ğŸ Monthly reward activities",
          rank_position: "#{0}",
        },

        ko: {
          // ê¸°ë³¸ ì¸í„°í˜ì´ìŠ¤
          noscript:
            "ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë ¤ë©´ JavaScriptë¥¼ í™œì„±í™”í•´ì•¼ í•©ë‹ˆë‹¤.",
          game_title: "ì˜¤ëª©",
          game_subtitle: "pinetwork ë¸”ë¡ì²´ì¸ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì˜¤ëª© ê²Œì„",
          online_match: "ì˜¨ë¼ì¸ ë§¤ì¹­",
          global_ranking: "ê¸€ë¡œë²Œ ìˆœìœ„",
          ai_battle: "AI ëŒ€ì „",
          personal_center: "ê°œì¸ ì„¼í„°",
          game_instructions: "ê²Œì„ ì„¤ëª…",
          error_message: "âŒ ì˜¤ë¥˜ ë©”ì‹œì§€",
          login_with_pi: "Pi Networkë¡œ ë¡œê·¸ì¸",
          login_note:
            "ë¡œê·¸ì¸ì„ í´ë¦­í•˜ë©´ Pi Network ê³„ì •ì„ ì‚¬ìš©í•œ ì¸ì¦ì— ë™ì˜í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤",

          // ì–¸ì–´ ì˜µì…˜
          lang_zh: "ä¸­æ–‡",
          lang_en: "English",
          lang_ko: "í•œêµ­ì–´",
          lang_ja: "æ—¥æœ¬èª",
          lang_vi: "Tiáº¿ng Viá»‡t",

          // ê²Œì„ ê´€ë ¨
          current_player: "í˜„ì¬ í”Œë ˆì´ì–´",
          your_turn: "ë‹¹ì‹ ì˜ ì°¨ë¡€",
          opponent_turn: "ìƒëŒ€ë°©ì˜ ì°¨ë¡€",
          ai_thinking: "ğŸ¤– AIê°€ ìƒê° ì¤‘...",
          thinking_time: "â±ï¸ ìƒê° ì‹œê°„: {0}ì´ˆ",
          remaining_time: "âš ï¸ ë‚¨ì€ ì‹œê°„: {0}ì´ˆ",
          timeout_warning: "ğŸš¨ ì‹œê°„ ì´ˆê³¼ ê²½ê³ : {0}ì´ˆ",
          timeout: "â° ì‹œê°„ ì´ˆê³¼",

          // ê²Œì„ ê²°ê³¼
          you_win: "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ìŠ¹ë¦¬!",
          you_lose: "ğŸ˜” ì£„ì†¡í•©ë‹ˆë‹¤, íŒ¨ë°°",
          draw: "ğŸ¤ ë¬´ìŠ¹ë¶€",
          game_over: "ê²Œì„ ì¢…ë£Œ",

          // ë²„íŠ¼ ë° ì‘ì—…
          new_game: "ìƒˆ ê²Œì„",
          undo: "ë¬´ë¥´ê¸°",
          restart: "ë‹¤ì‹œ ì‹œì‘",
          back_to_menu: "ë©”ë‰´ë¡œ ëŒì•„ê°€ê¸°",
          confirm: "í™•ì¸",
          cancel: "ì·¨ì†Œ",
          close: "ë‹«ê¸°",
          save: "ì €ì¥",
          update: "ì—…ë°ì´íŠ¸",
          enter_game: "ê²Œì„ ì‹œì‘",

          // ê°œì¸ ì„¼í„°
          personal_info: "ê°œì¸ ì •ë³´",
          game_stats: "ê²Œì„ í†µê³„",
          total_games: "ì´ ê²Œì„ ìˆ˜",
          wins: "ìŠ¹ë¦¬",
          losses: "íŒ¨ë°°",
          win_rate: "ìŠ¹ë¥ ",
          current_rank: "í˜„ì¬ ìˆœìœ„",
          wallet_address: "ì§€ê°‘ ì£¼ì†Œ",
          balance: "ì”ì•¡",
          nickname: "ë‹‰ë„¤ì„",
          avatar: "ì•„ë°”íƒ€",

          // ì˜¤ë¥˜ ë° ì•Œë¦¼
          connection_failed: "ì—°ê²° ì‹¤íŒ¨",
          network_error: "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜, ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”",
          login_failed: "ë¡œê·¸ì¸ ì‹¤íŒ¨",
          insufficient_balance: "ì”ì•¡ ë¶€ì¡±",
          invalid_move: "ìœ íš¨í•˜ì§€ ì•Šì€ ìˆ˜",
          game_not_started: "ê²Œì„ì´ ì‹œì‘ë˜ì§€ ì•ŠìŒ",

          // ê²°ì œ ê´€ë ¨
          payment_confirm: "ê²°ì œ í™•ì¸",
          payment_success: "ê²°ì œ ì„±ê³µ",
          payment_failed: "ê²°ì œ ì‹¤íŒ¨",
          payment_cancelled: "ê²°ì œ ì·¨ì†Œë¨",
          recharge: "ì¶©ì „",

          // ìˆœìœ„í‘œ
          leaderboard: "ìˆœìœ„í‘œ",
          rank: "ìˆœìœ„",
          player: "í”Œë ˆì´ì–´",
          score: "ì ìˆ˜",
          games_played: "í”Œë ˆì´í•œ ê²Œì„",

          // ê¸°íƒ€
          loading: "ë¡œë”© ì¤‘...",
          connecting: "ì—°ê²° ì¤‘...",
          please_wait: "ì ì‹œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”...",
          success: "ì„±ê³µ",
          failed: "ì‹¤íŒ¨",
          connecting_pi_network: "Pi Network ì—°ê²° ì¤‘...",
          entering_game: "ê²Œì„ ì§„ì… ì¤‘...",

          // íŒì—… ë° ì•Œë¦¼
          hint: "íŒíŠ¸",
          confirm_purchase: "êµ¬ë§¤ í™•ì¸",
          confirm_payment: "ê²°ì œ í™•ì¸",
          payment_amount: "{0} Ï€",
          enter_nickname: "ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”",
          nickname_too_long: "ë‹‰ë„¤ì„ì€ 20ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
          nickname_forbidden:
            "ë‹‰ë„¤ì„ì— ê¸ˆì§€ëœ ë‹¨ì–´ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”",
          logout_confirm: "ë¡œê·¸ì•„ì›ƒ í™•ì¸",
          logout_message:
            "ì •ë§ ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ëª¨ë“  ë¡œì»¬ ì €ì¥ ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤.",
          logout_success: "ë¡œê·¸ì•„ì›ƒ ì„±ê³µ",
          logout_success_message: "ì„±ê³µì ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤!",
          please_login_first: "ë¨¼ì € ë¡œê·¸ì¸í•˜ì„¸ìš”",

          // ê²Œì„ ì„¤ëª…
          game_instructions_title: "ê²Œì„ ì„¤ëª…",
          game_history_title: "ì˜¤ëª© ì—­ì‚¬",
          game_history_desc:
            'ì „ì„¤ì— ë”°ë¥´ë©´ ì˜¤ëª©ì€ 4000ì—¬ ë…„ ì „ ìš” í™©ì œ ì‹œëŒ€ì— íƒ„ìƒí–ˆìŠµë‹ˆë‹¤. ìš” í™©ì œê°€ ì•„ë“¤ ë‹¨ì£¼ë¥¼ êµìœ¡í•˜ê¸° ìœ„í•´ ëŒë°”ë‘‘ì„ ë°œëª…í–ˆê³ , í›„ì— ìˆœ í™©ì œê°€ "ì˜¤ì„±ì—°ì£¼" ë†€ì´ë¡œ ê°œëŸ‰í•˜ì—¬ ì ì°¨ í˜„ëŒ€ ì˜¤ëª©ì˜ ì›í˜•ì„ í˜•ì„±í–ˆìŠµë‹ˆë‹¤.\nìš”ìˆœ ì‹œëŒ€ì˜ ë¯¼ì† ê²Œì„ì—ì„œ ë‚¨ë¶ì¡° ì‹œëŒ€ ë™ì•„ì‹œì•„ë¡œ ì „íŒŒë˜ê³ , ì¼ë³¸ì—ì„œ ê²½ê¸° ìŠ¤í¬ì¸ ë¡œ ê°œëŸ‰ë˜ì–´ ìµœì¢…ì ìœ¼ë¡œ ì„¸ê³„ì ì¸ ë°”ë‘‘ í”„ë¡œì íŠ¸ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.',

          // ê²Œì„ ì„¤ëª… ìƒì„¸ ë‚´ìš©
          game_history_section: "ì˜¤ëª© ì—­ì‚¬ ìœ ë˜",
          game_rules_section: "ê²Œì„ ê·œì¹™",
          game_rules_title: "ğŸ¯ ê¸°ë³¸ ê·œì¹™",

          // ê°œì¸ ì„¼í„°
          personal_center_title: "ê°œì¸ ì„¼í„°",
          wallet_address_placeholder: "50ì ì§€ê°‘ ì£¼ì†Œ ì…ë ¥ (ëŒ€ë¬¸ìì™€ ìˆ«ì)",
          wallet_address_format: "ì§€ê°‘ ì£¼ì†Œ í˜•ì‹: 50ì ëŒ€ë¬¸ìì™€ ìˆ«ì",

          // ê²°ì œ ê´€ë ¨
          insufficient_balance_title: "ì”ì•¡ ë¶€ì¡±",
          insufficient_balance_message:
            "ë¬´ë¥´ê¸°ì—ëŠ” 0.1 Ï€ê°€ í•„ìš”í•˜ë©°, í˜„ì¬ ì”ì•¡ {0} Ï€, ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.\n\nì¶©ì „í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
          recharge_prompt:
            "ê²Œì„ ê³„ì •ì— Pi ì½”ì¸ì„ ì¶©ì „í•˜ê³  ë” ë§ì€ ê²Œì„ ê¸°ëŠ¥ì„ ì¦ê¸°ì„¸ìš”!",
          continue_without_recharge:
            "í˜„ì¬ ê²Œì„ì„ ê³„ì†í•  ìˆ˜ ìˆì§€ë§Œ ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì¶©ì „ í›„ ì´ ê¸°ëŠ¥ì„ ì ê¸ˆ í•´ì œí•˜ì„¸ìš”.",
          undo_success: "ë¬´ë¥´ê¸° ì„±ê³µ",
          undo_success_message: "0.1 Ï€ ì†Œëª¨, ì”ì•¡: {0} Ï€",
          undo_failed: "ë¬´ë¥´ê¸° ì‹¤íŒ¨",
          network_error_retry: "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜, ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”",
          invalid_amount: "ìœ íš¨í•œ ì¶©ì „ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš” (ìµœì†Œ 0.1Ï€)",

          // ì•„ì´í…œ ì´ë¦„
          item_hint: "íŒíŠ¸ ì•„ì´í…œ",
          item_undo: "ë¬´ë¥´ê¸° í‹°ì¼“",
          item_theme: "í…Œë§ˆ íŒ©",
          item_vip: "VIP ë©¤ë²„ì‹­",
          item_unknown: "ì•Œ ìˆ˜ ì—†ëŠ” ì•„ì´í…œ",

          // ìˆœìœ„í‘œ ë° í†µê³„
          current_ranking: "ğŸ¯ í˜„ì¬ ìˆœìœ„: #{0} | ({1}ìŠ¹{2}íŒ¨) | ìŠ¹ë¥ : {3}%",
          leaderboard_update_tip:
            "ìˆœìœ„í‘œê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤. ê³„ì† ê²Œì„í•˜ì—¬ ìˆœìœ„ë¥¼ ì˜¬ë¦¬ì„¸ìš”!",

          // ìŠ¹ë¥  ìˆœìœ„ ì‹œìŠ¤í…œ
          score_system: "ğŸ† ìŠ¹ë¥  ìˆœìœ„ ì‹œìŠ¤í…œ",
          initial_score: "ìˆœìœ„ ê¸°ì¤€: ìŠ¹ë¥  ìˆœìœ¼ë¡œ ì •ë ¬",
          win_score: "ìŠ¹ë¦¬: ìŠ¹ë¥  í–¥ìƒ",
          draw_score: "ë¬´ìŠ¹ë¶€: ìŠ¹ë¥ ì— ì˜í–¥",
          lose_score: "íŒ¨ë°°: ìŠ¹ë¥  ê°ì†Œ",
          quit_score: "í¬ê¸°/íƒ€ì„ì•„ì›ƒ: íŒ¨ë°°ë¡œ ê¸°ë¡",

          // ì›”ê°„ ìˆœìœ„ ê·œì¹™
          monthly_ranking_rules: "ğŸ¯ ì›”ê°„ ìˆœìœ„ ê·œì¹™:",
          ranking_requirement: "â€¢ ìˆœìœ„ ì°¸ì—¬ì—ëŠ” ìµœì†Œ 1ê²Œì„ í•„ìš”",
          ranking_criteria: "â€¢ ìŠ¹ë¥  ìˆœìœ¼ë¡œ ìˆœìœ„ ê²°ì •, ë™ë¥  ì‹œ ìŠ¹ìˆ˜ë¡œ ì •ë ¬",

          // ê²Œì„ ì„¤ëª… ìƒì„¸ ê·œì¹™
          basic_rules_detail_1:
            "15Ã—15 ë°”ë‘‘íŒì—ì„œ í”Œë ˆì´ì–´ëŠ” í‘ëŒ, AIëŠ” ë°±ëŒì„ ì‚¬ìš©í•©ë‹ˆë‹¤",
          basic_rules_detail_2:
            "ì–‘ì¸¡ì´ ë²ˆê°ˆì•„ ëŒì„ ë†“ìœ¼ë©°, ë¨¼ì € 5ê°œë¥¼ ì—°ê²°í•˜ëŠ” ìª½ì´ ìŠ¹ë¦¬í•©ë‹ˆë‹¤",
          basic_rules_detail_3:
            "5ê°œ ëŒì€ ê°€ë¡œ, ì„¸ë¡œ, ëŒ€ê°ì„  ì–´ëŠ ë°©í–¥ì´ë“  ì—°ê²° ê°€ëŠ¥í•©ë‹ˆë‹¤",
          basic_rules_detail_4:
            "ë°”ë‘‘íŒì´ ê°€ë“ ì°¨ë„ ìŠ¹ë¶€ê°€ ë‚˜ì§€ ì•Šìœ¼ë©´ ë¬´ìŠ¹ë¶€ì…ë‹ˆë‹¤",

          // í„´ ì‹œê°„ ê·œì¹™
          turn_time_rules: "â±ï¸ í„´ ì‹œê°„ ê·œì¹™",
          thinking_time_rule: "ì‚¬ê³  ì‹œê°„: í„´ë‹¹ 60ì´ˆ ì‚¬ê³  ì‹œê°„",
          time_warning_rule: "ì‹œê°„ ì•Œë¦¼: 30ì´ˆ ë‚¨ìœ¼ë©´ ë…¸ë€ìƒ‰ ê²½ê³ ",
          urgent_warning_rule: "ê¸´ê¸‰ ì•Œë¦¼: ë§ˆì§€ë§‰ 10ì´ˆì— ë¹¨ê°„ìƒ‰ ê¹œë¹¡ì„",
          timeout_rule: "ì‹œê°„ ì´ˆê³¼ íŒ¨ë°°: ì‹œê°„ ì´ˆê³¼ ì‹œ ìë™ìœ¼ë¡œ íŒ¨ë°° ê¸°ë¡",

          // ê²Œì„ ì¡°ì‘ ìƒì„¸
          game_operations: "ğŸ® ê²Œì„ ì¡°ì‘",
          place_stone: "ëŒ ë†“ê¸°: ë¹ˆ ì¹¸ì„ í´ë¦­í•˜ì—¬ ëŒ ë†“ê¸°",
          undo_move:
            "ë¬´ë¥´ê¸°: ìµœê·¼ í•œ ìˆ˜ë¥¼ ì·¨ì†Œí•  ìˆ˜ ìˆìŒ (í”Œë ˆì´ì–´+AI ê°ê° í•œ ìˆ˜)",
          new_game_op: "ìƒˆ ê²Œì„: ë‹¤ì‹œ ì‹œì‘, ì§„í–‰ ì¤‘ì¸ ê²Œì„ì€ íŒ¨ë°°ë¡œ ê¸°ë¡",
          return_op: "ëŒì•„ê°€ê¸°: ê²Œì„ ì¢…ë£Œ, ì§„í–‰ ì¤‘ì¸ ê²Œì„ì€ íŒ¨ë°°ë¡œ ê¸°ë¡",

          // ì ìˆ˜ ì‹œìŠ¤í…œ
          score_system: "ğŸ† 100ì  ìƒëª…ë ¥ ì‹œìŠ¤í…œ",
          initial_score: "ì´ˆê¸° ì ìˆ˜: 100ì ",
          win_score: "ìŠ¹ë¦¬: +1ì ",
          draw_score: "ë¬´ìŠ¹ë¶€: ë³€í™” ì—†ìŒ",
          lose_score: "íŒ¨ë°°: -1ì  (0ì ê¹Œì§€ ì°¨ê°)",
          quit_score: "í¬ê¸°/ì‹œê°„ ì´ˆê³¼: -1ì ",

          // ì›”ê°„ ìˆœìœ„ ê·œì¹™
          monthly_ranking_rules: "ğŸ¯ ì›”ê°„ ìˆœìœ„ ê·œì¹™:",
          ranking_requirement: "â€¢ ìˆœìœ„ ì°¸ì—¬ë¥¼ ìœ„í•´ ìµœì†Œ 60ê²Œì„ í•„ìš”",
          ranking_criteria: "â€¢ ë‚¨ì€ ì ìˆ˜ ìˆœìœ¼ë¡œ ìˆœìœ„ ê²°ì •, ë™ì  ì‹œ ìŠ¹ë¥ ë¡œ ì •ë ¬",
          ranking_rewards: "â€¢ ì›”ë§ ìˆœìœ„ì— ë”°ë¼ ë³´ìƒ ì§€ê¸‰",
          anti_farming:
            "âš ï¸ ì ìˆ˜ ì¡°ì‘ ë°©ì§€: ê²Œì„ì„ í•˜ì§€ ì•Šê±°ë‚˜ ë„ˆë¬´ ì ê²Œ í•œ í”Œë ˆì´ì–´ëŠ” ìˆœìœ„ì—ì„œ ì œì™¸",

          // ì›”ê°„ ë³´ìƒ ê·œì¹™
          monthly_rewards: "ğŸ† ì›”ê°„ ë³´ìƒ ê·œì¹™",
          reward_pool_allocation: "ğŸ’° ë³´ìƒ í’€ ë°°ë¶„",
          reward_settlement: "ë§¤ì›” ë§ˆì§€ë§‰ ë‚  ë§ˆì§€ë§‰ ì‹œê°„ì— ì •ì‚°",
          reward_pool_percentage: "ë³´ìƒ í’€ì€ í”Œë«í¼ ì›”ê°„ ìˆ˜ìµì˜ 50%",
          reward_example: "ì˜ˆ: ì›”ê°„ ìˆ˜ìµ 100Ï€, ë³´ìƒ í’€ 50Ï€",

          // ìƒìœ„ 3ëª… ë°°ë¶„
          top_three_distribution: "ğŸ¥‡ ìƒìœ„ 3ëª… ë°°ë¶„ ë¹„ìœ¨",
          first_place: "ğŸ¥‡ 1ë“±",
          second_place: "ğŸ¥ˆ 2ë“±",
          third_place: "ğŸ¥‰ 3ë“±",

          // ì§€ê¸‰ ë°©ì‹
          distribution_method: "ğŸ“‹ ì§€ê¸‰ ë°©ì‹",
          wallet_distribution: "ê°œì¸ ì„¼í„°ì— ì €ì¥ëœ ì§€ê°‘ ì£¼ì†Œë¡œ ìˆ˜ë™ ì§€ê¸‰",
          valid_wallet_required:
            "ìˆ˜ìƒìëŠ” ì§€ê°‘ ì£¼ì†Œê°€ ì •í™•í•˜ê³  ìœ íš¨í•œì§€ í™•ì¸í•´ì•¼ í•¨",
          next_day_distribution: "ë³´ìƒì€ ì •ì‚° ë‹¤ìŒ ë‚  ì§€ê¸‰ë©ë‹ˆë‹¤",
          invalid_wallet_rollover:
            "ì§€ê°‘ ì£¼ì†Œê°€ ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ ë³´ìƒì€ ë‹¤ìŒ ë‹¬ë¡œ ì´ì›”ë©ë‹ˆë‹¤",

          // ìˆœìœ„í‘œ ê·œì¹™
          leaderboard_rules: "ğŸ“Š ìˆœìœ„í‘œ ê·œì¹™",
          ranking_condition: "ìˆœìœ„ ì¡°ê±´: 60ê²Œì„ ì™„ë£Œ ì‹œ ìˆœìœ„í‘œ ë“±ì¬",
          ranking_basis: "ìˆœìœ„ ê¸°ì¤€: ëˆ„ì  ì ìˆ˜ ìˆœìœ¼ë¡œ ì •ë ¬",
          data_statistics: "ë°ì´í„° í†µê³„: ì—­ì‚¬ì  ëˆ„ì  ë°ì´í„° ê¸°ë°˜",
          realtime_update: "ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸: ê° ê²Œì„ ì¢…ë£Œ í›„ ì¦‰ì‹œ ì—…ë°ì´íŠ¸",

          // ë”°ëœ»í•œ íŒ
          warm_tips:
            "ğŸ‹ ì²œë…„ì˜ ì§€í˜œë¥¼ ê³„ìŠ¹í•˜ê³ , ê³ ì „ ë°”ë‘‘ì˜ ì•„ë¦„ë‹¤ì›€ì„ ê²½í—˜í•˜ì„¸ìš”\nğŸ’¡ ì‹œê°„ì„ í•©ë¦¬ì ìœ¼ë¡œ ë°°ë¶„í•˜ê³ , ì‚¬ê³ ì˜ ì¦ê±°ì›€ì„ ë§Œë½í•˜ì„¸ìš”",

          // ê²Œì„ ê²°ê³¼ ê´€ë ¨
          game_result: "ê²Œì„ ê²°ê³¼",
          congratulations_win: "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ìŠ¹ë¦¬!",
          sorry_lose: "ğŸ˜” ì£„ì†¡í•©ë‹ˆë‹¤, íŒ¨ë°°í–ˆìŠµë‹ˆë‹¤",
          draw_result: "ğŸ¤ ë¬´ìŠ¹ë¶€",
          current_score: "í˜„ì¬ ì ìˆ˜",
          win_rate_display: "ìŠ¹ë¥ ",
          total_games_display: "ì´ ê²Œì„ ìˆ˜",
          current_rank_display: "í˜„ì¬ ìˆœìœ„",
          not_ranked: "ìˆœìœ„ ì—†ìŒ",
          guest_mode: "ê²ŒìŠ¤íŠ¸ ëª¨ë“œ",
          guest_mode_desc:
            "í˜„ì¬ ê²ŒìŠ¤íŠ¸ë¡œ ê²Œì„ ì¤‘ì´ë©°, ê²Œì„ ê²°ê³¼ëŠ” ìˆœìœ„í‘œì— ê¸°ë¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
          login_benefits: "ë¡œê·¸ì¸ í›„ í˜œíƒ:",
          benefit_stats: "â€¢ ğŸ“Š ê²Œì„ ë°ì´í„° í†µê³„",
          benefit_leaderboard: "â€¢ ğŸ† ìˆœìœ„í‘œ ê²½ìŸ ì°¸ì—¬",
          benefit_pi_service: "â€¢ ğŸ’° Pi ì½”ì¸ ë¶€ê°€ ì„œë¹„ìŠ¤",
          benefit_monthly_rewards: "â€¢ ğŸ ì›”ê°„ ë³´ìƒ í™œë™",
          play_again: "ë‹¤ì‹œ í”Œë ˆì´",
          view_leaderboard: "ìˆœìœ„í‘œ ë³´ê¸°",
          login_now: "ì§€ê¸ˆ ë¡œê·¸ì¸",

          // ê²Œì„ ì¸í„°í˜ì´ìŠ¤
          return_to_menu: "ëŒì•„ê°€ê¸°",
          guest_mode_short: "ğŸ® ê²ŒìŠ¤íŠ¸ ëª¨ë“œ",
          ai_battle_title: "ğŸ§  AI ëŒ€ì „",
          player_label: "í”Œë ˆì´ì–´",
          ai_label: "AI",
          vs_label: "VS",
          undo_button: "ë¬´ë¥´ê¸°",
          new_game_button: "ìƒˆ ê²Œì„",

          // ë¬´ë¥´ê¸° ê´€ë ¨
          undo_confirm: "ë¬´ë¥´ê¸° í™•ì¸",
          undo_confirm_message:
            "ë¬´ë¥´ê¸°ì—ëŠ” 0.1 Ï€ê°€ í•„ìš”í•©ë‹ˆë‹¤\ní˜„ì¬ ì”ì•¡: {0} Ï€\n\në¬´ë¥´ê¸°ë¥¼ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
          undo_success_title: "ë¬´ë¥´ê¸° ì„±ê³µ",
          undo_success_detail: "0.1 Ï€ ì†Œëª¨, ì”ì•¡: {0} Ï€",
          undo_failed_title: "ë¬´ë¥´ê¸° ì‹¤íŒ¨",
          undo_failed_message: "ê²°ì œ ì‹¤íŒ¨",
          insufficient_balance_undo:
            "ë¬´ë¥´ê¸°ì—ëŠ” 0.1 Ï€ê°€ í•„ìš”í•˜ë©°, í˜„ì¬ ì”ì•¡ {0} Ï€, ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.\n\nì¶©ì „í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
          continue_game_tip:
            "í˜„ì¬ ê²Œì„ì„ ê³„ì†í•  ìˆ˜ ìˆì§€ë§Œ ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì¶©ì „ í›„ ì´ ê¸°ëŠ¥ì„ ì ê¸ˆ í•´ì œí•˜ì„¸ìš”.",

          // ì¶©ì „ ê´€ë ¨
          recharge_dialog_title: "ğŸ’° ê³„ì • ì¶©ì „",
          payment_dialog_title: "ğŸ’³ Pi ì½”ì¸ ê²°ì œ",
          recharge_amount_display: "ì¶©ì „ {0} Ï€",
          order_id_display: "ì£¼ë¬¸ ë²ˆí˜¸: {0}",
          custom_amount_error: "ìœ íš¨í•œ ì¶©ì „ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš” (ìµœì†Œ 0.1Ï€)",

          // ê°œì¸ ì„¼í„° ìƒì„¸ ë‚´ìš©
          monthly_reward_reminder: "ğŸ† ì›”ê°„ ë³´ìƒ ì•Œë¦¼",
          monthly_reward_desc:
            "ì›”ê°„ ìˆ˜ìµì˜ 50%ê°€ ìƒìœ„ 3ëª… í”Œë ˆì´ì–´ì—ê²Œ ë³´ìƒìœ¼ë¡œ ë°°ë¶„ë©ë‹ˆë‹¤",

          // ì›”ê°„ ë³´ìƒ ìƒì„¸ ì„¤ëª…
          reward_settlement_detail: "ë§¤ì›” ë§ˆì§€ë§‰ ë‚  ë§ˆì§€ë§‰ ì‹œê°„ì— ì •ì‚°",
          reward_pool_50_percent: "ë³´ìƒ í’€ì€ í”Œë«í¼ ì›”ê°„ ìˆ˜ìµì˜ 50%",
          reward_example_detail: "ì˜ˆ: ì›”ê°„ ìˆ˜ìµ 100Ï€, ë³´ìƒ í’€ 50Ï€",
          reward_distribution_manual:
            "ê°œì¸ ì„¼í„°ì— ì €ì¥ëœ ì§€ê°‘ ì£¼ì†Œë¡œ ìˆ˜ë™ ì§€ê¸‰",
          reward_wallet_valid:
            "ìˆ˜ìƒìëŠ” ì§€ê°‘ ì£¼ì†Œê°€ ì •í™•í•˜ê³  ìœ íš¨í•œì§€ í™•ì¸í•´ì•¼ í•¨",
          reward_next_day: "ë³´ìƒì€ ì •ì‚° ë‹¤ìŒ ë‚  ì§€ê¸‰ë©ë‹ˆë‹¤",
          reward_invalid_rollover:
            "ì§€ê°‘ ì£¼ì†Œê°€ ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ ë³´ìƒì€ ë‹¤ìŒ ë‹¬ë¡œ ì´ì›”ë©ë‹ˆë‹¤",
          reward_example_calculation: "ğŸ’¡ ì˜ˆì‹œ: ì›”ê°„ ìˆ˜ìµ 100Ï€, ë³´ìƒ í’€ 50Ï€",
          first_place_reward: "ğŸ¥‡1ë“±: 25Ï€",
          second_place_reward: "ğŸ¥ˆ2ë“±: 15Ï€",
          third_place_reward: "ğŸ¥‰3ë“±: 10Ï€",

          // ì „ì—­ ìˆœìœ„í‘œ
          global_ranking_title: "ê¸€ë¡œë²Œ ìˆœìœ„",
          ranking_subtitle: "ğŸ“Š ì›”ê°„ ìŠ¹ë¥  ê¸°ë°˜ ìˆœìœ„",
          ranking_header_rank: "ìˆœìœ„",
          ranking_header_nickname: "ë‹‰ë„¤ì„",
          ranking_header_games: "ì´ ê²Œì„",
          ranking_header_winrate: "ìŠ¹ë¥ ",
          current_rank_not_listed: "í˜„ì¬ ìˆœìœ„: ë¯¸ë“±ì¬",
          current_rank_label: "í˜„ì¬ ìˆœìœ„",
          not_listed: "ë¯¸ë“±ì¬",
          play_one_game_to_rank:
            "ğŸ® 1ê²Œì„ ì™„ë£Œí•˜ë©´ ìˆœìœ„í‘œì— ë“±ì¬ë©ë‹ˆë‹¤! ì˜¤ëª© ì—¬í–‰ì„ ì‹œì‘í•˜ì„¸ìš”!",

          // ê°œì¸ ì„¼í„° ìƒì„¸ ë¼ë²¨
          personal_profile_section: "ê°œì¸ í”„ë¡œí•„",
          avatar_nickname_section: "ì•„ë°”íƒ€ì™€ ë‹‰ë„¤ì„",
          click_avatar_edit: "ì•„ë°”íƒ€ í´ë¦­í•˜ì—¬ í¸ì§‘",
          click_nickname_edit: "ë‹‰ë„¤ì„ í´ë¦­í•˜ì—¬ í¸ì§‘",
          account_info_section: "ê³„ì • ì •ë³´",
          game_stats_section: "ê²Œì„ í†µê³„",
          wallet_address_label: "ì§€ê°‘ ì£¼ì†Œ",
          account_balance_display: "ê³„ì • ì”ì•¡",
          refresh_balance_btn: "ì”ì•¡ ìƒˆë¡œê³ ì¹¨",
          logout_btn: "ë¡œê·¸ì•„ì›ƒ",

          // ê²Œì„ í†µê³„ ë¼ë²¨
          total_games_label: "ì´ ê²Œì„",
          wins_label: "ìŠ¹ë¦¬",
          win_rate_label: "ìŠ¹ë¥ ",
          current_score_label: "í˜„ì¬ ì ìˆ˜",
          current_rank_label: "í˜„ì¬ ìˆœìœ„",

          // ì”ì•¡ ì¡°íšŒ ìƒíƒœ
          balance_querying: "ì¡°íšŒ ì¤‘...",
          balance_query_failed_display: "ì¡°íšŒ ì‹¤íŒ¨",
          balance_tooltip: "ì´ ì¶©ì „: {0} Ï€\nì´ ì†Œë¹„: {1} Ï€",

          // ê²°ì œ ì„±ê³µ ì •ë³´
          payment_success_title: "ê²°ì œ ì„±ê³µ",
          payment_success_message: "ê²°ì œ ì„±ê³µ!",
          purchase_success_message: "{0}ì„(ë¥¼) ì„±ê³µì ìœ¼ë¡œ êµ¬ë§¤í–ˆìŠµë‹ˆë‹¤",
          transaction_id: "ê±°ë˜ ID: {0}",

          // ê°œì¸ ì„¼í„° ì…ë ¥ íŒíŠ¸
          enter_avatar_emoji: "ì´ëª¨ì§€ ì•„ë°”íƒ€ ì…ë ¥ (ì˜ˆ: ğŸ˜Š)",
          click_to_set_nickname: "ë‹‰ë„¤ì„ ì„¤ì •í•˜ë ¤ë©´ í´ë¦­",
          enter_your_nickname: "ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”",
          loading_text_display: "ë¡œë”© ì¤‘...",
          refresh_balance_text: "ğŸ”„ ì”ì•¡ ìƒˆë¡œê³ ì¹¨",
          recharge_text: "ğŸ’° ì¶©ì „",
          wallet_format_hint: "ì§€ê°‘ ì£¼ì†Œ í˜•ì‹: 50ì ëŒ€ë¬¸ìì™€ ìˆ«ì",
          save_wallet: "ğŸ’¾ ì €ì¥",
          edit_wallet: "âœï¸ í¸ì§‘",
          logout_account_text: "â†©ï¸ ê³„ì • ë¡œê·¸ì•„ì›ƒ",

          // ê°œì¸ ì„¼í„° íŒíŠ¸ ì •ë³´
          enter_avatar_hint: "ì•„ë°”íƒ€ ì´ëª¨ì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”",
          single_emoji_hint: "ë‹¨ì¼ ì´ëª¨ì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”",
          avatar_updated: "ì•„ë°”íƒ€ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤!",
          nickname_updated: "ë‹‰ë„¤ì„ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤!",
          enter_wallet_hint: "ì§€ê°‘ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”",
          wallet_length_error:
            "âŒ í‘œì¤€ ì§€ê°‘ ì£¼ì†Œê°€ ì•„ë‹™ë‹ˆë‹¤!\n\ní˜„ì¬ ê¸¸ì´: {0}ì\ní‘œì¤€ ê¸¸ì´: 50ì\n\nì™„ì „í•œ 50ì ì§€ê°‘ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”",
          wallet_format_error:
            "âŒ ì§€ê°‘ ì£¼ì†Œ í˜•ì‹ ì˜¤ë¥˜!\n\nëŒ€ë¬¸ì(A-Z)ì™€ ìˆ«ì(0-9)ë§Œ í—ˆìš©ë©ë‹ˆë‹¤\nì…ë ¥ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”",
          wallet_saved_success: "âœ… ì§€ê°‘ ì£¼ì†Œê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!",
          edit_mode_title: "í¸ì§‘ ëª¨ë“œ",
          edit_mode_message:
            "ğŸ’¡ í¸ì§‘ ëª¨ë“œê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤\n\nì§€ê°‘ ì£¼ì†Œë¥¼ ìˆ˜ì •í•œ í›„ ì €ì¥ì„ í´ë¦­í•˜ì„¸ìš”",
          success_title: "ì„±ê³µ",
          error_title: "ì˜¤ë¥˜",

          // ê²Œì„ ì¢…ë£Œ ê´€ë ¨
          you_win: "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ìŠ¹ë¦¬!",
          you_lose: "ğŸ˜” AIê°€ ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤, ë‹¤ì‹œ ë„ì „í•˜ì„¸ìš”!",
          draw: "ğŸ¤ ë¬´ìŠ¹ë¶€!",
          game_over: "ê²Œì„ ì¢…ë£Œ",

          // ë©”ì¸ ì¸í„°í˜ì´ìŠ¤ ë²„íŠ¼
          global_ranking: "ê¸€ë¡œë²Œ ìˆœìœ„",
          ai_battle: "AI ëŒ€ì „",
          personal_center: "ê°œì¸ ì„¼í„°",
          game_instructions: "ê²Œì„ ì„¤ëª…",

          // ì—°ê²° ì˜¤ë¥˜
          connection_failed: "ì—°ê²° ì‹¤íŒ¨",
          connection_error_detail:
            "Pi Networkì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•œ í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”",
          login_with_pi: "Pi ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸",
          login_benefits_note:
            "ë¡œê·¸ì¸ í›„ ì™„ì „í•œ ê²Œì„ ê¸°ëŠ¥ê³¼ Pi ì½”ì¸ ë³´ìƒì„ ì¦ê¸°ì„¸ìš”",

          // ì¶©ì „ ëŒ€í™”ìƒì
          recharge_amount_selection: "ì¶©ì „ ê¸ˆì•¡ ì„ íƒ",
          custom_amount_placeholder: "ì‚¬ìš©ì ì •ì˜ ê¸ˆì•¡",
          custom_recharge: "ì‚¬ìš©ì ì •ì˜ ì¶©ì „",
          cancel: "ì·¨ì†Œ",

          // ì˜¤ë¥˜ ì•Œë¦¼
          please_login_first: "ë¨¼ì € ë¡œê·¸ì¸í•˜ì„¸ìš”",
          create_order_failed: "ì£¼ë¬¸ ìƒì„± ì‹¤íŒ¨",
          network_error_retry: "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜, ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”",
          pi_login_failed: "Pi Network ë¡œê·¸ì¸ ì‹¤íŒ¨",
          login_error: "ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ",
          pi_sdk_not_loaded:
            "Pi Network SDKê°€ ë¡œë“œë˜ì§€ ì•Šì•„ ê²°ì œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
          create_payment_failed: "ê²°ì œ ìƒì„± ì‹¤íŒ¨",

          // ê²°ì œ ëŒ€í™”ìƒì
          payment_method: "ê²°ì œ ë°©ë²•",
          pi_wallet_transfer: "ğŸ“± Pi ì§€ê°‘ ì†¡ê¸ˆ",
          transfer_instruction: "Pi ì§€ê°‘ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒ ì£¼ì†Œë¡œ ì†¡ê¸ˆí•˜ì„¸ìš”:",
          transfer_amount_warning:
            "âš ï¸ ì†¡ê¸ˆ ê¸ˆì•¡ì´ <strong>{0} Ï€</strong>ì¸ì§€ í™•ì¸í•˜ì„¸ìš”",
          transfer_memo: "ì†¡ê¸ˆ ë©”ëª¨: {0}",
          transaction_hash_placeholder: "ê±°ë˜ í•´ì‹œë¥¼ ì…ë ¥í•˜ì„¸ìš”",
          transaction_hash_instruction:
            "ì†¡ê¸ˆ ì™„ë£Œ í›„ Pi ì§€ê°‘ì—ì„œ ê±°ë˜ í•´ì‹œë¥¼ ë³µì‚¬í•˜ì—¬ ìœ„ ì…ë ¥ë€ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”",
          verify_payment: "ê²°ì œ í™•ì¸",
          order_validity: "ì£¼ë¬¸ ìœ íš¨ê¸°ê°„: 30ë¶„",

          // ê²°ì œ í™•ì¸
          please_enter_transaction_hash: "ê±°ë˜ í•´ì‹œë¥¼ ì…ë ¥í•˜ì„¸ìš”",
          recharge_success: "ì¶©ì „ ì„±ê³µ",
          recharge_success_message:
            "ì¶•í•˜í•©ë‹ˆë‹¤! {0} Ï€ ì¶©ì „ ì„±ê³µ!\ní˜„ì¬ ì”ì•¡: {1} Ï€",
          verification_failed: "í™•ì¸ ì‹¤íŒ¨",

          // ê²Œì„ íë¦„ í™•ì¸
          timeout_game_over: "â° ì‚¬ê³  ì‹œê°„ ì´ˆê³¼, ê²Œì„ ì‹¤íŒ¨!",
          login_success: "ë¡œê·¸ì¸ ì„±ê³µ",
          welcome_user: "í™˜ì˜í•©ë‹ˆë‹¤, {0}",
          abandon_current_game: "í˜„ì¬ ê²Œì„ í¬ê¸°",
          abandon_game_warning:
            "í˜„ì¬ ê²Œì„ì´ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì‹œì‘í•˜ë©´ íŒ¨ë°°ë¡œ ê¸°ë¡ë©ë‹ˆë‹¤.\n\ní˜„ì¬ ê²Œì„ì„ í¬ê¸°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
          restart_game: "ê²Œì„ ë‹¤ì‹œ ì‹œì‘",
          restart_game_confirm: "ë‹¤ì‹œ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
          abandon_game_return_warning:
            "í˜„ì¬ ê²Œì„ì´ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤. ë©”ì¸ ë©”ë‰´ë¡œ ëŒì•„ê°€ë©´ íŒ¨ë°°ë¡œ ê¸°ë¡ë©ë‹ˆë‹¤.\n\ní˜„ì¬ ê²Œì„ì„ í¬ê¸°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",

          // ìŠ¹ë¶€ í‘œì‹œ í˜•ì‹
          wins_losses_format: "({0}ìŠ¹{1}íŒ¨)",
          monthly_games: "ì›”ê°„ ê²Œì„",
          play_again: "ë‹¤ì‹œ í”Œë ˆì´",
          view_leaderboard: "ìˆœìœ„í‘œ ë³´ê¸°",
          login_now: "ì§€ê¸ˆ ë¡œê·¸ì¸",
          guest_mode: "ê²ŒìŠ¤íŠ¸ ëª¨ë“œ",
          guest_mode_desc:
            "í˜„ì¬ ê²ŒìŠ¤íŠ¸ë¡œ ê²Œì„ ì¤‘ì´ë©°, ê²Œì„ ê²°ê³¼ëŠ” ìˆœìœ„í‘œì— ê¸°ë¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
          login_benefits: "ë¡œê·¸ì¸ í›„ í˜œíƒ:",
          benefit_stats: "â€¢ ğŸ“Š ê²Œì„ í†µê³„",
          benefit_leaderboard: "â€¢ ğŸ† ìˆœìœ„í‘œ ê²½ìŸ ì°¸ì—¬",
          benefit_pi_service: "â€¢ ğŸ’° Pi ì½”ì¸ ë¶€ê°€ê°€ì¹˜ ì„œë¹„ìŠ¤",
          benefit_monthly_rewards: "â€¢ ğŸ ì›”ê°„ ë³´ìƒ í™œë™",
          rank_position: "#{0}ìœ„",

          // ì˜¨ë¼ì¸ ë§¤ì¹­ ê´€ë ¨
          searching_opponent: "ìƒëŒ€ë°©ì„ ì°¾ëŠ” ì¤‘...",
          online_players: "í˜„ì¬ ì˜¨ë¼ì¸ í”Œë ˆì´ì–´",
          people_suffix: "ëª…",
          match_description: "ì‹œìŠ¤í…œì´ ì‹¤ë ¥ì´ ë¹„ìŠ·í•œ ìƒëŒ€ë°©ì„ ë§¤ì¹­í•´ë“œë¦½ë‹ˆë‹¤",
          estimated_wait: "ì˜ˆìƒ ëŒ€ê¸° ì‹œê°„: 30-60ì´ˆ",
          match_found: "ìƒëŒ€ë°©ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤!",
          ai_opponent_name: "AI ìŠ¤ë§ˆíŠ¸ ìƒëŒ€",
          black_stone: "í‘ëŒ",
          white_stone: "ë°±ëŒ",
        },

        ja: {
          // åŸºæœ¬ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
          noscript:
            "ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯JavaScriptã‚’æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚",
          game_title: "äº”ç›®ä¸¦ã¹",
          game_subtitle: "pinetworkãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ä¸Šã§å‹•ä½œã™ã‚‹äº”ç›®ä¸¦ã¹ã‚²ãƒ¼ãƒ ",
          online_match: "ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒƒãƒ",
          global_ranking: "ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ©ãƒ³ã‚­ãƒ³ã‚°",
          ai_battle: "AIå¯¾æˆ¦",
          personal_center: "å€‹äººã‚»ãƒ³ã‚¿ãƒ¼",
          game_instructions: "ã‚²ãƒ¼ãƒ èª¬æ˜",
          error_message: "âŒ ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
          login_with_pi: "Pi Networkã§ãƒ­ã‚°ã‚¤ãƒ³",
          login_note:
            "ãƒ­ã‚°ã‚¤ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€Pi Networkã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ãŸèªè¨¼ã«åŒæ„ã—ãŸã“ã¨ã«ãªã‚Šã¾ã™",

          // è¨€èªã‚ªãƒ—ã‚·ãƒ§ãƒ³
          lang_zh: "ä¸­æ–‡",
          lang_en: "English",
          lang_ko: "í•œêµ­ì–´",
          lang_ja: "æ—¥æœ¬èª",
          lang_vi: "Tiáº¿ng Viá»‡t",

          // ã‚²ãƒ¼ãƒ é–¢é€£
          current_player: "ç¾åœ¨ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼",
          your_turn: "ã‚ãªãŸã®ç•ª",
          opponent_turn: "ç›¸æ‰‹ã®ç•ª",
          ai_thinking: "ğŸ¤– AIãŒè€ƒãˆä¸­...",
          thinking_time: "â±ï¸ æ€è€ƒæ™‚é–“: {0}ç§’",
          remaining_time: "âš ï¸ æ®‹ã‚Šæ™‚é–“: {0}ç§’",
          timeout_warning: "ğŸš¨ ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè­¦å‘Š: {0}ç§’",
          timeout: "â° ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ",

          // ã‚²ãƒ¼ãƒ çµæœ
          you_win: "ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼å‹åˆ©ï¼",
          you_lose: "ğŸ˜” æ®‹å¿µã€æ•—åŒ—",
          draw: "ğŸ¤ å¼•ãåˆ†ã‘",
          game_over: "ã‚²ãƒ¼ãƒ çµ‚äº†",

          // ãƒœã‚¿ãƒ³ã¨æ“ä½œ
          new_game: "æ–°ã—ã„ã‚²ãƒ¼ãƒ ",
          undo: "å¾…ã£ãŸ",
          restart: "å†é–‹",
          back_to_menu: "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹",
          confirm: "ç¢ºèª",
          cancel: "ã‚­ãƒ£ãƒ³ã‚»ãƒ«",
          close: "é–‰ã˜ã‚‹",
          save: "ä¿å­˜",
          update: "æ›´æ–°",
          enter_game: "ã‚²ãƒ¼ãƒ é–‹å§‹",

          // å€‹äººã‚»ãƒ³ã‚¿ãƒ¼
          personal_info: "å€‹äººæƒ…å ±",
          game_stats: "ã‚²ãƒ¼ãƒ çµ±è¨ˆ",
          total_games: "ç·ã‚²ãƒ¼ãƒ æ•°",
          wins: "å‹åˆ©",
          losses: "æ•—åŒ—",
          win_rate: "å‹ç‡",
          current_rank: "ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯",
          wallet_address: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹",
          balance: "æ®‹é«˜",
          nickname: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ",
          avatar: "ã‚¢ãƒã‚¿ãƒ¼",

          // ã‚¨ãƒ©ãƒ¼ã¨é€šçŸ¥
          connection_failed: "æ¥ç¶šå¤±æ•—",
          network_error: "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã€æ¥ç¶šã‚’ç¢ºèªã—ã¦å†è©¦è¡Œã—ã¦ãã ã•ã„",
          login_failed: "ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—",
          insufficient_balance: "æ®‹é«˜ä¸è¶³",
          invalid_move: "ç„¡åŠ¹ãªæ‰‹",
          game_not_started: "ã‚²ãƒ¼ãƒ ãŒé–‹å§‹ã•ã‚Œã¦ã„ã¾ã›ã‚“",

          // æ”¯æ‰•ã„é–¢é€£
          payment_confirm: "æ”¯æ‰•ã„ç¢ºèª",
          payment_success: "æ”¯æ‰•ã„æˆåŠŸ",
          payment_failed: "æ”¯æ‰•ã„å¤±æ•—",
          payment_cancelled: "æ”¯æ‰•ã„ã‚­ãƒ£ãƒ³ã‚»ãƒ«",
          recharge: "ãƒãƒ£ãƒ¼ã‚¸",

          // ãƒ©ãƒ³ã‚­ãƒ³ã‚°
          leaderboard: "ãƒ©ãƒ³ã‚­ãƒ³ã‚°",
          rank: "ãƒ©ãƒ³ã‚¯",
          player: "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼",
          score: "ã‚¹ã‚³ã‚¢",
          games_played: "ãƒ—ãƒ¬ã‚¤ã—ãŸã‚²ãƒ¼ãƒ ",

          // ãã®ä»–
          loading: "èª­ã¿è¾¼ã¿ä¸­...",
          connecting: "æ¥ç¶šä¸­...",
          please_wait: "ãŠå¾…ã¡ãã ã•ã„...",
          success: "æˆåŠŸ",
          failed: "å¤±æ•—",
          connecting_pi_network: "Pi Networkã«æ¥ç¶šä¸­...",
          entering_game: "ã‚²ãƒ¼ãƒ é–‹å§‹ä¸­...",

          // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã¨é€šçŸ¥
          hint: "ãƒ’ãƒ³ãƒˆ",
          confirm_purchase: "è³¼å…¥ç¢ºèª",
          confirm_payment: "æ”¯æ‰•ã„ç¢ºèª",
          payment_amount: "{0} Ï€",
          enter_nickname: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          nickname_too_long: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã¯20æ–‡å­—ã‚’è¶…ãˆã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“",
          nickname_forbidden:
            "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã«ç¦æ­¢ã•ã‚ŒãŸå˜èªãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚å†å…¥åŠ›ã—ã¦ãã ã•ã„",
          logout_confirm: "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆç¢ºèª",
          logout_message:
            "æœ¬å½“ã«ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿã™ã¹ã¦ã®ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ãƒ‡ãƒ¼ã‚¿ãŒå‰Šé™¤ã•ã‚Œã¾ã™ã€‚",
          logout_success: "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæˆåŠŸ",
          logout_success_message: "æ­£å¸¸ã«ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸï¼",
          please_login_first: "ã¾ãšãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„",

          // ã‚²ãƒ¼ãƒ èª¬æ˜
          game_instructions_title: "ã‚²ãƒ¼ãƒ èª¬æ˜",
          game_history_title: "äº”ç›®ä¸¦ã¹ã®æ­´å²",
          game_history_desc:
            "ä¼èª¬ã«ã‚ˆã‚‹ã¨ã€äº”ç›®ä¸¦ã¹ã¯4000å¹´ä»¥ä¸Šå‰ã®å ¯å¸æ™‚ä»£ã«èª•ç”Ÿã—ã¾ã—ãŸã€‚å ¯å¸ãŒæ¯å­ã®ä¸¹æœ±ã‚’æ•™è‚²ã™ã‚‹ãŸã‚ã«çŸ³å­æ£‹ã‚’ç™ºæ˜ã—ã€å¾Œã«èˆœå¸ãŒã€Œäº”æ˜Ÿé€£ç ã€ã®éŠã³æ–¹ã«æ”¹è‰¯ã—ã¦ã€å¾ã€…ã«ç¾ä»£äº”ç›®ä¸¦ã¹ã®åŸå‹ã‚’å½¢æˆã—ã¾ã—ãŸã€‚\nå ¯èˆœæ™‚ä»£ã®æ°‘ä¿—ã‚²ãƒ¼ãƒ ã‹ã‚‰ã€å—åŒ—æœæ™‚ä»£ã«æ±ã‚¢ã‚¸ã‚¢ã«ä¼æ’­ã—ã€æ—¥æœ¬ã§ç«¶æŠ€ã‚¹ãƒãƒ¼ãƒ„ã«æ”¹è‰¯ã•ã‚Œã€æœ€çµ‚çš„ã«ä¸–ç•Œçš„ãªæ£‹é¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ãªã‚Šã¾ã—ãŸã€‚",

          // ã‚²ãƒ¼ãƒ èª¬æ˜è©³ç´°å†…å®¹
          game_history_section: "äº”ç›®ä¸¦ã¹æ­´å²ã®ç”±æ¥",
          game_rules_section: "ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«",
          game_rules_title: "ğŸ¯ åŸºæœ¬ãƒ«ãƒ¼ãƒ«",

          // å€‹äººã‚»ãƒ³ã‚¿ãƒ¼
          personal_center_title: "å€‹äººã‚»ãƒ³ã‚¿ãƒ¼",
          wallet_address_placeholder:
            "50æ–‡å­—ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ï¼ˆå¤§æ–‡å­—ã¨æ•°å­—ï¼‰",
          wallet_address_format: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ï¼š50æ–‡å­—ã®å¤§æ–‡å­—ã¨æ•°å­—",

          // æ”¯æ‰•ã„é–¢é€£
          insufficient_balance_title: "æ®‹é«˜ä¸è¶³",
          insufficient_balance_message:
            "å¾…ã£ãŸã«ã¯0.1 Ï€ãŒå¿…è¦ã§ã€ç¾åœ¨ã®æ®‹é«˜{0} Ï€ã€æ®‹é«˜ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚\n\nãƒãƒ£ãƒ¼ã‚¸ã—ã¾ã™ã‹ï¼Ÿ",
          recharge_prompt:
            "ã‚²ãƒ¼ãƒ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«Piã‚³ã‚¤ãƒ³ã‚’ãƒãƒ£ãƒ¼ã‚¸ã—ã¦ã€ã‚ˆã‚Šå¤šãã®ã‚²ãƒ¼ãƒ æ©Ÿèƒ½ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ï¼",
          continue_without_recharge:
            "ç¾åœ¨ã®ã‚²ãƒ¼ãƒ ã‚’ç¶šã‘ã‚‹ã“ã¨ã¯ã§ãã¾ã™ãŒã€å†é–‹ã¯ã§ãã¾ã›ã‚“ã€‚ãƒãƒ£ãƒ¼ã‚¸å¾Œã«ã“ã®æ©Ÿèƒ½ã®ãƒ­ãƒƒã‚¯ã‚’è§£é™¤ã—ã¦ãã ã•ã„ã€‚",
          undo_success: "å¾…ã£ãŸæˆåŠŸ",
          undo_success_message: "0.1 Ï€æ¶ˆè²»ã€æ®‹é«˜ï¼š{0} Ï€",
          undo_failed: "å¾…ã£ãŸå¤±æ•—",
          network_error_retry: "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã€å¾Œã§ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„",
          invalid_amount: "æœ‰åŠ¹ãªãƒãƒ£ãƒ¼ã‚¸é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆæœ€ä½0.1Ï€ï¼‰",

          // ã‚¢ã‚¤ãƒ†ãƒ å
          item_hint: "ãƒ’ãƒ³ãƒˆã‚¢ã‚¤ãƒ†ãƒ ",
          item_undo: "å¾…ã£ãŸãƒã‚±ãƒƒãƒˆ",
          item_theme: "ãƒ†ãƒ¼ãƒãƒ‘ãƒƒã‚¯",
          item_vip: "VIPãƒ¡ãƒ³ãƒãƒ¼ã‚·ãƒƒãƒ—",
          item_unknown: "ä¸æ˜ãªã‚¢ã‚¤ãƒ†ãƒ ",

          // ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã¨çµ±è¨ˆ
          current_ranking: "ğŸ¯ ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯: #{0} | ({1}å‹{2}æ•—) | å‹ç‡: {3}%",
          leaderboard_update_tip:
            "ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ›´æ–°ã•ã‚Œã¾ã™ã€‚ã‚²ãƒ¼ãƒ ã‚’ç¶šã‘ã¦ãƒ©ãƒ³ã‚¯ã‚’ä¸Šã’ã¾ã—ã‚‡ã†ï¼",

          // ã‚²ãƒ¼ãƒ èª¬æ˜è©³ç´°ãƒ«ãƒ¼ãƒ«
          basic_rules_detail_1:
            "15Ã—15ã®ç›¤é¢ã§ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯é»’çŸ³ã€AIã¯ç™½çŸ³ã‚’ä½¿ç”¨ã—ã¾ã™",
          basic_rules_detail_2:
            "ä¸¡è€…ãŒäº¤äº’ã«çŸ³ã‚’ç½®ãã€å…ˆã«5ã¤ã‚’é€£çµã—ãŸæ–¹ãŒå‹åˆ©ã§ã™",
          basic_rules_detail_3:
            "5ã¤ã®çŸ³ã¯æ¨ªã€ç¸¦ã€æ–œã‚ã®ã„ãšã‚Œã®æ–¹å‘ã§ã‚‚é€£çµå¯èƒ½ã§ã™",
          basic_rules_detail_4:
            "ç›¤é¢ãŒæº€æ¯ã«ãªã£ã¦ã‚‚å‹è² ãŒã¤ã‹ãªã„å ´åˆã¯å¼•ãåˆ†ã‘ã§ã™",

          // ã‚¿ãƒ¼ãƒ³æ™‚é–“ãƒ«ãƒ¼ãƒ«
          turn_time_rules: "â±ï¸ ã‚¿ãƒ¼ãƒ³æ™‚é–“ãƒ«ãƒ¼ãƒ«",
          thinking_time_rule: "æ€è€ƒæ™‚é–“ï¼šã‚¿ãƒ¼ãƒ³ã”ã¨ã«60ç§’ã®æ€è€ƒæ™‚é–“",
          time_warning_rule: "æ™‚é–“è­¦å‘Šï¼šæ®‹ã‚Š30ç§’ã§é»„è‰²è­¦å‘Š",
          urgent_warning_rule: "ç·Šæ€¥è­¦å‘Šï¼šæœ€å¾Œã®10ç§’ã§èµ¤è‰²ç‚¹æ»…",
          timeout_rule: "ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ•—åŒ—ï¼šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚ã¯è‡ªå‹•çš„ã«æ•—åŒ—è¨˜éŒ²",

          // ã‚²ãƒ¼ãƒ æ“ä½œè©³ç´°
          game_operations: "ğŸ® ã‚²ãƒ¼ãƒ æ“ä½œ",
          place_stone: "çŸ³ã‚’ç½®ãï¼šç©ºã„ã¦ã„ã‚‹ãƒã‚¹ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦çŸ³ã‚’ç½®ã",
          undo_move:
            "å¾…ã£ãŸï¼šæœ€è¿‘ã®ä¸€æ‰‹ã‚’å–ã‚Šæ¶ˆã™ã“ã¨ãŒã§ãã¾ã™ï¼ˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼+AIå„ä¸€æ‰‹ï¼‰",
          new_game_op: "æ–°ã—ã„ã‚²ãƒ¼ãƒ ï¼šå†é–‹å§‹ã€é€²è¡Œä¸­ã®ã‚²ãƒ¼ãƒ ã¯æ•—åŒ—ã¨ã—ã¦è¨˜éŒ²",
          return_op: "æˆ»ã‚‹ï¼šã‚²ãƒ¼ãƒ çµ‚äº†ã€é€²è¡Œä¸­ã®ã‚²ãƒ¼ãƒ ã¯æ•—åŒ—ã¨ã—ã¦è¨˜éŒ²",

          // ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ 
          score_system: "ğŸ† å‹ç‡ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ",
          initial_score: "ãƒ©ãƒ³ã‚­ãƒ³ã‚°åŸºæº–ï¼šå‹ç‡é †ã§ã‚½ãƒ¼ãƒˆ",
          win_score: "å‹åˆ©ï¼šå‹ç‡å‘ä¸Š",
          draw_score: "å¼•ãåˆ†ã‘ï¼šå‹ç‡ã«å½±éŸ¿",
          lose_score: "æ•—åŒ—ï¼šå‹ç‡ä½ä¸‹",
          quit_score: "æ”¾æ£„/ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼šæ•—åŒ—ã¨ã—ã¦è¨˜éŒ²",

          // æœˆé–“ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«
          monthly_ranking_rules: "ğŸ¯ æœˆé–“ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ï¼š",
          ranking_requirement: "â€¢ ãƒ©ãƒ³ã‚­ãƒ³ã‚°å‚åŠ ã«ã¯æœ€ä½1ã‚²ãƒ¼ãƒ ãŒå¿…è¦",
          ranking_criteria:
            "â€¢ æ®‹ã‚Šãƒã‚¤ãƒ³ãƒˆé †ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ±ºå®šã€åŒç‚¹æ™‚ã¯å‹ç‡ã§ã‚½ãƒ¼ãƒˆ",
          ranking_rewards: "â€¢ æœˆæœ«ã«ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«å¿œã˜ã¦å ±é…¬é…å¸ƒ",
          anti_farming:
            "âš ï¸ ã‚¹ã‚³ã‚¢æ“ä½œé˜²æ­¢ï¼šã‚²ãƒ¼ãƒ ã‚’ã—ãªã„ã‹å°‘ãªã™ãã‚‹ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‹ã‚‰é™¤å¤–",

          // æœˆé–“å ±é…¬ãƒ«ãƒ¼ãƒ«
          monthly_rewards: "ğŸ† æœˆé–“å ±é…¬ãƒ«ãƒ¼ãƒ«",
          reward_pool_allocation: "ğŸ’° å ±é…¬ãƒ—ãƒ¼ãƒ«é…åˆ†",
          reward_settlement: "æ¯æœˆæœ€çµ‚æ—¥ã®æœ€çµ‚æ™‚é–“ã«æ±ºç®—",
          reward_pool_percentage: "å ±é…¬ãƒ—ãƒ¼ãƒ«ã¯ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æœˆé–“åˆ©ç›Šã®50%",
          reward_example: "ä¾‹ï¼šæœˆé–“åˆ©ç›Š100Ï€ã€å ±é…¬ãƒ—ãƒ¼ãƒ«50Ï€",

          // ãƒˆãƒƒãƒ—3é…åˆ†
          top_three_distribution: "ğŸ¥‡ ãƒˆãƒƒãƒ—3é…åˆ†æ¯”ç‡",
          first_place: "ğŸ¥‡ 1ä½",
          second_place: "ğŸ¥ˆ 2ä½",
          third_place: "ğŸ¥‰ 3ä½",

          // é…å¸ƒæ–¹å¼
          distribution_method: "ğŸ“‹ é…å¸ƒæ–¹å¼",
          wallet_distribution:
            "å€‹äººã‚»ãƒ³ã‚¿ãƒ¼ã«ä¿å­˜ã•ã‚ŒãŸã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã«æ‰‹å‹•é…å¸ƒ",
          valid_wallet_required:
            "å—è³è€…ã¯ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæ­£ç¢ºã§æœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™",
          next_day_distribution: "å ±é…¬ã¯æ±ºç®—ç¿Œæ—¥ã«é…å¸ƒã•ã‚Œã¾ã™",
          invalid_wallet_rollover:
            "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ãŒç„¡åŠ¹ãªå ´åˆã€å ±é…¬ã¯ç¿Œæœˆã«ç¹°ã‚Šè¶Šã•ã‚Œã¾ã™",

          // ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«
          leaderboard_rules: "ğŸ“Š ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«",
          ranking_condition: "ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ¡ä»¶ï¼š60ã‚²ãƒ¼ãƒ å®Œäº†ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ²è¼‰",
          ranking_basis: "ãƒ©ãƒ³ã‚­ãƒ³ã‚°åŸºæº–ï¼šç´¯ç©ãƒã‚¤ãƒ³ãƒˆé †ã§ã‚½ãƒ¼ãƒˆ",
          data_statistics: "ãƒ‡ãƒ¼ã‚¿çµ±è¨ˆï¼šæ­´å²çš„ç´¯ç©ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã",
          realtime_update: "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ï¼šå„ã‚²ãƒ¼ãƒ çµ‚äº†å¾Œå³åº§ã«æ›´æ–°",

          // æ¸©ã‹ã„ãƒ’ãƒ³ãƒˆ
          warm_tips:
            "ğŸ‹ åƒå¹´ã®çŸ¥æµã‚’ç¶™æ‰¿ã—ã€å¤å…¸çš„ãªæ£‹èŠ¸ã®ç¾ã—ã•ã‚’ä½“é¨“ã—ã¦ãã ã•ã„\nğŸ’¡ æ™‚é–“ã‚’åˆç†çš„ã«é…åˆ†ã—ã€æ€è€ƒã®æ¥½ã—ã•ã‚’æº€å–«ã—ã¦ãã ã•ã„",

          // ã‚²ãƒ¼ãƒ çµæœé–¢é€£
          game_result: "ã‚²ãƒ¼ãƒ çµæœ",
          congratulations_win: "ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼å‹åˆ©ï¼",
          sorry_lose: "ğŸ˜” ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€æ•—åŒ—ã—ã¾ã—ãŸ",
          draw_result: "ğŸ¤ å¼•ãåˆ†ã‘",
          current_score: "ç¾åœ¨ã®ã‚¹ã‚³ã‚¢",
          win_rate_display: "å‹ç‡",
          total_games_display: "ç·ã‚²ãƒ¼ãƒ æ•°",
          current_rank_display: "ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯",
          not_ranked: "ãƒ©ãƒ³ã‚¯å¤–",
          guest_mode: "ã‚²ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰",
          guest_mode_desc:
            "ç¾åœ¨ã‚²ã‚¹ãƒˆã¨ã—ã¦ã‚²ãƒ¼ãƒ ä¸­ã§ã€ã‚²ãƒ¼ãƒ çµæœã¯ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«è¨˜éŒ²ã•ã‚Œã¾ã›ã‚“ã€‚",
          login_benefits: "ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ç‰¹å…¸ï¼š",
          benefit_stats: "â€¢ ğŸ“Š ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿çµ±è¨ˆ",
          benefit_leaderboard: "â€¢ ğŸ† ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç«¶äº‰å‚åŠ ",
          benefit_pi_service: "â€¢ ğŸ’° Piã‚³ã‚¤ãƒ³ä»˜åŠ ä¾¡å€¤ã‚µãƒ¼ãƒ“ã‚¹",
          benefit_monthly_rewards: "â€¢ ğŸ æœˆé–“å ±é…¬æ´»å‹•",
          play_again: "ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤",
          view_leaderboard: "ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’è¦‹ã‚‹",
          login_now: "ä»Šã™ããƒ­ã‚°ã‚¤ãƒ³",

          // ã‚²ãƒ¼ãƒ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
          return_to_menu: "æˆ»ã‚‹",
          guest_mode_short: "ğŸ® ã‚²ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰",
          ai_battle_title: "ğŸ§  AIå¯¾æˆ¦",
          player_label: "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼",
          ai_label: "AI",
          vs_label: "VS",
          undo_button: "å¾…ã£ãŸ",
          new_game_button: "æ–°ã—ã„ã‚²ãƒ¼ãƒ ",

          // å¾…ã£ãŸé–¢é€£
          undo_confirm: "å¾…ã£ãŸç¢ºèª",
          undo_confirm_message:
            "å¾…ã£ãŸã«ã¯0.1 Ï€ãŒå¿…è¦ã§ã™\nç¾åœ¨ã®æ®‹é«˜ï¼š{0} Ï€\n\nå¾…ã£ãŸã‚’ç¢ºèªã—ã¾ã™ã‹ï¼Ÿ",
          undo_success_title: "å¾…ã£ãŸæˆåŠŸ",
          undo_success_detail: "0.1 Ï€æ¶ˆè²»ã€æ®‹é«˜ï¼š{0} Ï€",
          undo_failed_title: "å¾…ã£ãŸå¤±æ•—",
          undo_failed_message: "æ”¯æ‰•ã„å¤±æ•—",
          insufficient_balance_undo:
            "å¾…ã£ãŸã«ã¯0.1 Ï€ãŒå¿…è¦ã§ã€ç¾åœ¨ã®æ®‹é«˜{0} Ï€ã€æ®‹é«˜ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚\n\nãƒãƒ£ãƒ¼ã‚¸ã—ã¾ã™ã‹ï¼Ÿ",
          continue_game_tip:
            "ç¾åœ¨ã®ã‚²ãƒ¼ãƒ ã‚’ç¶šã‘ã‚‹ã“ã¨ã¯ã§ãã¾ã™ãŒã€å†é–‹ã¯ã§ãã¾ã›ã‚“ã€‚ãƒãƒ£ãƒ¼ã‚¸å¾Œã«ã“ã®æ©Ÿèƒ½ã®ãƒ­ãƒƒã‚¯ã‚’è§£é™¤ã—ã¦ãã ã•ã„ã€‚",

          // ãƒãƒ£ãƒ¼ã‚¸é–¢é€£
          recharge_dialog_title: "ğŸ’° ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒãƒ£ãƒ¼ã‚¸",
          payment_dialog_title: "ğŸ’³ Piã‚³ã‚¤ãƒ³æ”¯æ‰•ã„",
          recharge_amount_display: "ãƒãƒ£ãƒ¼ã‚¸ {0} Ï€",
          order_id_display: "æ³¨æ–‡ç•ªå·ï¼š{0}",
          custom_amount_error:
            "æœ‰åŠ¹ãªãƒãƒ£ãƒ¼ã‚¸é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆæœ€ä½0.1Ï€ï¼‰",

          // å€‹äººã‚»ãƒ³ã‚¿ãƒ¼è©³ç´°å†…å®¹
          monthly_reward_reminder: "ğŸ† æœˆé–“å ±é…¬ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼",
          monthly_reward_desc:
            "æœˆé–“åˆ©ç›Šã®50%ãŒãƒˆãƒƒãƒ—3ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å ±é…¬ã¨ã—ã¦é…åˆ†ã•ã‚Œã¾ã™",

          // æœˆé–“å ±é…¬è©³ç´°èª¬æ˜
          reward_settlement_detail: "æ¯æœˆæœ€çµ‚æ—¥ã®æœ€çµ‚æ™‚é–“ã«æ±ºç®—",
          reward_pool_50_percent: "å ±é…¬ãƒ—ãƒ¼ãƒ«ã¯ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æœˆé–“åˆ©ç›Šã®50%",
          reward_example_detail: "ä¾‹ï¼šæœˆé–“åˆ©ç›Š100Ï€ã€å ±é…¬ãƒ—ãƒ¼ãƒ«50Ï€",
          reward_distribution_manual:
            "å€‹äººã‚»ãƒ³ã‚¿ãƒ¼ã«ä¿å­˜ã•ã‚ŒãŸã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã«æ‰‹å‹•é…å¸ƒ",
          reward_wallet_valid:
            "å—è³è€…ã¯ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæ­£ç¢ºã§æœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™",
          reward_next_day: "å ±é…¬ã¯æ±ºç®—ç¿Œæ—¥ã«é…å¸ƒã•ã‚Œã¾ã™",
          reward_invalid_rollover:
            "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ãŒç„¡åŠ¹ãªå ´åˆã€å ±é…¬ã¯ç¿Œæœˆã«ç¹°ã‚Šè¶Šã•ã‚Œã¾ã™",
          reward_example_calculation: "ğŸ’¡ ä¾‹ï¼šæœˆé–“åˆ©ç›Š100Ï€ã€å ±é…¬ãƒ—ãƒ¼ãƒ«50Ï€",
          first_place_reward: "ğŸ¥‡1ä½ï¼š25Ï€",
          second_place_reward: "ğŸ¥ˆ2ä½ï¼š15Ï€",
          third_place_reward: "ğŸ¥‰3ä½ï¼š10Ï€",

          // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ©ãƒ³ã‚­ãƒ³ã‚°
          global_ranking_title: "ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ©ãƒ³ã‚­ãƒ³ã‚°",
          ranking_subtitle: "ğŸ“Š æœˆé–“å‹ç‡ã«åŸºã¥ããƒ©ãƒ³ã‚­ãƒ³ã‚°",
          ranking_header_rank: "ãƒ©ãƒ³ã‚¯",
          ranking_header_nickname: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ",
          ranking_header_games: "ç·ã‚²ãƒ¼ãƒ æ•°",
          ranking_header_winrate: "å‹ç‡",
          current_rank_not_listed: "ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯ï¼šæœªæ²è¼‰",
          current_rank_label: "ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯",
          not_listed: "æœªæ²è¼‰",
          play_one_game_to_rank:
            "ğŸ® 1ã‚²ãƒ¼ãƒ å®Œäº†ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ²è¼‰ï¼äº”ç›®ä¸¦ã¹ã®æ—…ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼",

          // å€‹äººã‚»ãƒ³ã‚¿ãƒ¼è©³ç´°ãƒ©ãƒ™ãƒ«
          personal_profile_section: "å€‹äººãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«",
          avatar_nickname_section: "ã‚¢ãƒã‚¿ãƒ¼ã¨ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ",
          click_avatar_edit: "ã‚¢ãƒã‚¿ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç·¨é›†",
          click_nickname_edit: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç·¨é›†",
          account_info_section: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±",
          game_stats_section: "ã‚²ãƒ¼ãƒ çµ±è¨ˆ",
          wallet_address_label: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹",
          account_balance_display: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ®‹é«˜",
          refresh_balance_btn: "æ®‹é«˜æ›´æ–°",
          logout_btn: "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",

          // ã‚²ãƒ¼ãƒ çµ±è¨ˆãƒ©ãƒ™ãƒ«
          total_games_label: "ç·ã‚²ãƒ¼ãƒ æ•°",
          wins_label: "å‹åˆ©",
          win_rate_label: "å‹ç‡",
          current_score_label: "ç¾åœ¨ã®ã‚¹ã‚³ã‚¢",
          current_rank_label: "ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯",

          // æ®‹é«˜ç…§ä¼šçŠ¶æ…‹
          balance_querying: "ç…§ä¼šä¸­...",
          balance_query_failed_display: "ç…§ä¼šå¤±æ•—",
          balance_tooltip: "ç·ãƒãƒ£ãƒ¼ã‚¸ï¼š{0} Ï€\nç·æ¶ˆè²»ï¼š{1} Ï€",

          // æ”¯æ‰•ã„æˆåŠŸæƒ…å ±
          payment_success_title: "æ”¯æ‰•ã„æˆåŠŸ",
          payment_success_message: "æ”¯æ‰•ã„æˆåŠŸï¼",
          purchase_success_message: "{0}ã‚’æ­£å¸¸ã«è³¼å…¥ã—ã¾ã—ãŸ",
          transaction_id: "å–å¼•IDï¼š{0}",

          // å€‹äººã‚»ãƒ³ã‚¿ãƒ¼å…¥åŠ›ãƒ’ãƒ³ãƒˆ
          enter_avatar_emoji: "çµµæ–‡å­—ã‚¢ãƒã‚¿ãƒ¼ã‚’å…¥åŠ›ï¼ˆä¾‹ï¼šğŸ˜Šï¼‰",
          click_to_set_nickname: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ è¨­å®šã¯ã‚¯ãƒªãƒƒã‚¯",
          enter_your_nickname: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          loading_text_display: "èª­ã¿è¾¼ã¿ä¸­...",
          refresh_balance_text: "ğŸ”„ æ®‹é«˜æ›´æ–°",
          recharge_text: "ğŸ’° ãƒãƒ£ãƒ¼ã‚¸",
          wallet_format_hint: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ï¼š50æ–‡å­—ã®å¤§æ–‡å­—ã¨æ•°å­—",
          save_wallet: "ğŸ’¾ ä¿å­˜",
          edit_wallet: "âœï¸ ç·¨é›†",
          logout_account_text: "â†©ï¸ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",

          // å€‹äººã‚»ãƒ³ã‚¿ãƒ¼ãƒ’ãƒ³ãƒˆæƒ…å ±
          enter_avatar_hint: "ã‚¢ãƒã‚¿ãƒ¼çµµæ–‡å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          single_emoji_hint: "å˜ä¸€ã®çµµæ–‡å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          avatar_updated: "ã‚¢ãƒã‚¿ãƒ¼ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸï¼",
          nickname_updated: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸï¼",
          enter_wallet_hint: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          wallet_length_error:
            "âŒ ã“ã‚Œã¯æ¨™æº–ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼\n\nç¾åœ¨ã®é•·ã•ï¼š{0}æ–‡å­—\næ¨™æº–é•·ã•ï¼š50æ–‡å­—\n\nå®Œå…¨ãª50æ–‡å­—ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          wallet_format_error:
            "âŒ ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ã‚¨ãƒ©ãƒ¼ï¼\n\nå¤§æ–‡å­—ï¼ˆA-Zï¼‰ã¨æ•°å­—ï¼ˆ0-9ï¼‰ã®ã¿è¨±å¯ã•ã‚Œã¦ã„ã¾ã™\nå…¥åŠ›å†…å®¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„",
          wallet_saved_success: "âœ… ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæ­£å¸¸ã«ä¿å­˜ã•ã‚Œã¾ã—ãŸï¼",
          edit_mode_title: "ç·¨é›†ãƒ¢ãƒ¼ãƒ‰",
          edit_mode_message:
            "ğŸ’¡ ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã—ãŸ\n\nã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä¿®æ­£å¾Œã€ä¿å­˜ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„",
          success_title: "æˆåŠŸ",
          error_title: "ã‚¨ãƒ©ãƒ¼",

          // ã‚²ãƒ¼ãƒ çµ‚äº†é–¢é€£
          you_win: "ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼å‹åˆ©ï¼",
          you_lose: "ğŸ˜” AIã®å‹åˆ©ã§ã™ã€é ‘å¼µã£ã¦ï¼",
          draw: "ğŸ¤ å¼•ãåˆ†ã‘ï¼",
          game_over: "ã‚²ãƒ¼ãƒ çµ‚äº†",

          // ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãƒœã‚¿ãƒ³
          global_ranking: "ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ©ãƒ³ã‚­ãƒ³ã‚°",
          ai_battle: "AIå¯¾æˆ¦",
          personal_center: "å€‹äººã‚»ãƒ³ã‚¿ãƒ¼",
          game_instructions: "ã‚²ãƒ¼ãƒ èª¬æ˜",

          // æ¥ç¶šã‚¨ãƒ©ãƒ¼
          connection_failed: "æ¥ç¶šå¤±æ•—",
          connection_error_detail:
            "Pi Networkã«æ¥ç¶šã§ãã¾ã›ã‚“ã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèªã—ã¦å†è©¦è¡Œã—ã¦ãã ã•ã„",
          login_with_pi: "Piã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³",
          login_benefits_note:
            "ãƒ­ã‚°ã‚¤ãƒ³å¾Œã€å®Œå…¨ãªã‚²ãƒ¼ãƒ æ©Ÿèƒ½ã¨Piã‚³ã‚¤ãƒ³å ±é…¬ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„",

          // ãƒãƒ£ãƒ¼ã‚¸ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
          recharge_amount_selection: "ãƒãƒ£ãƒ¼ã‚¸é‡‘é¡é¸æŠ",
          custom_amount_placeholder: "ã‚«ã‚¹ã‚¿ãƒ é‡‘é¡",
          custom_recharge: "ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ£ãƒ¼ã‚¸",
          cancel: "ã‚­ãƒ£ãƒ³ã‚»ãƒ«",

          // ã‚¨ãƒ©ãƒ¼é€šçŸ¥
          please_login_first: "ã¾ãšãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„",
          create_order_failed: "æ³¨æ–‡ä½œæˆå¤±æ•—",
          network_error_retry: "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã€å¾Œã§ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„",
          pi_login_failed: "Pi Networkãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—",
          login_error: "ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",
          pi_sdk_not_loaded:
            "Pi Network SDKãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„ãŸã‚ã€æ”¯æ‰•ã„æ©Ÿèƒ½ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“",
          create_payment_failed: "æ”¯æ‰•ã„ä½œæˆå¤±æ•—",

          // æ”¯æ‰•ã„ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
          payment_method: "æ”¯æ‰•ã„æ–¹æ³•",
          pi_wallet_transfer: "ğŸ“± Piã‚¦ã‚©ãƒ¬ãƒƒãƒˆé€é‡‘",
          transfer_instruction:
            "Piã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ä»¥ä¸‹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã«é€é‡‘ã—ã¦ãã ã•ã„ï¼š",
          transfer_amount_warning:
            "âš ï¸ é€é‡‘é‡‘é¡ãŒ<strong>{0} Ï€</strong>ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„",
          transfer_memo: "é€é‡‘ãƒ¡ãƒ¢ï¼š{0}",
          transaction_hash_placeholder: "å–å¼•ãƒãƒƒã‚·ãƒ¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          transaction_hash_instruction:
            "é€é‡‘å®Œäº†å¾Œã€Piã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‹ã‚‰å–å¼•ãƒãƒƒã‚·ãƒ¥ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä¸Šè¨˜ã®å…¥åŠ›æ¬„ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„",
          verify_payment: "æ”¯æ‰•ã„ç¢ºèª",
          order_validity: "æ³¨æ–‡æœ‰åŠ¹æœŸé™ï¼š30åˆ†",

          // æ”¯æ‰•ã„ç¢ºèª
          please_enter_transaction_hash: "å–å¼•ãƒãƒƒã‚·ãƒ¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          recharge_success: "ãƒãƒ£ãƒ¼ã‚¸æˆåŠŸ",
          recharge_success_message:
            "ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼{0} Ï€ ãƒãƒ£ãƒ¼ã‚¸æˆåŠŸï¼\nç¾åœ¨ã®æ®‹é«˜ï¼š{1} Ï€",
          verification_failed: "ç¢ºèªå¤±æ•—",

          // ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼ç¢ºèª
          timeout_game_over: "â° æ€è€ƒæ™‚é–“è¶…éã€ã‚²ãƒ¼ãƒ å¤±æ•—ï¼",
          login_success: "ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ",
          welcome_user: "ã‚ˆã†ã“ãã€{0}",
          abandon_current_game: "ç¾åœ¨ã®ã‚²ãƒ¼ãƒ ã‚’æ”¾æ£„",
          abandon_game_warning:
            "ç¾åœ¨ã®ã‚²ãƒ¼ãƒ ãŒé€²è¡Œä¸­ã§ã™ã€‚å†é–‹å§‹ã™ã‚‹ã¨æ•—åŒ—ã¨ã—ã¦è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚\n\nç¾åœ¨ã®ã‚²ãƒ¼ãƒ ã‚’æ”¾æ£„ã—ã¾ã™ã‹ï¼Ÿ",
          restart_game: "ã‚²ãƒ¼ãƒ å†é–‹å§‹",
          restart_game_confirm: "å†é–‹å§‹ã—ã¾ã™ã‹ï¼Ÿ",
          abandon_game_return_warning:
            "ç¾åœ¨ã®ã‚²ãƒ¼ãƒ ãŒé€²è¡Œä¸­ã§ã™ã€‚ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹ã¨æ•—åŒ—ã¨ã—ã¦è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚\n\nç¾åœ¨ã®ã‚²ãƒ¼ãƒ ã‚’æ”¾æ£„ã—ã¾ã™ã‹ï¼Ÿ",

          // å‹æ•—è¡¨ç¤ºå½¢å¼
          wins_losses_format: "({0}å‹{1}æ•—)",
          monthly_games: "æœˆé–“ã‚²ãƒ¼ãƒ ",
          play_again: "ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤",
          view_leaderboard: "ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’è¦‹ã‚‹",
          login_now: "ä»Šã™ããƒ­ã‚°ã‚¤ãƒ³",
          guest_mode: "ã‚²ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰",
          guest_mode_desc:
            "ç¾åœ¨ã‚²ã‚¹ãƒˆã¨ã—ã¦ãƒ—ãƒ¬ã‚¤ã—ã¦ãŠã‚Šã€ã‚²ãƒ¼ãƒ çµæœã¯ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«è¨˜éŒ²ã•ã‚Œã¾ã›ã‚“ã€‚",
          login_benefits: "ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ç‰¹å…¸:",
          benefit_stats: "â€¢ ğŸ“Š ã‚²ãƒ¼ãƒ çµ±è¨ˆ",
          benefit_leaderboard: "â€¢ ğŸ† ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç«¶äº‰ã¸ã®å‚åŠ ",
          benefit_pi_service: "â€¢ ğŸ’° Piã‚³ã‚¤ãƒ³ä»˜åŠ ä¾¡å€¤ã‚µãƒ¼ãƒ“ã‚¹",
          benefit_monthly_rewards: "â€¢ ğŸ æœˆé–“å ±é…¬æ´»å‹•",
          rank_position: "#{0}ä½",

          // ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒƒãƒé–¢é€£
          searching_opponent: "å¯¾æˆ¦ç›¸æ‰‹ã‚’æ¤œç´¢ä¸­...",
          online_players: "ç¾åœ¨ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼",
          people_suffix: "äºº",
          match_description: "ã‚·ã‚¹ãƒ†ãƒ ãŒåŒãƒ¬ãƒ™ãƒ«ã®å¯¾æˆ¦ç›¸æ‰‹ã‚’ãƒãƒƒãƒãƒ³ã‚°ã—ã¾ã™",
          estimated_wait: "äºˆæƒ³å¾…æ©Ÿæ™‚é–“ï¼š30-60ç§’",
          match_found: "å¯¾æˆ¦ç›¸æ‰‹ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸï¼",
          ai_opponent_name: "AIã‚¹ãƒãƒ¼ãƒˆå¯¾æˆ¦ç›¸æ‰‹",
          black_stone: "é»’çŸ³",
          white_stone: "ç™½çŸ³",
        },

        vi: {
          // Giao diá»‡n cÆ¡ báº£n
          noscript: "Báº¡n cáº§n báº­t JavaScript Ä‘á»ƒ cháº¡y á»©ng dá»¥ng nÃ y.",
          game_title: "Cá» CarÃ´",
          game_subtitle: "TrÃ² chÆ¡i cá» carÃ´ cháº¡y trÃªn blockchain pinetwork",
          online_match: "GhÃ©p ÄÃ´i Trá»±c Tuyáº¿n",
          global_ranking: "Báº£ng Xáº¿p Háº¡ng ToÃ n Cáº§u",
          ai_battle: "Äáº¥u vá»›i AI",
          personal_center: "Trung TÃ¢m CÃ¡ NhÃ¢n",
          game_instructions: "HÆ°á»›ng Dáº«n TrÃ² ChÆ¡i",
          error_message: "âŒ ThÃ´ng BÃ¡o Lá»—i",
          login_with_pi: "ÄÄƒng nháº­p báº±ng Pi Network",
          login_note:
            "Báº±ng cÃ¡ch nháº¥p Ä‘Äƒng nháº­p, báº¡n Ä‘á»“ng Ã½ sá»­ dá»¥ng tÃ i khoáº£n Pi Network Ä‘á»ƒ xÃ¡c thá»±c",

          // TÃ¹y chá»n ngÃ´n ngá»¯
          lang_zh: "ä¸­æ–‡",
          lang_en: "English",
          lang_ko: "í•œêµ­ì–´",
          lang_ja: "æ—¥æœ¬èª",
          lang_vi: "Tiáº¿ng Viá»‡t",

          // LiÃªn quan Ä‘áº¿n trÃ² chÆ¡i
          current_player: "NgÆ°á»i ChÆ¡i Hiá»‡n Táº¡i",
          your_turn: "LÆ°á»£t Cá»§a Báº¡n",
          opponent_turn: "LÆ°á»£t Cá»§a Äá»‘i Thá»§",
          ai_thinking: "ğŸ¤– AI Ä‘ang suy nghÄ©...",
          thinking_time: "â±ï¸ Thá»i gian suy nghÄ©: {0}s",
          remaining_time: "âš ï¸ Thá»i gian cÃ²n láº¡i: {0}s",
          timeout_warning: "ğŸš¨ Cáº£nh bÃ¡o háº¿t thá»i gian: {0}s",
          timeout: "â° Háº¿t thá»i gian",

          // Káº¿t quáº£ trÃ² chÆ¡i
          you_win: "ğŸ‰ ChÃºc má»«ng! Báº¡n tháº¯ng!",
          you_lose: "ğŸ˜” Tiáº¿c quÃ¡, báº¡n thua",
          draw: "ğŸ¤ HÃ²a",
          game_over: "Káº¿t ThÃºc TrÃ² ChÆ¡i",

          // NÃºt vÃ  thao tÃ¡c
          new_game: "TrÃ² ChÆ¡i Má»›i",
          undo: "HoÃ n TÃ¡c",
          restart: "Khá»Ÿi Äá»™ng Láº¡i",
          back_to_menu: "Vá» Menu",
          confirm: "XÃ¡c Nháº­n",
          cancel: "Há»§y",
          close: "ÄÃ³ng",
          save: "LÆ°u",
          update: "Cáº­p Nháº­t",
          enter_game: "VÃ o Game",

          // Trung tÃ¢m cÃ¡ nhÃ¢n
          personal_info: "ThÃ´ng Tin CÃ¡ NhÃ¢n",
          game_stats: "Thá»‘ng KÃª TrÃ² ChÆ¡i",
          total_games: "Tá»•ng Sá»‘ Tráº­n",
          wins: "Tháº¯ng",
          losses: "Thua",
          win_rate: "Tá»· Lá»‡ Tháº¯ng",
          current_rank: "Xáº¿p Háº¡ng Hiá»‡n Táº¡i",
          wallet_address: "Äá»‹a Chá»‰ VÃ­",
          balance: "Sá»‘ DÆ°",
          nickname: "Biá»‡t Danh",
          avatar: "HÃ¬nh Äáº¡i Diá»‡n",

          // Lá»—i vÃ  thÃ´ng bÃ¡o
          connection_failed: "Káº¿t Ná»‘i Tháº¥t Báº¡i",
          network_error: "Lá»—i máº¡ng, vui lÃ²ng kiá»ƒm tra káº¿t ná»‘i vÃ  thá»­ láº¡i",
          login_failed: "ÄÄƒng Nháº­p Tháº¥t Báº¡i",
          insufficient_balance: "Sá»‘ DÆ° KhÃ´ng Äá»§",
          invalid_move: "NÆ°á»›c Äi KhÃ´ng Há»£p Lá»‡",
          game_not_started: "TrÃ² ChÆ¡i ChÆ°a Báº¯t Äáº§u",

          // LiÃªn quan Ä‘áº¿n thanh toÃ¡n
          payment_confirm: "XÃ¡c Nháº­n Thanh ToÃ¡n",
          payment_success: "Thanh ToÃ¡n ThÃ nh CÃ´ng",
          payment_failed: "Thanh ToÃ¡n Tháº¥t Báº¡i",
          payment_cancelled: "Thanh ToÃ¡n ÄÃ£ Há»§y",
          recharge: "Náº¡p Tiá»n",

          // Báº£ng xáº¿p háº¡ng
          leaderboard: "Báº£ng Xáº¿p Háº¡ng",
          rank: "Xáº¿p Háº¡ng",
          player: "NgÆ°á»i ChÆ¡i",
          score: "Äiá»ƒm",
          games_played: "Tráº­n ÄÃ£ ChÆ¡i",

          // KhÃ¡c
          loading: "Äang táº£i...",
          connecting: "Äang káº¿t ná»‘i...",
          please_wait: "Vui lÃ²ng Ä‘á»£i...",
          success: "ThÃ nh CÃ´ng",
          failed: "Tháº¥t Báº¡i",
          connecting_pi_network: "Äang káº¿t ná»‘i Pi Network...",
          entering_game: "Äang vÃ o game...",

          // Popup vÃ  thÃ´ng bÃ¡o
          hint: "Gá»£i Ã",
          confirm_purchase: "XÃ¡c Nháº­n Mua",
          confirm_payment: "XÃ¡c Nháº­n Thanh ToÃ¡n",
          payment_amount: "{0} Ï€",
          enter_nickname: "Vui lÃ²ng nháº­p biá»‡t danh",
          nickname_too_long: "Biá»‡t danh khÃ´ng Ä‘Æ°á»£c vÆ°á»£t quÃ¡ 20 kÃ½ tá»±",
          nickname_forbidden: "Biá»‡t danh chá»©a tá»« bá»‹ cáº¥m, vui lÃ²ng nháº­p láº¡i",
          logout_confirm: "XÃ¡c Nháº­n ÄÄƒng Xuáº¥t",
          logout_message:
            "Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n Ä‘Äƒng xuáº¥t? Äiá»u nÃ y sáº½ xÃ³a táº¥t cáº£ dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u cá»¥c bá»™.",
          logout_success: "ÄÄƒng Xuáº¥t ThÃ nh CÃ´ng",
          logout_success_message: "ÄÃ£ Ä‘Äƒng xuáº¥t thÃ nh cÃ´ng!",
          please_login_first: "Vui lÃ²ng Ä‘Äƒng nháº­p trÆ°á»›c",

          // HÆ°á»›ng dáº«n trÃ² chÆ¡i
          game_instructions_title: "HÆ°á»›ng Dáº«n TrÃ² ChÆ¡i",
          game_history_title: "Lá»‹ch Sá»­ Cá» CarÃ´",
          game_history_desc:
            'Truyá»n thuyáº¿t ká»ƒ ráº±ng cá» carÃ´ ra Ä‘á»i cÃ¡ch Ä‘Ã¢y hÆ¡n 4000 nÄƒm vÃ o thá»i HoÃ ng Ä‘áº¿ NghiÃªu. NghiÃªu Ä‘Ã£ phÃ¡t minh ra cá» Ä‘Ã¡ Ä‘á»ƒ giÃ¡o dá»¥c con trai Äan Chu, sau Ä‘Ã³ Ä‘Æ°á»£c Thuáº¥n cáº£i tiáº¿n thÃ nh trÃ² chÆ¡i "NgÅ© tinh liÃªn chÃ¢u", dáº§n hÃ¬nh thÃ nh nguyÃªn máº«u cá»§a cá» carÃ´ hiá»‡n Ä‘áº¡i.\nTá»« trÃ² chÆ¡i dÃ¢n gian thá»i NghiÃªu-Thuáº¥n, Ä‘áº¿n viá»‡c lan truyá»n sang ÄÃ´ng Ã vÃ o thá»i Nam Báº¯c triá»u, rá»“i Ä‘Æ°á»£c Nháº­t Báº£n cáº£i tiáº¿n thÃ nh mÃ´n thá»ƒ thao thi Ä‘áº¥u, cuá»‘i cÃ¹ng trá»Ÿ thÃ nh dá»± Ã¡n cá» vua toÃ n cáº§u.',

          // Ná»™i dung chi tiáº¿t hÆ°á»›ng dáº«n trÃ² chÆ¡i
          game_history_section: "Nguá»“n Gá»‘c Lá»‹ch Sá»­ Cá» CarÃ´",
          game_rules_section: "Luáº­t ChÆ¡i",
          game_rules_title: "ğŸ¯ Quy Táº¯c CÆ¡ Báº£n",

          // Trung tÃ¢m cÃ¡ nhÃ¢n
          personal_center_title: "Trung TÃ¢m CÃ¡ NhÃ¢n",
          wallet_address_placeholder:
            "Nháº­p Ä‘á»‹a chá»‰ vÃ­ 50 kÃ½ tá»± (chá»¯ hoa vÃ  sá»‘)",
          wallet_address_format: "Äá»‹nh dáº¡ng Ä‘á»‹a chá»‰ vÃ­: 50 chá»¯ hoa vÃ  sá»‘",

          // LiÃªn quan Ä‘áº¿n thanh toÃ¡n
          insufficient_balance_title: "Sá»‘ DÆ° KhÃ´ng Äá»§",
          insufficient_balance_message:
            "HoÃ n tÃ¡c cáº§n 0.1 Ï€, sá»‘ dÆ° hiá»‡n táº¡i {0} Ï€, sá»‘ dÆ° khÃ´ng Ä‘á»§.\n\nBáº¡n cÃ³ muá»‘n náº¡p tiá»n khÃ´ng?",
          recharge_prompt:
            "Náº¡p Pi coin vÃ o tÃ i khoáº£n game cá»§a báº¡n vÃ  táº­n hÆ°á»Ÿng nhiá»u tÃ­nh nÄƒng game hÆ¡n!",
          continue_without_recharge:
            "Báº¡n cÃ³ thá»ƒ tiáº¿p tá»¥c trÃ² chÆ¡i hiá»‡n táº¡i nhÆ°ng khÃ´ng thá»ƒ khá»Ÿi Ä‘á»™ng láº¡i. Má»Ÿ khÃ³a tÃ­nh nÄƒng nÃ y sau khi náº¡p tiá»n.",
          undo_success: "HoÃ n TÃ¡c ThÃ nh CÃ´ng",
          undo_success_message: "ÄÃ£ tiÃªu thá»¥ 0.1 Ï€, sá»‘ dÆ°: {0} Ï€",
          undo_failed: "HoÃ n TÃ¡c Tháº¥t Báº¡i",
          network_error_retry: "Lá»—i máº¡ng, vui lÃ²ng thá»­ láº¡i sau",
          invalid_amount: "Vui lÃ²ng nháº­p sá»‘ tiá»n náº¡p há»£p lá»‡ (tá»‘i thiá»ƒu 0.1Ï€)",

          // TÃªn váº­t pháº©m
          item_hint: "Váº­t Pháº©m Gá»£i Ã",
          item_undo: "VÃ© HoÃ n TÃ¡c",
          item_theme: "GÃ³i Chá»§ Äá»",
          item_vip: "ThÃ nh ViÃªn VIP",
          item_unknown: "Váº­t Pháº©m KhÃ´ng XÃ¡c Äá»‹nh",

          // Báº£ng xáº¿p háº¡ng vÃ  thá»‘ng kÃª
          current_ranking:
            "ğŸ¯ Xáº¿p háº¡ng hiá»‡n táº¡i: #{0} | ({1}T {2}B) | Tá»· lá»‡ tháº¯ng: {3}%",
          leaderboard_update_tip:
            "Báº£ng xáº¿p háº¡ng cáº­p nháº­t theo thá»i gian thá»±c, tiáº¿p tá»¥c chÆ¡i Ä‘á»ƒ cáº£i thiá»‡n xáº¿p háº¡ng cá»§a báº¡n!",

          // Quy táº¯c chi tiáº¿t trÃ² chÆ¡i
          basic_rules_detail_1:
            "TrÃªn bÃ n cá» 15Ã—15, ngÆ°á»i chÆ¡i dÃ¹ng quÃ¢n Ä‘en, AI dÃ¹ng quÃ¢n tráº¯ng",
          basic_rules_detail_2:
            "Hai bÃªn luÃ¢n phiÃªn Ä‘áº·t quÃ¢n, ai ná»‘i Ä‘Æ°á»£c 5 quÃ¢n trÆ°á»›c sáº½ tháº¯ng",
          basic_rules_detail_3:
            "5 quÃ¢n cÃ³ thá»ƒ ná»‘i theo hÆ°á»›ng ngang, dá»c hoáº·c chÃ©o",
          basic_rules_detail_4:
            "Náº¿u bÃ n cá» Ä‘áº§y mÃ  khÃ´ng cÃ³ ai tháº¯ng thÃ¬ lÃ  hÃ²a",

          // Quy táº¯c thá»i gian lÆ°á»£t
          turn_time_rules: "â±ï¸ Quy Táº¯c Thá»i Gian LÆ°á»£t",
          thinking_time_rule: "Thá»i gian suy nghÄ©: 60 giÃ¢y má»—i lÆ°á»£t",
          time_warning_rule:
            "Cáº£nh bÃ¡o thá»i gian: Cáº£nh bÃ¡o mÃ u vÃ ng khi cÃ²n 30 giÃ¢y",
          urgent_warning_rule:
            "Cáº£nh bÃ¡o kháº©n cáº¥p: Nháº¥p nhÃ¡y mÃ u Ä‘á» trong 10 giÃ¢y cuá»‘i",
          timeout_rule:
            "Thua do háº¿t thá»i gian: Háº¿t thá»i gian sáº½ tá»± Ä‘á»™ng ghi nháº­n lÃ  thua",

          // Chi tiáº¿t thao tÃ¡c trÃ² chÆ¡i
          game_operations: "ğŸ® Thao TÃ¡c TrÃ² ChÆ¡i",
          place_stone: "Äáº·t quÃ¢n: Nháº¥p vÃ o Ã´ trá»‘ng Ä‘á»ƒ Ä‘áº·t quÃ¢n",
          undo_move:
            "HoÃ n tÃ¡c: CÃ³ thá»ƒ há»§y nÆ°á»›c Ä‘i gáº§n nháº¥t (ngÆ°á»i chÆ¡i + AI má»—i bÃªn má»™t nÆ°á»›c)",
          new_game_op:
            "TrÃ² chÆ¡i má»›i: Báº¯t Ä‘áº§u láº¡i, trÃ² chÆ¡i Ä‘ang diá»…n ra sáº½ Ä‘Æ°á»£c ghi lÃ  thua",
          return_op:
            "Quay láº¡i: ThoÃ¡t trÃ² chÆ¡i, trÃ² chÆ¡i Ä‘ang diá»…n ra sáº½ Ä‘Æ°á»£c ghi lÃ  thua",

          // Há»‡ thá»‘ng Ä‘iá»ƒm sá»‘
          score_system: "ğŸ† Há»‡ Thá»‘ng Xáº¿p Háº¡ng Tá»· Lá»‡ Tháº¯ng",
          initial_score: "CÆ¡ sá»Ÿ xáº¿p háº¡ng: Sáº¯p xáº¿p theo tá»· lá»‡ tháº¯ng",
          win_score: "Tháº¯ng: Cáº£i thiá»‡n tá»· lá»‡ tháº¯ng",
          draw_score: "HÃ²a: áº¢nh hÆ°á»Ÿng tá»· lá»‡ tháº¯ng",
          lose_score: "Thua: Giáº£m tá»· lá»‡ tháº¯ng",
          quit_score: "Bá» cuá»™c/Háº¿t thá»i gian: Ghi nháº­n lÃ  thua",

          // Quy táº¯c xáº¿p háº¡ng hÃ ng thÃ¡ng
          monthly_ranking_rules: "ğŸ¯ Quy Táº¯c Xáº¿p Háº¡ng HÃ ng ThÃ¡ng:",
          ranking_requirement: "â€¢ Cáº§n tá»‘i thiá»ƒu 1 tráº­n Ä‘á»ƒ tham gia xáº¿p háº¡ng",
          ranking_criteria:
            "â€¢ Xáº¿p háº¡ng theo Ä‘iá»ƒm cÃ²n láº¡i, Ä‘iá»ƒm báº±ng nhau thÃ¬ sáº¯p xáº¿p theo tá»· lá»‡ tháº¯ng",
          ranking_rewards: "â€¢ PhÃ¡t thÆ°á»Ÿng cuá»‘i thÃ¡ng dá»±a trÃªn xáº¿p háº¡ng",
          anti_farming:
            "âš ï¸ CÆ¡ cháº¿ chá»‘ng gian láº­n: NgÆ°á»i chÆ¡i khÃ´ng chÆ¡i hoáº·c chÆ¡i quÃ¡ Ã­t sáº½ khÃ´ng tham gia xáº¿p háº¡ng",

          // Quy táº¯c thÆ°á»Ÿng hÃ ng thÃ¡ng
          monthly_rewards: "ğŸ† Quy Táº¯c ThÆ°á»Ÿng HÃ ng ThÃ¡ng",
          reward_pool_allocation: "ğŸ’° PhÃ¢n Bá»• Quá»¹ ThÆ°á»Ÿng",
          reward_settlement: "Quyáº¿t toÃ¡n vÃ o giá» cuá»‘i cá»§a ngÃ y cuá»‘i má»—i thÃ¡ng",
          reward_pool_percentage:
            "Quá»¹ thÆ°á»Ÿng lÃ  50% lá»£i nhuáº­n hÃ ng thÃ¡ng cá»§a ná»n táº£ng",
          reward_example: "VÃ­ dá»¥: Lá»£i nhuáº­n thÃ¡ng 100Ï€, quá»¹ thÆ°á»Ÿng 50Ï€",

          // PhÃ¢n bá»• top 3
          top_three_distribution: "ğŸ¥‡ Tá»· Lá»‡ PhÃ¢n Bá»• Top 3",
          first_place: "ğŸ¥‡ Háº¡ng Nháº¥t",
          second_place: "ğŸ¥ˆ Háº¡ng NhÃ¬",
          third_place: "ğŸ¥‰ Háº¡ng Ba",

          // PhÆ°Æ¡ng thá»©c phÃ¡t thÆ°á»Ÿng
          distribution_method: "ğŸ“‹ PhÆ°Æ¡ng Thá»©c PhÃ¡t ThÆ°á»Ÿng",
          wallet_distribution:
            "PhÃ¡t thÆ°á»Ÿng thá»§ cÃ´ng theo Ä‘á»‹a chá»‰ vÃ­ Ä‘Æ°á»£c lÆ°u trong trung tÃ¢m cÃ¡ nhÃ¢n",
          valid_wallet_required:
            "NgÆ°á»i tháº¯ng giáº£i pháº£i Ä‘áº£m báº£o Ä‘á»‹a chá»‰ vÃ­ chÃ­nh xÃ¡c vÃ  há»£p lá»‡",
          next_day_distribution:
            "ThÆ°á»Ÿng sáº½ Ä‘Æ°á»£c phÃ¡t vÃ o ngÃ y sau khi quyáº¿t toÃ¡n",
          invalid_wallet_rollover:
            "Náº¿u Ä‘á»‹a chá»‰ vÃ­ khÃ´ng há»£p lá»‡, thÆ°á»Ÿng sáº½ Ä‘Æ°á»£c chuyá»ƒn sang thÃ¡ng sau",

          // Quy táº¯c báº£ng xáº¿p háº¡ng
          leaderboard_rules: "ğŸ“Š Quy Táº¯c Báº£ng Xáº¿p Háº¡ng",
          ranking_condition:
            "Äiá»u kiá»‡n xáº¿p háº¡ng: HoÃ n thÃ nh 60 tráº­n Ä‘á»ƒ Ä‘Æ°á»£c lÃªn báº£ng",
          ranking_basis: "CÆ¡ sá»Ÿ xáº¿p háº¡ng: Sáº¯p xáº¿p theo Ä‘iá»ƒm tÃ­ch lÅ©y",
          data_statistics:
            "Thá»‘ng kÃª dá»¯ liá»‡u: Dá»±a trÃªn dá»¯ liá»‡u tÃ­ch lÅ©y lá»‹ch sá»­",
          realtime_update:
            "Cáº­p nháº­t thá»i gian thá»±c: Cáº­p nháº­t ngay sau má»—i tráº­n Ä‘áº¥u",

          // Lá»i khuyÃªn áº¥m Ã¡p
          warm_tips:
            "ğŸ‹ Káº¿ thá»«a trÃ­ tuá»‡ ngÃ n nÄƒm, tráº£i nghiá»‡m váº» Ä‘áº¹p cá» cá»• Ä‘iá»ƒn\nğŸ’¡ Sáº¯p xáº¿p thá»i gian há»£p lÃ½, táº­n hÆ°á»Ÿng niá»m vui suy nghÄ©",

          // LiÃªn quan Ä‘áº¿n káº¿t quáº£ trÃ² chÆ¡i
          game_result: "Káº¿t Quáº£ TrÃ² ChÆ¡i",
          congratulations_win: "ğŸ‰ ChÃºc má»«ng! Báº¡n tháº¯ng!",
          sorry_lose: "ğŸ˜” Xin lá»—i, báº¡n Ä‘Ã£ thua",
          draw_result: "ğŸ¤ HÃ²a",
          current_score: "Äiá»ƒm Hiá»‡n Táº¡i",
          win_rate_display: "Tá»· Lá»‡ Tháº¯ng",
          total_games_display: "Tá»•ng Sá»‘ Tráº­n",
          current_rank_display: "Xáº¿p Háº¡ng Hiá»‡n Táº¡i",
          not_ranked: "ChÆ°a CÃ³ Xáº¿p Háº¡ng",
          guest_mode: "Cháº¿ Äá»™ KhÃ¡ch",
          guest_mode_desc:
            "Báº¡n hiá»‡n Ä‘ang chÆ¡i vá»›i tÆ° cÃ¡ch khÃ¡ch, káº¿t quáº£ trÃ² chÆ¡i sáº½ khÃ´ng Ä‘Æ°á»£c ghi vÃ o báº£ng xáº¿p háº¡ng.",
          login_benefits: "Sau khi Ä‘Äƒng nháº­p, táº­n hÆ°á»Ÿng:",
          benefit_stats: "â€¢ ğŸ“Š Thá»‘ng kÃª dá»¯ liá»‡u trÃ² chÆ¡i",
          benefit_leaderboard: "â€¢ ğŸ† Tham gia cáº¡nh tranh báº£ng xáº¿p háº¡ng",
          benefit_pi_service: "â€¢ ğŸ’° Dá»‹ch vá»¥ giÃ¡ trá»‹ gia tÄƒng Pi coin",
          benefit_monthly_rewards: "â€¢ ğŸ Hoáº¡t Ä‘á»™ng thÆ°á»Ÿng hÃ ng thÃ¡ng",
          play_again: "ChÆ¡i Láº¡i",
          view_leaderboard: "Xem Báº£ng Xáº¿p Háº¡ng",
          login_now: "ÄÄƒng Nháº­p Ngay",

          // Giao diá»‡n trÃ² chÆ¡i
          return_to_menu: "Quay Láº¡i",
          guest_mode_short: "ğŸ® Cháº¿ Äá»™ KhÃ¡ch",
          ai_battle_title: "ğŸ§  Äáº¥u Vá»›i AI",
          player_label: "NgÆ°á»i ChÆ¡i",
          ai_label: "AI",
          vs_label: "VS",
          undo_button: "HoÃ n TÃ¡c",
          new_game_button: "TrÃ² ChÆ¡i Má»›i",

          // LiÃªn quan Ä‘áº¿n hoÃ n tÃ¡c
          undo_confirm: "XÃ¡c Nháº­n HoÃ n TÃ¡c",
          undo_confirm_message:
            "HoÃ n tÃ¡c cáº§n 0.1 Ï€\nSá»‘ dÆ° hiá»‡n táº¡i: {0} Ï€\n\nXÃ¡c nháº­n hoÃ n tÃ¡c?",
          undo_success_title: "HoÃ n TÃ¡c ThÃ nh CÃ´ng",
          undo_success_detail: "ÄÃ£ tiÃªu thá»¥ 0.1 Ï€, sá»‘ dÆ°: {0} Ï€",
          undo_failed_title: "HoÃ n TÃ¡c Tháº¥t Báº¡i",
          undo_failed_message: "Thanh toÃ¡n tháº¥t báº¡i",
          insufficient_balance_undo:
            "HoÃ n tÃ¡c cáº§n 0.1 Ï€, sá»‘ dÆ° hiá»‡n táº¡i {0} Ï€, sá»‘ dÆ° khÃ´ng Ä‘á»§.\n\nBáº¡n cÃ³ muá»‘n náº¡p tiá»n khÃ´ng?",
          continue_game_tip:
            "Báº¡n cÃ³ thá»ƒ tiáº¿p tá»¥c trÃ² chÆ¡i hiá»‡n táº¡i nhÆ°ng khÃ´ng thá»ƒ khá»Ÿi Ä‘á»™ng láº¡i. Má»Ÿ khÃ³a tÃ­nh nÄƒng nÃ y sau khi náº¡p tiá»n.",

          // LiÃªn quan Ä‘áº¿n náº¡p tiá»n
          recharge_dialog_title: "ğŸ’° Náº¡p Tiá»n TÃ i Khoáº£n",
          payment_dialog_title: "ğŸ’³ Thanh ToÃ¡n Pi Coin",
          recharge_amount_display: "Náº¡p {0} Ï€",
          order_id_display: "MÃ£ Ä‘Æ¡n hÃ ng: {0}",
          custom_amount_error:
            "Vui lÃ²ng nháº­p sá»‘ tiá»n náº¡p há»£p lá»‡ (tá»‘i thiá»ƒu 0.1Ï€)",

          // Ná»™i dung chi tiáº¿t trung tÃ¢m cÃ¡ nhÃ¢n
          monthly_reward_reminder: "ğŸ† Nháº¯c Nhá»Ÿ ThÆ°á»Ÿng HÃ ng ThÃ¡ng",
          monthly_reward_desc:
            "50% lá»£i nhuáº­n hÃ ng thÃ¡ng sáº½ Ä‘Æ°á»£c phÃ¢n phá»‘i cho 3 ngÆ°á»i chÆ¡i hÃ ng Ä‘áº§u lÃ m pháº§n thÆ°á»Ÿng",

          // Giáº£i thÃ­ch chi tiáº¿t thÆ°á»Ÿng hÃ ng thÃ¡ng
          reward_settlement_detail:
            "Quyáº¿t toÃ¡n vÃ o giá» cuá»‘i cá»§a ngÃ y cuá»‘i má»—i thÃ¡ng",
          reward_pool_50_percent:
            "Quá»¹ thÆ°á»Ÿng lÃ  50% lá»£i nhuáº­n hÃ ng thÃ¡ng cá»§a ná»n táº£ng",
          reward_example_detail: "VÃ­ dá»¥: Lá»£i nhuáº­n thÃ¡ng 100Ï€, quá»¹ thÆ°á»Ÿng 50Ï€",
          reward_distribution_manual:
            "PhÃ¡t thÆ°á»Ÿng thá»§ cÃ´ng theo Ä‘á»‹a chá»‰ vÃ­ Ä‘Æ°á»£c lÆ°u trong trung tÃ¢m cÃ¡ nhÃ¢n",
          reward_wallet_valid:
            "NgÆ°á»i tháº¯ng giáº£i pháº£i Ä‘áº£m báº£o Ä‘á»‹a chá»‰ vÃ­ chÃ­nh xÃ¡c vÃ  há»£p lá»‡",
          reward_next_day: "ThÆ°á»Ÿng sáº½ Ä‘Æ°á»£c phÃ¡t vÃ o ngÃ y sau khi quyáº¿t toÃ¡n",
          reward_invalid_rollover:
            "Náº¿u Ä‘á»‹a chá»‰ vÃ­ khÃ´ng há»£p lá»‡, thÆ°á»Ÿng sáº½ Ä‘Æ°á»£c chuyá»ƒn sang thÃ¡ng sau",
          reward_example_calculation:
            "ğŸ’¡ VÃ­ dá»¥: Lá»£i nhuáº­n thÃ¡ng 100Ï€, quá»¹ thÆ°á»Ÿng 50Ï€",
          first_place_reward: "ğŸ¥‡Háº¡ng nháº¥t: 25Ï€",
          second_place_reward: "ğŸ¥ˆHáº¡ng nhÃ¬: 15Ï€",
          third_place_reward: "ğŸ¥‰Háº¡ng ba: 10Ï€",

          // Báº£ng xáº¿p háº¡ng toÃ n cáº§u
          global_ranking_title: "Báº£ng Xáº¿p Háº¡ng ToÃ n Cáº§u",
          ranking_subtitle: "ğŸ“Š Xáº¿p háº¡ng dá»±a trÃªn tá»· lá»‡ tháº¯ng hÃ ng thÃ¡ng",
          ranking_header_rank: "Háº¡ng",
          ranking_header_nickname: "Biá»‡t danh",
          ranking_header_games: "Tá»•ng tráº­n",
          ranking_header_winrate: "Tá»· lá»‡ tháº¯ng",
          current_rank_not_listed: "Xáº¿p háº¡ng hiá»‡n táº¡i: ChÆ°a cÃ³",
          current_rank_label: "Xáº¿p háº¡ng hiá»‡n táº¡i",
          not_listed: "ChÆ°a cÃ³",
          play_one_game_to_rank:
            "ğŸ® HoÃ n thÃ nh 1 tráº­n Ä‘á»ƒ lÃªn báº£ng xáº¿p háº¡ng! Báº¯t Ä‘áº§u hÃ nh trÃ¬nh Cá» CarÃ´ cá»§a báº¡n!",

          // NhÃ£n chi tiáº¿t trung tÃ¢m cÃ¡ nhÃ¢n
          personal_profile_section: "Há»“ sÆ¡ cÃ¡ nhÃ¢n",
          avatar_nickname_section: "Avatar vÃ  biá»‡t danh",
          click_avatar_edit: "Nháº¥p avatar Ä‘á»ƒ chá»‰nh sá»­a",
          click_nickname_edit: "Nháº¥p biá»‡t danh Ä‘á»ƒ chá»‰nh sá»­a",
          account_info_section: "ThÃ´ng tin tÃ i khoáº£n",
          game_stats_section: "Thá»‘ng kÃª trÃ² chÆ¡i",
          wallet_address_label: "Äá»‹a chá»‰ vÃ­",
          account_balance_display: "Sá»‘ dÆ° tÃ i khoáº£n",
          refresh_balance_btn: "LÃ m má»›i sá»‘ dÆ°",
          logout_btn: "ÄÄƒng xuáº¥t",

          // NhÃ£n thá»‘ng kÃª trÃ² chÆ¡i
          total_games_label: "Tá»•ng tráº­n",
          wins_label: "Tháº¯ng",
          win_rate_label: "Tá»· lá»‡ tháº¯ng",
          current_score_label: "Äiá»ƒm hiá»‡n táº¡i",
          current_rank_label: "Háº¡ng hiá»‡n táº¡i",

          // Tráº¡ng thÃ¡i truy váº¥n sá»‘ dÆ°
          balance_querying: "Äang truy váº¥n...",
          balance_query_failed_display: "Truy váº¥n tháº¥t báº¡i",
          balance_tooltip: "Tá»•ng náº¡p: {0} Ï€\nTá»•ng chi: {1} Ï€",

          // ThÃ´ng tin thanh toÃ¡n thÃ nh cÃ´ng
          payment_success_title: "Thanh toÃ¡n thÃ nh cÃ´ng",
          payment_success_message: "Thanh toÃ¡n thÃ nh cÃ´ng!",
          purchase_success_message: "Báº¡n Ä‘Ã£ mua thÃ nh cÃ´ng {0}",
          transaction_id: "ID giao dá»‹ch: {0}",

          // Gá»£i Ã½ nháº­p trung tÃ¢m cÃ¡ nhÃ¢n
          enter_avatar_emoji: "Nháº­p emoji avatar (vÃ­ dá»¥: ğŸ˜Š)",
          click_to_set_nickname: "Nháº¥p Ä‘á»ƒ Ä‘áº·t biá»‡t danh",
          enter_your_nickname: "Nháº­p biá»‡t danh cá»§a báº¡n",
          loading_text_display: "Äang táº£i...",
          refresh_balance_text: "ğŸ”„ LÃ m má»›i sá»‘ dÆ°",
          recharge_text: "ğŸ’° Náº¡p tiá»n",
          wallet_format_hint: "Äá»‹nh dáº¡ng Ä‘á»‹a chá»‰ vÃ­: 50 chá»¯ cÃ¡i viáº¿t hoa vÃ  sá»‘",
          save_wallet: "ğŸ’¾ LÆ°u",
          edit_wallet: "âœï¸ Chá»‰nh sá»­a",
          logout_account_text: "â†©ï¸ ÄÄƒng xuáº¥t tÃ i khoáº£n",

          // ThÃ´ng tin gá»£i Ã½ trung tÃ¢m cÃ¡ nhÃ¢n
          enter_avatar_hint: "Vui lÃ²ng nháº­p emoji avatar",
          single_emoji_hint: "Vui lÃ²ng nháº­p má»™t emoji duy nháº¥t",
          avatar_updated: "Avatar Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t!",
          nickname_updated: "Biá»‡t danh Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t!",
          enter_wallet_hint: "Vui lÃ²ng nháº­p Ä‘á»‹a chá»‰ vÃ­",
          wallet_length_error:
            "âŒ ÄÃ¢y khÃ´ng pháº£i lÃ  Ä‘á»‹a chá»‰ vÃ­ tiÃªu chuáº©n!\n\nÄá»™ dÃ i hiá»‡n táº¡i: {0} kÃ½ tá»±\nÄá»™ dÃ i tiÃªu chuáº©n: 50 kÃ½ tá»±\n\nVui lÃ²ng nháº­p Ä‘á»‹a chá»‰ vÃ­ Ä‘áº§y Ä‘á»§ 50 kÃ½ tá»±",
          wallet_format_error:
            "âŒ Lá»—i Ä‘á»‹nh dáº¡ng Ä‘á»‹a chá»‰ vÃ­!\n\nChá»‰ cho phÃ©p chá»¯ cÃ¡i viáº¿t hoa (A-Z) vÃ  sá»‘ (0-9)\nVui lÃ²ng kiá»ƒm tra ná»™i dung nháº­p",
          wallet_saved_success: "âœ… Äá»‹a chá»‰ vÃ­ Ä‘Ã£ Ä‘Æ°á»£c lÆ°u thÃ nh cÃ´ng!",
          edit_mode_title: "Cháº¿ Ä‘á»™ chá»‰nh sá»­a",
          edit_mode_message:
            "ğŸ’¡ Cháº¿ Ä‘á»™ chá»‰nh sá»­a Ä‘Ã£ Ä‘Æ°á»£c kÃ­ch hoáº¡t\n\nVui lÃ²ng sá»­a Ä‘á»•i Ä‘á»‹a chá»‰ vÃ­ vÃ  nháº¥p lÆ°u",
          success_title: "ThÃ nh cÃ´ng",
          error_title: "Lá»—i",

          // LiÃªn quan Ä‘áº¿n káº¿t thÃºc trÃ² chÆ¡i
          you_win: "ğŸ‰ ChÃºc má»«ng! Báº¡n tháº¯ng!",
          you_lose: "ğŸ˜” AI tháº¯ng, hÃ£y cá»‘ gáº¯ng láº§n sau!",
          draw: "ğŸ¤ HÃ²a!",
          game_over: "Káº¿t thÃºc trÃ² chÆ¡i",

          // NÃºt giao diá»‡n chÃ­nh
          global_ranking: "Báº£ng xáº¿p háº¡ng toÃ n cáº§u",
          ai_battle: "Äáº¥u vá»›i AI",
          personal_center: "Trung tÃ¢m cÃ¡ nhÃ¢n",
          game_instructions: "HÆ°á»›ng dáº«n trÃ² chÆ¡i",

          // Lá»—i káº¿t ná»‘i
          connection_failed: "Káº¿t ná»‘i tháº¥t báº¡i",
          connection_error_detail:
            "KhÃ´ng thá»ƒ káº¿t ná»‘i vá»›i Pi Network, vui lÃ²ng kiá»ƒm tra káº¿t ná»‘i máº¡ng vÃ  thá»­ láº¡i",
          login_with_pi: "ÄÄƒng nháº­p báº±ng tÃ i khoáº£n Pi",
          login_benefits_note:
            "ÄÄƒng nháº­p Ä‘á»ƒ táº­n hÆ°á»Ÿng Ä‘áº§y Ä‘á»§ tÃ­nh nÄƒng trÃ² chÆ¡i vÃ  pháº§n thÆ°á»Ÿng Pi coin",

          // Há»™p thoáº¡i náº¡p tiá»n
          recharge_amount_selection: "Lá»±a chá»n sá»‘ tiá»n náº¡p",
          custom_amount_placeholder: "Sá»‘ tiá»n tÃ¹y chá»‰nh",
          custom_recharge: "Náº¡p tiá»n tÃ¹y chá»‰nh",
          cancel: "Há»§y",

          // ThÃ´ng bÃ¡o lá»—i
          please_login_first: "Vui lÃ²ng Ä‘Äƒng nháº­p trÆ°á»›c",
          create_order_failed: "Táº¡o Ä‘Æ¡n hÃ ng tháº¥t báº¡i",
          network_error_retry: "Lá»—i máº¡ng, vui lÃ²ng thá»­ láº¡i sau",
          pi_login_failed: "ÄÄƒng nháº­p Pi Network tháº¥t báº¡i",
          login_error: "Lá»—i xáº£y ra trong quÃ¡ trÃ¬nh Ä‘Äƒng nháº­p",
          pi_sdk_not_loaded:
            "Pi Network SDK chÆ°a Ä‘Æ°á»£c táº£i, khÃ´ng thá»ƒ sá»­ dá»¥ng tÃ­nh nÄƒng thanh toÃ¡n",
          create_payment_failed: "Táº¡o thanh toÃ¡n tháº¥t báº¡i",

          // Há»™p thoáº¡i thanh toÃ¡n
          payment_method: "PhÆ°Æ¡ng thá»©c thanh toÃ¡n",
          pi_wallet_transfer: "ğŸ“± Chuyá»ƒn khoáº£n vÃ­ Pi",
          transfer_instruction:
            "Vui lÃ²ng sá»­ dá»¥ng vÃ­ Pi Ä‘á»ƒ chuyá»ƒn khoáº£n Ä‘áº¿n Ä‘á»‹a chá»‰ sau:",
          transfer_amount_warning:
            "âš ï¸ Vui lÃ²ng Ä‘áº£m báº£o sá»‘ tiá»n chuyá»ƒn khoáº£n lÃ  <strong>{0} Ï€</strong>",
          transfer_memo: "Ghi chÃº chuyá»ƒn khoáº£n: {0}",
          transaction_hash_placeholder: "Vui lÃ²ng nháº­p hash giao dá»‹ch",
          transaction_hash_instruction:
            "Sau khi hoÃ n táº¥t chuyá»ƒn khoáº£n, vui lÃ²ng sao chÃ©p hash giao dá»‹ch tá»« vÃ­ Pi vÃ  dÃ¡n vÃ o Ã´ nháº­p á»Ÿ trÃªn",
          verify_payment: "XÃ¡c minh thanh toÃ¡n",
          order_validity: "Thá»i háº¡n Ä‘Æ¡n hÃ ng: 30 phÃºt",

          // XÃ¡c minh thanh toÃ¡n
          please_enter_transaction_hash: "Vui lÃ²ng nháº­p hash giao dá»‹ch",
          recharge_success: "Náº¡p tiá»n thÃ nh cÃ´ng",
          recharge_success_message:
            "ChÃºc má»«ng! Náº¡p {0} Ï€ thÃ nh cÃ´ng!\nSá»‘ dÆ° hiá»‡n táº¡i: {1} Ï€",
          verification_failed: "XÃ¡c minh tháº¥t báº¡i",

          // XÃ¡c nháº­n luá»“ng trÃ² chÆ¡i
          timeout_game_over: "â° Háº¿t thá»i gian suy nghÄ©, trÃ² chÆ¡i tháº¥t báº¡i!",
          login_success: "ÄÄƒng nháº­p thÃ nh cÃ´ng",
          welcome_user: "ChÃ o má»«ng, {0}",
          abandon_current_game: "Bá» cuá»™c trÃ² chÆ¡i hiá»‡n táº¡i",
          abandon_game_warning:
            "TrÃ² chÆ¡i hiá»‡n táº¡i Ä‘ang diá»…n ra, khá»Ÿi Ä‘á»™ng láº¡i sáº½ Ä‘Æ°á»£c ghi nháº­n lÃ  thua.\n\nBáº¡n cÃ³ cháº¯c cháº¯n muá»‘n bá» cuá»™c trÃ² chÆ¡i hiá»‡n táº¡i khÃ´ng?",
          restart_game: "Khá»Ÿi Ä‘á»™ng láº¡i trÃ² chÆ¡i",
          restart_game_confirm: "Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n khá»Ÿi Ä‘á»™ng láº¡i khÃ´ng?",
          abandon_game_return_warning:
            "TrÃ² chÆ¡i hiá»‡n táº¡i Ä‘ang diá»…n ra, quay vá» menu chÃ­nh sáº½ Ä‘Æ°á»£c ghi nháº­n lÃ  thua.\n\nBáº¡n cÃ³ cháº¯c cháº¯n muá»‘n bá» cuá»™c trÃ² chÆ¡i hiá»‡n táº¡i khÃ´ng?",

          // Äá»‹nh dáº¡ng hiá»ƒn thá»‹ tháº¯ng thua
          wins_losses_format: "({0}T {1}B)",
          monthly_games: "TrÃ² chÆ¡i hÃ ng thÃ¡ng",
          play_again: "ChÆ¡i láº¡i",
          view_leaderboard: "Xem báº£ng xáº¿p háº¡ng",
          login_now: "ÄÄƒng nháº­p ngay",
          guest_mode: "Cháº¿ Ä‘á»™ khÃ¡ch",
          guest_mode_desc:
            "Báº¡n hiá»‡n Ä‘ang chÆ¡i vá»›i tÆ° cÃ¡ch khÃ¡ch, káº¿t quáº£ trÃ² chÆ¡i sáº½ khÃ´ng Ä‘Æ°á»£c ghi vÃ o báº£ng xáº¿p háº¡ng.",
          login_benefits: "Lá»£i Ã­ch sau khi Ä‘Äƒng nháº­p:",
          benefit_stats: "â€¢ ğŸ“Š Thá»‘ng kÃª trÃ² chÆ¡i",
          benefit_leaderboard: "â€¢ ğŸ† Tham gia cáº¡nh tranh báº£ng xáº¿p háº¡ng",
          benefit_pi_service: "â€¢ ğŸ’° Dá»‹ch vá»¥ giÃ¡ trá»‹ gia tÄƒng Pi coin",
          benefit_monthly_rewards: "â€¢ ğŸ Hoáº¡t Ä‘á»™ng thÆ°á»Ÿng hÃ ng thÃ¡ng",
          rank_position: "#{0}",

          // LiÃªn quan Ä‘áº¿n ghÃ©p Ä‘Ã´i trá»±c tuyáº¿n
          searching_opponent: "Äang tÃ¬m Ä‘á»‘i thá»§...",
          online_players: "NgÆ°á»i chÆ¡i trá»±c tuyáº¿n hiá»‡n táº¡i",
          people_suffix: "ngÆ°á»i",
          match_description: "Há»‡ thá»‘ng sáº½ ghÃ©p Ä‘Ã´i báº¡n vá»›i Ä‘á»‘i thá»§ cÃ³ trÃ¬nh Ä‘á»™ tÆ°Æ¡ng Ä‘Æ°Æ¡ng",
          estimated_wait: "Thá»i gian chá» dá»± kiáº¿n: 30-60 giÃ¢y",
          match_found: "ÄÃ£ tÃ¬m tháº¥y Ä‘á»‘i thá»§!",
          ai_opponent_name: "Äá»‘i Thá»§ AI ThÃ´ng Minh",
          black_stone: "QuÃ¢n Äen",
          white_stone: "QuÃ¢n Tráº¯ng",
        },
      };

      // å½“å‰è¯­è¨€
      let currentLanguage = localStorage.getItem("selectedLanguage") || "zh";

      // ç¿»è¯‘å‡½æ•°
      function t(key, ...args) {
        let text =
          LANGUAGES[currentLanguage]?.[key] || LANGUAGES["zh"][key] || key;

        // å¤„ç†å‚æ•°æ›¿æ¢ {0}, {1}, etc.
        if (args.length > 0) {
          args.forEach((arg, index) => {
            text = text.replace(`{${index}}`, arg);
          });
        }

        return text;
      }

      // æ›´æ–°é¡µé¢æ–‡æœ¬
      function updatePageTexts() {
        // æ›´æ–°æ‰€æœ‰å¸¦æœ‰ data-i18n å±æ€§çš„å…ƒç´ 
        document.querySelectorAll("[data-i18n]").forEach((element) => {
          const key = element.getAttribute("data-i18n");
          const translatedText = t(key);

          // ç‰¹æ®Šå¤„ç†ï¼šä¿æŒ pinetwork ä¸ºè‹±æ–‡
          const finalText = translatedText.replace(/pinetwork/gi, "pinetwork");

          if (element.tagName === "INPUT" && element.type === "text") {
            element.placeholder = finalText;
          } else {
            element.textContent = finalText;
          }
        });

        // æ›´æ–°è¯­è¨€é€‰æ‹©å™¨
        const languageSelector = document.getElementById("language-selector");
        if (languageSelector) {
          languageSelector.value = currentLanguage;
        }

        // æ›´æ–°æ¸¸æˆç•Œé¢çš„è¯­è¨€é€‰æ‹©å™¨
        const languageSelectorGame = document.getElementById(
          "language-selector-game"
        );
        if (languageSelectorGame) {
          languageSelectorGame.value = currentLanguage;
        }

        // åŠ¨æ€è°ƒæ•´å‰¯æ ‡é¢˜å­—ä½“å¤§å°
        adjustSubtitleFontSize();
      }

      // åŠ¨æ€è°ƒæ•´å‰¯æ ‡é¢˜å­—ä½“å¤§å°ä»¥é€‚åº”ä¸åŒè¯­è¨€
      function adjustSubtitleFontSize() {
        const subtitle = document.querySelector(".game-subtitle");
        if (!subtitle) return;

        // é‡ç½®å­—ä½“å¤§å°ï¼Œç¡®ä¿ä½¿ç”¨CSSé»˜è®¤å€¼
        subtitle.style.fontSize = "";

        // å¼ºåˆ¶é‡æ–°è®¡ç®—å¸ƒå±€
        subtitle.offsetHeight;

        // ä¸è¿›è¡Œä»»ä½•å®½åº¦ç›¸å…³çš„è®¡ç®—ï¼Œé¿å…å½±å“å¸ƒå±€
        // è®©CSSçš„clamp()å‡½æ•°è‡ªåŠ¨å¤„ç†å­—ä½“å¤§å°
      }

      // åˆ‡æ¢è¯­è¨€
      function changeLanguage(lang) {
        currentLanguage = lang;
        localStorage.setItem("selectedLanguage", lang);
        updatePageTexts();

        // å¦‚æœæœ‰åŠ¨æ€å†…å®¹ï¼Œä¹Ÿéœ€è¦æ›´æ–°
        updateDynamicContent();
      }

      // æ›´æ–°åŠ¨æ€å†…å®¹ï¼ˆæ¸¸æˆä¸­çš„æ–‡æœ¬ï¼‰
      function updateDynamicContent() {
        // æ›´æ–°æ¸¸æˆçŠ¶æ€æ˜¾ç¤º
        const currentPlayerDisplay = document.getElementById(
          "current-player-display"
        );
        if (currentPlayerDisplay && typeof aiCurrentPlayer !== "undefined") {
          if (aiCurrentPlayer === "black") {
            currentPlayerDisplay.textContent = t("your_turn");
          } else {
            currentPlayerDisplay.textContent = t("ai_thinking");
          }
        }

        // æ›´æ–°ä¸»é¡µç™»å½•/è¿›å…¥æ¸¸æˆæŒ‰é’®çš„æ–‡æœ¬
        updateMainPageButtonState();

        // æ›´æ–°å…¶ä»–åŠ¨æ€å…ƒç´ ...
      }

      // å…¨å±€å˜é‡
      let currentUser = null;
      let isLoading = false;
      let currentGame = null;

      // åç«¯APIé…ç½® - æ ¹æ®ç¯å¢ƒè‡ªåŠ¨æ£€æµ‹
      const API_BASE_URL = (() => {
        const hostname = window.location.hostname;
        const protocol = window.location.protocol;

        if (hostname === "localhost" || hostname === "127.0.0.1") {
          // æœ¬åœ°å¼€å‘ç¯å¢ƒ
          return "http://localhost:3001";
        } else if (hostname === "mrsong-ai.github.io") {
          // GitHub Pages + é˜¿é‡Œäº‘åç«¯
          return "http://47.79.240.129:3001";
        } else {
          // é˜¿é‡Œäº‘è‡ªéƒ¨ç½²ç¯å¢ƒ - ä½¿ç”¨ç›¸åŒåŸŸåçš„/apiè·¯å¾„
          return `${protocol}//${hostname}/api`;
        }
      })();

      // ç”¨æˆ·ç»Ÿè®¡æ•°æ®
      let userStats = null;

      // æ•°æ®åˆ·æ–°ç›¸å…³å˜é‡
      let leaderboardRefreshInterval = null;
      let lastDataRefreshTime = 0;
      const DATA_REFRESH_COOLDOWN = 5000; // 5ç§’å†·å´æ—¶é—´

      // æ£€æŸ¥Pi SDKæ˜¯å¦å¯ç”¨
      function isPiAvailable() {
        return typeof window.Pi !== "undefined";
      }

      // åˆå§‹åŒ–é¡µé¢
      function initializePage() {
        // ç§»é™¤Pi Browseræ£€æŸ¥ï¼Œå§‹ç»ˆå…è®¸ä½¿ç”¨
        const loginBtn = document.getElementById("login-btn");
        if (loginBtn) {
          loginBtn.disabled = false;
        }

        // åˆå§‹åŒ–å¤šè¯­è¨€
        updatePageTexts();

        // æ·»åŠ é’±åŒ…åœ°å€è¾“å…¥éªŒè¯
        setupWalletAddressValidation();

        // æ£€æŸ¥å¹¶æ¢å¤ç™»å½•çŠ¶æ€
        checkAndRestoreLoginState();

        // å»¶è¿Ÿæ›´æ–°ä¸»é¡µæŒ‰é’®çŠ¶æ€ï¼Œç¡®ä¿DOMå®Œå…¨åŠ è½½
        setTimeout(() => {
          updateMainPageButtonState();
        }, 200);

        // æ³¨é‡Šæ‰æµ‹è¯•æ•°æ®åˆ›å»ºï¼Œä½¿ç”¨çœŸå®æ•°æ®
        // å¦‚æœéœ€è¦æµ‹è¯•ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰‹åŠ¨è®¾ç½®æ•°æ®
      }

      // æ£€æŸ¥å¹¶æ¢å¤ç™»å½•çŠ¶æ€
      async function checkAndRestoreLoginState() {
        const restored = restoreLoginState();
        if (restored) {
          // å¦‚æœæˆåŠŸæ¢å¤ç™»å½•çŠ¶æ€ï¼Œåªæ›´æ–°æŒ‰é’®çŠ¶æ€ï¼Œä¸è‡ªåŠ¨è¿›å…¥æ¸¸æˆ
          try {
            // å°è¯•åˆ·æ–°åç«¯æ•°æ®ï¼ˆå¦‚æœå¯ç”¨ï¼‰
            if (currentUser.accessToken) {
              await authenticateWithBackend(currentUser.accessToken);
            }
          } catch (error) {
            console.error("è‡ªåŠ¨ç™»å½•æ—¶åç«¯éªŒè¯å¤±è´¥:", error);
            // å³ä½¿åç«¯å¤±è´¥ï¼Œä¹Ÿä¿æŒç™»å½•çŠ¶æ€ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®
          }

          // å»¶è¿Ÿæ›´æ–°æŒ‰é’®çŠ¶æ€ï¼Œç¡®ä¿DOMå·²åŠ è½½
          setTimeout(() => {
            updateMainPageButtonState();
          }, 100);
        }
      }

      // è®¾ç½®é’±åŒ…åœ°å€è¾“å…¥éªŒè¯
      function setupWalletAddressValidation() {
        // ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œå› ä¸ºé’±åŒ…è¾“å…¥æ¡†å¯èƒ½åœ¨æ¨¡æ€æ¡†ä¸­åŠ¨æ€åˆ›å»º
        document.addEventListener("input", function (e) {
          if (e.target && e.target.id === "wallet-address-input") {
            let value = e.target.value;
            // åªå…è®¸å¤§å†™å­—æ¯å’Œæ•°å­—
            value = value.replace(/[^A-Z0-9]/g, "");
            // é™åˆ¶é•¿åº¦ä¸º50ä½
            if (value.length > 50) {
              value = value.substring(0, 50);
            }
            e.target.value = value;

            // æ›´æ–°å­—ç¬¦è®¡æ•°
            updateWalletCharCount(value.length);
          }
        });
      }

      // æ›´æ–°é’±åŒ…åœ°å€å­—ç¬¦è®¡æ•°
      function updateWalletCharCount(length) {
        const countElement = document.getElementById("wallet-char-count");
        if (countElement) {
          countElement.textContent = `${length}/50`;
          // æ ¹æ®é•¿åº¦æ”¹å˜é¢œè‰²
          if (length === 50) {
            countElement.style.color = "#28a745"; // ç»¿è‰²
          } else if (length > 40) {
            countElement.style.color = "#ffc107"; // é»„è‰²
          } else {
            countElement.style.color = "#6c757d"; // ç°è‰²
          }
        }
      }

      // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
      function showError(message) {
        const errorMessage = document.getElementById("error-message");
        const errorText = document.getElementById("error-text");
        errorText.textContent = "âŒ " + message;
        errorMessage.style.display = "block";
      }

      // éšè—é”™è¯¯ä¿¡æ¯
      function hideError() {
        const errorMessage = document.getElementById("error-message");
        errorMessage.style.display = "none";
      }

      // Pi Network ç™»å½•å¤„ç†
      async function handleSignIn() {
        if (isLoading) return;

        // å¦‚æœå·²ç»ç™»å½•ï¼Œç›´æ¥è¿›å…¥æ¸¸æˆ
        if (currentUser) {
          showSimpleGameScreen();
          return;
        }

        isLoading = true;
        const loginBtn = document.getElementById("login-btn");
        loginBtn.disabled = true;

        // æ£€æŸ¥æ˜¯å¦åœ¨Pi Browserä¸­æ¥æ˜¾ç¤ºä¸åŒçš„æç¤º
        const isInPiBrowser = isPiAvailable();
        const loadingText = isInPiBrowser
          ? t("connecting_pi_network")
          : t("entering_game");

        // å®Œå…¨æ›¿æ¢æŒ‰é’®å†…å®¹ä¸ºè¿æ¥çŠ¶æ€ï¼Œéšè—åŸæœ‰çš„ç™»å½•æ–‡æœ¬
        loginBtn.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <span>${loadingText}</span>
                </div>
            `;
        loginBtn.classList.add('loading');

        try {
          hideError();

          // æ£€æŸ¥æ˜¯å¦åœ¨Pi Browserä¸­
          if (isPiAvailable()) {
            // çœŸå®çš„Pi Networkç™»å½•
            const scopes = ["username", "payments"];

            // è®¾ç½®è¶…æ—¶æœºåˆ¶ï¼Œé¿å…æ— é™ç­‰å¾…
            const authPromise = Pi.authenticate(
              scopes,
              onIncompletePaymentFound
            );
            const timeoutPromise = new Promise((_, reject) =>
              setTimeout(() => reject(new Error("Pi Networkè¿æ¥è¶…æ—¶")), 10000)
            );

            const authResult = await Promise.race([
              authPromise,
              timeoutPromise,
            ]);

            if (authResult.accessToken) {
              currentUser = authResult.user;
              currentUser.accessToken = authResult.accessToken; // ä¿å­˜è®¿é—®ä»¤ç‰Œ

              // ä¿å­˜ç™»å½•çŠ¶æ€åˆ°æœ¬åœ°å­˜å‚¨
              saveLoginState(currentUser);

              // å‘åç«¯éªŒè¯ç”¨æˆ·å¹¶è·å–ç»Ÿè®¡æ•°æ®
              await authenticateWithBackend(authResult.accessToken);

              // æ›´æ–°ä¸»é¡µæŒ‰é’®çŠ¶æ€
              updateMainPageButtonState();

              // ç¡®ä¿ç”¨æˆ·æ•°æ®è¢«ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
              if (userStats) {
                saveUserGameDataToSpecificStorage();
                refreshLocalLeaderboardData();
              }

              // è§¦å‘æ•°æ®åˆ·æ–°ï¼ˆå»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿åç«¯æ•°æ®å·²åŒæ­¥ï¼‰
              setTimeout(() => {
                triggerDataRefresh();
              }, 2000);

              // ç™»å½•æˆåŠŸåä¿æŒåœ¨å½“å‰ç•Œé¢ï¼Œä¸è‡ªåŠ¨è·³è½¬åˆ°æ¸¸æˆ
              showCustomAlert(
                t("login_success"),
                t("welcome_user", currentUser.username)
              );
            } else {
              showError(t("pi_login_failed"));
            }
          } else {
            // Pi SDKä¸å¯ç”¨ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
            showError(t("pi_sdk_not_available"));
          }
        } catch (error) {
          console.error("Sign in failed:", error);
          showError(t("login_error") + ": " + error.message);
        } finally {
          isLoading = false;
          loginBtn.disabled = false;
          loginBtn.classList.remove('loading');

          // æ¢å¤æŒ‰é’®åŸå§‹çŠ¶æ€
          if (!currentUser) {
            loginBtn.innerHTML = `
              <span class="pi-icon">Ï€</span>
              <span data-i18n="login_with_pi">${t("login_with_pi")}</span>
            `;
          }
        }
      }

      // åç«¯è®¤è¯å‡½æ•°
      async function authenticateWithBackend(accessToken) {
        try {
          const response = await fetch(`${API_BASE_URL}/api/auth/login`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              accessToken,
              userInfo: {
                uid: currentUser.uid,
                username: currentUser.username,
              },
            }),
          });

          if (response.ok) {
            const data = await response.json();
            // ä¿å­˜ç”¨æˆ·IDç”¨äºåç»­APIè°ƒç”¨
            currentUser.piUserId =
              data.user.piUserId || data.user.uid || currentUser.uid;

            // å…ˆå°è¯•æ¢å¤ç”¨æˆ·ä¸“å±çš„æ¸¸æˆæ•°æ®
            const hasLocalData = restoreUserGameData();

            // æ•°æ®å®Œæ•´æ€§æ£€æŸ¥ï¼šæ¯”è¾ƒæœ¬åœ°æ•°æ®å’Œåç«¯æ•°æ®
            const backendStats = data.user.stats;
            if (
              hasLocalData &&
              userStats &&
              userStats.totalGames > 0 &&
              backendStats.totalGames === 0
            ) {
              console.log(
                "[ç™»å½•æ•°æ®æ¢å¤] æ£€æµ‹åˆ°åç«¯æ•°æ®å¼‚å¸¸ï¼Œä¿æŒä½¿ç”¨æœ¬åœ°æ•°æ®"
              );
              // å¼‚æ­¥åŒæ­¥æœ¬åœ°æ•°æ®åˆ°åç«¯
              setTimeout(() => {
                syncLocalDataToBackend(userStats);
              }, 1000);
            } else if (!userStats || userStats.totalGames === 0) {
              // å¦‚æœæ²¡æœ‰æœ¬åœ°æ•°æ®ï¼Œæ‰ä½¿ç”¨åç«¯è¿”å›çš„åˆå§‹æ•°æ®
              userStats = backendStats;
            }
          } else {
            // å¦‚æœåç«¯è®¤è¯å¤±è´¥ï¼Œä½¿ç”¨uidä½œä¸ºpiUserId
            currentUser.piUserId = currentUser.uid;

            // å°è¯•æ¢å¤æœ¬åœ°æ•°æ®
            const restored = restoreUserGameData();
            if (!restored) {
              // å¦‚æœæ²¡æœ‰å¯æ¢å¤çš„æ•°æ®ï¼Œåˆ›å»ºé»˜è®¤æ•°æ®
              createDefaultUserStats();
            }
          }
        } catch (error) {
          // å¦‚æœåç«¯è¿æ¥å¤±è´¥ï¼Œä½¿ç”¨uidä½œä¸ºpiUserId
          currentUser.piUserId = currentUser.uid;

          // å°è¯•æ¢å¤æœ¬åœ°æ•°æ®
          const restored = restoreUserGameData();
          if (!restored) {
            // å¦‚æœæ²¡æœ‰å¯æ¢å¤çš„æ•°æ®ï¼Œåˆ›å»ºé»˜è®¤æ•°æ®
            createDefaultUserStats();
          }
        }
      }

      // æ¢å¤ç”¨æˆ·ä¸“å±çš„æ¸¸æˆæ•°æ®
      function restoreUserGameData() {
        if (!currentUser) return;

        const userId = currentUser.piUserId || currentUser.uid;
        const userDataKey = `piGomokuUserData_${userId}`;
        const savedUserData = localStorage.getItem(userDataKey);

        if (savedUserData) {
          try {
            const userData = JSON.parse(savedUserData);
            // å¦‚æœæ‰¾åˆ°ç”¨æˆ·ä¸“å±æ•°æ®ï¼Œä½¿ç”¨å®ƒ
            if (userData.gameStats) {
              userStats = userData.gameStats;
              // æ›´æ–°ç”¨æˆ·åä¸ºæœ€æ–°çš„
              userStats.username =
                currentUser.username || userStats.username || "Piç”¨æˆ·";

              // åŒæ—¶æ›´æ–°é€šç”¨å­˜å‚¨ï¼Œä¿æŒå…¼å®¹æ€§
              localStorage.setItem(
                "piGomokuGameStats",
                JSON.stringify(userStats)
              );
              return true; // è¡¨ç¤ºæˆåŠŸæ¢å¤äº†æ•°æ®
            }
          } catch (error) {
            console.error("æ¢å¤ç”¨æˆ·æ•°æ®å¤±è´¥:", error);
          }
        }

        // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç”¨æˆ·ä¸“å±æ•°æ®ï¼Œå°è¯•ä»é€šç”¨å­˜å‚¨æ¢å¤
        const generalStats = localStorage.getItem("piGomokuGameStats");
        if (generalStats) {
          try {
            const stats = JSON.parse(generalStats);
            if (stats && stats.totalGames > 0) {
              userStats = stats;
              userStats.username =
                currentUser.username || userStats.username || "Piç”¨æˆ·";
              return true; // è¡¨ç¤ºæˆåŠŸæ¢å¤äº†æ•°æ®
            }
          } catch (error) {
            console.error("æ¢å¤é€šç”¨æ•°æ®å¤±è´¥:", error);
          }
        }

        return false; // è¡¨ç¤ºæ²¡æœ‰æ‰¾åˆ°å¯æ¢å¤çš„æ•°æ®
      }

      // ä»æœ¬åœ°å­˜å‚¨åˆå§‹åŒ–ç”¨æˆ·æ•°æ®
      function initializeUserStatsFromLocal() {
        const localStats = localStorage.getItem("piGomokuGameStats");

        if (localStats) {
          try {
            userStats = JSON.parse(localStats);
            // ç¡®ä¿ç”¨æˆ·åæ˜¯æœ€æ–°çš„
            userStats.username =
              currentUser.username || userStats.username || "Piç”¨æˆ·";
          } catch (error) {
            console.error("è§£ææœ¬åœ°æ•°æ®å¤±è´¥:", error);
            createDefaultUserStats();
          }
        } else {
          createDefaultUserStats();
        }
      }

      // åˆ›å»ºé»˜è®¤ç”¨æˆ·ç»Ÿè®¡æ•°æ®
      function createDefaultUserStats() {
        userStats = {
          username: currentUser.username || "Piç”¨æˆ·",
          totalGames: 0,
          wins: 0,
          losses: 0,
          draws: 0,
          winRate: 0,
          rank: 0,
        };
        // ç«‹å³ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        localStorage.setItem("piGomokuGameStats", JSON.stringify(userStats));
      }

      // è·å–å½“å‰æ˜¾ç¤ºçš„ç”¨æˆ·åï¼ˆä¸ä¸ªäººä¸­å¿ƒä¿æŒä¸€è‡´ï¼‰
      function getCurrentDisplayUsername() {
        if (currentUser && userStats) {
          // Piç™»å½•çŠ¶æ€ï¼šä¼˜å…ˆä½¿ç”¨Piç”¨æˆ·åï¼Œç„¶åæ˜¯userStatsä¸­çš„ç”¨æˆ·å
          return currentUser.username || userStats.username || "Piç”¨æˆ·";
        } else {
          // æœªç™»å½•çŠ¶æ€ï¼šä½¿ç”¨æœ¬åœ°æ˜µç§°
          return localStorage.getItem("userNickname") || "æ¸¸å®¢";
        }
      }

      // ä¿å­˜ç™»å½•çŠ¶æ€åˆ°æœ¬åœ°å­˜å‚¨
      function saveLoginState(user) {
        const loginState = {
          user: user,
          timestamp: Date.now(),
          expiresAt: Date.now() + 7 * 24 * 60 * 60 * 1000, // 7å¤©è¿‡æœŸ
        };
        localStorage.setItem("piGomokuLoginState", JSON.stringify(loginState));
      }

      // æ¢å¤ç™»å½•çŠ¶æ€
      function restoreLoginState() {
        try {
          const savedState = localStorage.getItem("piGomokuLoginState");
          if (!savedState) return false;

          const loginState = JSON.parse(savedState);

          // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
          if (Date.now() > loginState.expiresAt) {
            localStorage.removeItem("piGomokuLoginState");
            return false;
          }

          // æ¢å¤ç”¨æˆ·çŠ¶æ€
          currentUser = loginState.user;

          // æ¢å¤ç”¨æˆ·æ•°æ®
          const restored = restoreUserGameData();
          if (!restored) {
            createDefaultUserStats();
          }

          return true;
        } catch (error) {
          console.error("æ¢å¤ç™»å½•çŠ¶æ€å¤±è´¥:", error);
          localStorage.removeItem("piGomokuLoginState");
          return false;
        }
      }

      // æ¸…é™¤ç™»å½•çŠ¶æ€
      function clearLoginState() {
        localStorage.removeItem("piGomokuLoginState");
      }

      // æ›´æ–°ä¸»é¡µæŒ‰é’®æ˜¾ç¤ºçŠ¶æ€
      function updateMainPageButtonState() {
        const loginBtn = document.getElementById("login-btn");
        if (!loginBtn) {
          return;
        }

        if (currentUser) {
          // å·²ç™»å½•çŠ¶æ€ï¼šæ˜¾ç¤º"è¿›å…¥æ¸¸æˆ"æŒ‰é’®
          loginBtn.innerHTML = `
            <span class="pi-icon">ğŸ®</span>
            <span>${t("enter_game")}</span>
          `;
          loginBtn.onclick = () => showSimpleGameScreen();
        } else {
          // æœªç™»å½•çŠ¶æ€ï¼šæ˜¾ç¤º"ç™»å½•"æŒ‰é’®
          loginBtn.innerHTML = `
            <span class="pi-icon">Ï€</span>
            <span data-i18n="login_with_pi">${t("login_with_pi")}</span>
          `;
          loginBtn.onclick = handleSignIn;
        }
      }

      // Pi SDKä¸å¯ç”¨æ—¶çš„å¤„ç†
      function handlePiSdkUnavailable() {
        showCustomAlert(
          t("error_title"),
          t("pi_sdk_required_message")
        );
      }

      // å¤„ç†æœªå®Œæˆçš„æ”¯ä»˜
      function onIncompletePaymentFound(payment) {
        console.log("å‘ç°æœªå®Œæˆçš„æ”¯ä»˜:", payment);
        // è¿™é‡Œå¯ä»¥å¤„ç†æœªå®Œæˆçš„æ”¯ä»˜ï¼Œæ¯”å¦‚é‡æ–°éªŒè¯
        handleIncompletePayment(payment);
      }

      // Piæ”¯ä»˜åŠŸèƒ½ - è´­ä¹°é“å…·
      async function buyItem(itemType, amount) {
        if (!currentUser) {
          showError(t("please_login_first"));
          return;
        }

        if (!isPiAvailable()) {
          showError(t("pi_sdk_not_loaded"));
          return;
        }

        try {
          // æ˜¾ç¤ºæ”¯ä»˜ç¡®è®¤
          const confirmed = await showPaymentConfirm(itemType, amount);
          if (!confirmed) return;

          // åˆ›å»ºæ”¯ä»˜è¯·æ±‚
          const paymentData = {
            amount: amount,
            memo: `è´­ä¹°${getItemName(itemType)}`,
            metadata: {
              itemType: itemType,
              userId: currentUser.uid,
              timestamp: Date.now(),
            },
          };

          // å‘èµ·Piæ”¯ä»˜
          const payment = await Pi.createPayment(paymentData, {
            onReadyForServerApproval: async function (paymentId) {
              console.log("æ”¯ä»˜ç­‰å¾…æœåŠ¡å™¨å®¡æ‰¹:", paymentId);
              try {
                const response = await fetch(
                  `${API_BASE_URL}/api/payment/approve`,
                  {
                    method: "POST",
                    headers: {
                      "Content-Type": "application/json",
                      Authorization: `Bearer ${currentUser.accessToken}`,
                    },
                    body: JSON.stringify({ paymentId, paymentData }),
                  }
                );

                if (response.ok) {
                  console.log("æ”¯ä»˜å®¡æ‰¹æˆåŠŸ");
                } else {
                  console.error("æ”¯ä»˜å®¡æ‰¹å¤±è´¥");
                  // å³ä½¿åç«¯å¤±è´¥ï¼Œä¹Ÿç»§ç»­æµç¨‹ï¼ˆç”¨äºæµ‹è¯•ï¼‰
                }
              } catch (error) {
                console.error("æ”¯ä»˜å®¡æ‰¹è¯·æ±‚å¤±è´¥:", error);
                // å³ä½¿åç«¯å¤±è´¥ï¼Œä¹Ÿç»§ç»­æµç¨‹ï¼ˆç”¨äºæµ‹è¯•ï¼‰
              }
            },
            onReadyForServerCompletion: async function (paymentId, txid) {
              console.log("æ”¯ä»˜ç­‰å¾…æœåŠ¡å™¨å®Œæˆ:", paymentId, txid);
              try {
                const response = await fetch(
                  `${API_BASE_URL}/api/payment/complete`,
                  {
                    method: "POST",
                    headers: {
                      "Content-Type": "application/json",
                      Authorization: `Bearer ${currentUser.accessToken}`,
                    },
                    body: JSON.stringify({ paymentId, txid, paymentData }),
                  }
                );

                if (response.ok) {
                  const data = await response.json();
                  console.log("æ”¯ä»˜å®ŒæˆéªŒè¯æˆåŠŸ:", data);
                } else {
                  console.error("æ”¯ä»˜å®ŒæˆéªŒè¯å¤±è´¥");
                }
              } catch (error) {
                console.error("æ”¯ä»˜å®Œæˆè¯·æ±‚å¤±è´¥:", error);
              }

              // æ˜¾ç¤ºæ”¯ä»˜æˆåŠŸæ¶ˆæ¯
              setTimeout(() => {
                showCustomModal(
                  "æ”¯ä»˜æˆåŠŸ",
                  `
                    <div style="text-align: center;">
                        <div style="font-size: 3em; margin-bottom: 15px;">âœ…</div>
                        <h3 style="color: #28a745;">æ”¯ä»˜æˆåŠŸï¼</h3>
                        <p style="color: #666; margin: 15px 0;">
                            æ‚¨å·²æˆåŠŸè´­ä¹° ${getItemName(
                              paymentData.metadata.itemType
                            )}
                        </p>
                        <p style="color: #007bff; font-weight: bold;">
                            äº¤æ˜“ID: ${txid.substring(0, 16)}...
                        </p>
                    </div>
                  `
                );
              }, 1000);
            },
            onCancel: function (paymentId) {
              console.log("æ”¯ä»˜è¢«å–æ¶ˆ:", paymentId);
              showError(t("payment_cancelled"));
            },
            onError: function (error, payment) {
              console.error("æ”¯ä»˜é”™è¯¯:", error, payment);
              showError(t("payment_failed") + ": " + error.message);
            },
          });
        } catch (error) {
          console.error("åˆ›å»ºæ”¯ä»˜å¤±è´¥:", error);
          showError(t("create_payment_failed") + ": " + error.message);
        }
      }

      // è·å–é“å…·åç§°
      function getItemName(itemType) {
        const keys = {
          hint: "item_hint",
          undo: "item_undo",
          theme: "item_theme",
          vip: "item_vip",
        };
        return t(keys[itemType] || "item_unknown");
      }

      // æ˜¾ç¤ºæ”¯ä»˜ç¡®è®¤å¯¹è¯æ¡†
      function showPaymentConfirm(itemType, amount) {
        return new Promise((resolve) => {
          const itemName = getItemName(itemType);
          showCustomModal(
            t("confirm_purchase"),
            `
                    <div style="text-align: center;">
                        <div style="font-size: 3em; margin-bottom: 15px;">ğŸ’°</div>
                        <h3 style="color: #333; margin-bottom: 15px;">${t(
                          "confirm_purchase"
                        )}</h3>
                        <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                            <p style="font-size: 1.1em; margin-bottom: 10px; color: #333;">
                                <strong>${itemName}</strong>
                            </p>
                            <p style="font-size: 1.3em; color: #007bff; font-weight: bold;">
                                ${t("payment_amount", amount)}
                            </p>
                        </div>
                        <div style="display: flex; gap: 10px; justify-content: center;">
                            <button onclick="closeNewModal(); resolve(false)" style="background: #6c757d; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                                ${t("cancel")}
                            </button>
                            <button onclick="closeNewModal(); resolve(true)" style="background: #007bff; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                                ${t("confirm_payment")}
                            </button>
                        </div>
                    </div>
                `,
            resolve
          );
        });
      }

      // å¤„ç†æœªå®Œæˆçš„æ”¯ä»˜
      async function handleIncompletePayment(payment) {
        try {
          // æ£€æŸ¥æ”¯ä»˜çŠ¶æ€å¹¶å¤„ç†
          // è¿™é‡Œå¯ä»¥é‡æ–°æäº¤åˆ°æœåŠ¡å™¨éªŒè¯
        } catch (error) {
          console.error("å¤„ç†æœªå®Œæˆæ”¯ä»˜å¤±è´¥:", error);
        }
      }

      // æœåŠ¡å™¨ç«¯æ”¯ä»˜å®¡æ‰¹ (éœ€è¦åç«¯API)
      async function approvePaymentOnServer(paymentId, paymentData) {
        try {
          // è¿™é‡Œéœ€è¦è°ƒç”¨æ‚¨çš„åç«¯API
          // const response = await fetch('YOUR_BACKEND_URL/api/payments/approve', {
          //     method: 'POST',
          //     headers: { 'Content-Type': 'application/json' },
          //     body: JSON.stringify({ paymentId, paymentData })
          // });
          // æ¨¡æ‹Ÿå®¡æ‰¹æˆåŠŸ
        } catch (error) {
          console.error("æœåŠ¡å™¨å®¡æ‰¹å¤±è´¥:", error);
        }
      }

      // æœåŠ¡å™¨ç«¯æ”¯ä»˜å®Œæˆ (éœ€è¦åç«¯API)
      async function completePaymentOnServer(paymentId, txid, paymentData) {
        try {
          // è¿™é‡Œéœ€è¦è°ƒç”¨æ‚¨çš„åç«¯API
          // const response = await fetch('YOUR_BACKEND_URL/api/payments/complete', {
          //     method: 'POST',
          //     headers: { 'Content-Type': 'application/json' },
          //     body: JSON.stringify({ paymentId, txid, paymentData })
          // });

          // æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸ
          setTimeout(() => {
            showCustomModal(
              t("payment_success_title"),
              `
                        <div style="text-align: center;">
                            <div style="font-size: 3em; margin-bottom: 15px;">âœ…</div>
                            <h3 style="color: #28a745;">${t(
                              "payment_success_message"
                            )}</h3>
                            <p style="color: #666; margin: 15px 0;">
                                ${t(
                                  "purchase_success_message",
                                  getItemName(paymentData.metadata.itemType)
                                )}
                            </p>
                            <p style="color: #007bff; font-weight: bold;">
                                ${t(
                                  "transaction_id",
                                  txid.substring(0, 16) + "..."
                                )}
                            </p>
                        </div>
                    `
            );
          }, 2000);
        } catch (error) {
          console.error("æœåŠ¡å™¨å®Œæˆæ”¯ä»˜å¤±è´¥:", error);
        }
      }

      // æ˜¾ç¤ºä¸»ç•Œé¢
      function showMainScreen() {
        performBackToLogin();
      }

      // åœ¨çº¿åŒ¹é…å¤„ç†
      function handleOnlineMatch() {
        showOnlineMatchScreen();
      }

      // AIå¯¹æˆ˜å¤„ç†
      function handleAIGame() {
        showSimpleGameScreen();
      }

      // åŠ è½½æ’è¡Œæ¦œæ•°æ® - æ”¯æŒæœ¬åœ°æ•°æ®é™çº§
      async function loadLeaderboard(
        sortBy = "score",
        limit = 100,
        forceRefresh = false
      ) {
        try {
          const now = Date.now();
          const shouldRefresh =
            forceRefresh || now - lastDataRefreshTime > DATA_REFRESH_COOLDOWN;

          if (!shouldRefresh) {
            console.log("[æ’è¡Œæ¦œ] è·³è¿‡åˆ·æ–°ï¼Œå†·å´æ—¶é—´æœªåˆ°");
            // å¦‚æœä¸éœ€è¦åˆ·æ–°ï¼Œè¿”å›æœ¬åœ°æ’è¡Œæ¦œæ•°æ®
            return getLocalLeaderboard(limit);
          }

          // é¦–å…ˆå°è¯•ä»åç«¯è·å–æ•°æ®
          try {
            const refreshParam = forceRefresh ? "&refresh=true" : "";
            const response = await fetch(
              `${API_BASE_URL}/api/leaderboard?limit=${limit}${refreshParam}`
            );
            if (response.ok) {
              const data = await response.json();
              lastDataRefreshTime = now;
              console.log(
                `[æ’è¡Œæ¦œ] åç«¯æ•°æ®åˆ·æ–°æˆåŠŸï¼Œæ€»ç”¨æˆ·æ•°: ${data.totalUsers}, æ’è¡Œæ¦œæ¡ç›®: ${data.leaderboard.length}`
              );
              return data.leaderboard || [];
            } else {
              console.error("è·å–æ’è¡Œæ¦œå¤±è´¥:", response.status);
              throw new Error("åç«¯è¯·æ±‚å¤±è´¥");
            }
          } catch (backendError) {
            console.log("[æ’è¡Œæ¦œ] åç«¯ä¸å¯ç”¨ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®");
            return getLocalLeaderboard(limit);
          }
        } catch (error) {
          console.error("æ’è¡Œæ¦œè¯·æ±‚é”™è¯¯:", error);
          // å‘ç”Ÿä»»ä½•é”™è¯¯æ—¶ï¼Œéƒ½è¿”å›æœ¬åœ°æ’è¡Œæ¦œæ•°æ®
          return getLocalLeaderboard(limit);
        }
      }

      // è·å–çœŸå®Pi Networkç”¨æˆ·æ’è¡Œæ¦œæ•°æ®ï¼ˆæ— æ¨¡æ‹Ÿç”¨æˆ·ï¼‰
      function getLocalLeaderboard(limit = 100) {
        try {
          const allUsers = [];
          const userIdSet = new Set(); // ç”¨äºå»é‡

          console.log("[æ’è¡Œæ¦œ] å¼€å§‹æ”¶é›†çœŸå®Pi Networkç”¨æˆ·æ•°æ®...");

          // 1. æ”¶é›†localStorageä¸­çš„æ‰€æœ‰çœŸå®Pi Networkç”¨æˆ·æ•°æ®ï¼Œè¿‡æ»¤æ‰æµ‹è¯•ç”¨æˆ·
          const userDataMap = new Map(); // userId -> æœ€ä½³ç”¨æˆ·æ•°æ®

          for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);

            // æŸ¥æ‰¾ç”¨æˆ·ä¸“å±æ•°æ®
            if (key && key.startsWith('piGomokuUserData_')) {
              try {
                const userData = JSON.parse(localStorage.getItem(key));
                if (userData && userData.gameStats && userData.gameStats.totalGames > 0) {
                  const userId = userData.userId;

                  // è¿‡æ»¤æ‰æµ‹è¯•ç”¨æˆ·å’Œæ¨¡æ‹Ÿç”¨æˆ·
                  if (userId && !userId.startsWith('test_user_') && !userId.startsWith('mock_') && !userData.accessToken?.startsWith('mock_token_')) {
                    const userEntry = {
                      userId: userId,
                      username: userData.username || userData.gameStats.username || "Piç”¨æˆ·",
                      totalGames: userData.gameStats.totalGames,
                      wins: userData.gameStats.wins,
                      losses: userData.gameStats.losses,
                      draws: userData.gameStats.draws || 0,
                      winRate: userData.gameStats.winRate || 0,
                      lastUpdated: userData.lastUpdated || 0,
                      storageKey: key
                    };

                    // å¦‚æœç”¨æˆ·å·²å­˜åœ¨ï¼Œæ¯”è¾ƒå¹¶ä¿ç•™æ›´å¥½çš„æ•°æ®
                    if (userDataMap.has(userId)) {
                      const existingEntry = userDataMap.get(userId);

                      // ä¼˜å…ˆä¿ç•™æ¸¸æˆå±€æ•°æ›´å¤šçš„æ•°æ®ï¼Œå±€æ•°ç›¸åŒæ—¶ä¿ç•™æ—¶é—´æ›´æ–°çš„
                      if (userEntry.totalGames > existingEntry.totalGames ||
                          (userEntry.totalGames === existingEntry.totalGames &&
                           userEntry.lastUpdated > existingEntry.lastUpdated)) {
                        userDataMap.set(userId, userEntry);
                        console.log(`[æ’è¡Œæ¦œ] æ›´æ–°Piç”¨æˆ·æ•°æ®: ${userId} (${userEntry.username}) - æ€»å±€æ•°: ${userEntry.totalGames} (${key})`);
                      } else {
                        console.log(`[æ’è¡Œæ¦œ] ä¿ç•™ç°æœ‰Piç”¨æˆ·æ•°æ®: ${userId} - æ€»å±€æ•°: ${existingEntry.totalGames} >= ${userEntry.totalGames}`);
                      }
                    } else {
                      userDataMap.set(userId, userEntry);
                      console.log(`[æ’è¡Œæ¦œ] æ·»åŠ æ–°Piç”¨æˆ·: ${userId} (${userEntry.username}) - æ€»å±€æ•°: ${userEntry.totalGames} (${key})`);
                    }
                  } else {
                    console.log(`[æ’è¡Œæ¦œ] è·³è¿‡æµ‹è¯•ç”¨æˆ·: ${userId}`);
                  }
                }
              } catch (parseError) {
                console.error("è§£æç”¨æˆ·æ•°æ®å¤±è´¥:", parseError);
              }
            }
          }

          // è½¬æ¢ä¸ºæ•°ç»„
          userDataMap.forEach((userEntry) => {
            const isCurrentUser = currentUser &&
              (userEntry.userId === currentUser.piUserId || userEntry.userId === currentUser.uid);

            allUsers.push({
              userId: userEntry.userId,
              username: userEntry.username,
              totalGames: userEntry.totalGames,
              wins: userEntry.wins,
              losses: userEntry.losses,
              draws: userEntry.draws,
              winRate: userEntry.winRate,
              isCurrentUser: isCurrentUser
            });
            userIdSet.add(userEntry.userId);
          });

          // 2. å¦‚æœå½“å‰ç”¨æˆ·æœ‰æ•°æ®ä½†ä¸åœ¨localStorageä¸“å±å­˜å‚¨ä¸­ï¼Œä¸”æ˜¯çœŸå®Piç”¨æˆ·ï¼Œæ·»åŠ å½“å‰ç”¨æˆ·
          if (currentUser && userStats && userStats.totalGames > 0) {
            const currentUserId = currentUser.piUserId || currentUser.uid;
            // åªæ·»åŠ çœŸå®Pi Networkç”¨æˆ·ï¼Œè¿‡æ»¤æ‰æµ‹è¯•ç”¨æˆ·
            if (currentUserId && !userIdSet.has(currentUserId) &&
                !currentUserId.startsWith('test_user_') &&
                !currentUserId.startsWith('mock_') &&
                !currentUser.accessToken?.startsWith('mock_token_')) {
              userIdSet.add(currentUserId);
              allUsers.push({
                userId: currentUserId,
                username: getCurrentDisplayUsername(),
                totalGames: userStats.totalGames,
                wins: userStats.wins,
                losses: userStats.losses,
                draws: userStats.draws || 0,
                winRate: userStats.winRate || 0,
                isCurrentUser: true
              });
              console.log(`[æ’è¡Œæ¦œ] æ·»åŠ å½“å‰Piç”¨æˆ·æ•°æ®: ${currentUserId} (${getCurrentDisplayUsername()})`);
            } else if (currentUserId?.startsWith('test_user_') || currentUserId?.startsWith('mock_') || currentUser.accessToken?.startsWith('mock_token_')) {
              console.log(`[æ’è¡Œæ¦œ] è·³è¿‡å½“å‰æµ‹è¯•ç”¨æˆ·: ${currentUserId}`);
            }
          }

          // æŒ‰èƒœç‡æ’åºï¼Œèƒœç‡ç›¸åŒæ—¶æŒ‰èƒœåœºæ•°æ’åºï¼Œå†æŒ‰æ€»å±€æ•°æ’åº
          const sortedUsers = allUsers
            .sort((a, b) => {
              // 1. é¦–å…ˆæŒ‰èƒœç‡æ’åºï¼ˆé«˜åˆ°ä½ï¼‰
              if (b.winRate !== a.winRate) {
                return b.winRate - a.winRate;
              }
              // 2. èƒœç‡ç›¸åŒæ—¶ï¼ŒæŒ‰èƒœåœºæ•°æ’åºï¼ˆé«˜åˆ°ä½ï¼‰
              if (b.wins !== a.wins) {
                return b.wins - a.wins;
              }
              // 3. èƒœåœºæ•°ç›¸åŒæ—¶ï¼ŒæŒ‰æ€»å±€æ•°æ’åºï¼ˆé«˜åˆ°ä½ï¼‰
              if (b.totalGames !== a.totalGames) {
                return b.totalGames - a.totalGames;
              }
              // 4. æœ€åæŒ‰ç”¨æˆ·åæ’åºï¼ˆç¡®ä¿ç¨³å®šæ’åºï¼‰
              return a.username.localeCompare(b.username);
            })
            .slice(0, limit)
            .map((user, index) => ({
              rank: index + 1,
              userId: user.userId,
              username: user.username,
              totalGames: user.totalGames,
              wins: user.wins,
              winRate: user.winRate,
              isCurrentUser: user.isCurrentUser || false
            }));

          console.log(`[æœ¬åœ°æ’è¡Œæ¦œ] ç”Ÿæˆæ’è¡Œæ¦œæ•°æ®ï¼Œå…± ${sortedUsers.length} æ¡è®°å½•:`, sortedUsers);
          return sortedUsers;
        } catch (error) {
          console.error("ç”Ÿæˆæœ¬åœ°æ’è¡Œæ¦œå¤±è´¥:", error);
          return [];
        }
      }

      // è·å–ç”¨æˆ·æ’å - æ”¯æŒæœ¬åœ°æ•°æ®é™çº§
      async function getUserRank(userId) {
        try {
          // é¦–å…ˆå°è¯•ä»åç«¯è·å–æ’å
          try {
            const response = await fetch(
              `${API_BASE_URL}/api/leaderboard/rank?userId=${userId}`
            );
            if (response.ok) {
              const data = await response.json();
              return data.rank || 0;
            } else {
              throw new Error("åç«¯è¯·æ±‚å¤±è´¥");
            }
          } catch (backendError) {
            console.log("[ç”¨æˆ·æ’å] åç«¯ä¸å¯ç”¨ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®è®¡ç®—æ’å");
            return getLocalUserRank(userId);
          }
        } catch (error) {
          console.error("è·å–ç”¨æˆ·æ’åé”™è¯¯:", error);
          return getLocalUserRank(userId);
        }
      }

      // ä»æœ¬åœ°æ•°æ®è®¡ç®—ç”¨æˆ·æ’å
      function getLocalUserRank(userId) {
        try {
          const leaderboard = getLocalLeaderboard(1000); // è·å–å®Œæ•´æ’è¡Œæ¦œ
          const userEntry = leaderboard.find(entry => entry.userId === userId);
          return userEntry ? userEntry.rank : 0;
        } catch (error) {
          console.error("è®¡ç®—æœ¬åœ°ç”¨æˆ·æ’åå¤±è´¥:", error);
          return 0;
        }
      }

      // æ˜¾ç¤ºå®æ—¶æ’è¡Œæ¦œ
      async function showRealTimeLeaderboard(forceRefresh = false) {
        const leaderboard = await loadLeaderboard("score", 100, forceRefresh);

        // è·å–å½“å‰ç”¨æˆ·çš„çœŸå®æ’å
        let userRank = 0;
        if (currentUser && currentUser.piUserId) {
          userRank = await getUserRank(currentUser.piUserId);
        }

        // å¯åŠ¨è‡ªåŠ¨åˆ·æ–°
        startLeaderboardAutoRefresh();

        let leaderboardHTML = "";
        if (leaderboard.length === 0) {
          // æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æ¸¸æˆæ•°æ®ä½†æœªæ˜¾ç¤ºåœ¨æ’è¡Œæ¦œä¸­
          const hasUserData = currentUser && userStats && userStats.totalGames > 0;

          leaderboardHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: #666;">
                        <div style="font-size: 3em; margin-bottom: 15px;">ğŸ¯</div>
                        ${hasUserData ?
                          `<p style="margin: 0; font-size: 1.1em;">æ­£åœ¨åŠ è½½æ’è¡Œæ¦œæ•°æ®...</p>
                           <p style="margin: 5px 0 0 0; font-size: 0.9em;">æ‚¨çš„æ¸¸æˆæ•°æ®ï¼š${userStats.totalGames}å±€ (${userStats.wins}èƒœ${userStats.losses}è´Ÿ) èƒœç‡${userStats.winRate}%</p>` :
                          `<p style="margin: 0; font-size: 1.1em;">æš‚æ— æ’è¡Œæ¦œæ•°æ®</p>
                           <p style="margin: 5px 0 0 0; font-size: 0.9em;">${t("play_one_game_to_rank")}</p>`
                        }
                    </div>
                `;
        } else {
          leaderboard.forEach((player, index) => {
            const isCurrentUser =
              currentUser &&
              (player.userId === currentUser.uid ||
                player.userId === currentUser.piUserId);
            const rankIcon =
              index === 0
                ? "ğŸ¥‡"
                : index === 1
                ? "ğŸ¥ˆ"
                : index === 2
                ? "ğŸ¥‰"
                : index + 1;
            const bgColor = isCurrentUser ? "background: #e3f2fd;" : "";

            leaderboardHTML += `
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 10px; border-bottom: 1px solid #e9ecef; ${bgColor}">
                            <span style="color: ${
                              index < 3 ? "#ffd700" : "#6c757d"
                            }; font-weight: bold;">${rankIcon}</span>
                            <span style="font-weight: 500; color: ${
                              isCurrentUser ? "#1976d2" : "#333"
                            };">${player.username}</span>
                            <span style="color: #666; font-size: 0.9em;">${t(
                              "wins_losses_format",
                              player.wins,
                              player.totalGames - player.wins
                            )}</span>
                            <span style="color: #28a745;">${
                              player.winRate
                            }%</span>
                        </div>
                    `;
          });
        }

        showCustomModal(
          t("global_ranking_title"),
          `
                <div style="text-align: center;">
                    <div style="margin-bottom: 20px;">
                        <span style="font-size: 3em; margin-bottom: 10px; display: block;">ğŸ†</span>
                        <h3 style="color: #333; margin-bottom: 20px;">${t(
                          "global_ranking_title"
                        )}</h3>
                        <p style="color: #666; font-size: 0.9em; margin: 0 0 15px 0;">${t(
                          "ranking_subtitle"
                        )}</p>
                    </div>

                    <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 2px solid #e9ecef; font-weight: bold; color: #495057;">
                            <span>${t("ranking_header_rank")}</span>
                            <span>${t("ranking_header_nickname")}</span>
                            <span>${t("ranking_header_games")}</span>
                            <span>${t("ranking_header_winrate")}</span>
                        </div>
                        ${leaderboardHTML}
                    </div>

                    ${
                      userRank > 0
                        ? `
                        <div style="background: #e3f2fd; border-radius: 8px; padding: 8px; margin-bottom: 10px; margin-top: 0px;">
                            <p style="margin: 0; color: #1976d2; font-weight: 500; text-align: center;">
                                ${t(
                                  "current_ranking",
                                  userRank,
                                  userStats ? userStats.wins : 0,
                                  userStats
                                    ? userStats.totalGames - userStats.wins
                                    : 0,
                                  userStats ? userStats.winRate : 0
                                )}
                            </p>
                        </div>
                    `
                        : userStats && userStats.totalGames === 0
                        ? `
                        <div style="background: #fff3cd; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                            <p style="margin: 0; color: #856404; font-weight: 500;">
                                ${t("play_one_game_to_rank")}
                            </p>
                        </div>
                    `
                        : ""
                    }

                    <p style="color: #666; font-size: 0.9em; margin: 0;">
                        ${t("leaderboard_update_tip")}
                    </p>
                </div>
            `
        );
      }

      // å¯åŠ¨æ’è¡Œæ¦œè‡ªåŠ¨åˆ·æ–°
      function startLeaderboardAutoRefresh() {
        // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
        if (leaderboardRefreshInterval) {
          clearInterval(leaderboardRefreshInterval);
        }

        // æ¯30ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡æ’è¡Œæ¦œ
        leaderboardRefreshInterval = setInterval(async () => {
          console.log("[æ’è¡Œæ¦œ] è‡ªåŠ¨åˆ·æ–°æ•°æ®...");
          const currentModal = document.querySelector(".modal-overlay");
          if (currentModal && currentModal.style.display !== "none") {
            // å¦‚æœæ’è¡Œæ¦œå¼¹çª—è¿˜åœ¨æ˜¾ç¤ºï¼Œåˆ™åˆ·æ–°æ•°æ®
            await showRealTimeLeaderboard(true);
          } else {
            // å¦‚æœå¼¹çª—å·²å…³é—­ï¼Œåœæ­¢è‡ªåŠ¨åˆ·æ–°
            stopLeaderboardAutoRefresh();
          }
        }, 30000); // 30ç§’
      }

      // åœæ­¢æ’è¡Œæ¦œè‡ªåŠ¨åˆ·æ–°
      function stopLeaderboardAutoRefresh() {
        if (leaderboardRefreshInterval) {
          clearInterval(leaderboardRefreshInterval);
          leaderboardRefreshInterval = null;
          console.log("[æ’è¡Œæ¦œ] åœæ­¢è‡ªåŠ¨åˆ·æ–°");
        }
      }

      // è§¦å‘æ•°æ®åˆ·æ–°ï¼ˆç”¨äºæ–°ç”¨æˆ·ç™»å½•åï¼‰
      function triggerDataRefresh() {
        console.log("[æ•°æ®åˆ·æ–°] è§¦å‘å…¨å±€æ•°æ®åˆ·æ–°");

        // é‡ç½®åˆ·æ–°å†·å´æ—¶é—´ï¼Œå¼ºåˆ¶åˆ·æ–°
        lastDataRefreshTime = 0;

        // å¦‚æœæ’è¡Œæ¦œå¼¹çª—æ­£åœ¨æ˜¾ç¤ºï¼Œç«‹å³åˆ·æ–°
        const currentModal = document.querySelector(".modal-overlay");
        if (currentModal && currentModal.style.display !== "none") {
          console.log("[æ•°æ®åˆ·æ–°] åˆ·æ–°æ’è¡Œæ¦œæ•°æ®");
          showRealTimeLeaderboard(true);
        }

        // åˆ·æ–°ä¸ªäººä¸­å¿ƒæ•°æ®ï¼ˆå¦‚æœæ­£åœ¨æ˜¾ç¤ºï¼‰
        const personalCenterModal = document.querySelector(".custom-modal");
        if (personalCenterModal) {
          console.log("[æ•°æ®åˆ·æ–°] åˆ·æ–°ä¸ªäººä¸­å¿ƒæ•°æ®");
          refreshUserStats();
        }
      }

      // æ˜¾ç¤ºå…¨çƒæ’è¡Œæ¦œ (ä½¿ç”¨çœŸå®æ•°æ®)
      async function showGlobalRanking() {
        // ç›´æ¥è°ƒç”¨çœŸå®æ’è¡Œæ¦œå‡½æ•°
        await showRealTimeLeaderboard();
        return;

        // ä»¥ä¸‹ä»£ç å·²åºŸå¼ƒï¼Œä¿ç•™ä½œä¸ºå¤‡ç”¨
        /*
        showCustomModal(
          `${t(
            "global_ranking_title"
          )}<br><span style='font-size: 0.7em; color: #ffffff; font-weight: normal;'>${t(
            "ranking_subtitle"
          )}</span>`,
          `
                <div style="text-align: center;">
                    <div style="background: #f8f9fa; border-radius: 8px; padding: 10px; margin-bottom: 8px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px; border-bottom: 2px solid #e9ecef; font-weight: bold; color: #495057;">
                            <span>${t("ranking_header_rank")}</span>
                            <span>${t("ranking_header_nickname")}</span>
                            <span>${t("ranking_header_games")}</span>
                            <span>${t("ranking_header_winrate")}</span>
                        </div>

                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #ffd700; font-weight: bold;">ğŸ¥‡ 1</span>
                            <span style="font-weight: 500;">æ£‹åœ£å¤§å¸ˆ</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;" data-i18n-format="wins_losses" data-wins="21" data-losses="1">(21èƒœ1è´Ÿ)</span>
                            <span style="color: #28a745;">95.2%</span>
                        </div>

                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #c0c0c0; font-weight: bold;">ğŸ¥ˆ 2</span>
                            <span style="font-weight: 500;">äº”å­é«˜æ‰‹</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(25èƒœ2è´Ÿ)</span>
                            <span style="color: #28a745;">92.8%</span>
                        </div>

                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #cd7f32; font-weight: bold;">ğŸ¥‰ 3</span>
                            <span style="font-weight: 500;">è¿ç è¾¾äºº</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(26èƒœ3è´Ÿ)</span>
                            <span style="color: #28a745;">89.6%</span>
                        </div>

                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #6c757d;">4</span>
                            <span style="font-weight: 500;">é»‘ç™½ä¼ è¯´</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(24èƒœ4è´Ÿ)</span>
                            <span style="color: #28a745;">87.3%</span>
                        </div>

                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #6c757d;">5</span>
                            <span style="font-weight: 500;">æ™ºæ…§ä¹‹æ˜Ÿ</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(23èƒœ4è´Ÿ)</span>
                            <span style="color: #28a745;">85.1%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #6c757d;">6</span>
                            <span style="font-weight: 500;">æ£‹é“é«˜æ‰‹</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(20èƒœ5è´Ÿ)</span>
                            <span style="color: #28a745;">80.0%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #6c757d;">7</span>
                            <span style="font-weight: 500;">äº”å­ç‹è€…</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(19èƒœ6è´Ÿ)</span>
                            <span style="color: #28a745;">76.0%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #6c757d;">8</span>
                            <span style="font-weight: 500;">è¿ç ä¸“å®¶</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(18èƒœ7è´Ÿ)</span>
                            <span style="color: #28a745;">72.0%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #6c757d;">9</span>
                            <span style="font-weight: 500;">é»‘ç™½ç²¾è‹±</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(17èƒœ8è´Ÿ)</span>
                            <span style="color: #28a745;">68.0%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px;">
                            <span style="color: #6c757d;">10</span>
                            <span style="font-weight: 500;">æ£‹å±€è¾¾äºº</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(16èƒœ9è´Ÿ)</span>
                            <span style="color: #28a745;">64.0%</span>
                        </div>
                    </div>
                    <div style="background: #e3f2fd; border-radius: 8px; padding: 8px; margin-bottom: 10px; margin-top: 0px;">
                        <p style="margin: 0; color: #1976d2; font-weight: 500; text-align: center;">
                            ${t("current_ranking", "42", "13", "4", "76.5")}
                        </p>
                    </div>

                    <p style="color: #666; font-size: 0.9em; margin: 0;">
                        ${t("leaderboard_update_tip")}
                    </p>
                </div>
            `
        );
        */
      }

      // æ˜¾ç¤ºä¸ªäººä¸­å¿ƒ
      async function showPersonalCenter() {
        // å¦‚æœç”¨æˆ·å·²ç™»å½•ï¼Œç¡®ä¿æœ‰piUserIdå¹¶åˆ·æ–°æ•°æ®
        if (currentUser) {
          // ç¡®ä¿æœ‰piUserId
          if (!currentUser.piUserId) {
            currentUser.piUserId = currentUser.uid;
          }

          await refreshUserStats();
        }

        const stats = userStats || {
          totalGames: 0,
          wins: 0,
          losses: 0,
          winRate: 0,
          rank: 0,
        };

        // è·å–ä¿å­˜çš„ç”¨æˆ·ä¿¡æ¯
        const savedWalletAddress =
          localStorage.getItem("userWalletAddress") || "";
        const savedNickname = localStorage.getItem("userNickname") || "";

        // åˆ¤æ–­ç™»å½•çŠ¶æ€å’Œæ˜µç§°æ˜¾ç¤ºé€»è¾‘
        let displayNickname = "";
        let nicknameEditable = true;

        if (currentUser && userStats) {
          // Piç™»å½•çŠ¶æ€ï¼šæ˜¾ç¤ºPiç”¨æˆ·åï¼Œä¸å¯ç¼–è¾‘
          displayNickname =
            userStats.username || currentUser.username || "Piç”¨æˆ·";
          nicknameEditable = false;
        } else {
          // æœªç™»å½•çŠ¶æ€ï¼šæ˜¾ç¤ºæœ¬åœ°æ˜µç§°ï¼Œå¯ç¼–è¾‘
          displayNickname = savedNickname || t("click_to_set_nickname");
          nicknameEditable = true;
        }

        showCustomModal(
          t("personal_center_title"),
          `
                <div style="text-align: center; max-height: 80vh; overflow-y: auto;">
                    <!-- ä¸ªäººæ¡£æ¡ˆç¼–è¾‘ -->
                    <div style="margin-bottom: 8px;">
                        <div style="background: #f8f9fa; border-radius: 8px; padding: 10px; margin-bottom: 8px;">
                            <!-- æ˜µç§°æ˜¾ç¤º -->
                            <div style="background: white; border-radius: 8px; padding: 10px; margin-bottom: 8px;">
                                <div style="margin-bottom: 5px;">
                                    <h4
                                        style="margin: 0 0 4px 0; color: #333; ${
                                          nicknameEditable
                                            ? "cursor: pointer; transition: color 0.2s;"
                                            : "cursor: default;"
                                        } font-size: 1.2em;"
                                        id="user-nickname-display"
                                        ${
                                          nicknameEditable
                                            ? 'onclick="toggleNicknameEdit()" onmouseover="this.style.color=\'#007bff\'" onmouseout="this.style.color=\'#333\'"'
                                            : ""
                                        }
                                    >${displayNickname}</h4>
                                    ${
                                      nicknameEditable
                                        ? `
                                    <div style="display: none;" id="nickname-edit-section">
                                        <input
                                            type="text"
                                            id="nickname-input"
                                            placeholder="${t(
                                              "enter_your_nickname"
                                            )}"
                                            value="${savedNickname}"
                                            style="
                                                width: 200px;
                                                padding: 8px;
                                                border: 2px solid #e9ecef;
                                                border-radius: 6px;
                                                font-size: 14px;
                                                text-align: center;
                                                box-sizing: border-box;
                                            "
                                            maxlength="20"
                                        />
                                        <button
                                            onclick="updateNickname()"
                                            style="
                                                background: #28a745;
                                                color: white;
                                                border: none;
                                                border-radius: 6px;
                                                padding: 8px 12px;
                                                cursor: pointer;
                                                font-size: 12px;
                                                margin-left: 5px;
                                            "
                                        >
                                            âœ“
                                        </button>
                                        <button
                                            onclick="toggleNicknameEdit()"
                                            style="
                                                background: #6c757d;
                                                color: white;
                                                border: none;
                                                border-radius: 6px;
                                                padding: 8px 12px;
                                                cursor: pointer;
                                                font-size: 12px;
                                                margin-left: 5px;
                                            "
                                        >
                                            âœ•
                                        </button>
                                    </div>
                                    `
                                        : ""
                                    }
                                </div>
                            </div>

                            <!-- æ¸¸æˆç»Ÿè®¡ -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 6px; margin-bottom: 6px;">
                                <div style="background: white; border-radius: 6px; padding: 8px; text-align: center;">
                                    <div style="font-size: 1.3em; color: #007bff; font-weight: bold;">${
                                      stats.totalGames
                                    }</div>
                                    <div style="color: #666; font-size: 0.8em;">${t(
                                      "total_games_label"
                                    )}</div>
                                </div>
                                <div style="background: white; border-radius: 6px; padding: 8px; text-align: center;">
                                    <div style="font-size: 1.3em; color: #28a745; font-weight: bold;">${
                                      stats.wins
                                    }</div>
                                    <div style="color: #666; font-size: 0.8em;">${t(
                                      "wins_label"
                                    )}</div>
                                </div>
                                <div style="background: white; border-radius: 6px; padding: 8px; text-align: center;">
                                    <div style="font-size: 1.3em; color: #ffc107; font-weight: bold;">${
                                      stats.winRate
                                    }%</div>
                                    <div style="color: #666; font-size: 0.8em;">${t(
                                      "win_rate_label"
                                    )}</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- è´¦æˆ·ä½™é¢å’Œé’±åŒ…åœ°å€ -->
                    <div style="background: #f8f9fa; border-radius: 8px; padding: 8px; margin-bottom: 8px;">
                        <div style="background: white; border-radius: 8px; padding: 8px; margin-bottom: 6px; border: 2px solid #e3f2fd;">
                            <div style="font-size: 1.8em; color: #f39c12; font-weight: bold; margin-bottom: 4px;" id="account-balance">
                                ${t("loading_text_display")}
                            </div>
                            <div style="display: flex; gap: 8px; justify-content: center; margin-top: 8px;">
                                <button onclick="refreshBalance()" style="background: #17a2b8; color: white; border: none; border-radius: 4px; padding: 6px 12px; cursor: pointer; font-size: 12px;">
                                    ${t("refresh_balance_text")}
                                </button>
                                <button onclick="showRechargeDialog(t('recharge_prompt'))" style="background: #28a745; color: white; border: none; border-radius: 4px; padding: 6px 12px; cursor: pointer; font-size: 12px;">
                                    ${t("recharge_text")}
                                </button>
                            </div>
                        </div>

                        <!-- é’±åŒ…åœ°å€è¾“å…¥ -->
                        <div style="background: white; border-radius: 8px; padding: 8px;">
                            <div style="margin-bottom: 0;">
                                <input
                                    type="text"
                                    id="wallet-address-input"
                                    placeholder="${t(
                                      "wallet_address_placeholder"
                                    )}"
                                    value="${savedWalletAddress}"
                                    maxlength="50"
                                    style="
                                        width: 100%;
                                        padding: 8px;
                                        border: 2px solid #e9ecef;
                                        border-radius: 6px;
                                        font-size: 14px;
                                        box-sizing: border-box;
                                        font-family: monospace;
                                        text-transform: uppercase;
                                        background: #f8f9fa;
                                    "
                                />
                                <div style="margin-top: 8px; display: flex; justify-content: space-between; align-items: center;">
                                    <small style="color: #6c757d; font-size: 12px;">
                                        ${t("wallet_format_hint")}
                                    </small>
                                    <span id="wallet-char-count" style="color: #6c757d; font-size: 12px;">
                                        ${savedWalletAddress.length}/50
                                    </span>
                                </div>
                                <div style="margin-top: 6px; text-align: center;">
                                    <button
                                        onclick="saveWalletAddress()"
                                        style="
                                            background: #28a745;
                                            color: white;
                                            border: none;
                                            border-radius: 6px;
                                            padding: 8px 16px;
                                            cursor: pointer;
                                            font-size: 14px;
                                            margin-right: 8px;
                                        "
                                    >
                                        ${t("save_wallet")}
                                    </button>
                                    <button
                                        onclick="editWalletAddress()"
                                        style="
                                            background: #17a2b8;
                                            color: white;
                                            border: none;
                                            border-radius: 6px;
                                            padding: 8px 16px;
                                            cursor: pointer;
                                            font-size: 14px;
                                        "
                                    >
                                        ${t("edit_wallet")}
                                    </button>
                                </div>
                            </div>

                            <!-- æœˆåº¦å¥–åŠ±é‡è¦æç¤º -->
                            <div style="margin-top: 8px; padding: 8px; background: #fff3cd; border-radius: 4px; border: 1px solid #ffeaa7;">
                                <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 4px;">
                                    <span style="font-size: 14px;">ğŸ†</span>
                                    <strong style="color: #856404; font-size: 12px;">${t(
                                      "monthly_reward_reminder"
                                    )}</strong>
                                </div>
                                <p style="color: #856404; font-size: 11px; margin: 0; line-height: 1.4;">
                                    ${t("monthly_reward_desc")}
                                </p>
                            </div>
                        </div>
                    </div>



                    <div style="text-align: center; margin-top: 6px;">
                        ${
                          currentUser && userStats
                            ? `
                        <button
                            onclick="logoutUser()"
                            style="
                                background: #dc3545;
                                color: white;
                                border: none;
                                border-radius: 8px;
                                padding: 8px 16px;
                                cursor: pointer;
                                font-size: 14px;
                                font-weight: 500;
                                transition: background 0.2s;
                            "
                            onmouseover="this.style.background='#c82333'"
                            onmouseout="this.style.background='#dc3545'"
                        >
                            ${t("logout_account_text")}
                        </button>
                        `
                            : `
                        <button
                            onclick="handlePersonalCenterLogin()"
                            style="
                                background: #7b2cbf;
                                color: white;
                                border: none;
                                border-radius: 8px;
                                padding: 8px 16px;
                                cursor: pointer;
                                font-size: 14px;
                                font-weight: 500;
                                transition: background 0.2s;
                            "
                            onmouseover="this.style.background='#5a189a'"
                            onmouseout="this.style.background='#7b2cbf'"
                        >
                            ${t("login_with_pi")}
                        </button>
                        `
                        }
                    </div>
                </div>
            `
        );

        // åˆå§‹åŒ–é’±åŒ…åœ°å€çŠ¶æ€å’Œåˆ·æ–°ä½™é¢
        setTimeout(() => {
          initializeWalletAddressState();
          refreshBalance(); // è‡ªåŠ¨åˆ·æ–°ä½™é¢
        }, 100);
      }

      // åˆå§‹åŒ–é’±åŒ…åœ°å€çŠ¶æ€
      function initializeWalletAddressState() {
        const walletInput = document.getElementById("wallet-address-input");
        const savedWalletAddress =
          localStorage.getItem("userWalletAddress") || "";

        if (walletInput) {
          // æ›´æ–°å­—ç¬¦è®¡æ•°
          updateWalletCharCount(savedWalletAddress.length);

          // å¦‚æœå·²æœ‰å®Œæ•´çš„é’±åŒ…åœ°å€ï¼Œè®¾ç½®ä¸ºåªè¯»çŠ¶æ€
          if (savedWalletAddress.length === 50) {
            walletInput.style.background = "#e9ecef";
            walletInput.readOnly = true;
          } else {
            walletInput.style.background = "#f8f9fa";
            walletInput.readOnly = false;
          }
        }
      }

      // ä¸ªäººä¸­å¿ƒç™»å½•å¤„ç†
      async function handlePersonalCenterLogin() {
        // ä¿å­˜å½“å‰åœ¨ä¸ªäººä¸­å¿ƒçš„çŠ¶æ€
        const wasInPersonalCenter = true;

        // å…³é—­ä¸ªäººä¸­å¿ƒå¼¹çª—
        closePersonalCenter();

        // è°ƒç”¨ä¸»é¡µç™»å½•é€»è¾‘
        await handleSignIn();

        // ç™»å½•æˆåŠŸåé‡æ–°æ‰“å¼€ä¸ªäººä¸­å¿ƒ
        if (currentUser) {
          setTimeout(() => {
            showPersonalCenter();
          }, 1000); // ç­‰å¾…ç™»å½•æˆåŠŸæç¤ºæ˜¾ç¤ºåå†æ‰“å¼€ä¸ªäººä¸­å¿ƒ
        }
      }

      // å…³é—­ä¸ªäººä¸­å¿ƒå¼¹çª—
      function closePersonalCenter() {
        const modal = document.querySelector(".custom-modal");
        if (modal) {
          modal.remove();
        }
      }

      // åˆ‡æ¢æ˜µç§°ç¼–è¾‘æ¨¡å¼
      function toggleNicknameEdit() {
        const editSection = document.getElementById("nickname-edit-section");
        const isVisible = editSection.style.display !== "none";

        if (isVisible) {
          editSection.style.display = "none";
        } else {
          editSection.style.display = "block";
          // èšç„¦åˆ°è¾“å…¥æ¡†
          setTimeout(() => {
            document.getElementById("nickname-input").focus();
          }, 100);
        }
      }

      // æ›´æ–°ç”¨æˆ·æ˜µç§°
      function updateNickname() {
        const nicknameInput = document.getElementById("nickname-input");
        const nicknameDisplay = document.getElementById(
          "user-nickname-display"
        );
        const newNickname = nicknameInput.value.trim();

        if (!newNickname) {
          showCustomAlert(t("hint"), t("enter_nickname"));
          return;
        }

        if (newNickname.length > 20) {
          showCustomAlert(t("hint"), t("nickname_too_long"));
          return;
        }

        // è¿‡æ»¤æ•æ„Ÿè¯ï¼ˆç®€å•ç¤ºä¾‹ï¼‰
        const forbiddenWords = ["admin", "ç®¡ç†å‘˜", "ç³»ç»Ÿ", "system"];
        if (
          forbiddenWords.some((word) =>
            newNickname.toLowerCase().includes(word)
          )
        ) {
          showCustomAlert(t("hint"), t("nickname_forbidden"));
          return;
        }

        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        localStorage.setItem("userNickname", newNickname);

        // æ›´æ–°æ˜¾ç¤º
        nicknameDisplay.textContent = newNickname;

        // éšè—ç¼–è¾‘åŒºåŸŸ
        document.getElementById("nickname-edit-section").style.display = "none";

        showCustomAlert(t("success_title"), t("nickname_updated"));
      }

      // ä¿å­˜é’±åŒ…åœ°å€
      function saveWalletAddress() {
        const walletInput = document.getElementById("wallet-address-input");
        const walletAddress = walletInput.value.trim();

        if (!walletAddress) {
          showCustomAlert(t("hint"), t("enter_wallet_hint"));
          return;
        }

        // éªŒè¯é’±åŒ…åœ°å€æ ¼å¼ï¼š50ä½å¤§å†™å­—æ¯å’Œæ•°å­—
        if (walletAddress.length !== 50) {
          showCustomAlert(
            t("error_title"),
            t("wallet_length_error", walletAddress.length)
          );
          return;
        }

        if (!/^[A-Z0-9]{50}$/.test(walletAddress)) {
          showCustomAlert(t("error_title"), t("wallet_format_error"));
          return;
        }

        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        localStorage.setItem("userWalletAddress", walletAddress);

        // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
        showCustomAlert(t("success_title"), t("wallet_saved_success"));

        // è®¾ç½®è¾“å…¥æ¡†ä¸ºåªè¯»çŠ¶æ€
        walletInput.style.background = "#e9ecef";
        walletInput.readOnly = true;

        // è‡ªåŠ¨åˆ·æ–°ä½™é¢
        refreshBalance();
      }

      // ç¼–è¾‘é’±åŒ…åœ°å€
      function editWalletAddress() {
        const walletInput = document.getElementById("wallet-address-input");

        // å¯ç”¨ç¼–è¾‘æ¨¡å¼
        walletInput.style.background = "#f8f9fa";
        walletInput.readOnly = false;
        walletInput.focus();

        // é€‰ä¸­æ‰€æœ‰æ–‡æœ¬ä¾¿äºç¼–è¾‘
        walletInput.select();

        showCustomAlert(t("edit_mode_title"), t("edit_mode_message"));
      }

      // é€€å‡ºè´¦æˆ·
      function logoutUser() {
        showCustomConfirm(
          t("logout_confirm"),
          t("logout_message"),
          () => {
            // ä¿å­˜å½“å‰ç”¨æˆ·çš„æ¸¸æˆæ•°æ®åˆ°ç”¨æˆ·ä¸“å±å­˜å‚¨
            if (currentUser && userStats) {
              const userGameData = {
                userId: currentUser.piUserId || currentUser.uid,
                username: currentUser.username,
                gameStats: userStats,
                lastUpdated: new Date().toISOString(),
              };
              localStorage.setItem(
                `piGomokuUserData_${currentUser.piUserId || currentUser.uid}`,
                JSON.stringify(userGameData)
              );
            }

            // åªæ¸…é™¤ä¼šè¯ç›¸å…³çš„æ•°æ®ï¼Œä¿ç•™æ¸¸æˆç»Ÿè®¡æ•°æ®
            localStorage.removeItem("piGomokuNickname");
            localStorage.removeItem("userAvatar");
            localStorage.removeItem("userWalletAddress");
            localStorage.removeItem("piGomokuLeaderboard");
            // æ³¨æ„ï¼šä¸åˆ é™¤ piGomokuGameStatsï¼Œæ”¹ä¸ºç”¨æˆ·ä¸“å±å­˜å‚¨

            // æ¸…é™¤ç™»å½•çŠ¶æ€
            clearLoginState();

            // æ¸…é™¤å†…å­˜ä¸­çš„ç”¨æˆ·çŠ¶æ€
            currentUser = null;
            userStats = null;

            // æ˜¾ç¤ºé€€å‡ºæˆåŠŸæ¶ˆæ¯
            showCustomAlert(t("logout_success"), t("logout_success_message"));

            // å…³é—­ä¸ªäººä¸­å¿ƒ
            closePersonalCenter();

            // æ›´æ–°ä¸»é¡µæŒ‰é’®çŠ¶æ€
            updateMainPageButtonState();

            // åˆ·æ–°é¡µé¢é‡ç½®æ‰€æœ‰çŠ¶æ€
            setTimeout(() => {
              location.reload();
            }, 1000);
          },
          () => {
            // å–æ¶ˆæ—¶ä¸åšä»»ä½•æ“ä½œ
          }
        );
      }

      // åˆ·æ–°è´¦æˆ·ä½™é¢
      async function refreshBalance() {
        const balanceElement = document.getElementById("account-balance");

        if (!currentUser) {
          showCustomAlert(t("hint"), t("please_login_first"));
          return;
        }

        try {
          balanceElement.innerHTML = t("balance_querying");

          const response = await fetch(
            `${API_BASE_URL}/api/payment/balance?userId=${currentUser.uid}`
          );
          const data = await response.json();

          if (data.success) {
            balanceElement.innerHTML = `${data.balance.current.toFixed(2)} Ï€`;

            // æ˜¾ç¤ºä½™é¢è¯¦æƒ…ï¼ˆå¯é€‰ï¼‰
            if (
              data.balance.totalRecharged > 0 ||
              data.balance.totalSpent > 0
            ) {
              const tooltip = t(
                "balance_tooltip",
                data.balance.totalRecharged.toFixed(2),
                data.balance.totalSpent.toFixed(2)
              );
              balanceElement.title = tooltip;
            }
          } else {
            balanceElement.innerHTML = "0.00 Ï€";
            console.error("è·å–ä½™é¢å¤±è´¥:", data.message);
          }
        } catch (error) {
          console.error("åˆ·æ–°ä½™é¢å¤±è´¥:", error);
          balanceElement.innerHTML = t("balance_query_failed_display");
          setTimeout(() => {
            balanceElement.innerHTML = "0.00 Ï€";
          }, 2000);
        }
      }

      // è·å–ç­‰çº§åç§°
      function getLevelName(score) {
        if (score >= 2000) return "å¤§å¸ˆçº§";
        if (score >= 1500) return "ä¸“å®¶çº§";
        if (score >= 1200) return "é«˜çº§æ£‹æ‰‹";
        if (score >= 1000) return "ä¸­çº§æ£‹æ‰‹";
        if (score >= 800) return "åˆçº§æ£‹æ‰‹";
        return "æ–°æ‰‹";
      }

      // è·å–ç­‰çº§è¿›åº¦
      function getLevelProgress(score) {
        const levels = [0, 800, 1000, 1200, 1500, 2000, 3000];
        for (let i = 0; i < levels.length - 1; i++) {
          if (score >= levels[i] && score < levels[i + 1]) {
            const progress =
              ((score - levels[i]) / (levels[i + 1] - levels[i])) * 100;
            return Math.min(100, Math.max(0, progress));
          }
        }
        return 100; // æœ€é«˜çº§
      }

      // æ˜¾ç¤ºæ¸¸æˆè¯´æ˜
      function showGameInstructions() {
        showCustomModal(
          t("game_instructions_title"),
          `
                <div style="text-align: left; max-height: 500px; overflow-y: auto;">
                    <!-- å†å²æ¸Šæº -->
                    <div style="text-align: center; margin-bottom: 20px;">
                        <span style="font-size: 3em; margin-bottom: 10px; display: block;">ğŸ›ï¸</span>
                        <h3 style="color: #333; margin-bottom: 15px;">${t(
                          "game_history_section"
                        )}</h3>
                        <p style="margin: 0; line-height: 1.6; font-size: 14px; color: #666;">
                            ${t("game_history_desc")}
                        </p>
                    </div>

                    <!-- Basic Rules -->
                    <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                        <h4 style="color: #333; margin: 0 0 12px 0; font-size: 16px;">${t(
                          "game_rules_title"
                        )}</h4>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6; font-size: 14px; color: #333;">
                            <li>${t("basic_rules_detail_1")}</li>
                            <li>${t("basic_rules_detail_2")}</li>
                            <li>${t("basic_rules_detail_3")}</li>
                            <li>${t("basic_rules_detail_4")}</li>
                        </ul>
                    </div>

                    <!-- å›åˆæ—¶é—´è§„åˆ™ -->
                    <div style="background: #fff3cd; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                        <h4 style="color: #856404; margin: 0 0 12px 0; font-size: 16px;">${t(
                          "turn_time_rules"
                        )}</h4>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6; font-size: 14px; color: #856404;">
                            <li><strong>${t("thinking_time_rule")}</strong></li>
                            <li><strong>${t("time_warning_rule")}</strong></li>
                            <li><strong>${t(
                              "urgent_warning_rule"
                            )}</strong></li>
                            <li><strong>${t("timeout_rule")}</strong></li>
                        </ul>
                    </div>

                    <!-- æ¸¸æˆæ“ä½œ -->
                    <div style="background: #e3f2fd; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                        <h4 style="color: #1976d2; margin: 0 0 12px 0; font-size: 16px;">${t(
                          "game_operations"
                        )}</h4>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6; font-size: 14px; color: #1976d2;">
                            <li><strong>${t("place_stone")}</strong></li>
                            <li><strong>${t("undo_move")}</strong></li>
                            <li><strong>${t("new_game_op")}</strong></li>
                            <li><strong>${t("return_op")}</strong></li>
                        </ul>
                    </div>

                    <!-- ç§¯åˆ†ç³»ç»Ÿ -->
                    <div style="background: #d4edda; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                        <h4 style="color: #155724; margin: 0 0 12px 0; font-size: 16px;">${t(
                          "score_system"
                        )}</h4>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6; font-size: 14px; color: #155724;">
                            <li><strong>${t("initial_score")}</strong></li>
                            <li><strong>${t("win_score")}</strong></li>
                            <li><strong>${t("draw_score")}</strong></li>
                            <li><strong>${t("lose_score")}</strong></li>
                            <li><strong>${t("quit_score")}</strong></li>
                        </ul>
                        <div style="margin-top: 10px; padding: 8px; background: #c3e6cb; border-radius: 4px; font-size: 13px; color: #155724;">
                            ${t("monthly_reset_system")}<br>
                            ${t("monthly_reset_desc")}<br>
                            ${t("historical_data_preserved")}<br>
                            ${t("monthly_ranking_only")}
                        </div>
                        <div style="margin-top: 8px; padding: 8px; background: #fff3cd; border-radius: 4px; font-size: 13px; color: #856404;">
                            ${t("anti_farming")}
                        </div>
                    </div>

                    <!-- æœˆåº¦å¥–åŠ±è§„åˆ™ -->
                    <div style="background: #fff3cd; border-radius: 8px; padding: 15px; margin-bottom: 15px; border: 2px solid #ffeaa7;">
                        <h4 style="color: #856404; margin: 0 0 12px 0; font-size: 16px;">${t(
                          "monthly_rewards"
                        )}</h4>
                        <div style="color: #856404; font-size: 14px; line-height: 1.6;">
                            <div style="background: white; border-radius: 6px; padding: 12px; margin-bottom: 12px;">
                                <h5 style="color: #d63384; margin: 0 0 8px 0; font-size: 14px;">${t(
                                  "reward_pool_allocation"
                                )}</h5>
                                <ul style="margin: 0; padding-left: 20px; font-size: 13px;">
                                    <li>${t("reward_settlement")}</li>
                                    <li>${t("reward_pool_percentage")}</li>
                                    <li>${t("reward_example")}</li>
                                </ul>
                            </div>

                            <div style="background: white; border-radius: 6px; padding: 12px; margin-bottom: 12px;">
                                <h5 style="color: #d63384; margin: 0 0 8px 0; font-size: 14px;">${t(
                                  "top_three_distribution"
                                )}</h5>
                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; font-size: 13px;">
                                    <div style="text-align: center; background: #fff3cd; padding: 8px; border-radius: 4px;">
                                        <div style="font-weight: bold; color: #ff6b35;">${t(
                                          "first_place"
                                        )}</div>
                                        <div style="color: #856404;">50%</div>
                                    </div>
                                    <div style="text-align: center; background: #e2e3e5; padding: 8px; border-radius: 4px;">
                                        <div style="font-weight: bold; color: #6c757d;">${t(
                                          "second_place"
                                        )}</div>
                                        <div style="color: #6c757d;">30%</div>
                                    </div>
                                    <div style="text-align: center; background: #f8d7da; padding: 8px; border-radius: 4px;">
                                        <div style="font-weight: bold; color: #721c24;">${t(
                                          "third_place"
                                        )}</div>
                                        <div style="color: #721c24;">20%</div>
                                    </div>
                                </div>
                            </div>

                            <div style="background: white; border-radius: 6px; padding: 12px;">
                                <h5 style="color: #d63384; margin: 0 0 8px 0; font-size: 14px;">${t(
                                  "distribution_method"
                                )}</h5>
                                <ul style="margin: 0; padding-left: 20px; font-size: 13px;">
                                    <li>${t("wallet_distribution")}</li>
                                    <li>${t("valid_wallet_required")}</li>
                                    <li>${t("next_day_distribution")}</li>
                                    <li>${t("invalid_wallet_rollover")}</li>
                                </ul>
                            </div>

                            <div style="margin-top: 12px; padding: 8px; background: #d1ecf1; border-radius: 4px; font-size: 12px; color: #0c5460; text-align: center;">
                                ${t("reward_example_calculation")}<br>
                                ${t("first_place_reward")} | ${t(
            "second_place_reward"
          )} | ${t("third_place_reward")}
                            </div>
                        </div>
                    </div>

                    <!-- æ’è¡Œæ¦œè§„åˆ™ -->
                    <div style="background: #f3e5f5; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                        <h4 style="color: #7b1fa2; margin: 0 0 12px 0; font-size: 16px;">${t(
                          "leaderboard_rules"
                        )}</h4>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6; font-size: 14px; color: #7b1fa2;">
                            <li><strong>${t("ranking_condition")}</strong></li>
                            <li><strong>${t("ranking_basis")}</strong></li>
                            <li><strong>${t("data_statistics")}</strong></li>
                            <li><strong>${t("realtime_update")}</strong></li>
                        </ul>
                    </div>

                    <!-- æ¸©é¦¨æç¤º -->
                    <div style="background: #e8f5e8; border-radius: 8px; padding: 15px; text-align: center;">
                        <p style="margin: 0; color: #2e7d32; font-weight: 500; font-size: 14px; white-space: pre-line;">
                            ${t("warm_tips")}
                        </p>
                    </div>
                </div>
            `
        );
      }

      // é€šç”¨æ¨¡æ€æ¡†æ˜¾ç¤ºå‡½æ•°
      function showCustomModal(title, content, callback = null) {
        // åˆ›å»ºæ¨¡æ€æ¡†HTML
        const modalHTML = `
                <div id="custom-modal" style="
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.5);
                    display: flex;
                    justify-content: center;
                    align-items: flex-start;
                    padding-top: 5vh;
                    z-index: 1000;
                    padding: 20px;
                    box-sizing: border-box;
                ">
                    <div style="
                        background: white;
                        border-radius: 12px;
                        max-width: 500px;
                        width: 100%;
                        max-height: 90vh;
                        overflow: hidden;
                        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                    ">
                        <div style="
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            color: white;
                            padding: 20px;
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                        ">
                            <h3 style="margin: 0; font-size: 1.2em;">${title}</h3>
                            <button onclick="closeNewModal()" style="
                                background: none;
                                border: none;
                                color: white;
                                font-size: 1.5em;
                                cursor: pointer;
                                padding: 0;
                                width: 30px;
                                height: 30px;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                border-radius: 50%;
                                transition: background 0.2s;
                            " onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='none'">Ã—</button>
                        </div>
                        <div style="padding: 20px; overflow-y: auto; max-height: calc(90vh - 80px);">
                            ${content}
                        </div>
                    </div>
                </div>
            `;

        // æ·»åŠ åˆ°é¡µé¢
        document.body.insertAdjacentHTML("beforeend", modalHTML);

        // ç‚¹å‡»èƒŒæ™¯å…³é—­
        document
          .getElementById("custom-modal")
          .addEventListener("click", function (e) {
            if (e.target === this) {
              closeNewModal();
            }
          });
      }

      // å…³é—­æ–°çš„è‡ªå®šä¹‰æ¨¡æ€æ¡†
      function closeNewModal() {
        const modal = document.getElementById("custom-modal");
        if (modal) {
          modal.remove();
        }
        // åœæ­¢æ’è¡Œæ¦œè‡ªåŠ¨åˆ·æ–°
        stopLeaderboardAutoRefresh();
      }

      // ==================== æ¸¸æˆç»Ÿè®¡å’Œæ’è¡Œæ¦œåŠŸèƒ½ ====================

      // åŠ è½½ç”¨æˆ·ç»Ÿè®¡æ•°æ®
      async function loadUserStats() {
        if (!currentUser) return;

        try {
          const response = await fetch(
            `${API_BASE_URL}/api/users/stats?uid=${currentUser.uid}`
          );
          if (response.ok) {
            const data = await response.json();
            userStats = data.stats;
          } else {
            // ç”¨æˆ·é¦–æ¬¡ç™»å½•ï¼Œåˆ›å»ºåˆå§‹ç»Ÿè®¡
            userStats = {
              userId: currentUser.uid,
              username:
                currentUser.username ||
                `ç©å®¶${currentUser.uid.substring(0, 8)}`,
              totalGames: 0,
              wins: 0,
              losses: 0,
              draws: 0,
              winRate: 0,
              rank: 0,
            };
          }
        } catch (error) {
          console.error("åŠ è½½ç”¨æˆ·ç»Ÿè®¡å¤±è´¥:", error);
          // ä½¿ç”¨é»˜è®¤ç»Ÿè®¡æ•°æ®
          userStats = {
            userId: currentUser.uid,
            username:
              currentUser.username || `ç©å®¶${currentUser.uid.substring(0, 8)}`,
            totalGames: 0,
            wins: 0,
            losses: 0,
            draws: 0,
            winRate: 0,
            rank: 0,
          };
        }
      }

      // åˆ·æ–°ç”¨æˆ·ç»Ÿè®¡æ•°æ®ï¼ˆç”¨äºä¸ªäººä¸­å¿ƒï¼‰
      async function refreshUserStats() {
        if (!currentUser) return;

        // ç¡®ä¿æœ‰piUserIdï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨uid
        if (!currentUser.piUserId) {
          currentUser.piUserId = currentUser.uid;
        }

        // å…ˆè·å–æœ¬åœ°æ•°æ®ä½œä¸ºå¤‡ä»½
        const localStats = localStorage.getItem("piGomokuGameStats");
        let localUserStats = null;
        if (localStats) {
          try {
            localUserStats = JSON.parse(localStats);
          } catch (error) {
            console.error("è§£ææœ¬åœ°ç»Ÿè®¡æ•°æ®å¤±è´¥:", error);
          }
        }

        try {
          const apiUrl = `${API_BASE_URL}/api/users/stats?uid=${currentUser.piUserId}`;
          const response = await fetch(apiUrl);

          if (response.ok) {
            const data = await response.json();
            const backendStats = data.stats;

            // æ•°æ®å®Œæ•´æ€§æ£€æŸ¥ï¼šå¦‚æœåç«¯æ•°æ®æ˜æ˜¾å¼‚å¸¸ï¼ˆæ€»å±€æ•°ä¸º0ä½†æœ¬åœ°æœ‰æ•°æ®ï¼‰ï¼Œä¼˜å…ˆä½¿ç”¨æœ¬åœ°æ•°æ®
            if (
              localUserStats &&
              localUserStats.totalGames > 0 &&
              backendStats.totalGames === 0
            ) {
              console.log("[æ•°æ®æ¢å¤] æ£€æµ‹åˆ°åç«¯æ•°æ®å¼‚å¸¸ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®");
              userStats = localUserStats;

              // å°è¯•å°†æœ¬åœ°æ•°æ®åŒæ­¥å›åç«¯ï¼ˆé€šè¿‡è®°å½•ä¸€ä¸ªè™šæ‹Ÿæ¸¸æˆæ¥æ¢å¤æ•°æ®ï¼‰
              try {
                await syncLocalDataToBackend(localUserStats);
              } catch (syncError) {
                console.error("åŒæ­¥æœ¬åœ°æ•°æ®åˆ°åç«¯å¤±è´¥:", syncError);
              }
            } else {
              // åç«¯æ•°æ®æ­£å¸¸ï¼Œä½¿ç”¨åç«¯æ•°æ®
              userStats = backendStats;

              // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
              localStorage.setItem(
                "piGomokuGameStats",
                JSON.stringify(userStats)
              );

              // åŒæ—¶ä¿å­˜åˆ°ç”¨æˆ·ä¸“å±å­˜å‚¨
              saveUserGameDataToSpecificStorage();
            }
          } else {
            // åç«¯è¯·æ±‚å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®
            if (localUserStats) {
              console.log("[æ•°æ®æ¢å¤] åç«¯è¯·æ±‚å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®");
              userStats = localUserStats;
            }
          }
        } catch (error) {
          console.error("åˆ·æ–°ç”¨æˆ·ç»Ÿè®¡å¤±è´¥:", error);
          // ç½‘ç»œé”™è¯¯ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®
          if (localUserStats) {
            console.log("[æ•°æ®æ¢å¤] ç½‘ç»œé”™è¯¯ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®");
            userStats = localUserStats;
          }
        }
      }

      // åŒæ­¥æœ¬åœ°æ•°æ®åˆ°åç«¯
      async function syncLocalDataToBackend(localStats) {
        if (!currentUser || !localStats) return;

        try {
          // ä¸ºæ¯ä¸ªæœ¬åœ°æ¸¸æˆè®°å½•ä¸€ä¸ªèƒœåˆ©ï¼Œä»¥æ¢å¤åç«¯ç»Ÿè®¡æ•°æ®
          for (let i = 0; i < (localStats.wins || 0); i++) {
            await fetch(`${API_BASE_URL}/api/games`, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                playerUid: currentUser.piUserId || currentUser.uid,
                result: "win",
                moves: [],
                duration: 0,
              }),
            });
          }

          // ä¸ºæ¯ä¸ªæœ¬åœ°æ¸¸æˆè®°å½•ä¸€ä¸ªå¤±è´¥
          for (let i = 0; i < (localStats.losses || 0); i++) {
            await fetch(`${API_BASE_URL}/api/games`, {
              method: "POST",
              headers: {
                "Content-Type": "application/json",
              },
              body: JSON.stringify({
                playerUid: currentUser.piUserId || currentUser.uid,
                result: "lose",
                moves: [],
                duration: 0,
              }),
            });
          }

          console.log("[æ•°æ®æ¢å¤] æœ¬åœ°æ•°æ®å·²æˆåŠŸåŒæ­¥åˆ°åç«¯");
        } catch (error) {
          console.error("[æ•°æ®æ¢å¤] åŒæ­¥å¤±è´¥:", error);
        }
      }

      // è®°å½•æ¸¸æˆç»“æœ
      async function recordGameResult(result, gameData = {}) {
        if (!currentUser) {
          return;
        }

        // å¦‚æœ userStats ä¸å­˜åœ¨ï¼Œå…ˆåˆå§‹åŒ–
        if (!userStats) {
          initializeUserStatsFromLocal();
          if (!userStats) {
            createDefaultUserStats();
          }
        }

        // å…ˆæ›´æ–°æœ¬åœ°æ•°æ®
        updateLocalGameStats(result);

        try {
          const userId = currentUser.piUserId || currentUser.uid;
          const apiUrl = `${API_BASE_URL}/api/games`;

          // ç¡®ä¿ä½¿ç”¨ä¸ä¸ªäººä¸­å¿ƒä¸€è‡´çš„ç”¨æˆ·å
          const displayUsername = getCurrentDisplayUsername();

          // åŒæ­¥æ›´æ–°æœ¬åœ°userStatsçš„ç”¨æˆ·å
          if (userStats) {
            userStats.username = displayUsername;
          }

          const response = await fetch(apiUrl, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              playerUid: currentUser.piUserId || currentUser.uid,
              result: result === 'loss' ? 'lose' : result, // 'win', 'lose', 'draw' - åç«¯æœŸæœ›çš„æ ¼å¼
              moves: gameData.moves || [],
              duration: gameData.duration || 0,
            }),
          });

          if (response.ok) {
            const data = await response.json();
            userStats = data.userStats; // æ›´æ–°æœ¬åœ°ç»Ÿè®¡æ•°æ®

            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem(
              "piGomokuGameStats",
              JSON.stringify(userStats)
            );

            // åŒæ—¶ä¿å­˜åˆ°ç”¨æˆ·ä¸“å±å­˜å‚¨
            saveUserGameDataToSpecificStorage();

            // åˆ·æ–°æœ¬åœ°æ’è¡Œæ¦œæ•°æ®
            refreshLocalLeaderboardData();

            // æ˜¾ç¤ºæ¸¸æˆç»“æœç»Ÿè®¡
            await showGameResultStats(result, data.userStats);
          } else {
            console.error("è®°å½•æ¸¸æˆç»“æœåˆ°åç«¯å¤±è´¥:", response.statusText);
            // åç«¯å¤±è´¥æ—¶ï¼Œç¡®ä¿æœ¬åœ°æ•°æ®å·²ä¿å­˜å¹¶åˆ·æ–°æ’è¡Œæ¦œ
            saveUserGameDataToSpecificStorage();
            refreshLocalLeaderboardData();
            // ä½¿ç”¨æœ¬åœ°æ•°æ®æ˜¾ç¤ºç»“æœ
            await showGameResultStats(result, userStats);
          }
        } catch (error) {
          console.error("è®°å½•æ¸¸æˆç»“æœå¤±è´¥:", error);
          // ç½‘ç»œé”™è¯¯æ—¶ï¼Œç¡®ä¿æœ¬åœ°æ•°æ®å·²ä¿å­˜å¹¶åˆ·æ–°æ’è¡Œæ¦œ
          saveUserGameDataToSpecificStorage();
          refreshLocalLeaderboardData();
          // ä½¿ç”¨æœ¬åœ°æ•°æ®æ˜¾ç¤ºç»“æœ
          await showGameResultStats(result, userStats);
        }
      }

      // æ›´æ–°æœ¬åœ°æ¸¸æˆç»Ÿè®¡æ•°æ®
      function updateLocalGameStats(result) {
        if (!userStats) {
          return;
        }

        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        userStats.totalGames = (userStats.totalGames || 0) + 1;

        if (result === "win") {
          userStats.wins = (userStats.wins || 0) + 1;
        } else if (result === "loss") {
          userStats.losses = (userStats.losses || 0) + 1;
        } else if (result === "draw") {
          userStats.draws = (userStats.draws || 0) + 1;
        }

        // é‡æ–°è®¡ç®—èƒœç‡
        if (userStats.totalGames > 0) {
          userStats.winRate = Math.round(
            (userStats.wins / userStats.totalGames) * 100
          );
        }

        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        localStorage.setItem("piGomokuGameStats", JSON.stringify(userStats));

        // åŒæ—¶ä¿å­˜åˆ°ç”¨æˆ·ä¸“å±å­˜å‚¨
        saveUserGameDataToSpecificStorage();
      }

      // ä¿å­˜ç”¨æˆ·æ¸¸æˆæ•°æ®åˆ°ä¸“å±å­˜å‚¨
      function saveUserGameDataToSpecificStorage() {
        if (!currentUser || !userStats) return;

        const userGameData = {
          userId: currentUser.piUserId || currentUser.uid,
          username: getCurrentDisplayUsername(), // ä½¿ç”¨ç»Ÿä¸€çš„ç”¨æˆ·åè·å–å‡½æ•°
          gameStats: userStats,
          lastUpdated: new Date().toISOString(),
        };

        const userDataKey = `piGomokuUserData_${
          currentUser.piUserId || currentUser.uid
        }`;
        localStorage.setItem(userDataKey, JSON.stringify(userGameData));

        console.log(`[æ•°æ®ä¿å­˜] ç”¨æˆ·æ•°æ®å·²ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨: ${userDataKey}`, userGameData);
      }

      // å¼ºåˆ¶åˆ·æ–°æœ¬åœ°æ’è¡Œæ¦œæ•°æ®
      function refreshLocalLeaderboardData() {
        if (currentUser && userStats) {
          // ç¡®ä¿å½“å‰ç”¨æˆ·æ•°æ®è¢«ä¿å­˜
          saveUserGameDataToSpecificStorage();

          // é‡ç½®æ•°æ®åˆ·æ–°æ—¶é—´ï¼Œå¼ºåˆ¶ä¸‹æ¬¡è·å–æ’è¡Œæ¦œæ—¶é‡æ–°è®¡ç®—
          lastDataRefreshTime = 0;

          console.log("[æ’è¡Œæ¦œ] æœ¬åœ°æ•°æ®å·²åˆ·æ–°");
        }
      }

      // è°ƒè¯•å‡½æ•°ï¼šåˆ†ælocalStorageä¸­çš„ç”¨æˆ·æ•°æ®
      function debugLocalStorageData() {
        console.log("=== localStorage æ•°æ®åˆ†æ ===");

        const userDataKeys = [];
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);
          if (key && key.startsWith('piGomokuUserData_')) {
            userDataKeys.push(key);
          }
        }

        console.log(`æ‰¾åˆ° ${userDataKeys.length} ä¸ªç”¨æˆ·æ•°æ®é”®:`);
        userDataKeys.forEach(key => {
          try {
            const userData = JSON.parse(localStorage.getItem(key));
            console.log(`${key}:`, {
              userId: userData.userId,
              username: userData.username,
              totalGames: userData.gameStats?.totalGames,
              wins: userData.gameStats?.wins,
              winRate: userData.gameStats?.winRate
            });
          } catch (e) {
            console.error(`è§£æå¤±è´¥: ${key}`, e);
          }
        });

        console.log("å½“å‰ç”¨æˆ·:", currentUser);
        console.log("å½“å‰ç”¨æˆ·ç»Ÿè®¡:", userStats);
        console.log("=== åˆ†æç»“æŸ ===");
      }

      // å¼ºåˆ¶æ¸…ç†æ‰€æœ‰ç”¨æˆ·çš„é‡å¤æ•°æ®
      function forceCleanupAllDuplicateUsers() {
        console.log("[å¼ºåˆ¶æ¸…ç†] å¼€å§‹æ¸…ç†æ‰€æœ‰ç”¨æˆ·çš„é‡å¤æ•°æ®...");

        const userDataMap = new Map(); // userId -> æ‰€æœ‰è¯¥ç”¨æˆ·çš„æ•°æ®æ¡ç›®
        const keysToRemove = [];
        let totalCleaned = 0;

        // 1. æŒ‰ç”¨æˆ·IDåˆ†ç»„æ”¶é›†æ‰€æœ‰æ•°æ®
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);

          if (key && key.startsWith('piGomokuUserData_')) {
            try {
              const userData = JSON.parse(localStorage.getItem(key));
              if (userData && userData.userId && userData.gameStats) {
                const userId = userData.userId;

                if (!userDataMap.has(userId)) {
                  userDataMap.set(userId, []);
                }

                userDataMap.get(userId).push({
                  key: key,
                  data: userData,
                  totalGames: userData.gameStats.totalGames || 0,
                  wins: userData.gameStats.wins || 0,
                  winRate: userData.gameStats.winRate || 0,
                  lastUpdated: userData.lastUpdated || 0
                });
              } else {
                // æ ¼å¼é”™è¯¯çš„æ•°æ®ç›´æ¥åˆ é™¤
                keysToRemove.push(key);
                console.log(`[å¼ºåˆ¶æ¸…ç†] åˆ é™¤æ ¼å¼é”™è¯¯çš„æ•°æ®: ${key}`);
              }
            } catch (error) {
              console.error(`[å¼ºåˆ¶æ¸…ç†] è§£æå¤±è´¥: ${key}`, error);
              keysToRemove.push(key);
            }
          }
        }

        // 2. å¯¹æ¯ä¸ªç”¨æˆ·ï¼Œåªä¿ç•™æœ€æ­£ç¡®çš„æ•°æ®
        userDataMap.forEach((entries, userId) => {
          if (entries.length > 1) {
            console.log(`[å¼ºåˆ¶æ¸…ç†] ç”¨æˆ· ${userId} æœ‰ ${entries.length} ä¸ªé‡å¤æ•°æ®`);

            // æŒ‰æ¸¸æˆå±€æ•°æ’åºï¼Œå±€æ•°ç›¸åŒæ—¶æŒ‰æ—¶é—´æˆ³æ’åº
            entries.sort((a, b) => {
              if (b.totalGames !== a.totalGames) {
                return b.totalGames - a.totalGames; // æ¸¸æˆå±€æ•°å¤šçš„ä¼˜å…ˆ
              }
              return b.lastUpdated - a.lastUpdated; // æ—¶é—´æ–°çš„ä¼˜å…ˆ
            });

            const keepEntry = entries[0];
            console.log(`[å¼ºåˆ¶æ¸…ç†] ç”¨æˆ· ${userId} ä¿ç•™: ${keepEntry.key} (æ€»å±€æ•°: ${keepEntry.totalGames})`);

            // åˆ é™¤å…¶ä»–é‡å¤æ•°æ®
            for (let i = 1; i < entries.length; i++) {
              const entry = entries[i];
              localStorage.removeItem(entry.key);
              keysToRemove.push(entry.key);
              totalCleaned++;
              console.log(`[å¼ºåˆ¶æ¸…ç†] ç”¨æˆ· ${userId} åˆ é™¤: ${entry.key} (æ€»å±€æ•°: ${entry.totalGames})`);
            }
          }
        });

        // 3. åˆ é™¤æ ¼å¼é”™è¯¯çš„æ•°æ®
        keysToRemove.forEach(key => {
          if (localStorage.getItem(key)) { // ç¡®ä¿è¿˜å­˜åœ¨æ‰åˆ é™¤
            localStorage.removeItem(key);
          }
        });

        console.log(`[å¼ºåˆ¶æ¸…ç†] æ¸…ç†å®Œæˆï¼`);
        console.log(`[å¼ºåˆ¶æ¸…ç†] - å¤„ç†äº† ${userDataMap.size} ä¸ªç”¨æˆ·`);
        console.log(`[å¼ºåˆ¶æ¸…ç†] - åˆ é™¤äº† ${totalCleaned} ä¸ªé‡å¤æ•°æ®æ¡ç›®`);
        console.log(`[å¼ºåˆ¶æ¸…ç†] - åˆ é™¤äº† ${keysToRemove.length - totalCleaned} ä¸ªæ ¼å¼é”™è¯¯çš„æ•°æ®`);

        return totalCleaned;
      }

      // åœ¨å…¨å±€ä½œç”¨åŸŸä¸­æš´éœ²è°ƒè¯•å‡½æ•°
      window.debugLocalStorageData = debugLocalStorageData;
      window.cleanupDuplicateUserData = cleanupDuplicateUserData;
      window.forceCleanupAllDuplicateUsers = forceCleanupAllDuplicateUsers;

      // æ¸…ç†é‡å¤çš„ç”¨æˆ·æ•°æ®
      function cleanupDuplicateUserData() {
        console.log("[æ•°æ®æ¸…ç†] å¼€å§‹æ¸…ç†é‡å¤çš„ç”¨æˆ·æ•°æ®...");

        const userDataMap = new Map(); // userId -> æœ€æ–°çš„ç”¨æˆ·æ•°æ®
        const keysToRemove = [];

        // 1. æ”¶é›†æ‰€æœ‰ç”¨æˆ·æ•°æ®ï¼Œä¿ç•™æ¸¸æˆå±€æ•°æœ€å¤šçš„æ•°æ®ï¼ˆæœ€å¯èƒ½æ˜¯æ­£ç¡®çš„ï¼‰
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);

          if (key && key.startsWith('piGomokuUserData_')) {
            try {
              const userData = JSON.parse(localStorage.getItem(key));
              if (userData && userData.userId && userData.gameStats) {
                const userId = userData.userId;
                const totalGames = userData.gameStats.totalGames || 0;

                console.log(`[æ•°æ®æ¸…ç†] å‘ç°ç”¨æˆ·æ•°æ®: ${userId} (${key}) - æ€»å±€æ•°: ${totalGames}`);

                if (userDataMap.has(userId)) {
                  // å¦‚æœå·²å­˜åœ¨ï¼Œæ¯”è¾ƒæ¸¸æˆå±€æ•°ï¼Œä¿ç•™å±€æ•°æ›´å¤šçš„æ•°æ®
                  const existingData = userDataMap.get(userId);
                  const existingGames = existingData.gameStats.totalGames || 0;

                  if (totalGames > existingGames) {
                    // å½“å‰æ•°æ®æ¸¸æˆå±€æ•°æ›´å¤šï¼Œæ ‡è®°æ—§keyåˆ é™¤
                    keysToRemove.push(existingData.storageKey);
                    userDataMap.set(userId, { ...userData, storageKey: key });
                    console.log(`[æ•°æ®æ¸…ç†] ç”¨æˆ· ${userId} ä¿ç•™å±€æ•°æ›´å¤šçš„æ•°æ®: ${totalGames} > ${existingGames} (${key})`);
                  } else if (totalGames < existingGames) {
                    // æ—§æ•°æ®æ¸¸æˆå±€æ•°æ›´å¤šï¼Œæ ‡è®°å½“å‰keyåˆ é™¤
                    keysToRemove.push(key);
                    console.log(`[æ•°æ®æ¸…ç†] ç”¨æˆ· ${userId} åˆ é™¤å±€æ•°è¾ƒå°‘çš„æ•°æ®: ${totalGames} < ${existingGames} (${key})`);
                  } else {
                    // æ¸¸æˆå±€æ•°ç›¸åŒï¼Œæ¯”è¾ƒæ—¶é—´æˆ³
                    const existingTimestamp = existingData.lastUpdated || 0;
                    const currentTimestamp = userData.lastUpdated || 0;

                    if (currentTimestamp > existingTimestamp) {
                      keysToRemove.push(existingData.storageKey);
                      userDataMap.set(userId, { ...userData, storageKey: key });
                      console.log(`[æ•°æ®æ¸…ç†] ç”¨æˆ· ${userId} ä¿ç•™æ—¶é—´æ›´æ–°çš„æ•°æ® (${key})`);
                    } else {
                      keysToRemove.push(key);
                      console.log(`[æ•°æ®æ¸…ç†] ç”¨æˆ· ${userId} åˆ é™¤æ—¶é—´è¾ƒæ—§çš„æ•°æ® (${key})`);
                    }
                  }
                } else {
                  // é¦–æ¬¡é‡åˆ°è¯¥ç”¨æˆ·
                  userDataMap.set(userId, { ...userData, storageKey: key });
                  console.log(`[æ•°æ®æ¸…ç†] ç”¨æˆ· ${userId} é¦–æ¬¡è®°å½• (${key})`);
                }
              } else {
                // æ•°æ®æ ¼å¼ä¸æ­£ç¡®ï¼Œåˆ é™¤
                keysToRemove.push(key);
                console.log(`[æ•°æ®æ¸…ç†] åˆ é™¤æ ¼å¼é”™è¯¯çš„æ•°æ®: ${key}`);
              }
            } catch (error) {
              console.error(`[æ•°æ®æ¸…ç†] è§£ææ•°æ®å¤±è´¥ ${key}:`, error);
              keysToRemove.push(key); // æŸåçš„æ•°æ®ä¹Ÿåˆ é™¤
            }
          }
        }

        // 2. åˆ é™¤é‡å¤çš„æ•°æ®
        keysToRemove.forEach(key => {
          localStorage.removeItem(key);
          console.log(`[æ•°æ®æ¸…ç†] åˆ é™¤é‡å¤æ•°æ®: ${key}`);
        });

        console.log(`[æ•°æ®æ¸…ç†] æ¸…ç†å®Œæˆï¼Œåˆ é™¤äº† ${keysToRemove.length} ä¸ªé‡å¤é¡¹`);
        console.log(`[æ•°æ®æ¸…ç†] ä¿ç•™äº† ${userDataMap.size} ä¸ªå”¯ä¸€ç”¨æˆ·çš„æ•°æ®`);

        // 3. è¾“å‡ºä¿ç•™çš„æ•°æ®è¯¦æƒ…
        userDataMap.forEach((data, userId) => {
          console.log(`[æ•°æ®æ¸…ç†] ä¿ç•™ç”¨æˆ·: ${userId} - æ€»å±€æ•°: ${data.gameStats.totalGames} - å­˜å‚¨é”®: ${data.storageKey}`);
        });

        return keysToRemove.length;
      }

      // åœ¨é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ¸…ç†é‡å¤æ•°æ®
      document.addEventListener('DOMContentLoaded', function() {
        // å»¶è¿Ÿæ‰§è¡Œæ¸…ç†ï¼Œç¡®ä¿å…¶ä»–åˆå§‹åŒ–å®Œæˆ
        setTimeout(() => {
          console.log("[é¡µé¢åŠ è½½] å¼€å§‹è‡ªåŠ¨æ¸…ç†é‡å¤æ•°æ®...");
          const cleanedCount = forceCleanupAllDuplicateUsers();
          if (cleanedCount > 0) {
            console.log(`[é¡µé¢åŠ è½½] è‡ªåŠ¨æ¸…ç†å®Œæˆï¼Œåˆ é™¤äº† ${cleanedCount} ä¸ªé‡å¤æ•°æ®`);
          } else {
            console.log("[é¡µé¢åŠ è½½] æ²¡æœ‰å‘ç°é‡å¤æ•°æ®");
          }
        }, 1000);
      });



      // æ˜¾ç¤ºæ¸¸æˆç»“æœç»Ÿè®¡
      async function showGameResultStats(result, stats) {
        const resultText = {
          win: t("congratulations_win"),
          loss: t("sorry_lose"),
          draw: t("draw_result"),
        };

        // æ£€æŸ¥æ˜¯å¦ä¸ºç™»å½•ç”¨æˆ·
        const isLoggedIn = currentUser && userStats;

        // è·å–å®æ—¶æ’å
        let currentRank = 0;
        if (isLoggedIn && currentUser.piUserId) {
          try {
            currentRank = await getUserRank(currentUser.piUserId);
          } catch (error) {
            console.error("è·å–ç”¨æˆ·æ’åå¤±è´¥:", error);
          }
        }

        showCustomModal(
          t("game_result"),
          `
                <div style="text-align: center;">
                    <div style="font-size: 3em; margin-bottom: 15px;">
                        ${
                          result === "win"
                            ? "ğŸ†"
                            : result === "loss"
                            ? "ğŸ˜¢"
                            : "ğŸ¤"
                        }
                    </div>
                    <h3 style="color: #333; margin-bottom: 20px;">${
                      resultText[result]
                    }</h3>

                    ${
                      isLoggedIn
                        ? `
                    <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div style="text-align: center;">
                                <div style="font-size: 1.5em; color: #28a745; font-weight: bold;">${
                                  stats.winRate
                                }%</div>
                                <div style="color: #666; font-size: 0.9em;">${t(
                                  "win_rate"
                                )}</div>
                                <div style="color: #666; font-size: 0.8em;">
                                    ${t(
                                      "wins_losses_format",
                                      stats.wins,
                                      stats.losses
                                    )}
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5em; color: #007bff; font-weight: bold;">${
                                  stats.totalGames
                                }</div>
                                <div style="color: #666; font-size: 0.9em;">${t(
                                  "ranking_header_games"
                                )}</div>
                                <div style="color: #666; font-size: 0.8em;">
                                    ${t("monthly_games")}
                                </div>
                            </div>
                        </div>

                        <div style="text-align: center; padding-top: 15px; border-top: 1px solid #e9ecef;">
                            <div style="color: #666; font-size: 0.9em;">
                                ${t("current_rank_label")}: ${
                            currentRank > 0
                              ? t("rank_position", currentRank)
                              : t("not_listed")
                          }
                            </div>
                        </div>
                    </div>
                    `
                        : `
                    <div style="background: #fff3cd; border-radius: 8px; padding: 20px; margin-bottom: 20px; border: 2px solid #ffeaa7;">
                        <div style="font-size: 2em; margin-bottom: 10px;">ğŸ®</div>
                        <h4 style="color: #856404; margin-bottom: 15px;">${t(
                          "guest_mode"
                        )}</h4>
                        <p style="color: #856404; margin: 0; line-height: 1.6;">
                            ${t("guest_mode_desc")}<br>
                            <strong>${t("login_benefits")}</strong><br>
                            ${t("benefit_stats")}<br>
                            ${t("benefit_leaderboard")}<br>
                            ${t("benefit_pi_service")}<br>
                            ${t("benefit_monthly_rewards")}
                        </p>
                    </div>
                    `
                    }



                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button onclick="closeNewModal(); resetAIGame()" style="background: #007bff; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                            ${t("play_again")}
                        </button>
                        ${
                          isLoggedIn
                            ? `
                        <button onclick="closeNewModal(); showRealTimeLeaderboard()" style="background: #28a745; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                            ${t("view_leaderboard")}
                        </button>
                        `
                            : `
                        <button onclick="closeNewModal(); handleSignIn()" style="background: #28a745; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                            ${t("login_now")}
                        </button>
                        `
                        }
                    </div>
                </div>
            `
        );
      }

      // WebSocketè¿æ¥ç®¡ç†
      let gameWebSocket = null;
      let isConnectedToGameServer = false;
      let currentGameId = null;
      let currentOpponent = null;
      let myColor = null;

      // è¿æ¥åˆ°æ¸¸æˆæœåŠ¡å™¨
      function connectToGameServer() {
        if (gameWebSocket && gameWebSocket.readyState === WebSocket.OPEN) {
          return Promise.resolve();
        }

        return new Promise((resolve, reject) => {
          try {
            // æ ¹æ®å½“å‰é¡µé¢åè®®é€‰æ‹©WebSocketåè®®
            const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsUrl = `${protocol}//47.79.240.129:3001`;

            console.log('å°è¯•è¿æ¥WebSocket:', wsUrl);
            gameWebSocket = new WebSocket(wsUrl);

            // è®¾ç½®è¿æ¥è¶…æ—¶
            const connectionTimeout = setTimeout(() => {
              if (gameWebSocket.readyState === WebSocket.CONNECTING) {
                gameWebSocket.close();
                reject(new Error('WebSocketè¿æ¥è¶…æ—¶'));
              }
            }, 10000); // 10ç§’è¶…æ—¶

            gameWebSocket.onopen = () => {
              console.log('WebSocketè¿æ¥æˆåŠŸ:', wsUrl);
              clearTimeout(connectionTimeout);
              isConnectedToGameServer = true;

              // å‘é€ç”¨æˆ·è¿æ¥ä¿¡æ¯
              if (currentUser) {
                gameWebSocket.send(JSON.stringify({
                  type: 'user_connect',
                  payload: {
                    userId: currentUser.piUserId || currentUser.uid,
                    username: currentUser.username,
                    accessToken: currentUser.accessToken
                  }
                }));
              }

              resolve();
            };

            gameWebSocket.onmessage = (event) => {
              try {
                const data = JSON.parse(event.data);
                handleGameServerMessage(data);
              } catch (error) {
                console.error('è§£æWebSocketæ¶ˆæ¯å¤±è´¥:', error);
              }
            };

            gameWebSocket.onclose = (event) => {
              console.log('WebSocketè¿æ¥å…³é—­:', event.code, event.reason);
              clearTimeout(connectionTimeout);
              isConnectedToGameServer = false;
              gameWebSocket = null;
            };

            gameWebSocket.onerror = (error) => {
              console.error('WebSocketé”™è¯¯:', error);
              console.error('è¿æ¥URL:', wsUrl);
              console.error('å½“å‰åè®®:', window.location.protocol);
              clearTimeout(connectionTimeout);
              isConnectedToGameServer = false;
              reject(new Error(`WebSocketè¿æ¥å¤±è´¥: ${wsUrl}`));
            };

          } catch (error) {
            reject(error);
          }
        });
      }

      // å¤„ç†æ¸¸æˆæœåŠ¡å™¨æ¶ˆæ¯
      function handleGameServerMessage(data) {
        const { type, payload } = data;

        switch (type) {
          case 'connected':
            console.log('å·²è¿æ¥åˆ°æ¸¸æˆæœåŠ¡å™¨:', payload);
            updateOnlineCount(payload.onlineUsers);
            break;

          case 'online_count_update':
            updateOnlineCount(payload.onlineUsers);
            break;

          case 'matching_started':
            console.log('åŒ¹é…å¼€å§‹:', payload);
            break;

          case 'game_started':
            handleGameStarted(payload);
            break;

          case 'game_move':
            handleOpponentMove(payload);
            break;

          case 'game_ended':
            handleGameEnded(payload);
            break;

          case 'opponent_disconnected':
            handleOpponentDisconnected(payload);
            break;

          case 'error':
            console.error('æ¸¸æˆæœåŠ¡å™¨é”™è¯¯:', payload);
            showError(payload.message || 'æœåŠ¡å™¨é”™è¯¯');
            break;
        }
      }

      // æ˜¾ç¤ºåœ¨çº¿åŒ¹é…ç•Œé¢
      async function showOnlineMatchScreen() {
        // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç™»å½•
        if (!currentUser) {
          showError(t("please_login_first"));
          return;
        }

        // ç”±äºåç«¯æœåŠ¡æš‚æœªéƒ¨ç½²ï¼Œç›´æ¥æ˜¾ç¤ºåŒ¹é…ç•Œé¢å¹¶æ¨¡æ‹ŸåŒ¹é…AI

        const root = document.getElementById("root");
        root.innerHTML = `
          <div style="height: 100vh; background: linear-gradient(135deg, var(--pi-primary) 0%, var(--pi-secondary) 100%); display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; box-sizing: border-box; position: relative;">
            <div style="background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border-radius: 20px; padding: 40px; text-align: center; max-width: 400px; width: 100%; border: 2px solid rgba(255, 255, 255, 0.2);">
              <!-- è¿”å›æŒ‰é’® -->
              <button onclick="cancelMatchAndReturn()" style="position: absolute; top: 20px; left: 20px; background: rgba(255, 255, 255, 0.2); border: none; border-radius: 50%; width: 40px; height: 40px; color: white; font-size: 18px; cursor: pointer; display: flex; align-items: center; justify-content: center; z-index: 10;">
                â†
              </button>

              <!-- æ ‡é¢˜ -->
              <h2 style="color: white; margin-bottom: 30px; font-size: 24px;">
                ğŸŒ <span data-i18n="online_match">åœ¨çº¿åŒ¹é…</span>
              </h2>

              <!-- åŒ¹é…çŠ¶æ€ -->
              <div id="matchStatus" style="margin-bottom: 30px;">
                <div style="color: white; font-size: 18px; margin-bottom: 20px;" data-i18n="searching_opponent">
                  ${t("searching_opponent")}
                </div>
                <div style="width: 60px; height: 60px; border: 4px solid rgba(255, 255, 255, 0.3); border-top: 4px solid white; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div>
              </div>

              <!-- åœ¨çº¿ç©å®¶æ•° -->
              <div style="color: rgba(255, 255, 255, 0.8); margin-bottom: 20px;">
                <span data-i18n="online_players">${t("online_players")}</span>ï¼š<span id="onlineCount">-</span> <span data-i18n="people_suffix">${t("people_suffix")}</span>
              </div>

              <!-- åŒ¹é…è¯´æ˜ -->
              <div style="color: rgba(255, 255, 255, 0.7); font-size: 14px; margin-bottom: 30px;">
                <span data-i18n="match_description">${t("match_description")}</span><br>
                <span data-i18n="estimated_wait">${t("estimated_wait")}</span>
              </div>

              <!-- å–æ¶ˆåŒ¹é…æŒ‰é’® -->
              <button onclick="cancelRealMatch()" style="background: rgba(255, 255, 255, 0.2); border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 25px; padding: 12px 30px; color: white; font-size: 16px; cursor: pointer; transition: all 0.3s;" data-i18n="cancel_match">
                ${t("cancel_match")}
              </button>
            </div>
          </div>

          <style>
            @keyframes spin {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          </style>
        `;

        // å¼€å§‹AIåŒ¹é…æ¨¡æ‹Ÿ
        startAIMatching();
      }

      // å¼€å§‹AIåŒ¹é…æ¨¡æ‹Ÿ
      function startAIMatching() {
        console.log('å¼€å§‹AIåŒ¹é…æ¨¡æ‹Ÿ');

        // æ›´æ–°åœ¨çº¿ç”¨æˆ·æ•°æ˜¾ç¤ºï¼ˆæ¨¡æ‹Ÿï¼‰
        updateOnlineCount(Math.floor(Math.random() * 50) + 10); // 10-59äººåœ¨çº¿

        // æ¨¡æ‹ŸåŒ¹é…è¿‡ç¨‹ï¼Œ2-4ç§’ååŒ¹é…æˆåŠŸ
        const matchTime = Math.random() * 2000 + 2000; // 2-4ç§’

        setTimeout(() => {
          // æ¨¡æ‹ŸåŒ¹é…åˆ°AIå¯¹æ‰‹
          const aiOpponent = {
            username: t("ai_opponent_name"),
            uid: "ai_opponent_" + Date.now(),
            isAI: true
          };

          // éšæœºåˆ†é…é¢œè‰²
          const myColor = Math.random() < 0.5 ? 'black' : 'white';
          const currentPlayer = 'black'; // é»‘å­å…ˆæ‰‹

          // æ¨¡æ‹Ÿæ¸¸æˆå¼€å§‹
          handleAIGameStarted({
            gameId: "ai_game_" + Date.now(),
            opponent: aiOpponent,
            yourColor: myColor,
            currentPlayer: currentPlayer
          });
        }, matchTime);
      }

      // å¤„ç†AIæ¸¸æˆå¼€å§‹
      function handleAIGameStarted(payload) {
        const { gameId, opponent, yourColor, currentPlayer } = payload;

        currentGameId = gameId;
        currentOpponent = opponent;
        myColor = yourColor;

        console.log(`AIæ¸¸æˆå¼€å§‹! å¯¹æ‰‹: ${opponent.username}, æˆ‘çš„é¢œè‰²: ${yourColor}`);

        // æ˜¾ç¤ºæ¸¸æˆå¼€å§‹å¯¹è¯æ¡†
        showAIGameStartDialog(opponent, yourColor, currentPlayer);
      }

      // æ˜¾ç¤ºAIæ¸¸æˆå¼€å§‹å¯¹è¯æ¡†
      function showAIGameStartDialog(opponent, yourColor, currentPlayer) {
        const matchStatus = document.getElementById("matchStatus");
        if (matchStatus) {
          const isMyTurn = currentPlayer === yourColor;
          matchStatus.innerHTML = `
            <div style="color: #4CAF50; font-size: 18px; margin-bottom: 20px;">
              ğŸ‰ ${t("match_found")}
            </div>
            <div style="color: white; margin-bottom: 20px;">
              ${t("opponent_label")}<strong>${opponent.username}</strong><br>
              ${t("your_color")}: ${yourColor === 'black' ? 'âš« ' + t("black_stone") : 'âšª ' + t("white_stone")}<br>
              ${isMyTurn ? 'ğŸ¯ ' + t("your_turn") : 'â³ ' + t("opponent_turn")}
            </div>
            <div style="display: flex; flex-direction: row; gap: 10px; justify-content: center; align-items: center; width: 100%; flex-wrap: nowrap;">
              <button onclick="startAIGame()" style="background: #4CAF50; border: none; border-radius: 25px; padding: 10px 20px; color: white; font-size: 14px; cursor: pointer; flex: 1; min-width: 80px; max-width: 140px; transition: all 0.3s; white-space: nowrap;">
                ${t("start_game")}
              </button>
            </div>
          `;
        }
      }

      // å¼€å§‹AIæ¸¸æˆ
      function startAIGame() {
        if (!currentGameId || !currentOpponent) {
          showError(t("game_not_ready"));
          return;
        }

        // ç›´æ¥å¯åŠ¨AIå¯¹æˆ˜æ¸¸æˆ
        showSimpleGameScreen();
      }

      // å–æ¶ˆåŒ¹é…
      function cancelRealMatch() {
        showMainScreen();
      }

      // å–æ¶ˆåŒ¹é…å¹¶è¿”å›ä¸»ç•Œé¢
      function cancelMatchAndReturn() {
        cancelRealMatch();
      }

      // æ›´æ–°åœ¨çº¿ç”¨æˆ·æ•°
      function updateOnlineCount(count) {
        const onlineCountElement = document.getElementById("onlineCount");
        if (onlineCountElement) {
          onlineCountElement.textContent = count;
        }
      }

      // å¤„ç†æ¸¸æˆå¼€å§‹
      function handleGameStarted(payload) {
        const { gameId, opponent, yourColor, currentPlayer, board } = payload;

        currentGameId = gameId;
        currentOpponent = opponent;
        myColor = yourColor;

        console.log(`æ¸¸æˆå¼€å§‹! å¯¹æ‰‹: ${opponent.username}, æˆ‘çš„é¢œè‰²: ${yourColor}`);

        // æ˜¾ç¤ºæ¸¸æˆå¼€å§‹å¯¹è¯æ¡†
        showGameStartDialog(opponent, yourColor, currentPlayer);
      }

      // æ˜¾ç¤ºæ¸¸æˆå¼€å§‹å¯¹è¯æ¡†
      function showGameStartDialog(opponent, yourColor, currentPlayer) {
        const matchStatus = document.getElementById("matchStatus");
        if (matchStatus) {
          const isMyTurn = currentPlayer === yourColor;
          matchStatus.innerHTML = `
            <div style="color: #4CAF50; font-size: 18px; margin-bottom: 20px;">
              ğŸ‰ ${t("match_found")}
            </div>
            <div style="color: white; margin-bottom: 20px;">
              ${t("opponent_label")}<strong>${opponent.username}</strong><br>
              ${t("your_color")}: ${yourColor === 'black' ? 'âš« ' + t("black_stone") : 'âšª ' + t("white_stone")}<br>
              ${isMyTurn ? 'ğŸ¯ ' + t("your_turn") : 'â³ ' + t("opponent_turn")}
            </div>
            <div style="display: flex; flex-direction: row; gap: 10px; justify-content: center; align-items: center; width: 100%; flex-wrap: nowrap;">
              <button onclick="startRealOnlineGame()" style="background: #4CAF50; border: none; border-radius: 25px; padding: 10px 20px; color: white; font-size: 14px; cursor: pointer; flex: 1; min-width: 80px; max-width: 140px; transition: all 0.3s; white-space: nowrap;">
                ${t("start_game")}
              </button>
            </div>
          `;
        }
      }

      // å¼€å§‹çœŸå®åœ¨çº¿æ¸¸æˆ
      function startRealOnlineGame() {
        if (!currentGameId || !currentOpponent) {
          showError(t("game_not_ready"));
          return;
        }

        // æ˜¾ç¤ºåœ¨çº¿æ¸¸æˆç•Œé¢
        showOnlineGameScreen();
      }

      // æ˜¾ç¤ºè‡ªå®šä¹‰ç¡®è®¤å¯¹è¯æ¡†
      function showCustomConfirm(title, message, buttons) {
        return new Promise((resolve) => {
          const overlay = document.createElement('div');
          overlay.className = 'custom-confirm-overlay';

          const buttonsHtml = buttons.map((btn, index) =>
            `<button class="custom-confirm-btn ${btn.class || ''}" onclick="resolveConfirm(${index})">${btn.text}</button>`
          ).join('');

          overlay.innerHTML = `
            <div class="custom-confirm-dialog">
              <div class="custom-confirm-title">${title}</div>
              <div class="custom-confirm-message">${message}</div>
              <div class="custom-confirm-buttons">
                ${buttonsHtml}
              </div>
            </div>
          `;

          document.body.appendChild(overlay);

          // å­˜å‚¨resolveå‡½æ•°ä¾›æŒ‰é’®è°ƒç”¨
          window.currentConfirmResolve = resolve;
          window.currentConfirmOverlay = overlay;
        });
      }

      // å¤„ç†ç¡®è®¤å¯¹è¯æ¡†ç»“æœ
      function resolveConfirm(buttonIndex) {
        if (window.currentConfirmResolve) {
          window.currentConfirmResolve(buttonIndex);
          document.body.removeChild(window.currentConfirmOverlay);
          window.currentConfirmResolve = null;
          window.currentConfirmOverlay = null;
        }
      }

      // å–æ¶ˆåŒ¹é…
      async function cancelMatch() {
        const result = await showCustomConfirm(
          t("cancel_match_title"),
          t("cancel_match_confirm"),
          [
            { text: t("continue_match_option"), class: "primary" },
            { text: t("rematch_option"), class: "" },
            { text: t("return_main_option"), class: "danger" }
          ]
        );

        switch(result) {
          case 0: // ç»§ç»­åŒ¹é…
            // ä»€ä¹ˆéƒ½ä¸åšï¼Œä¿æŒå½“å‰çŠ¶æ€
            break;
          case 1: // é‡æ–°åŒ¹é…
            showOnlineMatchScreen();
            break;
          case 2: // è¿”å›ä¸»ç•Œé¢
            showMainScreen();
            break;
        }
      }

      // æ˜¾ç¤ºåœ¨çº¿æ¸¸æˆç•Œé¢
      function showOnlineGameScreen() {
        if (!currentOpponent || !myColor) {
          showError(t("game_not_ready"));
          return;
        }

        const root = document.getElementById("root");
        root.innerHTML = `
          <div style="height: 100vh; background: linear-gradient(135deg, var(--pi-primary) 0%, var(--pi-secondary) 100%); display: flex; flex-direction: column; align-items: center; padding: 2px; box-sizing: border-box; overflow: hidden;" class="game-container">
            <!-- æ¸¸æˆå¤´éƒ¨ -->
            <header style="width: 100%; display: flex; justify-content: space-between; align-items: center; margin-bottom: 1px; padding: 0 10px;">
              <button onclick="surrenderOnlineGame()" class="btn btn-outline btn-sm" style="height: auto; min-height: auto; padding: 4px 8px; line-height: 1.2; font-size: 14px;">
                ${t("surrender")}
              </button>
              <div style="color: white; font-size: 14px; text-align: center;">
                ğŸŒ ${t("online_match")}
              </div>
              <button onclick="showMainScreen()" class="btn btn-outline btn-sm" style="height: auto; min-height: auto; padding: 4px 8px; line-height: 1.2; font-size: 14px;">
                ${t("return_to_menu")}
              </button>
            </header>

            <!-- ç©å®¶ä¿¡æ¯ -->
            <div style="text-align: center; margin-bottom: 0; color: white;">
              <div style="display: flex; justify-content: center; align-items: center; gap: clamp(10px, 3vw, 15px); margin-bottom: 0;">
                <div style="display: flex; align-items: center; gap: 6px; background: rgba(255,255,255,0.1); padding: 6px 12px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.3);">
                  <div class="stone ${myColor}" style="width: 20px; height: 20px; margin: 0;"></div>
                  <strong style="font-size: clamp(14px, 3vw, 16px);">${getCurrentDisplayUsername()}</strong>
                </div>
                <div style="color: white; font-size: clamp(16px, 3vw, 18px); font-weight: 600;">${t("vs_label")}</div>
                <div style="display: flex; align-items: center; gap: 6px; background: rgba(255,255,255,0.1); padding: 6px 12px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.3);">
                  <div class="stone ${myColor === 'black' ? 'white' : 'black'}" style="width: 20px; height: 20px; margin: 0;"></div>
                  <strong style="font-size: clamp(14px, 3vw, 16px);">${currentOpponent.username}</strong>
                </div>
              </div>
              <div style="font-size: clamp(16px, 3.5vw, 20px); font-weight: 600; margin-top: 2px; margin-bottom: 0;" id="online-current-player-display">
                ${t("waiting_for_game")}
              </div>
            </div>

            <!-- æ£‹ç›˜å®¹å™¨ -->
            <div class="game-board" style="display: flex; align-items: flex-start; justify-content: center; margin: 0; padding-top: 2px;">
              <div class="board-container">
                <div class="board-grid responsive-board" id="online-game-board">
                  <!-- 15x15 æ£‹ç›˜æ ¼å­å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
                </div>
              </div>
            </div>
          </div>
        `;

        // åˆå§‹åŒ–åœ¨çº¿æ¸¸æˆæ£‹ç›˜
        initOnlineGameBoard();
      }

      // åˆå§‹åŒ–åœ¨çº¿æ¸¸æˆæ£‹ç›˜
      function initOnlineGameBoard() {
        const board = document.getElementById("online-game-board");
        board.innerHTML = "";

        // è®¾ç½®å“åº”å¼æ£‹ç›˜å°ºå¯¸
        setupResponsiveBoard();

        // åˆ›å»º15x15æ£‹ç›˜
        for (let row = 0; row < 15; row++) {
          for (let col = 0; col < 15; col++) {
            const cell = document.createElement("div");
            cell.className = "board-cell";
            cell.dataset.row = row;
            cell.dataset.col = col;
            cell.addEventListener("click", () => makeOnlineMove(row, col));
            board.appendChild(cell);
          }
        }

        // åˆå§‹åŒ–æ¸¸æˆçŠ¶æ€
        onlineGameBoard = Array(15).fill().map(() => Array(15).fill(null));
        onlineCurrentPlayer = 'black'; // é»‘å­å…ˆæ‰‹
        onlineGameActive = true;

        updateOnlineGameStatus();
        console.log('åœ¨çº¿æ¸¸æˆæ£‹ç›˜åˆå§‹åŒ–å®Œæˆ');
      }

      // åœ¨çº¿æ¸¸æˆç›¸å…³å˜é‡
      let onlineGameBoard = Array(15).fill().map(() => Array(15).fill(null));
      let onlineCurrentPlayer = "black";
      let onlineGameActive = true;

      // åœ¨çº¿æ¸¸æˆç§»åŠ¨å¤„ç†
      function makeOnlineMove(row, col) {
        if (!onlineGameActive || !currentGameId) {
          return;
        }

        // æ£€æŸ¥æ˜¯å¦æ˜¯æˆ‘çš„å›åˆ
        if (onlineCurrentPlayer !== myColor) {
          showError(t("not_your_turn"));
          return;
        }

        // æ£€æŸ¥ä½ç½®æ˜¯å¦æœ‰æ•ˆ
        if (onlineGameBoard[row][col] !== null) {
          return;
        }

        // å‘é€ç§»åŠ¨åˆ°æœåŠ¡å™¨
        if (gameWebSocket && isConnectedToGameServer) {
          gameWebSocket.send(JSON.stringify({
            type: 'game_move',
            payload: {
              gameId: currentGameId,
              userId: currentUser.piUserId || currentUser.uid,
              row,
              col
            }
          }));
        }
      }

      // å¤„ç†å¯¹æ‰‹ç§»åŠ¨
      function handleOpponentMove(payload) {
        const { row, col, color, currentPlayer, board } = payload;

        // æ›´æ–°æ£‹ç›˜çŠ¶æ€
        onlineGameBoard = board;
        onlineCurrentPlayer = currentPlayer;

        // æ›´æ–°UI
        updateOnlineBoardDisplay();
        updateOnlineGameStatus();

        console.log(`å¯¹æ‰‹ç§»åŠ¨: (${row}, ${col}), å½“å‰ç©å®¶: ${currentPlayer}`);
      }

      // æ›´æ–°åœ¨çº¿æ¸¸æˆæ£‹ç›˜æ˜¾ç¤º
      function updateOnlineBoardDisplay() {
        for (let row = 0; row < 15; row++) {
          for (let col = 0; col < 15; col++) {
            const cell = document.querySelector(`#online-game-board [data-row="${row}"][data-col="${col}"]`);
            if (cell) {
              cell.innerHTML = '';
              if (onlineGameBoard[row][col]) {
                const stone = document.createElement('div');
                stone.className = `stone ${onlineGameBoard[row][col]}`;
                cell.appendChild(stone);
              }
            }
          }
        }
      }

      // æ›´æ–°åœ¨çº¿æ¸¸æˆçŠ¶æ€æ˜¾ç¤º
      function updateOnlineGameStatus() {
        const statusDisplay = document.getElementById("online-current-player-display");
        if (statusDisplay) {
          const isMyTurn = onlineCurrentPlayer === myColor;
          if (isMyTurn) {
            statusDisplay.textContent = t("your_turn");
            statusDisplay.style.color = "#4CAF50";
          } else {
            statusDisplay.textContent = t("opponent_turn");
            statusDisplay.style.color = "#FFC107";
          }
        }
      }

      // å¤„ç†æ¸¸æˆç»“æŸ
      function handleGameEnded(payload) {
        const { winner, surrendered, board, moves } = payload;

        onlineGameActive = false;
        onlineGameBoard = board;

        // æ›´æ–°æ£‹ç›˜æ˜¾ç¤º
        updateOnlineBoardDisplay();

        // ç¡®å®šç»“æœ
        let resultMessage;
        if (surrendered) {
          if (winner === myColor) {
            resultMessage = t("opponent_surrendered");
          } else {
            resultMessage = t("you_surrendered");
          }
        } else {
          if (winner === myColor) {
            resultMessage = t("you_win");
          } else {
            resultMessage = t("you_lose");
          }
        }

        // æ˜¾ç¤ºæ¸¸æˆç»“æœ
        setTimeout(() => {
          showCustomAlert(
            t("game_over"),
            resultMessage,
            () => {
              // é‡ç½®æ¸¸æˆçŠ¶æ€
              currentGameId = null;
              currentOpponent = null;
              myColor = null;
              showMainScreen();
            }
          );
        }, 1000);

        console.log(`æ¸¸æˆç»“æŸ: ${winner} è·èƒœ, æŠ•é™: ${surrendered}`);
      }

      // å¤„ç†å¯¹æ‰‹æ–­å¼€è¿æ¥
      function handleOpponentDisconnected(payload) {
        onlineGameActive = false;

        showCustomAlert(
          t("game_over"),
          t("opponent_disconnected"),
          () => {
            currentGameId = null;
            currentOpponent = null;
            myColor = null;
            showMainScreen();
          }
        );
      }

      // æŠ•é™åœ¨çº¿æ¸¸æˆ
      function surrenderOnlineGame() {
        if (!currentGameId || !onlineGameActive) {
          return;
        }

        showCustomConfirm(
          t("surrender_confirm_title"),
          t("surrender_confirm_message"),
          () => {
            // å‘é€æŠ•é™è¯·æ±‚
            if (gameWebSocket && isConnectedToGameServer) {
              gameWebSocket.send(JSON.stringify({
                type: 'game_surrender',
                payload: {
                  gameId: currentGameId,
                  userId: currentUser.piUserId || currentUser.uid
                }
              }));
            }
          },
          () => {
            // å–æ¶ˆæŠ•é™
          }
        );
      }

      // å¼€å§‹åœ¨çº¿æ¸¸æˆï¼ˆæ—§ç‰ˆæœ¬ï¼Œä¿æŒå…¼å®¹æ€§ï¼‰
      async function startOnlineGame() {
        await showCustomConfirm(
          "ğŸŒ " + t("online_match"),
          t("online_game_info"),
          [
            { text: "äº†è§£", class: "primary" },
            { text: "ä½“éªŒAIå¯¹æˆ˜", class: "" }
          ]
        );
        showMainScreen();
      }

      // æ˜¾ç¤ºAIå¯¹æˆ˜æ¸¸æˆç•Œé¢ - å“åº”å¼è®¾è®¡é€‚é…æ‰€æœ‰å±å¹•
      function showSimpleGameScreen() {
        const root = document.getElementById("root");
        root.innerHTML = `
                <div style="height: 100vh; background: linear-gradient(135deg, var(--pi-primary) 0%, var(--pi-secondary) 100%); display: flex; flex-direction: column; align-items: center; padding: 2px; box-sizing: border-box; overflow: hidden;" class="game-container">
                    <!-- æ¸¸æˆå¤´éƒ¨ - æåº¦ç´§å‡‘å¸ƒå±€ -->
                    <header style="width: 100%; display: flex; justify-content: flex-start; align-items: center; margin-bottom: 1px;">
                        <button onclick="backToLogin()" class="btn btn-outline btn-sm" style="height: auto; min-height: auto; padding: 4px 8px; line-height: 1.2; font-size: 14px;">
                            ${t("return_to_menu")}
                        </button>
                    </header>

                    <!-- æ¸¸æˆæ ‡é¢˜ - æåº¦ç´§å‡‘ -->
                    <h1 style="color: white; margin: 0 0 1px 0; font-size: clamp(24px, 5vw, 30px); text-align: center;">${t(
                      "ai_battle_title"
                    )}</h1>

                    <!-- ç©å®¶ä¿¡æ¯ - æåº¦ç´§å‡‘å¸ƒå±€ -->
                    <div style="text-align: center; margin-bottom: 0; color: white;">
                        <div style="display: flex; justify-content: center; align-items: center; gap: clamp(10px, 3vw, 15px); margin-bottom: 0;">
                            <div style="display: flex; align-items: center; gap: 6px; background: rgba(255,255,255,0.1); padding: 6px 12px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.3);">
                                <div class="stone black" style="width: 20px; height: 20px; margin: 0;"></div>
                                <strong style="font-size: clamp(16px, 3.5vw, 20px);">${t(
                                  "player_label"
                                )}</strong>
                            </div>
                            <div style="color: white; font-size: clamp(18px, 3.5vw, 22px); font-weight: 600;">${t(
                              "vs_label"
                            )}</div>
                            <div style="display: flex; align-items: center; gap: 6px; background: rgba(255,255,255,0.1); padding: 6px 12px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.3);">
                                <div class="stone white" style="width: 20px; height: 20px; margin: 0;"></div>
                                <strong style="font-size: clamp(16px, 3.5vw, 20px);">${t(
                                  "ai_label"
                                )}</strong>
                            </div>
                        </div>
                        <div style="font-size: clamp(16px, 3.5vw, 20px); font-weight: 600; margin-top: 2px; margin-bottom: 0;" id="current-player-display">
                            ${t("your_turn")}
                        </div>
                        <!-- å›åˆè®¡æ—¶å™¨ -->
                        <div style="font-size: clamp(14px, 3vw, 16px); margin-top: 4px; color: #ffffff;" id="turn-timer-display">
                            ${t("thinking_time", "60")}
                        </div>
                    </div>

                    <!-- æ£‹ç›˜å®¹å™¨ - æåº¦ç´§å‡‘é—´è· -->
                    <div class="game-board" style="display: flex; align-items: flex-start; justify-content: center; margin: 0; padding-top: 2px;">
                        <div class="board-container">
                            <div class="board-grid responsive-board" id="ai-game-board">
                                <!-- 15x15 æ£‹ç›˜æ ¼å­å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
                            </div>
                        </div>
                    </div>

                    <!-- æ¸¸æˆæ§åˆ¶æŒ‰é’® - å›ºå®šåœ¨åº•éƒ¨ -->
                    <div style="display: flex; justify-content: center; gap: 12px; margin-top: 8px;">
                        <button onclick="undoAIMove()" class="btn btn-warning btn-sm" id="undo-btn" style="min-width: 80px; padding: 8px 16px;">
                            ${t("undo_button")}
                        </button>
                        <button onclick="resetAIGame()" class="btn btn-primary btn-sm" style="min-width: 80px; padding: 8px 16px;">
                            ${t("new_game_button")}
                        </button>
                    </div>
                </div>
            `;

        // åˆå§‹åŒ–AIæ¸¸æˆ
        initAIGame();
      }

      // AIæ¸¸æˆç›¸å…³å˜é‡
      let aiGameBoard = Array(15)
        .fill()
        .map(() => Array(15).fill(null));
      let aiCurrentPlayer = "black"; // ç©å®¶æ˜¯é»‘å­ï¼ŒAIæ˜¯ç™½å­
      let aiGameHistory = [];
      let aiGameActive = true;

      // å›åˆè¶…æ—¶ç›¸å…³å˜é‡
      let turnTimer = null;
      let turnTimeLeft = 0;
      let turnTimerDisplay = null;
      const TURN_TIME_LIMIT = 60; // 60ç§’å›åˆæ—¶é—´é™åˆ¶
      const WARNING_TIME = 30; // 30ç§’å¼€å§‹è­¦å‘Š

      // éŸ³æ•ˆç®¡ç†å™¨ - ä½¿ç”¨æ‚¨çš„è‡ªå®šä¹‰éŸ³æ•ˆæ–‡ä»¶
      class SoundManager {
        constructor() {
          this.sounds = {};
          this.enabled = true;
          this.volume = 0.5; // éŸ³é‡æ§åˆ¶
          this.initSounds();
        }

        initSounds() {
          // é¢„åŠ è½½æ‚¨çš„éŸ³æ•ˆæ–‡ä»¶ï¼Œè®¾ç½®ä¸åŒéŸ³æ•ˆçš„éŸ³é‡
          const soundFiles = {
            gameStart: { src: "./public/sounds/game-start.mp3", volume: 0.5 },
            move: { src: "./public/sounds/move.mp3", volume: 0.8 }, // æé«˜è½å­éŸ³æ•ˆéŸ³é‡
            victory: { src: "./public/sounds/victory.mp3", volume: 0.5 },
          };

          // åˆ›å»ºAudioå¯¹è±¡å¹¶é¢„åŠ è½½
          for (const [key, config] of Object.entries(soundFiles)) {
            try {
              const audio = new Audio(config.src);
              audio.volume = config.volume;
              audio.preload = "auto";

              // æ·»åŠ é”™è¯¯å¤„ç†
              audio.addEventListener("error", (e) => {
                console.log(`éŸ³æ•ˆæ–‡ä»¶åŠ è½½å¤±è´¥: ${config.src}`, e);
              });

              // æ·»åŠ åŠ è½½æˆåŠŸäº‹ä»¶
              audio.addEventListener("canplaythrough", () => {
                console.log(`éŸ³æ•ˆæ–‡ä»¶åŠ è½½æˆåŠŸ: ${config.src}`);
              });

              this.sounds[key] = audio;
            } catch (e) {
              console.log(`éŸ³æ•ˆåˆå§‹åŒ–å¤±è´¥: ${key}`, e);
            }
          }
        }

        // æ’­æ”¾éŸ³æ•ˆçš„é€šç”¨æ–¹æ³•
        playSound(soundName) {
          if (!this.enabled || !this.sounds[soundName]) {
            return;
          }

          try {
            const audio = this.sounds[soundName];
            // é‡ç½®æ’­æ”¾ä½ç½®
            audio.currentTime = 0;
            // æ’­æ”¾éŸ³æ•ˆ
            const playPromise = audio.play();

            // å¤„ç†æ’­æ”¾Promiseï¼ˆç°ä»£æµè§ˆå™¨è¦æ±‚ï¼‰
            if (playPromise !== undefined) {
              playPromise.catch((error) => {
                console.log(`éŸ³æ•ˆæ’­æ”¾å¤±è´¥: ${soundName}`, error);
              });
            }
          } catch (e) {
            console.log(`éŸ³æ•ˆæ’­æ”¾é”™è¯¯: ${soundName}`, e);
          }
        }

        playMove() {
          this.playSound("move");
        }

        playVictory() {
          this.playSound("victory");
        }

        playGameStart() {
          this.playSound("gameStart");
        }

        // è®¾ç½®éŸ³é‡
        setVolume(volume) {
          this.volume = Math.max(0, Math.min(1, volume));
          // ä¿æŒä¸åŒéŸ³æ•ˆçš„ç›¸å¯¹éŸ³é‡æ¯”ä¾‹
          const volumeRatios = {
            gameStart: 0.5,
            move: 0.8,
            victory: 0.5
          };

          for (const [key, audio] of Object.entries(this.sounds)) {
            const ratio = volumeRatios[key] || 0.5;
            audio.volume = this.volume * ratio;
          }
        }

        // å¯ç”¨/ç¦ç”¨éŸ³æ•ˆ
        toggle() {
          this.enabled = !this.enabled;
          return this.enabled;
        }
      }

      // åˆ›å»ºéŸ³æ•ˆç®¡ç†å™¨å®ä¾‹
      let soundManager = new SoundManager();

      // è‡ªå®šä¹‰å¼¹çª—å‡½æ•°
      function showCustomAlert(title, message, callback) {
        const modal = document.createElement("div");
        modal.className = "custom-modal";
        modal.innerHTML = `
                <div class="custom-modal-content">
                    <div class="custom-modal-title">${title}</div>
                    <div class="custom-modal-message">${message}</div>
                    <div class="custom-modal-buttons">
                        <button class="custom-modal-btn primary" onclick="closeCustomModal()">${t(
                          "confirm"
                        )}</button>
                    </div>
                </div>
            `;
        document.body.appendChild(modal);

        // ä¿å­˜å›è°ƒå‡½æ•°
        window.customModalCallback = callback;
      }

      function showCustomConfirm(title, message, onConfirm, onCancel) {
        const modal = document.createElement("div");
        modal.className = "custom-modal";
        modal.innerHTML = `
                <div class="custom-modal-content">
                    <div class="custom-modal-title">${title}</div>
                    <div class="custom-modal-message">${message}</div>
                    <div class="custom-modal-buttons">
                        <button class="custom-modal-btn primary" onclick="confirmCustomModal()">${t(
                          "confirm"
                        )}</button>
                        <button class="custom-modal-btn secondary" onclick="cancelCustomModal()">${t(
                          "cancel"
                        )}</button>
                    </div>
                </div>
            `;
        document.body.appendChild(modal);

        // ä¿å­˜å›è°ƒå‡½æ•°
        window.customModalConfirm = onConfirm;
        window.customModalCancel = onCancel;
      }

      function closeCustomModal() {
        const modal = document.querySelector(".custom-modal");
        if (modal) {
          modal.remove();
          if (window.customModalCallback) {
            window.customModalCallback();
            window.customModalCallback = null;
          }
        }
      }

      function confirmCustomModal() {
        const modal = document.querySelector(".custom-modal");
        if (modal) {
          modal.remove();
          if (window.customModalConfirm) {
            window.customModalConfirm();
            window.customModalConfirm = null;
            window.customModalCancel = null;
          }
        }
      }

      function cancelCustomModal() {
        const modal = document.querySelector(".custom-modal");
        if (modal) {
          modal.remove();
          if (window.customModalCancel) {
            window.customModalCancel();
          }
          window.customModalConfirm = null;
          window.customModalCancel = null;
        }
      }

      // åˆå§‹åŒ–AIæ¸¸æˆ
      function initAIGame() {
        const board = document.getElementById("ai-game-board");
        board.innerHTML = "";

        // è®¾ç½®å“åº”å¼æ£‹ç›˜å°ºå¯¸
        setupResponsiveBoard();

        // åˆ›å»º15x15æ£‹ç›˜
        for (let row = 0; row < 15; row++) {
          for (let col = 0; col < 15; col++) {
            const cell = document.createElement("div");
            cell.className = "board-cell";
            cell.dataset.row = row;
            cell.dataset.col = col;
            cell.addEventListener("click", () => makeAIMove(row, col));
            board.appendChild(cell);
          }
        }

        // é‡ç½®æ¸¸æˆçŠ¶æ€
        aiGameBoard = Array(15)
          .fill()
          .map(() => Array(15).fill(null));
        aiCurrentPlayer = "black";
        aiGameHistory = [];
        aiGameActive = true;
        window.gameStartTime = Date.now(); // è®°å½•æ¸¸æˆå¼€å§‹æ—¶é—´

        // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
        stopTurnTimer();

        updateAIGameStatus();

        // æ’­æ”¾æ¸¸æˆå¼€å§‹éŸ³æ•ˆ
        setTimeout(() => {
          soundManager.playGameStart();
        }, 300);

        // æ‰‹æœºç«¯æ¸…é™¤é˜´å½±
        setTimeout(() => {
          clearAllStoneShadows();
        }, 100);
      }

      // è®¾ç½®å“åº”å¼æ£‹ç›˜å°ºå¯¸
      function setupResponsiveBoard() {
        const board = document.getElementById("ai-game-board");
        if (!board) return;

        // æ ¹æ®å±å¹•å°ºå¯¸åŠ¨æ€è®¡ç®—æ£‹ç›˜å¤§å°
        const screenWidth = window.innerWidth;
        const screenHeight = window.innerHeight;

        // è®¡ç®—å¯ç”¨é«˜åº¦ï¼šæ€»é«˜åº¦å‡å»å¤´éƒ¨ã€æ ‡é¢˜ã€ç©å®¶ä¿¡æ¯ã€æŒ‰é’®ç­‰åŒºåŸŸ
        // é¢„ç•™ç©ºé—´ï¼šè¿”å›æŒ‰é’®(40px) + æ ‡é¢˜(35px) + ç©å®¶ä¿¡æ¯(80px) + æŒ‰é’®åŒºåŸŸ(60px) + è¾¹è·(20px)
        const reservedHeight = 235;
        const availableHeight = screenHeight - reservedHeight;
        const availableWidth = screenWidth - 16; // å‡å»å·¦å³è¾¹è·

        let cellSize;
        if (screenWidth >= 1200) {
          cellSize = 28;
        } else if (screenWidth >= 992) {
          cellSize = 26;
        } else if (screenWidth >= 768) {
          cellSize = 24;
        } else if (screenWidth >= 576) {
          cellSize = 22;
        } else {
          // æ‰‹æœºç«¯ï¼šå……åˆ†åˆ©ç”¨å±å¹•å®½åº¦
          // å‡å»è¾¹æ¡†å’Œå†…è¾¹è·ï¼Œè®¡ç®—æœ€å¤§å¯ç”¨å®½åº¦
          const availableWidth = screenWidth - 16; // 8px padding * 2
          const maxCellSize = Math.floor(availableWidth / 15);
          cellSize = Math.max(20, Math.min(24, maxCellSize)); // æœ€å°20pxï¼Œæœ€å¤§24px
        }

        // æ¡Œé¢ç«¯ç¡®ä¿æ£‹ç›˜ä¸ä¼šè¶…å‡ºå±å¹•é«˜åº¦ï¼Œä½†ä¼˜å…ˆä¿æŒå®½åº¦
        if (screenWidth >= 768) {
          const maxBoardSizeByHeight = Math.floor(availableHeight / 15);
          if (maxBoardSizeByHeight < cellSize) {
            cellSize = Math.max(20, maxBoardSizeByHeight); // æœ€å°ä¿æŒ20px
          }
        }

        // åªæœ‰å½“å°ºå¯¸çœŸæ­£æ”¹å˜æ—¶æ‰æ›´æ–°CSSå˜é‡ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
        const currentCellSize = getComputedStyle(
          document.documentElement
        ).getPropertyValue("--cell-size");
        const newCellSizeValue = cellSize + "px";

        if (currentCellSize !== newCellSizeValue) {
          // è®¾ç½®CSSå˜é‡ - æ£‹å­å°ºå¯¸é€‚ä¸­ï¼Œç•™å‡ºåˆç†ç©ºéš™
          const stoneSize = Math.max(14, cellSize - 4); // æ£‹å­æ¯”æ ¼å­å°4pxï¼Œä¿æŒåˆç†ç©ºéš™
          document.documentElement.style.setProperty(
            "--cell-size",
            newCellSizeValue
          );
          document.documentElement.style.setProperty(
            "--stone-size",
            stoneSize + "px"
          );
        }
      }

      // é˜²æŠ–å‡½æ•°
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      // ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼ˆä½¿ç”¨é˜²æŠ–é¿å…é¢‘ç¹è°ƒç”¨ï¼‰
      window.addEventListener(
        "resize",
        debounce(() => {
          if (document.getElementById("ai-game-board")) {
            setupResponsiveBoard();
          }
        }, 250)
      );

      // ç©å®¶ä¸‹æ£‹
      function makeAIMove(row, col) {
        if (
          !aiGameActive ||
          aiGameBoard[row][col] !== null ||
          aiCurrentPlayer !== "black"
        ) {
          return;
        }

        // åœæ­¢ç©å®¶å›åˆè®¡æ—¶å™¨
        stopTurnTimer();

        // ç©å®¶ä¸‹é»‘å­
        placeAIStone(row, col, "black");
        aiGameBoard[row][col] = "black";
        aiGameHistory.push({ row, col, player: "black" });

        // æ’­æ”¾è½å­éŸ³æ•ˆ
        soundManager.playMove();

        // æ£€æŸ¥ç©å®¶æ˜¯å¦è·èƒœ
        if (checkAIWin(row, col, "black")) {
          endAIGame("black");
          return;
        }

        // æ£€æŸ¥æ˜¯å¦å¹³å±€
        if (isAIBoardFull()) {
          endAIGame(null);
          return;
        }

        // åˆ‡æ¢åˆ°AI
        aiCurrentPlayer = "white";
        updateAIGameStatus();

        // AIæ€è€ƒæ—¶é—´æ˜¾ç¤º
        const currentPlayerDisplay = document.getElementById(
          "current-player-display"
        );
        if (currentPlayerDisplay) {
          currentPlayerDisplay.textContent = t("opponent_turn");
        }

        // AIå»¶è¿Ÿä¸‹æ£‹ï¼ˆç»™ç”¨æˆ·ä¸€äº›ååº”æ—¶é—´ï¼‰
        setTimeout(() => {
          makeAIAutoMove();
        }, 800);
      }

      // AIè‡ªåŠ¨ä¸‹æ£‹
      function makeAIAutoMove() {
        if (!aiGameActive || aiCurrentPlayer !== "white") return;

        const aiMove = getAIBestMove();
        if (aiMove) {
          placeAIStone(aiMove.row, aiMove.col, "white");
          aiGameBoard[aiMove.row][aiMove.col] = "white";
          aiGameHistory.push({
            row: aiMove.row,
            col: aiMove.col,
            player: "white",
          });

          // æ’­æ”¾è½å­éŸ³æ•ˆ
          soundManager.playMove();

          // æ£€æŸ¥AIæ˜¯å¦è·èƒœ
          if (checkAIWin(aiMove.row, aiMove.col, "white")) {
            endAIGame("white");
            return;
          }

          // æ£€æŸ¥æ˜¯å¦å¹³å±€
          if (isAIBoardFull()) {
            endAIGame(null);
            return;
          }

          // åˆ‡æ¢å›ç©å®¶
          aiCurrentPlayer = "black";
          updateAIGameStatus();
        }
      }

      // å¼ºåˆ¶æ¸…é™¤æ£‹å­é˜´å½±çš„å‡½æ•° - æ‰‹æœºç«¯ä¸“ç”¨
      function clearStoneShadows(stone) {
        if (stone) {
          stone.style.boxShadow = "none";
          stone.style.filter = "none";
          stone.style.webkitFilter = "none";
          stone.style.textShadow = "none";
          stone.style.webkitBoxShadow = "none";
          stone.style.mozBoxShadow = "none";

          // å¼ºåˆ¶é‡ç»˜
          stone.offsetHeight;
        }
      }

      // å…¨å±€æ¸…é™¤æ‰€æœ‰æ£‹å­é˜´å½± - æ‰‹æœºç«¯ä¸“ç”¨
      function clearAllStoneShadows() {
        if (window.innerWidth <= 768) {
          const allStones = document.querySelectorAll(".stone");
          allStones.forEach((stone) => {
            clearStoneShadows(stone);
          });

          // ä¹Ÿæ¸…é™¤æ£‹ç›˜æ ¼å­çš„é˜´å½±
          const allCells = document.querySelectorAll(".board-cell");
          allCells.forEach((cell) => {
            cell.style.boxShadow = "none";
            cell.style.filter = "none";
            cell.style.webkitFilter = "none";
            cell.style.webkitBoxShadow = "none";
            cell.style.mozBoxShadow = "none";
          });
        }
      }

      // åœ¨æ£‹ç›˜ä¸Šæ”¾ç½®æ£‹å­
      function placeAIStone(row, col, player) {
        // ç§»é™¤æ‰€æœ‰ä¹‹å‰çš„æœ€æ–°è½å­æ ‡è¯†ï¼ˆç¡®ä¿å½»åº•æ¸…é™¤ï¼‰
        const allPreviousLatest = document.querySelectorAll(
          "#ai-game-board .stone.latest"
        );
        allPreviousLatest.forEach((stone) => {
          stone.classList.remove("latest");
          // æ‰‹æœºç«¯å¼ºåˆ¶æ¸…é™¤é˜´å½±
          if (window.innerWidth <= 768) {
            clearStoneShadows(stone);
          }
        });

        const cell = document.querySelector(
          `#ai-game-board [data-row="${row}"][data-col="${col}"]`
        );

        // ç»™æ ¼å­æ·»åŠ occupiedç±»ï¼Œé˜²æ­¢hoveræ•ˆæœ
        cell.classList.add("occupied");

        const stone = document.createElement("div");
        stone.className = `stone ${player} latest`;
        cell.appendChild(stone);

        // æ‰‹æœºç«¯å¼ºåˆ¶æ¸…é™¤æ–°æ£‹å­çš„é˜´å½±
        if (window.innerWidth <= 768) {
          setTimeout(() => {
            clearStoneShadows(stone);
          }, 0);

          // åŠ¨ç”»ç»“æŸåå†æ¬¡æ¸…é™¤
          setTimeout(() => {
            clearStoneShadows(stone);
          }, 300);
        }
      }

      // AIé…ç½®
      const AI_CONFIG = {
        MAX_DEPTH: 6, // æœç´¢æ·±åº¦
        MAX_TIME: 3000, // æœ€å¤§æ€è€ƒæ—¶é—´(æ¯«ç§’)
        CANDIDATE_LIMIT: 20, // å€™é€‰ä½ç½®æ•°é‡é™åˆ¶
      };

      // è¯„ä¼°åˆ†æ•°å¸¸é‡
      const SCORES = {
        WIN: 100000,
        LOSE: -100000,
        ALIVE_FOUR: 10000,
        RUSH_FOUR: 1000,
        ALIVE_THREE: 1000,
        SLEEP_THREE: 100,
        ALIVE_TWO: 100,
        SLEEP_TWO: 10,
        ONE: 1,
      };

      // å¼ºåŒ–AIç®—æ³• - ä½¿ç”¨Minimax + Alpha-Betaå‰ªæ
      function getAIBestMove() {
        const startTime = Date.now();

        // é¦–å…ˆæ£€æŸ¥æ˜¯å¦æœ‰ç«‹å³è·èƒœçš„æœºä¼š
        const winMove = findWinningMove("white");
        if (winMove) return winMove;

        // æ£€æŸ¥æ˜¯å¦éœ€è¦ç«‹å³é˜²å®ˆ
        const blockMove = findWinningMove("black");
        if (blockMove) return blockMove;

        // è·å–å€™é€‰ä½ç½®
        const candidates = getCandidateMoves();
        if (candidates.length === 0) {
          return { row: 7, col: 7 }; // ä¸­å¿ƒä½ç½®
        }

        let bestMove = candidates[0];
        let bestScore = -Infinity;

        // ä½¿ç”¨Minimaxç®—æ³•æœç´¢æœ€ä½³ä½ç½®
        for (const move of candidates) {
          // æ—¶é—´é™åˆ¶æ£€æŸ¥
          if (Date.now() - startTime > AI_CONFIG.MAX_TIME) break;

          aiGameBoard[move.row][move.col] = "white";
          const score = minimax(
            AI_CONFIG.MAX_DEPTH - 1,
            false,
            -Infinity,
            Infinity,
            startTime
          );
          aiGameBoard[move.row][move.col] = null;

          if (score > bestScore) {
            bestScore = score;
            bestMove = move;
          }
        }

        return bestMove;
      }

      // Minimaxç®—æ³•å®ç°
      function minimax(depth, isMaximizing, alpha, beta, startTime) {
        // æ—¶é—´é™åˆ¶æ£€æŸ¥
        if (Date.now() - startTime > AI_CONFIG.MAX_TIME) {
          return evaluateBoard();
        }

        // æ·±åº¦é™åˆ¶æˆ–æ¸¸æˆç»“æŸ
        if (depth === 0) {
          return evaluateBoard();
        }

        // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
        const gameResult = checkGameEnd();
        if (gameResult !== null) {
          if (gameResult === "white") return SCORES.WIN;
          if (gameResult === "black") return SCORES.LOSE;
          return 0; // å¹³å±€
        }

        const candidates = getCandidateMoves();
        if (candidates.length === 0) return evaluateBoard();

        if (isMaximizing) {
          let maxScore = -Infinity;
          for (const move of candidates) {
            aiGameBoard[move.row][move.col] = "white";
            const score = minimax(depth - 1, false, alpha, beta, startTime);
            aiGameBoard[move.row][move.col] = null;

            maxScore = Math.max(maxScore, score);
            alpha = Math.max(alpha, score);
            if (beta <= alpha) break; // Alpha-Betaå‰ªæ
          }
          return maxScore;
        } else {
          let minScore = Infinity;
          for (const move of candidates) {
            aiGameBoard[move.row][move.col] = "black";
            const score = minimax(depth - 1, true, alpha, beta, startTime);
            aiGameBoard[move.row][move.col] = null;

            minScore = Math.min(minScore, score);
            beta = Math.min(beta, score);
            if (beta <= alpha) break; // Alpha-Betaå‰ªæ
          }
          return minScore;
        }
      }

      // å¯»æ‰¾è·èƒœä½ç½®
      function findWinningMove(player) {
        for (let row = 0; row < 15; row++) {
          for (let col = 0; col < 15; col++) {
            if (aiGameBoard[row][col] === null) {
              aiGameBoard[row][col] = player;
              if (checkAIWinOnBoard(aiGameBoard, row, col, player)) {
                aiGameBoard[row][col] = null;
                return { row, col };
              }
              aiGameBoard[row][col] = null;
            }
          }
        }
        return null;
      }

      // è·å–å€™é€‰ä½ç½®ï¼ˆåªæœç´¢æœ‰æ„ä¹‰çš„ä½ç½®ï¼‰
      function getCandidateMoves() {
        const candidates = [];
        const visited = new Set();

        // å¦‚æœæ£‹ç›˜ä¸ºç©ºï¼Œè¿”å›ä¸­å¿ƒä½ç½®
        if (aiGameHistory.length === 0) {
          return [{ row: 7, col: 7 }];
        }

        // åœ¨å·²æœ‰æ£‹å­å‘¨å›´2æ ¼èŒƒå›´å†…å¯»æ‰¾å€™é€‰ä½ç½®
        for (let row = 0; row < 15; row++) {
          for (let col = 0; col < 15; col++) {
            if (aiGameBoard[row][col] !== null) {
              // åœ¨è¯¥æ£‹å­å‘¨å›´2æ ¼èŒƒå›´å†…æ·»åŠ å€™é€‰ä½ç½®
              for (let dr = -2; dr <= 2; dr++) {
                for (let dc = -2; dc <= 2; dc++) {
                  const newRow = row + dr;
                  const newCol = col + dc;
                  const key = `${newRow},${newCol}`;

                  if (
                    newRow >= 0 &&
                    newRow < 15 &&
                    newCol >= 0 &&
                    newCol < 15 &&
                    aiGameBoard[newRow][newCol] === null &&
                    !visited.has(key)
                  ) {
                    visited.add(key);
                    candidates.push({
                      row: newRow,
                      col: newCol,
                      score: evaluatePosition(newRow, newCol),
                    });
                  }
                }
              }
            }
          }
        }

        // æŒ‰è¯„ä¼°åˆ†æ•°æ’åºï¼Œå–å‰Nä¸ªå€™é€‰ä½ç½®
        candidates.sort((a, b) => b.score - a.score);
        return candidates.slice(0, AI_CONFIG.CANDIDATE_LIMIT);
      }

      // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
      function checkGameEnd() {
        // æ£€æŸ¥æ˜¯å¦æœ‰ç©å®¶è·èƒœ
        for (let row = 0; row < 15; row++) {
          for (let col = 0; col < 15; col++) {
            if (aiGameBoard[row][col] !== null) {
              if (
                checkAIWinOnBoard(aiGameBoard, row, col, aiGameBoard[row][col])
              ) {
                return aiGameBoard[row][col];
              }
            }
          }
        }

        // æ£€æŸ¥æ˜¯å¦å¹³å±€
        if (isAIBoardFull()) {
          return "draw";
        }

        return null;
      }

      // æ£€æŸ¥æ˜¯å¦è·èƒœï¼ˆåœ¨æŒ‡å®šæ£‹ç›˜ä¸Šï¼‰
      function checkAIWinOnBoard(board, row, col, player) {
        const directions = [
          [0, 1],
          [1, 0],
          [1, 1],
          [1, -1],
        ];

        for (let [dx, dy] of directions) {
          let count = 1;

          // æ­£æ–¹å‘
          for (let i = 1; i < 5; i++) {
            const newRow = row + dx * i;
            const newCol = col + dy * i;
            if (newRow < 0 || newRow >= 15 || newCol < 0 || newCol >= 15) break;
            if (board[newRow][newCol] !== player) break;
            count++;
          }

          // åæ–¹å‘
          for (let i = 1; i < 5; i++) {
            const newRow = row - dx * i;
            const newCol = col - dy * i;
            if (newRow < 0 || newRow >= 15 || newCol < 0 || newCol >= 15) break;
            if (board[newRow][newCol] !== player) break;
            count++;
          }

          if (count >= 5) return true;
        }

        return false;
      }

      // æ£€æŸ¥æ˜¯å¦è·èƒœï¼ˆåœ¨ä¸»æ£‹ç›˜ä¸Šï¼‰
      function checkAIWin(row, col, player) {
        return checkAIWinOnBoard(aiGameBoard, row, col, player);
      }

      // æ™ºèƒ½è¯„ä¼°å‡½æ•°
      function evaluateBoard() {
        let score = 0;

        // è¯„ä¼°æ‰€æœ‰æ–¹å‘çš„è¿å­æƒ…å†µ
        for (let row = 0; row < 15; row++) {
          for (let col = 0; col < 15; col++) {
            if (aiGameBoard[row][col] !== null) {
              score += evaluatePositionForPlayer(
                row,
                col,
                aiGameBoard[row][col]
              );
            }
          }
        }

        return score;
      }

      // è¯„ä¼°å•ä¸ªä½ç½®çš„ä»·å€¼
      function evaluatePosition(row, col) {
        let score = 0;

        // æ¨¡æ‹Ÿæ”¾ç½®ç™½å­å’Œé»‘å­ï¼Œè®¡ç®—ä»·å€¼
        aiGameBoard[row][col] = "white";
        score += evaluatePositionForPlayer(row, col, "white");
        aiGameBoard[row][col] = "black";
        score -= evaluatePositionForPlayer(row, col, "black") * 1.1; // é˜²å®ˆç¨å¾®é‡è¦ä¸€äº›
        aiGameBoard[row][col] = null;

        // ä¸­å¿ƒä½ç½®åŠ åˆ†
        const centerDistance = Math.abs(row - 7) + Math.abs(col - 7);
        score += (14 - centerDistance) * 2;

        return score;
      }

      // è¯„ä¼°ç‰¹å®šç©å®¶åœ¨ç‰¹å®šä½ç½®çš„ä»·å€¼
      function evaluatePositionForPlayer(row, col, player) {
        let score = 0;
        const directions = [
          [0, 1],
          [1, 0],
          [1, 1],
          [1, -1],
        ];

        for (const [dx, dy] of directions) {
          const pattern = getLinePattern(row, col, dx, dy, player);
          score += evaluatePattern(pattern, player);
        }

        return score;
      }

      // è·å–æŸä¸ªæ–¹å‘çš„è¿å­æ¨¡å¼
      function getLinePattern(row, col, dx, dy, player) {
        let pattern = [];

        // å‘è´Ÿæ–¹å‘æ‰«æ4æ ¼
        for (let i = -4; i <= 4; i++) {
          const newRow = row + dx * i;
          const newCol = col + dy * i;

          if (newRow < 0 || newRow >= 15 || newCol < 0 || newCol >= 15) {
            pattern.push("X"); // è¾¹ç•Œ
          } else if (aiGameBoard[newRow][newCol] === player) {
            pattern.push("O"); // å·±æ–¹æ£‹å­
          } else if (aiGameBoard[newRow][newCol] === null) {
            pattern.push("."); // ç©ºä½
          } else {
            pattern.push("X"); // å¯¹æ–¹æ£‹å­æˆ–è¾¹ç•Œ
          }
        }

        return pattern.join("");
      }

      // è¯„ä¼°è¿å­æ¨¡å¼
      function evaluatePattern(pattern, player) {
        const multiplier = player === "white" ? 1 : -1;

        // äº”è¿
        if (pattern.includes("OOOOO")) {
          return SCORES.WIN * multiplier;
        }

        // æ´»å›› (.OOOO.)
        if (pattern.includes(".OOOO.")) {
          return SCORES.ALIVE_FOUR * multiplier;
        }

        // å†²å›› (XOOOO. æˆ– .OOOOX)
        if (pattern.includes("XOOOO.") || pattern.includes(".OOOOX")) {
          return SCORES.RUSH_FOUR * multiplier;
        }

        // æ´»ä¸‰ (.OOO. ä¸”ä¸¤è¾¹éƒ½æœ‰ç©ºä½å»¶ä¼¸)
        if (pattern.includes(".OOO.")) {
          return SCORES.ALIVE_THREE * multiplier;
        }

        // çœ ä¸‰ (XOOO. æˆ– .OOOX)
        if (pattern.includes("XOOO.") || pattern.includes(".OOOX")) {
          return SCORES.SLEEP_THREE * multiplier;
        }

        // æ´»äºŒ (.OO. ä¸”ä¸¤è¾¹éƒ½æœ‰ç©ºä½å»¶ä¼¸)
        if (pattern.includes(".OO.")) {
          return SCORES.ALIVE_TWO * multiplier;
        }

        // çœ äºŒ (XOO. æˆ– .OOX)
        if (pattern.includes("XOO.") || pattern.includes(".OOX")) {
          return SCORES.SLEEP_TWO * multiplier;
        }

        // å•å­
        if (pattern.includes("O")) {
          return SCORES.ONE * multiplier;
        }

        return 0;
      }

      // æ£€æŸ¥æ£‹ç›˜æ˜¯å¦å·²æ»¡
      function isAIBoardFull() {
        for (let row = 0; row < 15; row++) {
          for (let col = 0; col < 15; col++) {
            if (aiGameBoard[row][col] === null) {
              return false;
            }
          }
        }
        return true;
      }

      // æ›´æ–°æ¸¸æˆçŠ¶æ€æ˜¾ç¤º
      function updateAIGameStatus() {
        const currentPlayerDisplay = document.getElementById(
          "current-player-display"
        );

        if (currentPlayerDisplay) {
          if (aiCurrentPlayer === "black") {
            currentPlayerDisplay.textContent = t("your_turn");
            startTurnTimer(); // å¼€å§‹ç©å®¶å›åˆè®¡æ—¶
          } else {
            currentPlayerDisplay.textContent = t("opponent_turn");
            stopTurnTimer(); // åœæ­¢è®¡æ—¶å™¨ï¼ˆAIå›åˆï¼‰
          }
        }
      }

      // å¼€å§‹å›åˆè®¡æ—¶å™¨
      function startTurnTimer() {
        // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
        stopTurnTimer();

        // åªåœ¨ç©å®¶å›åˆå¯åŠ¨è®¡æ—¶å™¨
        if (aiCurrentPlayer !== "black" || !aiGameActive) return;

        turnTimeLeft = TURN_TIME_LIMIT;
        updateTimerDisplay();

        turnTimer = setInterval(() => {
          turnTimeLeft--;
          updateTimerDisplay();

          // æ—¶é—´åˆ°ï¼Œç©å®¶è¶…æ—¶
          if (turnTimeLeft <= 0) {
            handlePlayerTimeout();
          }
        }, 1000);
      }

      // åœæ­¢å›åˆè®¡æ—¶å™¨
      function stopTurnTimer() {
        if (turnTimer) {
          clearInterval(turnTimer);
          turnTimer = null;
        }
        // æ˜¾ç¤ºAIå›åˆçŠ¶æ€ï¼Œä¿æŒå¸ƒå±€ç¨³å®š
        const timerDisplay = document.getElementById("turn-timer-display");
        if (timerDisplay) {
          timerDisplay.style.display = "block";
          timerDisplay.style.color = "#ffffff";
          timerDisplay.style.opacity = "1";
          timerDisplay.innerHTML = t("ai_thinking");
        }
      }

      // æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
      function updateTimerDisplay() {
        const timerDisplay = document.getElementById("turn-timer-display");
        if (!timerDisplay) return;

        timerDisplay.style.display = "block";

        // æ ¹æ®å‰©ä½™æ—¶é—´æ”¹å˜æ˜¾ç¤ºæ ·å¼
        if (turnTimeLeft > WARNING_TIME) {
          // æ­£å¸¸æ—¶é—´ï¼šç™½è‰²
          timerDisplay.style.color = "#ffffff";
          timerDisplay.innerHTML = t("thinking_time", turnTimeLeft);
        } else if (turnTimeLeft > 10) {
          // è­¦å‘Šæ—¶é—´ï¼šé»„è‰²
          timerDisplay.style.color = "#ffc107";
          timerDisplay.innerHTML = t("remaining_time", turnTimeLeft);
        } else {
          // ç´§æ€¥æ—¶é—´ï¼šçº¢è‰²é—ªçƒ
          timerDisplay.style.color = "#dc3545";
          timerDisplay.innerHTML = t("timeout_warning", turnTimeLeft);

          // æœ€å10ç§’é—ªçƒæ•ˆæœ
          if (turnTimeLeft % 2 === 0) {
            timerDisplay.style.opacity = "0.5";
          } else {
            timerDisplay.style.opacity = "1";
          }
        }
      }

      // å¤„ç†ç©å®¶è¶…æ—¶
      function handlePlayerTimeout() {
        if (turnTimer) {
          clearInterval(turnTimer);
          turnTimer = null;
        }

        if (!aiGameActive) return;

        // ç»“æŸæ¸¸æˆï¼Œè®°å½•ä¸ºå¤±è´¥
        aiGameActive = false;

        // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦è¿˜åœ¨æ¸¸æˆç•Œé¢
        const isInGameScreen =
          document.getElementById("current-player-display") !== null;

        if (isInGameScreen) {
          // ç”¨æˆ·è¿˜åœ¨æ¸¸æˆç•Œé¢ï¼Œæ˜¾ç¤ºè¶…æ—¶ä¿¡æ¯
          const currentPlayerDisplay = document.getElementById(
            "current-player-display"
          );
          if (currentPlayerDisplay) {
            currentPlayerDisplay.textContent = t("timeout");
          }

          // æ˜¾ç¤ºè¶…æ—¶ä¿¡æ¯
          const timerDisplay = document.getElementById("turn-timer-display");
          if (timerDisplay) {
            timerDisplay.style.display = "block";
            timerDisplay.style.color = "#dc3545";
            timerDisplay.style.opacity = "1";
            timerDisplay.innerHTML = t("timeout");
          }
        }

        // è®°å½•è¶…æ—¶å¤±è´¥
        const gameData = {
          totalMoves: aiGameHistory.length,
          gameMode: "ai",
          difficulty: 7,
          duration: Date.now() - (window.gameStartTime || Date.now()),
          timeoutReason: "player_timeout", // ç©å®¶è¶…æ—¶
        };

        // å»¶è¿Ÿä¸€ä¸‹æ˜¾ç¤ºç»“æœï¼Œè®©ç”¨æˆ·çœ‹åˆ°è¶…æ—¶æç¤º
        setTimeout(() => {
          // é‡æ–°æ£€æŸ¥ç”¨æˆ·æ˜¯å¦è¿˜åœ¨æ¸¸æˆç•Œé¢ï¼ˆå› ä¸ºå¯èƒ½åœ¨1.5ç§’å†…ç¦»å¼€äº†ï¼‰
          const stillInGameScreen =
            document.getElementById("current-player-display") !== null;

          if (currentUser && userStats) {
            if (stillInGameScreen) {
              // ç”¨æˆ·åœ¨æ¸¸æˆç•Œé¢ï¼Œæ˜¾ç¤ºæ­£å¸¸çš„æ¸¸æˆç»“æœå¼¹çª—
              recordGameResult("loss", gameData);
            } else {
              // ç”¨æˆ·å·²ç¦»å¼€æ¸¸æˆç•Œé¢ï¼Œé™é»˜è®°å½•ä¸æ˜¾ç¤ºå¼¹çª—
              recordGameResultSilent("loss", gameData);
            }
          } else {
            // æœªç™»å½•ç”¨æˆ·ï¼Œåªåœ¨æ¸¸æˆç•Œé¢æ˜¾ç¤ºæç¤º
            if (stillInGameScreen) {
              showCustomAlert(t("game_over"), t("timeout_game_over"));
            }
          }
        }, 1500);
      }

      // ç»“æŸæ¸¸æˆ
      function endAIGame(winner) {
        aiGameActive = false;

        // åœæ­¢è®¡æ—¶å™¨
        if (turnTimer) {
          clearInterval(turnTimer);
          turnTimer = null;
        }

        const currentPlayerDisplay = document.getElementById(
          "current-player-display"
        );

        // æ˜¾ç¤ºæ¸¸æˆç»“æŸçŠ¶æ€
        const timerDisplay = document.getElementById("turn-timer-display");
        if (timerDisplay) {
          timerDisplay.style.display = "block";
          timerDisplay.style.opacity = "1";
          if (winner === "black") {
            timerDisplay.style.color = "#28a745";
            timerDisplay.innerHTML = t("you_win");
          } else if (winner === "white") {
            timerDisplay.style.color = "#dc3545";
            timerDisplay.innerHTML = t("you_lose");
          } else {
            timerDisplay.style.color = "#ffc107";
            timerDisplay.innerHTML = t("draw");
          }
        }

        // æ’­æ”¾èƒœåˆ©éŸ³æ•ˆ
        setTimeout(() => {
          soundManager.playVictory();
        }, 200);

        // è®°å½•æ¸¸æˆç»“æœåˆ°åç«¯
        let gameResult;
        if (winner === "black") {
          gameResult = "win";
          currentPlayerDisplay.textContent = t("you_win");
        } else if (winner === "white") {
          gameResult = "loss";
          currentPlayerDisplay.textContent = t("you_lose");
        } else {
          gameResult = "draw";
          currentPlayerDisplay.textContent = t("draw");
        }

        // è®°å½•æ¸¸æˆæ•°æ®
        const gameData = {
          totalMoves: aiGameHistory.length,
          gameMode: "ai",
          difficulty: 7,
          duration: Date.now() - (window.gameStartTime || Date.now()),
        };

        // å¦‚æœç”¨æˆ·å·²ç™»å½•ï¼Œè®°å½•æ¸¸æˆç»“æœ
        if (currentUser && userStats) {
          recordGameResult(gameResult, gameData);
        } else {
          // å¦‚æœç”¨æˆ·å·²ç™»å½•ä½†userStatsä¸ºç©ºï¼Œå°è¯•åˆå§‹åŒ–
          if (currentUser && !userStats) {
            initializeUserStatsFromLocal();
            // é‡æ–°æ£€æŸ¥å¹¶è®°å½•
            if (userStats) {
              recordGameResult(gameResult, gameData);
              return;
            }
          }

          // æœªç™»å½•ç”¨æˆ·æˆ–åˆå§‹åŒ–å¤±è´¥ï¼Œæ˜¾ç¤ºç®€å•ç»“æœ
          setTimeout(() => {
            const resultText = {
              win: t("you_win"),
              loss: t("you_lose"),
              draw: t("draw"),
            };
            showCustomAlert(t("game_over"), resultText[gameResult]);
          }, 500);
        }
      }

      // æ‚”æ£‹åŠŸèƒ½ - ä¸´æ—¶ç§»é™¤æ‰£å¸é€»è¾‘
      async function undoAIMove() {
        if (aiGameHistory.length < 2 || !aiGameActive) {
          return;
        }

        // ç”±äºåç«¯æœåŠ¡æš‚æœªéƒ¨ç½²ï¼Œç›´æ¥æ‰§è¡Œæ‚”æ£‹
        performUndo();
      }

      // æ‰§è¡Œæ‚”æ£‹æ“ä½œ
      function performUndo() {
        // æ‚”æ£‹ä¸¤æ­¥ï¼ˆç©å®¶å’ŒAIçš„æ£‹å­ï¼‰
        for (let i = 0; i < 2 && aiGameHistory.length > 0; i++) {
          const lastMove = aiGameHistory.pop();
          aiGameBoard[lastMove.row][lastMove.col] = null;

          // ç§»é™¤UIä¸­çš„æ£‹å­
          const cell = document.querySelector(
            `#ai-game-board [data-row="${lastMove.row}"][data-col="${lastMove.col}"]`
          );
          const stone = cell.querySelector(".stone");
          if (stone) {
            stone.remove();
          }
          // ç§»é™¤occupiedç±»ï¼Œæ¢å¤hoveræ•ˆæœ
          cell.classList.remove("occupied");
        }

        // æ¸…é™¤æ‰€æœ‰latestæ ‡è®°
        const allLatestStones = document.querySelectorAll(
          "#ai-game-board .stone.latest"
        );
        allLatestStones.forEach((stone) => stone.classList.remove("latest"));

        // å¦‚æœè¿˜æœ‰æ£‹å­ï¼Œå°†æœ€åä¸€ä¸ªæ£‹å­æ ‡è®°ä¸ºlatest
        if (aiGameHistory.length > 0) {
          const lastMove = aiGameHistory[aiGameHistory.length - 1];
          const lastCell = document.querySelector(
            `#ai-game-board [data-row="${lastMove.row}"][data-col="${lastMove.col}"]`
          );
          const lastStone = lastCell.querySelector(".stone");
          if (lastStone) {
            lastStone.classList.add("latest");
          }
        }

        // é‡ç½®ä¸ºç©å®¶å›åˆ
        aiCurrentPlayer = "black";
        aiGameActive = true;
        updateAIGameStatus();
      }

      // é‡æ–°å¼€å§‹æ¸¸æˆ
      async function resetAIGame() {
        // æ£€æŸ¥å½“å‰æ¸¸æˆæ˜¯å¦æ­£åœ¨è¿›è¡Œä¸­
        const isGameInProgress = aiGameActive && aiGameHistory.length > 0;

        if (isGameInProgress) {
          // æ¸¸æˆè¿›è¡Œä¸­ï¼Œéœ€è¦æ”¯ä»˜è´¹ç”¨
          if (currentUser && userStats) {
            // ç™»å½•ç”¨æˆ·å¿…é¡»æ”¯ä»˜
            try {
              // å…ˆæ£€æŸ¥ä½™é¢
              const balanceResponse = await fetch(
                `${API_BASE_URL}/api/payment/balance?userId=${currentUser.uid}`
              );
              const balanceData = await balanceResponse.json();

              if (balanceData.success && balanceData.balance.current >= 0.1) {
                // ä½™é¢å……è¶³ï¼Œæ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
                showCustomConfirm(
                  t("restart_game"),
                  t("abandon_game_warning"),
                  async () => {
                    // ç¡®è®¤é‡æ–°å¼€å§‹ï¼Œæ‰£è´¹å¹¶æ‰§è¡Œ
                    const consumeResponse = await fetch(
                      `${API_BASE_URL}/api/payment/consume`,
                      {
                        method: "POST",
                        headers: {
                          "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                          userId: currentUser.uid,
                          amount: 0.1,
                          purpose: "newgame",
                          gameData: {
                            moveCount: aiGameHistory.length,
                            gameMode: "ai",
                            reason: "restart_in_progress",
                          },
                        }),
                      }
                    );

                    const consumeData = await consumeResponse.json();
                    if (consumeData.success) {
                      // æ‰£è´¹æˆåŠŸï¼Œè®°å½•å¤±è´¥å¹¶å¼€å§‹æ–°æ¸¸æˆ
                      recordGameAbandon();
                      initAIGame();
                      showCustomAlert(
                        t("success"),
                        t(
                          "undo_success_detail",
                          consumeData.newBalance.toFixed(2)
                        )
                      );
                    } else {
                      showCustomAlert(
                        t("error_title"),
                        consumeData.message || t("undo_failed_message")
                      );
                    }
                  },
                  () => {
                    // å–æ¶ˆæ“ä½œ
                  }
                );
              } else {
                // ä½™é¢ä¸è¶³ï¼Œæç¤ºç”¨æˆ·é€‰æ‹©æ˜¯å¦å……å€¼
                const currentBalance = balanceData.success
                  ? balanceData.balance.current.toFixed(2)
                  : "0.00";
                showCustomConfirm(
                  t("insufficient_balance_title"),
                  t("insufficient_balance_undo", currentBalance),
                  () => {
                    // ç”¨æˆ·é€‰æ‹©å……å€¼
                    showRechargeDialog(t("recharge_prompt"));
                  },
                  () => {
                    // ç”¨æˆ·é€‰æ‹©ä¸å……å€¼ï¼Œç»§ç»­æ¸¸æˆä½†ä¸èƒ½é‡æ–°å¼€å§‹
                    showCustomAlert(t("hint"), t("continue_game_tip"));
                  }
                );
              }
            } catch (error) {
              console.error("æ–°æ¸¸æˆæ”¯ä»˜æ£€æŸ¥å¤±è´¥:", error);
              showCustomAlert(t("error_title"), t("network_error_retry"));
            }
          } else {
            // æœªç™»å½•ç”¨æˆ·ï¼Œå…è´¹é‡æ–°å¼€å§‹ï¼ˆä½†ä¸å‚ä¸æ’è¡Œæ¦œï¼‰
            showCustomConfirm(
              t("abandon_current_game"),
              t("abandon_game_warning"),
              () => {
                recordGameAbandon();
                initAIGame();
              },
              () => {
                // å–æ¶ˆæ—¶ä¸åšä»»ä½•æ“ä½œ
              }
            );
          }
        } else {
          // æ¸¸æˆæœªå¼€å§‹æˆ–å·²ç»“æŸï¼Œç›´æ¥é‡æ–°å¼€å§‹
          showCustomConfirm(
            t("restart_game"),
            t("restart_game_confirm"),
            () => {
              initAIGame();
            },
            () => {
              // å–æ¶ˆæ—¶ä¸åšä»»ä½•æ“ä½œ
            }
          );
        }
      }

      // è®°å½•æ¸¸æˆæ”¾å¼ƒ
      function recordGameAbandon() {
        if (!currentUser || !userStats) return;

        // è®°å½•æ¸¸æˆæ•°æ®
        const gameData = {
          totalMoves: aiGameHistory.length,
          gameMode: "ai",
          difficulty: 7,
          duration: Date.now() - (window.gameStartTime || Date.now()),
          abandonReason: "player_restart", // ç©å®¶ä¸»åŠ¨é‡æ–°å¼€å§‹
        };

        // è®°å½•ä¸ºå¤±è´¥
        recordGameResult("loss", gameData);
      }

      // è¿”å›ç™»å½•ç•Œé¢
      function backToLogin() {
        // æ£€æŸ¥å½“å‰æ¸¸æˆæ˜¯å¦æ­£åœ¨è¿›è¡Œä¸­
        const isGameInProgress = aiGameActive && aiGameHistory.length > 0;

        if (isGameInProgress) {
          // æ¸¸æˆè¿›è¡Œä¸­ï¼Œè¯¢é—®æ˜¯å¦æ”¾å¼ƒå½“å‰æ¸¸æˆ
          showCustomConfirm(
            t("abandon_current_game"),
            t("abandon_game_return_warning"),
            () => {
              // è®°å½•å½“å‰æ¸¸æˆä¸ºå¤±è´¥ï¼ˆæ”¾å¼ƒï¼‰
              recordGameAbandonAndReturn();
            },
            () => {
              // å–æ¶ˆæ—¶ä¸åšä»»ä½•æ“ä½œ
            }
          );
          return;
        }

        // æ¸¸æˆæœªå¼€å§‹æˆ–å·²ç»“æŸï¼Œç›´æ¥è¿”å›
        performBackToLogin();
      }

      // è®°å½•æ¸¸æˆæ”¾å¼ƒå¹¶è¿”å›
      function recordGameAbandonAndReturn() {
        if (
          currentUser &&
          userStats &&
          aiGameActive &&
          aiGameHistory.length > 0
        ) {
          // è®°å½•æ¸¸æˆæ•°æ®
          const gameData = {
            totalMoves: aiGameHistory.length,
            gameMode: "ai",
            difficulty: 7,
            duration: Date.now() - (window.gameStartTime || Date.now()),
            abandonReason: "player_exit", // ç©å®¶ä¸»åŠ¨é€€å‡º
          };

          // è®°å½•ä¸ºå¤±è´¥ï¼ˆä¸æ˜¾ç¤ºç»“æœå¼¹çª—ï¼‰
          recordGameResultSilent("loss", gameData);
        }

        // è¿”å›ä¸»ç•Œé¢
        performBackToLogin();
      }

      // é™é»˜è®°å½•æ¸¸æˆç»“æœï¼ˆä¸æ˜¾ç¤ºå¼¹çª—ï¼‰
      async function recordGameResultSilent(result, gameData = {}) {
        if (!currentUser || !userStats) return;

        // å…ˆæ›´æ–°æœ¬åœ°æ•°æ®
        updateLocalGameStats(result);

        try {
          // ç¡®ä¿ä½¿ç”¨ä¸ä¸ªäººä¸­å¿ƒä¸€è‡´çš„ç”¨æˆ·å
          const displayUsername = getCurrentDisplayUsername();

          // åŒæ­¥æ›´æ–°æœ¬åœ°userStatsçš„ç”¨æˆ·å
          if (userStats) {
            userStats.username = displayUsername;
          }

          const response = await fetch(`${API_BASE_URL}/api/games`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              userId: currentUser.piUserId || currentUser.uid,
              username: displayUsername,
              gameResult: result, // 'win', 'loss', 'draw'
              gameData: {
                ...gameData,
                gameMode: "ai",
                difficulty: 7,
                timestamp: new Date().toISOString(),
              },
            }),
          });

          if (response.ok) {
            const data = await response.json();
            userStats = data.userStats; // æ›´æ–°æœ¬åœ°ç»Ÿè®¡æ•°æ®
          } else {
            console.error("è®°å½•æ¸¸æˆç»“æœå¤±è´¥:", response.statusText);
            // å¦‚æœåç«¯å¤±è´¥ï¼Œè‡³å°‘ä¿å­˜æœ¬åœ°æ•°æ®
            saveUserGameData();
          }
        } catch (error) {
          console.error("è®°å½•æ¸¸æˆç»“æœå¤±è´¥:", error);
          // å¦‚æœåç«¯å¤±è´¥ï¼Œè‡³å°‘ä¿å­˜æœ¬åœ°æ•°æ®
          saveUserGameData();
        }
      }

      // æ‰§è¡Œè¿”å›ç™»å½•ç•Œé¢
      function performBackToLogin() {
        // ç›´æ¥åˆ‡æ¢åˆ°ä¸»ç•Œé¢ï¼Œé¿å…é¡µé¢é‡æ–°åŠ è½½çš„å»¶è¿Ÿ
        const root = document.getElementById("root");
        root.innerHTML = `
                <div class="login-screen">
                    <div class="container">
                        <div class="login-content">
                            <div class="login-card card">
                                <!-- è¯­è¨€åˆ‡æ¢å™¨ -->
                                <div class="language-selector">
                                    <span class="globe-icon">ğŸŒ</span>
                                    <select id="language-selector-game" onchange="changeLanguage(this.value)">
                                        <option value="zh" data-i18n="lang_zh">ä¸­æ–‡</option>
                                        <option value="en" data-i18n="lang_en">English</option>
                                        <option value="ko" data-i18n="lang_ko">í•œêµ­ì–´</option>
                                        <option value="ja" data-i18n="lang_ja">æ—¥æœ¬èª</option>
                                        <option value="vi" data-i18n="lang_vi">Tiáº¿ng Viá»‡t</option>
                                    </select>
                                </div>

                                <div class="card-header text-center">
                                    <div class="title-with-icon">
                                        <div class="board-icon">
                                            <div class="stones-container">
                                                <div class="stone-jar black">
                                                    <div class="stone"></div>
                                                </div>
                                                <div class="stone-jar white">
                                                    <div class="stone"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <h1 class="game-title" data-i18n="game_title">${t(
                                          "game_title"
                                        )}</h1>
                                    </div>
                                    <p class="game-subtitle" data-i18n="game_subtitle">
                                        ${t("game_subtitle")}
                                    </p>
                                </div>

                                <div class="card-content">
                                    <div class="game-modes">
                                        <div class="game-mode-row">
                                            <button class="game-mode-btn online-mode" onclick="handleOnlineMatch()">
                                                <span class="mode-icon">ğŸŒ</span>
                                                <span class="mode-text" data-i18n="online_match">${t(
                                                  "online_match"
                                                )}</span>
                                            </button>
                                        </div>
                                        <div class="game-mode-row">
                                            <button class="game-mode-btn" onclick="showGlobalRanking()">
                                                <span class="mode-icon">ğŸ†</span>
                                                <span class="mode-text" data-i18n="global_ranking">${t(
                                                  "global_ranking"
                                                )}</span>
                                            </button>
                                        </div>
                                        <div class="game-mode-row">
                                            <button class="game-mode-btn ai-mode" onclick="handleAIGame()">
                                                <span class="mode-icon">ğŸ§ </span>
                                                <span class="mode-text" data-i18n="ai_battle">${t(
                                                  "ai_battle"
                                                )}</span>
                                            </button>
                                        </div>
                                        <div class="game-mode-row">
                                            <button class="game-mode-btn" onclick="showPersonalCenter()">
                                                <span class="mode-icon">ğŸ‘¤</span>
                                                <span class="mode-text" data-i18n="personal_center">${t(
                                                  "personal_center"
                                                )}</span>
                                            </button>
                                        </div>
                                        <div class="game-mode-row">
                                            <button class="game-mode-btn" onclick="showGameInstructions()">
                                                <span class="mode-icon">â“</span>
                                                <span class="mode-text" data-i18n="game_instructions">${t(
                                                  "game_instructions"
                                                )}</span>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="error-message" id="error-message" style="display: none;">
                                        <p id="error-text" data-i18n="error_message">âŒ é”™è¯¯ä¿¡æ¯</p>
                                    </div>
                                </div>

                                <div class="card-footer">
                                    <button id="login-btn" class="btn btn-primary btn-lg pi-login-btn" onclick="handleSignIn()">
                                        <span class="pi-icon">Ï€</span>
                                        <span data-i18n="login_with_pi">${t(
                                          "login_with_pi"
                                        )}</span>
                                    </button>
                                    <p class="login-note" data-i18n="login_note">
                                        ${t("login_note")}
                                    </p>

                                    <!-- éšç§æ”¿ç­–å’ŒæœåŠ¡æ¡æ¬¾é“¾æ¥ -->
                                    <div class="legal-links" style="margin-top: 20px; text-align: center;">
                                        <a href="public/privacy-policy.html" target="_blank" style="color: #c77dff; text-decoration: none; margin: 0 10px; font-size: 14px;" data-i18n="privacy_policy">éšç§æ”¿ç­–</a>
                                        <span style="color: #ffffff80;">|</span>
                                        <a href="public/terms-of-service.html" target="_blank" style="color: #c77dff; text-decoration: none; margin: 0 10px; font-size: 14px;" data-i18n="terms_of_service">æœåŠ¡æ¡æ¬¾</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

        // é‡æ–°åˆå§‹åŒ–é¡µé¢çŠ¶æ€
        initializePage();

        // ç«‹å³è°ƒæ•´å‰¯æ ‡é¢˜å­—ä½“å¤§å°ï¼Œä¸ä½¿ç”¨å»¶è¿Ÿ
        adjustSubtitleFontSize();

        // ç¡®ä¿æŒ‰é’®çŠ¶æ€æ­£ç¡®æ›´æ–°
        updateMainPageButtonState();
      }

      // æ˜¾ç¤ºå……å€¼å¯¹è¯æ¡†
      function showRechargeDialog(message) {
        showCustomModal(
          t("recharge_dialog_title"),
          `
            <div style="text-align: center;">
              <div style="margin-bottom: 20px;">
                <div style="font-size: 2em; margin-bottom: 10px;">ğŸ’³</div>
                <p style="color: #666; margin-bottom: 15px;">${message}</p>
              </div>

              <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 style="color: #333; margin-bottom: 15px;">${t(
                  "recharge_amount_selection"
                )}</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                  <button onclick="createRechargeOrder(1)" style="background: #28a745; color: white; border: none; border-radius: 6px; padding: 12px; cursor: pointer;">
                    1 Ï€
                  </button>
                  <button onclick="createRechargeOrder(5)" style="background: #17a2b8; color: white; border: none; border-radius: 6px; padding: 12px; cursor: pointer;">
                    5 Ï€
                  </button>
                  <button onclick="createRechargeOrder(10)" style="background: #ffc107; color: black; border: none; border-radius: 6px; padding: 12px; cursor: pointer;">
                    10 Ï€
                  </button>
                  <button onclick="createRechargeOrder(20)" style="background: #dc3545; color: white; border: none; border-radius: 6px; padding: 12px; cursor: pointer;">
                    20 Ï€
                  </button>
                </div>
                <div style="margin-top: 10px;">
                  <input type="number" id="custom-amount" placeholder="${t(
                    "custom_amount_placeholder"
                  )}" min="0.1" step="0.1" style="width: 120px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; margin-right: 10px;">
                  <button onclick="createCustomRechargeOrder()" style="background: #6c757d; color: white; border: none; border-radius: 4px; padding: 8px 12px; cursor: pointer;">
                    ${t("custom_recharge")}
                  </button>
                </div>
              </div>

              <div style="text-align: center;">
                <button onclick="closeNewModal()" style="background: #6c757d; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                  ${t("cancel")}
                </button>
              </div>
            </div>
          `
        );
      }

      // åˆ›å»ºå……å€¼è®¢å•
      async function createRechargeOrder(amount) {
        if (!currentUser) {
          showCustomAlert(t("error_title"), t("please_login_first"));
          return;
        }

        try {
          const response = await fetch(`${API_BASE_URL}/api/payment/create`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              userId: currentUser.uid,
              amount: amount,
              purpose: "recharge",
            }),
          });

          const data = await response.json();
          if (data.success) {
            showPaymentDialog(data.order);
          } else {
            showCustomAlert(t("create_order_failed"), data.message);
          }
        } catch (error) {
          console.error("åˆ›å»ºå……å€¼è®¢å•å¤±è´¥:", error);
          showCustomAlert(t("error_title"), t("network_error_retry"));
        }
      }

      // åˆ›å»ºè‡ªå®šä¹‰é‡‘é¢å……å€¼è®¢å•
      function createCustomRechargeOrder() {
        const amountInput = document.getElementById("custom-amount");
        const amount = parseFloat(amountInput.value);

        if (!amount || amount < 0.1) {
          showCustomAlert(t("error_title"), t("custom_amount_error"));
          return;
        }

        createRechargeOrder(amount);
      }

      // æ˜¾ç¤ºæ”¯ä»˜å¯¹è¯æ¡†
      function showPaymentDialog(order) {
        showCustomModal(
          t("payment_dialog_title"),
          `
            <div style="text-align: center;">
              <div style="margin-bottom: 20px;">
                <div style="font-size: 2em; margin-bottom: 10px;">Ï€</div>
                <h3 style="color: #333; margin-bottom: 10px;">${t(
                  "recharge_amount_display",
                  order.amount
                )}</h3>
                <p style="color: #666; font-size: 14px;">${t(
                  "order_id_display",
                  order.orderId
                )}</p>
              </div>

              <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 style="color: #333; margin-bottom: 15px;">${t(
                  "payment_method"
                )}</h4>

                <div style="background: white; border-radius: 6px; padding: 15px; margin-bottom: 15px; border: 2px solid #e9ecef;">
                  <h5 style="color: #333; margin-bottom: 10px;">${t(
                    "pi_wallet_transfer"
                  )}</h5>
                  <p style="color: #666; font-size: 14px; margin-bottom: 10px;">
                    ${t("transfer_instruction")}
                  </p>
                  <div style="background: #f8f9fa; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 12px; word-break: break-all; margin-bottom: 10px;">
                    ${order.receiverAddress}
                  </div>
                  <p style="color: #dc3545; font-size: 13px; margin-bottom: 10px;">
                    ${t("transfer_amount_warning", order.amount)}
                  </p>
                  <p style="color: #666; font-size: 13px;">
                    ${t("transfer_memo", order.qrCodeData.memo)}
                  </p>
                </div>

                <div style="margin-bottom: 15px;">
                  <input type="text" id="transaction-hash" placeholder="${t(
                    "transaction_hash_placeholder"
                  )}" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; font-size: 14px;">
                  <p style="color: #666; font-size: 12px; margin-top: 5px;">
                    ${t("transaction_hash_instruction")}
                  </p>
                </div>
              </div>

              <div style="display: flex; gap: 10px; justify-content: center;">
                <button onclick="verifyPayment('${
                  order.orderId
                }')" style="background: #28a745; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                  ${t("verify_payment")}
                </button>
                <button onclick="closeNewModal()" style="background: #6c757d; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                  ${t("cancel")}
                </button>
              </div>

              <p style="color: #666; font-size: 12px; margin-top: 15px;">
                ${t("order_validity")}
              </p>
            </div>
          `
        );
      }

      // éªŒè¯æ”¯ä»˜
      async function verifyPayment(orderId) {
        const transactionHashInput =
          document.getElementById("transaction-hash");
        const transactionHash = transactionHashInput.value.trim();

        if (!transactionHash) {
          showCustomAlert(t("error_title"), t("please_enter_transaction_hash"));
          return;
        }

        try {
          const response = await fetch(`${API_BASE_URL}/api/payment/verify`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              orderId: orderId,
              transactionHash: transactionHash,
            }),
          });

          const data = await response.json();
          if (data.success) {
            closeNewModal();
            showCustomAlert(
              t("recharge_success"),
              t(
                "recharge_success_message",
                data.order.amount,
                data.newBalance.toFixed(2)
              )
            );
          } else {
            showCustomAlert(t("verification_failed"), data.message);
          }
        } catch (error) {
          console.error("éªŒè¯æ”¯ä»˜å¤±è´¥:", error);
          showCustomAlert(t("error_title"), t("network_error_retry"));
        }
      }

      // Pi Network iframeç¯å¢ƒå¼ºåŠ›ä¿®å¤è¯­è¨€é€‰æ‹©å™¨ä½ç½®
      function forceFixLanguageSelectorPosition() {
        const languageSelector = document.querySelector(".language-selector");
        if (languageSelector) {
          // æ£€æµ‹æ˜¯å¦åœ¨iframeä¸­
          const isInIframe = window.self !== window.top;
          const isPiNetwork =
            window.location.hostname.includes("minepi.com") ||
            document.referrer.includes("minepi.com") ||
            isInIframe;

          // å¼ºåˆ¶åº”ç”¨æœ€é«˜ä¼˜å…ˆçº§æ ·å¼
          const styles = {
            position: "fixed",
            top: "15px",
            right: "15px",
            zIndex: "2147483647", // æœ€å¤§z-indexå€¼
            transform: "translate3d(0, 0, 0)",
            willChange: "transform",
            pointerEvents: "auto",
            margin: "0",
            left: "auto",
            bottom: "auto",
          };

          Object.assign(languageSelector.style, styles);

          // æ·»åŠ é‡è¦æ€§æ ‡è®°
          languageSelector.style.setProperty("position", "fixed", "important");
          languageSelector.style.setProperty("top", "15px", "important");
          languageSelector.style.setProperty("right", "15px", "important");
          languageSelector.style.setProperty(
            "z-index",
            "2147483647",
            "important"
          );

          if (isPiNetwork) {
            document.body.classList.add("pi-network-iframe");
          }
        }
      }

      // å¼ºåˆ¶åˆ·æ–°ç¼“å­˜æ£€æŸ¥
      function checkCacheVersion() {
        const currentVersion = "2025-06-11-22:30";
        const cachedVersion = localStorage.getItem("appVersion");

        if (cachedVersion !== currentVersion) {
          localStorage.setItem("appVersion", currentVersion);
          // å¦‚æœç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå¼ºåˆ¶åˆ·æ–°
          if (cachedVersion && "serviceWorker" in navigator) {
            navigator.serviceWorker
              .getRegistrations()
              .then(function (registrations) {
                for (let registration of registrations) {
                  registration.unregister();
                }
              });
          }
        }
      }

      // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
      document.addEventListener("DOMContentLoaded", function () {
        checkCacheVersion();
        initializePage();

        // å¼ºåŠ›ä¿®å¤è¯­è¨€é€‰æ‹©å™¨ä½ç½®
        forceFixLanguageSelectorPosition();

        // å®šæ—¶é‡å¤ä¿®å¤ï¼Œç¡®ä¿åœ¨Pi Network iframeä¸­æ­£ç¡®æ˜¾ç¤º
        setTimeout(() => {
          forceFixLanguageSelectorPosition();
        }, 500);

        setTimeout(() => {
          forceFixLanguageSelectorPosition();
        }, 1000);

        setTimeout(() => {
          forceFixLanguageSelectorPosition();
        }, 2000);

        // æ‰‹æœºç«¯é˜´å½±æ¸…é™¤
        clearAllStoneShadows();

        // ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼Œé‡æ–°æ¸…é™¤é˜´å½±å’Œè°ƒæ•´å­—ä½“
        window.addEventListener("resize", function () {
          setTimeout(() => {
            clearAllStoneShadows();
            adjustSubtitleFontSize();
          }, 100);
        });

        // ç›‘å¬è®¾å¤‡æ–¹å‘å˜åŒ–
        window.addEventListener("orientationchange", function () {
          setTimeout(() => {
            clearAllStoneShadows();
          }, 200);
        });
      });

      // å¼ºåˆ¶åˆ·æ–°ç¼“å­˜æ£€æŸ¥
      function checkCacheVersion() {
        const currentVersion = "2025-06-11-22:30";
        const cachedVersion = localStorage.getItem("appVersion");

        if (cachedVersion !== currentVersion) {
          localStorage.setItem("appVersion", currentVersion);
          // å¦‚æœç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå¼ºåˆ¶åˆ·æ–°
          if (cachedVersion && "serviceWorker" in navigator) {
            navigator.serviceWorker
              .getRegistrations()
              .then(function (registrations) {
                for (let registration of registrations) {
                  registration.unregister();
                }
              });
          }
        }
      }

      // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
      document.addEventListener("DOMContentLoaded", function () {
        checkCacheVersion();
        initializePage();

        // å¼ºåŠ›ä¿®å¤è¯­è¨€é€‰æ‹©å™¨ä½ç½®
        forceFixLanguageSelectorPosition();

        // æ›´æ–°ä¸»é¡µæŒ‰é’®çŠ¶æ€
        updateMainPageButtonState();

        // æ¸…é™¤æ‰€æœ‰æ£‹å­é˜´å½±
        setTimeout(() => {
          clearAllStoneShadows();
        }, 200);
      });
    </script>
  </body>
</html>








    </style>
  </head>
  <body>
    <noscript data-i18n="noscript"
      >æ‚¨éœ€è¦å¯ç”¨JavaScriptæ‰èƒ½è¿è¡Œæ­¤åº”ç”¨ç¨‹åºã€‚</noscript
    >



    <script>
      // å¤šè¯­è¨€é…ç½®
      const LANGUAGES = {
        zh: {
          // åŸºç¡€ç•Œé¢
          noscript: "æ‚¨éœ€è¦å¯ç”¨JavaScriptæ‰èƒ½è¿è¡Œæ­¤åº”ç”¨ç¨‹åºã€‚",
          game_title: "äº”å­æ£‹",
          game_subtitle: "è¿è¡Œåœ¨pinetworkåŒºå—é“¾ä¹‹ä¸Šçš„äº”å­æ£‹æ¸¸æˆ",
          global_ranking: "å…¨çƒæ’è¡Œ",
          ai_battle: "AIå¯¹æˆ˜",
          personal_center: "ä¸ªäººä¸­å¿ƒ",
          game_instructions: "æ¸¸æˆè¯´æ˜",
          error_message: "âŒ é”™è¯¯ä¿¡æ¯",
          login_with_pi: "ä½¿ç”¨Pi Networkç™»å½•",
          login_note: "ç‚¹å‡»ç™»å½•å³è¡¨ç¤ºæ‚¨åŒæ„ä½¿ç”¨Pi Networkè´¦æˆ·è¿›è¡Œèº«ä»½éªŒè¯",

          // è¯­è¨€é€‰é¡¹
          lang_zh: "ä¸­æ–‡",
          lang_en: "English",
          lang_ko: "í•œêµ­ì–´",
          lang_ja: "æ—¥æœ¬èª",
          lang_vi: "Tiáº¿ng Viá»‡t",

          // æ¸¸æˆç›¸å…³
          current_player: "å½“å‰ç©å®¶",
          your_turn: "è½®åˆ°æˆ‘æ–¹è½å­",
          opponent_turn: "è½®åˆ°å¯¹æ–¹è½å­",
          ai_thinking: "ğŸ¤– AIæ­£åœ¨æ€è€ƒä¸­...",
          thinking_time: "â±ï¸ æ€è€ƒæ—¶é—´ï¼š{0}ç§’",
          remaining_time: "âš ï¸ å‰©ä½™æ—¶é—´ï¼š{0}ç§’",
          timeout_warning: "ğŸš¨ å³å°†è¶…æ—¶ï¼š{0}ç§’",
          timeout: "â° æ€è€ƒè¶…æ—¶",

          // æ¸¸æˆç»“æœ
          you_win: "ğŸ‰ æ­å–œæ‚¨è·èƒœï¼",
          you_lose: "ğŸ˜” å¾ˆé—æ†¾ï¼Œæ‚¨è´¥äº†",
          draw: "ğŸ¤ å¹³å±€",
          game_over: "æ¸¸æˆç»“æŸ",

          // æŒ‰é’®å’Œæ“ä½œ
          new_game: "æ–°æ¸¸æˆ",
          undo: "æ‚”æ£‹",
          restart: "é‡æ–°å¼€å§‹",
          back_to_menu: "è¿”å›ä¸»èœå•",
          confirm: "ç¡®è®¤",
          cancel: "å–æ¶ˆ",
          close: "å…³é—­",
          save: "ä¿å­˜",
          update: "æ›´æ–°",
          enter_game: "è¿›å…¥æ¸¸æˆ",

          // ä¸ªäººä¸­å¿ƒ
          personal_info: "ä¸ªäººä¿¡æ¯",
          game_stats: "æ¸¸æˆç»Ÿè®¡",
          total_games: "æ€»å±€æ•°",
          wins: "èƒœåˆ©",
          losses: "å¤±è´¥",
          win_rate: "èƒœç‡",
          current_rank: "å½“å‰æ’å",
          wallet_address: "é’±åŒ…åœ°å€",
          balance: "ä½™é¢",
          nickname: "æ˜µç§°",
          avatar: "å¤´åƒ",

          // é”™è¯¯å’Œæç¤º
          connection_failed: "è¿æ¥å¤±è´¥",
          network_error: "ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•",
          login_failed: "ç™»å½•å¤±è´¥",
          insufficient_balance: "ä½™é¢ä¸è¶³",
          invalid_move: "æ— æ•ˆè½å­",
          game_not_started: "æ¸¸æˆæœªå¼€å§‹",

          // æ”¯ä»˜ç›¸å…³
          payment_confirm: "ç¡®è®¤æ”¯ä»˜",
          payment_success: "æ”¯ä»˜æˆåŠŸ",
          payment_failed: "æ”¯ä»˜å¤±è´¥",
          payment_cancelled: "æ”¯ä»˜å·²å–æ¶ˆ",
          recharge: "å……å€¼",

          // æ’è¡Œæ¦œ
          leaderboard: "æ’è¡Œæ¦œ",
          rank: "æ’å",
          player: "ç©å®¶",
          score: "ç§¯åˆ†",
          games_played: "æ¸¸æˆå±€æ•°",

          // å…¶ä»–
          loading: "åŠ è½½ä¸­...",
          connecting: "æ­£åœ¨è¿æ¥...",
          please_wait: "è¯·ç¨å€™...",
          success: "æˆåŠŸ",
          failed: "å¤±è´¥",
          connecting_pi_network: "æ­£åœ¨è¿æ¥Pi Network...",
          entering_game: "æ­£åœ¨è¿›å…¥æ¸¸æˆ...",

          // å¼¹çª—å’Œæç¤º
          hint: "æç¤º",
          confirm_purchase: "ç¡®è®¤è´­ä¹°",
          confirm_payment: "ç¡®è®¤æ”¯ä»˜",
          payment_amount: "{0} Ï€",
          enter_nickname: "è¯·è¾“å…¥æ˜µç§°",
          nickname_too_long: "æ˜µç§°ä¸èƒ½è¶…è¿‡20ä¸ªå­—ç¬¦",
          nickname_forbidden: "æ˜µç§°åŒ…å«æ•æ„Ÿè¯ï¼Œè¯·é‡æ–°è¾“å…¥",
          logout_confirm: "é€€å‡ºç¡®è®¤",
          logout_message: "ç¡®å®šè¦é€€å‡ºè´¦æˆ·å—ï¼Ÿæ‚¨çš„æ¸¸æˆæ•°æ®å°†è¢«ä¿ç•™ã€‚",
          logout_success: "é€€å‡ºæˆåŠŸ",
          logout_success_message: "å·²æˆåŠŸé€€å‡ºè´¦æˆ·ï¼",
          please_login_first: "è¯·å…ˆç™»å½•",

          // æ¸¸æˆè¯´æ˜
          game_instructions_title: "æ¸¸æˆè¯´æ˜",
          game_history_title: "äº”å­æ£‹å†å²æ¸Šæº",
          game_history_desc:
            'ç›¸ä¼ äº”å­æ£‹è¯ç”Ÿäº4000å¤šå¹´å‰çš„å°§å¸æ—¶æœŸã€‚å°§ä¸ºæ•™è‚²å„¿å­ä¸¹æœ±ï¼Œå‘æ˜äº†çŸ³å­æ£‹ï¼Œåç»èˆœæ”¹è‰¯ä¸º"äº”æ˜Ÿè¿ç "ç©æ³•ï¼Œé€æ¸å½¢æˆç°ä»£äº”å­æ£‹çš„é›å½¢ã€‚\nä»å°§èˆœæ—¶æœŸçš„æ°‘é—´æ¸¸æˆï¼Œåˆ°å—åŒ—æœä¼ æ’­è‡³ä¸œäºšï¼Œå†ç»æ—¥æœ¬æ”¹è‰¯ä¸ºç«æŠ€è¿åŠ¨ï¼Œæœ€ç»ˆæˆä¸ºå…¨çƒæ€§æ£‹ç±»é¡¹ç›®ã€‚',

          // ä¸ªäººä¸­å¿ƒ
          personal_center_title: "ä¸ªäººä¸­å¿ƒ",
          wallet_address_placeholder: "è¾“å…¥50ä½é’±åŒ…åœ°å€ (å¤§å†™å­—æ¯å’Œæ•°å­—)",
          wallet_address_format: "é’±åŒ…åœ°å€æ ¼å¼ï¼š50ä½å¤§å†™å­—æ¯å’Œæ•°å­—",

          // æ”¯ä»˜ç›¸å…³
          insufficient_balance_title: "ä½™é¢ä¸è¶³",
          insufficient_balance_message:
            "æ‚”æ£‹éœ€è¦æ¶ˆè´¹ 0.1 Ï€ï¼Œå½“å‰ä½™é¢ {0} Ï€ï¼Œä½™é¢ä¸è¶³ã€‚\n\næ˜¯å¦è¦å……å€¼ï¼Ÿ",
          recharge_prompt: "ä¸ºæ‚¨çš„æ¸¸æˆè´¦æˆ·å……å€¼Piå¸ï¼Œäº«å—æ›´å¤šæ¸¸æˆåŠŸèƒ½ï¼",
          continue_without_recharge:
            "æ‚¨å¯ä»¥ç»§ç»­å½“å‰æ¸¸æˆï¼Œä½†æ— æ³•é‡æ–°å¼€å§‹ã€‚å……å€¼åå³å¯è§£é”æ­¤åŠŸèƒ½ã€‚",
          undo_success: "æ‚”æ£‹æˆåŠŸ",
          undo_success_message: "å·²æ¶ˆè´¹ 0.1 Ï€ï¼Œä½™é¢ï¼š{0} Ï€",
          undo_failed: "æ‚”æ£‹å¤±è´¥",
          network_error_retry: "ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•",
          invalid_amount: "è¯·è¾“å…¥æœ‰æ•ˆçš„å……å€¼é‡‘é¢ï¼ˆæœ€ä½0.1Ï€ï¼‰",

          // é“å…·åç§°
          item_hint: "æç¤ºé“å…·",
          item_undo: "æ‚”æ£‹åˆ¸",
          item_theme: "ä¸»é¢˜åŒ…",
          item_vip: "VIPä¼šå‘˜",
          item_unknown: "æœªçŸ¥é“å…·",

          // æ’è¡Œæ¦œå’Œç»Ÿè®¡
          current_ranking: "ğŸ¯ å½“å‰æ’åï¼šç¬¬{0}å | ({1}èƒœ{2}è´Ÿ) | èƒœç‡ï¼š{3}%",
          leaderboard_update_tip: "æ’è¡Œæ¦œå®æ—¶æ›´æ–°ï¼Œç»§ç»­æ¸¸æˆæå‡æ‚¨çš„æ’åï¼",
          ranking_header_rank: "æ’å",
          ranking_header_nickname: "æ˜µç§°",
          ranking_header_games: "æ€»å¯¹å±€",
          ranking_header_winrate: "èƒœç‡",
          current_rank_not_listed: "å½“å‰æ’åï¼šæœªä¸Šæ¦œ",
          current_rank_label: "å½“å‰æ’å",
          not_listed: "æœªä¸Šæ¦œ",
          play_one_game_to_rank:
            "ğŸ® å®Œæˆ1å±€æ¸¸æˆå³å¯ä¸Šæ¦œï¼å¼€å§‹æ‚¨çš„äº”å­æ£‹ä¹‹æ—…å§ï¼",

          // ä¸ªäººä¸­å¿ƒè¯¦ç»†å†…å®¹
          personal_profile: "ä¸ªäººæ¡£æ¡ˆ",
          avatar_nickname: "å¤´åƒå’Œæ˜µç§°",
          click_to_edit: "ç‚¹å‡»ç¼–è¾‘",
          account_info: "è´¦æˆ·ä¿¡æ¯",
          game_statistics: "æ¸¸æˆç»Ÿè®¡",
          account_balance_label: "è´¦æˆ·ä½™é¢",
          refresh_balance: "åˆ·æ–°ä½™é¢",
          logout_account: "é€€å‡ºè´¦æˆ·",

          // æ¸¸æˆè¯´æ˜è¯¦ç»†å†…å®¹
          game_history_section: "äº”å­æ£‹å†å²æ¸Šæº",
          game_rules_section: "æ¸¸æˆè§„åˆ™",
          game_rules_title: "ğŸ¯ åŸºæœ¬è§„åˆ™",
          game_rules_desc: "ä¸¤äººè½®æµåœ¨15Ã—15æ£‹ç›˜ä¸Šè½å­ï¼Œç‡å…ˆè¿æˆ5å­è€…è·èƒœ",
          game_features_title: "ğŸŒŸ æ¸¸æˆç‰¹è‰²",
          game_features_desc:
            "â€¢ æ”¯æŒäººæœºå¯¹æˆ˜ï¼ŒAIæ™ºèƒ½å¼ºå¤§\nâ€¢ å®æ—¶æ’è¡Œæ¦œç³»ç»Ÿ\nâ€¢ Piå¸å¥–åŠ±æœºåˆ¶\nâ€¢ å¤šè¯­è¨€æ”¯æŒ",
          game_controls_title: "ğŸ® æ“ä½œè¯´æ˜",
          game_controls_desc:
            "â€¢ ç‚¹å‡»æ£‹ç›˜ç©ºä½è½å­\nâ€¢ æ”¯æŒæ‚”æ£‹åŠŸèƒ½ï¼ˆéœ€æ¶ˆè´¹Piå¸ï¼‰\nâ€¢ å¯éšæ—¶é‡æ–°å¼€å§‹æ¸¸æˆ",

          // å……å€¼å’Œæ”¯ä»˜
          recharge_title: "ğŸ’° è´¦æˆ·å……å€¼",
          payment_title: "ğŸ’³ Piå¸æ”¯ä»˜",
          recharge_amount: "å……å€¼ {0} Ï€",
          order_number: "è®¢å•å·ï¼š{0}",
          quick_recharge: "å¿«é€Ÿå……å€¼",
          custom_amount: "è‡ªå®šä¹‰é‡‘é¢",
          min_amount_note: "æœ€ä½å……å€¼0.1Ï€",
          recharge_benefits: "å……å€¼åå¯äº«å—ï¼š",
          recharge_benefit_1: "â€¢ æ— é™æ¬¡æ‚”æ£‹",
          recharge_benefit_2: "â€¢ æ¸¸æˆé‡æ–°å¼€å§‹",
          recharge_benefit_3: "â€¢ ä¸“å±é“å…·è´­ä¹°",
          recharge_benefit_4: "â€¢ å‚ä¸æœˆåº¦å¥–åŠ±",

          // é”™è¯¯å’ŒçŠ¶æ€
          error_title: "é”™è¯¯",
          loading_text: "æ­£åœ¨åŠ è½½...",
          connecting_text: "æ­£åœ¨è¿æ¥...",
          balance_query: "æŸ¥è¯¢ä¸­...",
          balance_query_failed: "æŸ¥è¯¢å¤±è´¥",
          pi_login_failed: "Pi Network ç™»å½•å¤±è´¥",
          login_error: "ç™»å½•è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯",
          pi_sdk_not_loaded: "Pi Network SDKæœªåŠ è½½ï¼Œæ— æ³•ä½¿ç”¨æ”¯ä»˜åŠŸèƒ½",
          create_payment_failed: "åˆ›å»ºæ”¯ä»˜å¤±è´¥",

          // æ¸¸æˆè¯´æ˜è¯¦ç»†è§„åˆ™
          basic_rules_detail_1: "åœ¨15Ã—15çš„æ£‹ç›˜ä¸Šï¼Œç©å®¶æ‰§é»‘å­ï¼ŒAIæ‰§ç™½å­",
          basic_rules_detail_2: "åŒæ–¹è½®æµè½å­ï¼Œå…ˆè¿æˆäº”å­ä¸€çº¿è€…è·èƒœ",
          basic_rules_detail_3: "äº”å­å¯ä»¥æ˜¯æ¨ªã€ç«–ã€æ–œä»»æ„æ–¹å‘çš„è¿çº¿",
          basic_rules_detail_4: "æ£‹ç›˜å¡«æ»¡ä¸”æ— äººè·èƒœåˆ™ä¸ºå¹³å±€",

          // å›åˆæ—¶é—´è§„åˆ™
          turn_time_rules: "â±ï¸ å›åˆæ—¶é—´è§„åˆ™",
          thinking_time_rule: "æ€è€ƒæ—¶é—´ï¼šæ¯å›åˆ60ç§’æ€è€ƒæ—¶é—´",
          time_warning_rule: "æ—¶é—´æé†’ï¼šå‰©ä½™30ç§’æ—¶é»„è‰²è­¦å‘Š",
          urgent_warning_rule: "ç´§æ€¥æé†’ï¼šæœ€å10ç§’çº¢è‰²é—ªçƒ",
          timeout_rule: "è¶…æ—¶åˆ¤è´Ÿï¼šè¶…æ—¶è‡ªåŠ¨è®°å½•ä¸ºå¤±è´¥",

          // æ¸¸æˆæ“ä½œè¯¦ç»†
          game_operations: "ğŸ® æ¸¸æˆæ“ä½œ",
          place_stone: "è½å­ï¼šç‚¹å‡»ç©ºç™½æ ¼å­ä¸‹æ£‹",
          undo_move: "æ‚”æ£‹ï¼šå¯æ’¤é”€æœ€è¿‘ä¸€æ­¥ï¼ˆç©å®¶+AIå„ä¸€æ­¥ï¼‰",
          new_game_op: "æ–°æ¸¸æˆï¼šé‡æ–°å¼€å§‹ï¼Œè¿›è¡Œä¸­çš„æ¸¸æˆè®°å½•ä¸ºå¤±è´¥",
          return_op: "è¿”å›ï¼šé€€å‡ºæ¸¸æˆï¼Œè¿›è¡Œä¸­çš„æ¸¸æˆè®°å½•ä¸ºå¤±è´¥",

          // èƒœç‡æ’è¡Œç³»ç»Ÿ
          score_system: "ğŸ† èƒœç‡æ’è¡Œç³»ç»Ÿ",
          initial_score: "æ’è¡Œä¾æ®ï¼šæŒ‰èƒœç‡æ’åº",
          win_score: "è·èƒœï¼šæå‡èƒœç‡",
          draw_score: "å¹³å±€ï¼šå½±å“èƒœç‡",
          lose_score: "å¤±è´¥ï¼šé™ä½èƒœç‡",
          quit_score: "æ”¾å¼ƒ/è¶…æ—¶ï¼šè®°ä¸ºå¤±è´¥",

          // æœˆåº¦æ’åè§„åˆ™
          monthly_ranking_rules: "ğŸ¯ æœˆåº¦æ’åè§„åˆ™ï¼š",
          ranking_requirement: "â€¢ éœ€è¦è‡³å°‘1å±€å¯¹å±€æ‰èƒ½å‚ä¸æ’å",
          ranking_criteria: "â€¢ æŒ‰å‰©ä½™åˆ†æ•°é«˜ä½æ’åï¼Œåˆ†æ•°ç›¸åŒæŒ‰èƒœç‡æ’åº",
          ranking_rewards: "â€¢ æœˆåº•æ ¹æ®æ’åå‘æ”¾å¥–åŠ±",
          anti_farming: "âš ï¸ é˜²åˆ·åˆ†æœºåˆ¶ï¼šä¸å¯¹å±€æˆ–å¯¹å±€å¤ªå°‘çš„ç©å®¶ä¸å‚ä¸æ’å",

          // æœˆåº¦å¥–åŠ±è§„åˆ™
          monthly_rewards: "ğŸ† æœˆåº¦å¥–åŠ±è§„åˆ™",
          reward_pool_allocation: "ğŸ’° å¥–åŠ±æ± åˆ†é…",
          reward_settlement: "æ¯æœˆæœˆåº•æœ€åä¸€å¤©æœ€åä¸€å°æ—¶è¿›è¡Œç»“ç®—",
          reward_pool_percentage: "å¥–åŠ±æ± ä¸ºå½“æœˆå¹³å°æ€»ç›ˆåˆ©çš„ 50%",
          reward_example: "ä¾‹ï¼šæœ¬æœˆç›ˆåˆ©100Ï€ï¼Œå¥–åŠ±æ± ä¸º50Ï€",

          // å‰ä¸‰ååˆ†é…
          top_three_distribution: "ğŸ¥‡ å‰ä¸‰ååˆ†é…æ¯”ä¾‹",
          first_place: "ğŸ¥‡ ç¬¬ä¸€å",
          second_place: "ğŸ¥ˆ ç¬¬äºŒå",
          third_place: "ğŸ¥‰ ç¬¬ä¸‰å",

          // å‘æ”¾æ–¹å¼
          distribution_method: "ğŸ“‹ å‘æ”¾æ–¹å¼",
          wallet_distribution: "æŒ‰ç…§ä¸ªäººä¸­å¿ƒä¿å­˜çš„é’±åŒ…åœ°å€æ‰‹åŠ¨å‘æ”¾",
          valid_wallet_required: "è·å¥–è€…éœ€ç¡®ä¿é’±åŒ…åœ°å€æ­£ç¡®æœ‰æ•ˆ",
          next_day_distribution: "å¥–åŠ±å°†åœ¨ç»“ç®—æ¬¡æ—¥å‘æ”¾",
          invalid_wallet_rollover: "å¦‚é’±åŒ…åœ°å€æ— æ•ˆï¼Œå¥–åŠ±å°†é¡ºå»¶è‡³ä¸‹æœˆ",

          // æ’è¡Œæ¦œè§„åˆ™
          leaderboard_rules: "ğŸ“Š æ’è¡Œæ¦œè§„åˆ™",
          ranking_condition: "ä¸Šæ¦œæ¡ä»¶ï¼šå®Œæˆ1å±€æ¸¸æˆå³å¯ä¸Šæ¦œ",
          ranking_basis: "æ’åä¾æ®ï¼šæŒ‰èƒœç‡æ’åºï¼ˆèƒœç‡ç›¸åŒæ—¶æŒ‰æ€»å±€æ•°æ’åºï¼‰",
          data_statistics: "æ•°æ®ç»Ÿè®¡ï¼šæœˆåº¦æ’è¡Œæ¦œï¼Œæ¯æœˆ1æ—¥é‡ç½®",
          realtime_update: "å®æ—¶æ›´æ–°ï¼šæ¯å±€ç»“æŸåç«‹å³æ›´æ–°",

          // æ¸©é¦¨æç¤º
          warm_tips:
            "ğŸ‹ ä¼ æ‰¿åƒå¹´æ™ºæ…§ï¼Œä½“éªŒå¤å…¸æ£‹è‰ºä¹‹ç¾\nğŸ’¡ åˆç†å®‰æ’æ—¶é—´ï¼Œäº«å—æ€è€ƒä¹è¶£",

          // æ¸¸æˆç»“æœç›¸å…³
          game_result: "æ¸¸æˆç»“æœ",
          congratulations_win: "ğŸ‰ æ­å–œè·èƒœï¼",
          sorry_lose: "ğŸ˜” å¾ˆé—æ†¾å¤±è´¥äº†",
          draw_result: "ğŸ¤ å¹³å±€",
          current_score: "å½“å‰ç§¯åˆ†",
          win_rate_display: "èƒœç‡",
          total_games_display: "æ€»å¯¹å±€",
          current_rank_display: "å½“å‰æ’å",
          not_ranked: "æœªä¸Šæ¦œ",
          guest_mode: "æ¸¸å®¢æ¨¡å¼",
          guest_mode_desc: "æ‚¨å½“å‰ä»¥æ¸¸å®¢èº«ä»½æ¸¸æˆï¼Œæ¸¸æˆç»“æœä¸ä¼šè®°å½•åˆ°æ’è¡Œæ¦œä¸­ã€‚",
          login_benefits: "ç™»å½•åå¯äº«å—ï¼š",
          benefit_stats: "â€¢ ğŸ“Š æ¸¸æˆæ•°æ®ç»Ÿè®¡",
          benefit_leaderboard: "â€¢ ğŸ† å‚ä¸æ’è¡Œæ¦œç«äº‰",
          benefit_pi_service: "â€¢ ğŸ’° Piå¸å¢å€¼æœåŠ¡",
          benefit_monthly_rewards: "â€¢ ğŸ æœˆåº¦å¥–åŠ±æ´»åŠ¨",
          play_again: "å†æ¥ä¸€å±€",
          view_leaderboard: "æŸ¥çœ‹æ’è¡Œæ¦œ",
          login_now: "ç«‹å³ç™»å½•",
          monthly_games: "æœ¬æœˆå¯¹å±€",
          rank_position: "ç¬¬{0}å",

          // æ¸¸æˆç•Œé¢
          return_to_menu: "è¿”å›",
          guest_mode_short: "ğŸ® æ¸¸å®¢æ¨¡å¼",
          ai_battle_title: "ğŸ§  AIå¯¹æˆ˜",
          player_label: "ç©å®¶",
          ai_label: "AI",
          vs_label: "VS",
          undo_button: "æ‚”æ£‹",
          new_game_button: "æ–°æ¸¸æˆ",

          // æ‚”æ£‹ç›¸å…³
          undo_confirm: "æ‚”æ£‹ç¡®è®¤",
          undo_confirm_message:
            "æ‚”æ£‹éœ€è¦æ¶ˆè´¹ 0.1 Ï€\nå½“å‰ä½™é¢ï¼š{0} Ï€\n\nç¡®å®šè¦æ‚”æ£‹å—ï¼Ÿ",
          undo_success_title: "æ‚”æ£‹æˆåŠŸ",
          undo_success_detail: "å·²æ¶ˆè´¹ 0.1 Ï€ï¼Œä½™é¢ï¼š{0} Ï€",
          undo_failed_title: "æ‚”æ£‹å¤±è´¥",
          undo_failed_message: "æ‰£è´¹å¤±è´¥",
          insufficient_balance_undo:
            "æ‚”æ£‹éœ€è¦æ¶ˆè´¹ 0.1 Ï€ï¼Œå½“å‰ä½™é¢ {0} Ï€ï¼Œä½™é¢ä¸è¶³ã€‚\n\næ˜¯å¦è¦å……å€¼ï¼Ÿ",
          continue_game_tip:
            "æ‚¨å¯ä»¥ç»§ç»­å½“å‰æ¸¸æˆï¼Œä½†æ— æ³•é‡æ–°å¼€å§‹ã€‚å……å€¼åå³å¯è§£é”æ­¤åŠŸèƒ½ã€‚",

          // å……å€¼ç›¸å…³
          recharge_dialog_title: "ğŸ’° è´¦æˆ·å……å€¼",
          payment_dialog_title: "ğŸ’³ Piå¸æ”¯ä»˜",
          recharge_amount_display: "å……å€¼ {0} Ï€",
          order_id_display: "è®¢å•å·ï¼š{0}",
          custom_amount_error: "è¯·è¾“å…¥æœ‰æ•ˆçš„å……å€¼é‡‘é¢ï¼ˆæœ€ä½0.1Ï€ï¼‰",

          // ä¸ªäººä¸­å¿ƒè¯¦ç»†å†…å®¹
          monthly_reward_reminder: "ğŸ† æœˆåº¦å¥–åŠ±æé†’",
          monthly_reward_desc: "æ¯æœˆåˆ©æ¶¦çš„50%å°†åˆ†é…ç»™æ’åå‰ä¸‰çš„ç©å®¶ä½œä¸ºå¥–åŠ±",

          // æœˆåº¦é‡ç½®ç³»ç»Ÿ
          monthly_reset_system: "ğŸ“… æœˆåº¦é‡ç½®ç³»ç»Ÿ",
          monthly_reset_desc: "æ¯æœˆ1æ—¥è‡ªåŠ¨é‡ç½®æ’è¡Œæ¦œï¼Œå¼€å§‹æ–°çš„æœˆåº¦ç«èµ›",
          historical_data_preserved: "å†å²æ€»å¯¹å±€æ•°æ®æ°¸ä¹…ä¿å­˜ï¼Œä¸ä¼šæ¸…é›¶",
          monthly_ranking_only: "ä»…æœˆåº¦æ’è¡Œæ¦œæ•°æ®é‡ç½®ï¼Œä¸ªäººå†å²è®°å½•ä¿ç•™",

          // å…¨çƒæ’è¡Œæ¦œ
          global_ranking_title: "å…¨çƒæ’è¡Œ",
          ranking_subtitle: "ğŸ“Š åŸºäºæœˆåº¦èƒœç‡çš„æ’å",
          ranking_header_rank: "æ’å",
          ranking_header_nickname: "æ˜µç§°",
          ranking_header_games: "æ€»å¯¹å±€",
          ranking_header_winrate: "èƒœç‡",

          // ä¸ªäººä¸­å¿ƒè¯¦ç»†æ ‡ç­¾
          personal_profile_section: "ä¸ªäººæ¡£æ¡ˆ",
          avatar_nickname_section: "å¤´åƒå’Œæ˜µç§°",
          click_avatar_edit: "ç‚¹å‡»å¤´åƒç¼–è¾‘",
          click_nickname_edit: "ç‚¹å‡»æ˜µç§°ç¼–è¾‘",
          account_info_section: "è´¦æˆ·ä¿¡æ¯",
          game_stats_section: "æ¸¸æˆç»Ÿè®¡",
          wallet_address_label: "é’±åŒ…åœ°å€",
          account_balance_display: "è´¦æˆ·ä½™é¢",
          refresh_balance_btn: "åˆ·æ–°ä½™é¢",
          logout_btn: "é€€å‡ºè´¦æˆ·",

          // æ¸¸æˆç»Ÿè®¡æ ‡ç­¾
          total_games_label: "æ€»å¯¹å±€",
          wins_label: "èƒœåˆ©",
          win_rate_label: "èƒœç‡",
          current_score_label: "å½“å‰ç§¯åˆ†",
          current_rank_label: "å½“å‰æ’å",

          // ä½™é¢æŸ¥è¯¢çŠ¶æ€
          balance_querying: "æŸ¥è¯¢ä¸­...",
          balance_query_failed_display: "æŸ¥è¯¢å¤±è´¥",
          balance_tooltip: "æ€»å……å€¼ï¼š{0} Ï€\næ€»æ¶ˆè´¹ï¼š{1} Ï€",

          // æ”¯ä»˜æˆåŠŸä¿¡æ¯
          payment_success_title: "æ”¯ä»˜æˆåŠŸ",
          payment_success_message: "æ”¯ä»˜æˆåŠŸï¼",
          purchase_success_message: "æ‚¨å·²æˆåŠŸè´­ä¹° {0}",
          transaction_id: "äº¤æ˜“ID: {0}",

          // ä¸ªäººä¸­å¿ƒè¾“å…¥æç¤º
          enter_avatar_emoji: "è¾“å…¥emojiå¤´åƒ (å¦‚: ğŸ˜Š)",
          click_to_set_nickname: "ç‚¹å‡»è®¾ç½®æ˜µç§°",
          enter_your_nickname: "è¾“å…¥æ‚¨çš„æ˜µç§°",
          loading_text_display: "åŠ è½½ä¸­...",
          refresh_balance_text: "ğŸ”„ åˆ·æ–°ä½™é¢",
          recharge_text: "ğŸ’° å……å€¼",
          wallet_format_hint: "é’±åŒ…åœ°å€æ ¼å¼ï¼š50ä½å¤§å†™å­—æ¯å’Œæ•°å­—",
          save_wallet: "ğŸ’¾ ä¿å­˜",
          edit_wallet: "âœï¸ ç¼–è¾‘",
          logout_account_text: "â†©ï¸ é€€å‡ºè´¦æˆ·",

          // ä¸ªäººä¸­å¿ƒæç¤ºä¿¡æ¯
          enter_avatar_hint: "è¯·è¾“å…¥å¤´åƒemoji",
          single_emoji_hint: "è¯·è¾“å…¥å•ä¸ªemojiè¡¨æƒ…",
          avatar_updated: "å¤´åƒå·²æ›´æ–°ï¼",
          nickname_updated: "æ˜µç§°å·²æ›´æ–°ï¼",
          enter_wallet_hint: "è¯·è¾“å…¥é’±åŒ…åœ°å€",
          wallet_length_error:
            "âŒ è¿™ä¸æ˜¯æ ‡å‡†é’±åŒ…åœ°å€ï¼\n\nå½“å‰é•¿åº¦ï¼š{0}ä½\næ ‡å‡†é•¿åº¦ï¼š50ä½\n\nè¯·è¾“å…¥å®Œæ•´çš„50ä½é’±åŒ…åœ°å€",
          wallet_format_error:
            "âŒ é’±åŒ…åœ°å€æ ¼å¼é”™è¯¯ï¼\n\nåªèƒ½åŒ…å«å¤§å†™å­—æ¯(A-Z)å’Œæ•°å­—(0-9)\nè¯·æ£€æŸ¥è¾“å…¥å†…å®¹",
          wallet_saved_success: "âœ… é’±åŒ…åœ°å€å·²ä¿å­˜æˆåŠŸï¼",
          edit_mode_title: "ç¼–è¾‘æ¨¡å¼",
          edit_mode_message: "ğŸ’¡ ç¼–è¾‘æ¨¡å¼å·²å¯ç”¨\n\nè¯·ä¿®æ”¹é’±åŒ…åœ°å€åç‚¹å‡»ä¿å­˜",
          success_title: "æˆåŠŸ",

          // æ¸¸æˆç»“æŸç›¸å…³
          you_win: "ğŸ‰ æ­å–œæ‚¨è·èƒœï¼",
          you_lose: "ğŸ˜” AIè·èƒœï¼Œå†æ¥å†å‰ï¼",
          draw: "ğŸ¤ å¹³å±€ï¼",
          game_over: "æ¸¸æˆç»“æŸ",

          // ä¸»ç•Œé¢æŒ‰é’®
          online_match: "åœ¨çº¿åŒ¹é…",
          global_ranking: "å…¨çƒæ’è¡Œ",
          ai_battle: "AIå¯¹æˆ˜",
          personal_center: "ä¸ªäººä¸­å¿ƒ",
          game_instructions: "æ¸¸æˆè¯´æ˜",

          // è¿æ¥é”™è¯¯
          connection_failed: "è¿æ¥å¤±è´¥",
          connection_error_detail: "æ— æ³•è¿æ¥åˆ°Pi Networkï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•",
          login_with_pi: "ä½¿ç”¨Piè´¦å·ç™»å½•",
          login_benefits_note: "ç™»å½•åå¯äº«å—å®Œæ•´æ¸¸æˆåŠŸèƒ½å’ŒPiå¸å¥–åŠ±",

          // å……å€¼å¯¹è¯æ¡†
          recharge_amount_selection: "å……å€¼é‡‘é¢é€‰æ‹©",
          custom_amount_placeholder: "è‡ªå®šä¹‰é‡‘é¢",
          custom_recharge: "è‡ªå®šä¹‰å……å€¼",
          cancel: "å–æ¶ˆ",

          // é”™è¯¯æç¤º
          please_login_first: "è¯·å…ˆç™»å½•",
          create_order_failed: "åˆ›å»ºè®¢å•å¤±è´¥",
          network_error_retry: "ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•",

          // æ”¯ä»˜å¯¹è¯æ¡†
          payment_method: "æ”¯ä»˜æ–¹å¼",
          pi_wallet_transfer: "ğŸ“± Pié’±åŒ…è½¬è´¦",
          transfer_instruction: "è¯·ä½¿ç”¨Pié’±åŒ…å‘ä»¥ä¸‹åœ°å€è½¬è´¦ï¼š",
          transfer_amount_warning: "âš ï¸ è¯·ç¡®ä¿è½¬è´¦é‡‘é¢ä¸º <strong>{0} Ï€</strong>",
          transfer_memo: "è½¬è´¦å¤‡æ³¨ï¼š{0}",
          transaction_hash_placeholder: "è¯·è¾“å…¥è½¬è´¦äº¤æ˜“å“ˆå¸Œ",
          transaction_hash_instruction:
            "è½¬è´¦å®Œæˆåï¼Œè¯·åœ¨Pié’±åŒ…ä¸­å¤åˆ¶äº¤æ˜“å“ˆå¸Œå¹¶ç²˜è´´åˆ°ä¸Šæ–¹è¾“å…¥æ¡†",
          verify_payment: "éªŒè¯æ”¯ä»˜",
          order_validity: "è®¢å•æœ‰æ•ˆæœŸï¼š30åˆ†é’Ÿ",

          // æ”¯ä»˜éªŒè¯
          please_enter_transaction_hash: "è¯·è¾“å…¥äº¤æ˜“å“ˆå¸Œ",
          recharge_success: "å……å€¼æˆåŠŸ",
          recharge_success_message: "æ­å–œï¼å……å€¼ {0} Ï€ æˆåŠŸï¼\nå½“å‰ä½™é¢ï¼š{1} Ï€",
          verification_failed: "éªŒè¯å¤±è´¥",

          // æ¸¸æˆæµç¨‹ç¡®è®¤
          timeout_game_over: "â° æ€è€ƒè¶…æ—¶ï¼Œæ¸¸æˆå¤±è´¥ï¼",
          login_success: "ç™»å½•æˆåŠŸ",
          welcome_user: "æ¬¢è¿ï¼Œ{0}",
          abandon_current_game: "æ”¾å¼ƒå½“å‰æ¸¸æˆ",
          abandon_game_warning:
            "å½“å‰æ¸¸æˆæ­£åœ¨è¿›è¡Œä¸­ï¼Œé‡æ–°å¼€å§‹å°†è®°å½•ä¸ºå¤±è´¥ã€‚\n\nç¡®å®šè¦æ”¾å¼ƒå½“å‰æ¸¸æˆå—ï¼Ÿ",
          restart_game: "é‡æ–°å¼€å§‹æ¸¸æˆ",
          restart_game_confirm: "ç¡®å®šè¦é‡æ–°å¼€å§‹å—ï¼Ÿ",
          abandon_game_return_warning:
            "å½“å‰æ¸¸æˆæ­£åœ¨è¿›è¡Œä¸­ï¼Œè¿”å›ä¸»ç•Œé¢å°†è®°å½•ä¸ºå¤±è´¥ã€‚\n\nç¡®å®šè¦æ”¾å¼ƒå½“å‰æ¸¸æˆå—ï¼Ÿ",

          // èƒœè´Ÿæ˜¾ç¤ºæ ¼å¼
          wins_losses_format: "({0}èƒœ{1}è´Ÿ)",

          // æœˆåº¦å¥–åŠ±è¯¦ç»†è¯´æ˜
          reward_settlement_detail: "æ¯æœˆæœˆåº•æœ€åä¸€å¤©æœ€åä¸€å°æ—¶è¿›è¡Œç»“ç®—",
          reward_pool_50_percent: "å¥–åŠ±æ± ä¸ºå½“æœˆå¹³å°æ€»ç›ˆåˆ©çš„ 50%",
          reward_example_detail: "ä¾‹ï¼šæœ¬æœˆç›ˆåˆ©100Ï€ï¼Œå¥–åŠ±æ± ä¸º50Ï€",
          reward_distribution_manual: "æŒ‰ç…§ä¸ªäººä¸­å¿ƒä¿å­˜çš„é’±åŒ…åœ°å€æ‰‹åŠ¨å‘æ”¾",
          reward_wallet_valid: "è·å¥–è€…éœ€ç¡®ä¿é’±åŒ…åœ°å€æ­£ç¡®æœ‰æ•ˆ",
          reward_next_day: "å¥–åŠ±å°†åœ¨ç»“ç®—æ¬¡æ—¥å‘æ”¾",
          reward_invalid_rollover: "å¦‚é’±åŒ…åœ°å€æ— æ•ˆï¼Œå¥–åŠ±å°†é¡ºå»¶è‡³ä¸‹æœˆ",
          reward_example_calculation: "ğŸ’¡ ç¤ºä¾‹ï¼šæœ¬æœˆç›ˆåˆ©100Ï€ï¼Œå¥–åŠ±æ± 50Ï€",
          first_place_reward: "ğŸ¥‡ç¬¬ä¸€åï¼š25Ï€",
          second_place_reward: "ğŸ¥ˆç¬¬äºŒåï¼š15Ï€",
          third_place_reward: "ğŸ¥‰ç¬¬ä¸‰åï¼š10Ï€",
        },

        en: {
          // åŸºç¡€ç•Œé¢
          noscript: "You need to enable JavaScript to run this application.",
          game_title: "Gomoku",
          game_subtitle: "Gomoku game running on pinetwork blockchain",
          global_ranking: "Global Ranking",
          ai_battle: "AI Battle",
          personal_center: "Personal Center",
          game_instructions: "Game Instructions",
          error_message: "âŒ Error Message",
          login_with_pi: "Login with Pi Network",
          login_note:
            "By clicking login, you agree to use Pi Network account for authentication",

          // è¯­è¨€é€‰é¡¹
          lang_zh: "ä¸­æ–‡",
          lang_en: "English",
          lang_ko: "í•œêµ­ì–´",
          lang_ja: "æ—¥æœ¬èª",
          lang_vi: "Tiáº¿ng Viá»‡t",

          // æ¸¸æˆç›¸å…³
          current_player: "Current Player",
          your_turn: "Your Turn",
          opponent_turn: "Opponent's Turn",
          ai_thinking: "ğŸ¤– AI is thinking...",
          thinking_time: "â±ï¸ Thinking time: {0}s",
          remaining_time: "âš ï¸ Time remaining: {0}s",
          timeout_warning: "ğŸš¨ Timeout warning: {0}s",
          timeout: "â° Timeout",

          // æ¸¸æˆç»“æœ
          you_win: "ğŸ‰ Congratulations! You Win!",
          you_lose: "ğŸ˜” Sorry, You Lose",
          draw: "ğŸ¤ Draw",
          game_over: "Game Over",

          // æŒ‰é’®å’Œæ“ä½œ
          new_game: "New Game",
          undo: "Undo",
          restart: "Restart",
          back_to_menu: "Back to Menu",
          confirm: "Confirm",
          cancel: "Cancel",
          close: "Close",
          save: "Save",
          update: "Update",
          enter_game: "Enter Game",

          // ä¸ªäººä¸­å¿ƒ
          personal_info: "Personal Info",
          game_stats: "Game Statistics",
          total_games: "Total Games",
          wins: "Wins",
          losses: "Losses",
          win_rate: "Win Rate",
          current_rank: "Current Rank",
          wallet_address: "Wallet Address",
          balance: "Balance",
          nickname: "Nickname",
          avatar: "Avatar",

          // é”™è¯¯å’Œæç¤º
          connection_failed: "Connection Failed",
          network_error:
            "Network error, please check your connection and try again",
          login_failed: "Login Failed",
          insufficient_balance: "Insufficient Balance",
          invalid_move: "Invalid Move",
          game_not_started: "Game Not Started",

          // æ”¯ä»˜ç›¸å…³
          payment_confirm: "Confirm Payment",
          payment_success: "Payment Successful",
          payment_failed: "Payment Failed",
          payment_cancelled: "Payment Cancelled",
          recharge: "Recharge",

          // æ’è¡Œæ¦œ
          leaderboard: "Leaderboard",
          rank: "Rank",
          player: "Player",
          score: "Score",
          games_played: "Games Played",

          // å…¶ä»–
          loading: "Loading...",
          connecting: "Connecting...",
          please_wait: "Please wait...",
          success: "Success",
          failed: "Failed",
          connecting_pi_network: "Connecting to Pi Network...",
          entering_game: "Entering game...",

          // å¼¹çª—å’Œæç¤º
          hint: "Hint",
          confirm_purchase: "Confirm Purchase",
          confirm_payment: "Confirm Payment",
          payment_amount: "{0} Ï€",
          enter_nickname: "Please enter nickname",
          nickname_too_long: "Nickname cannot exceed 20 characters",
          nickname_forbidden:
            "Nickname contains forbidden words, please re-enter",
          logout_confirm: "Logout Confirmation",
          logout_message:
            "Are you sure you want to logout? This will clear all locally saved data.",
          logout_success: "Logout Successful",
          logout_success_message: "Successfully logged out!",
          please_login_first: "Please login first",

          // æ¸¸æˆè¯´æ˜
          game_instructions_title: "Game Instructions",
          game_history_title: "Gomoku History",
          game_history_desc:
            'Legend says Gomoku was born over 4000 years ago during Emperor Yao\'s era. Yao invented stone chess to educate his son Danzhu, later improved by Shun into the "Five Stars in a Row" gameplay, gradually forming the prototype of modern Gomoku.\nFrom folk games in the Yao-Shun era, to spreading to East Asia during the Northern and Southern Dynasties, then refined by Japan into competitive sports, finally becoming a global chess project.',

          // ä¸ªäººä¸­å¿ƒ
          personal_center_title: "Personal Center",
          wallet_address_placeholder:
            "Enter 50-character wallet address (uppercase letters and numbers)",
          wallet_address_format:
            "Wallet address format: 50 uppercase letters and numbers",

          // æ”¯ä»˜ç›¸å…³
          insufficient_balance_title: "Insufficient Balance",
          insufficient_balance_message:
            "Undo requires 0.1 Ï€, current balance {0} Ï€, insufficient balance.\n\nWould you like to recharge?",
          recharge_prompt:
            "Recharge Pi coins for your gaming account and enjoy more game features!",
          continue_without_recharge:
            "You can continue the current game, but cannot restart. Unlock this feature after recharging.",
          undo_success: "Undo Successful",
          undo_success_message: "Consumed 0.1 Ï€, balance: {0} Ï€",
          undo_failed: "Undo Failed",
          network_error_retry: "Network error, please try again later",
          invalid_amount: "Please enter a valid recharge amount (minimum 0.1Ï€)",

          // é“å…·åç§°
          item_hint: "Hint Item",
          item_undo: "Undo Ticket",
          item_theme: "Theme Pack",
          item_vip: "VIP Membership",
          item_unknown: "Unknown Item",

          // æ’è¡Œæ¦œå’Œç»Ÿè®¡
          current_ranking:
            "ğŸ¯ Current Rank: #{0} | ({1}W {2}L) | Win Rate: {3}%",
          leaderboard_update_tip:
            "Leaderboard updates in real-time, keep playing to improve your ranking!",
          ranking_header_rank: "Rank",
          ranking_header_nickname: "Nickname",
          ranking_header_games: "Total Games",
          ranking_header_winrate: "Win Rate",
          current_rank_not_listed: "Current Rank: Not Listed",
          current_rank_label: "Current Rank",
          not_listed: "Not Listed",
          play_one_game_to_rank:
            "ğŸ® Complete 1 game to get on the leaderboard! Start your Gomoku journey!",

          // ä¸ªäººä¸­å¿ƒè¯¦ç»†å†…å®¹
          personal_profile: "Personal Profile",
          avatar_nickname: "Avatar & Nickname",
          click_to_edit: "Click to Edit",
          account_info: "Account Information",
          game_statistics: "Game Statistics",
          account_balance_label: "Account Balance",
          refresh_balance: "Refresh Balance",
          logout_account: "Logout Account",

          // æ¸¸æˆè¯´æ˜è¯¦ç»†å†…å®¹
          game_history_section: "Gomoku History",
          game_rules_section: "Game Rules",
          game_rules_title: "ğŸ¯ Basic Rules",
          game_rules_desc:
            "Two players take turns placing stones on a 15Ã—15 board, first to connect 5 wins",
          game_features_title: "ğŸŒŸ Game Features",
          game_features_desc:
            "â€¢ AI battle with intelligent opponent\nâ€¢ Real-time leaderboard system\nâ€¢ Pi coin reward mechanism\nâ€¢ Multi-language support",
          game_controls_title: "ğŸ® Controls",
          game_controls_desc:
            "â€¢ Click empty board position to place stone\nâ€¢ Undo function available (costs Pi coins)\nâ€¢ Restart game anytime",

          // å……å€¼å’Œæ”¯ä»˜
          recharge_title: "ğŸ’° Account Recharge",
          payment_title: "ğŸ’³ Pi Coin Payment",
          recharge_amount: "Recharge {0} Ï€",
          order_number: "Order Number: {0}",
          quick_recharge: "Quick Recharge",
          custom_amount: "Custom Amount",
          min_amount_note: "Minimum recharge 0.1Ï€",
          recharge_benefits: "After recharge, enjoy:",
          recharge_benefit_1: "â€¢ Unlimited undo moves",
          recharge_benefit_2: "â€¢ Game restart function",
          recharge_benefit_3: "â€¢ Exclusive item purchases",
          recharge_benefit_4: "â€¢ Monthly reward participation",

          // é”™è¯¯å’ŒçŠ¶æ€
          error_title: "Error",
          loading_text: "Loading...",
          connecting_text: "Connecting...",
          balance_query: "Querying...",
          balance_query_failed: "Query Failed",
          pi_login_failed: "Pi Network login failed",
          login_error: "Error occurred during login",
          pi_sdk_not_loaded:
            "Pi Network SDK not loaded, payment features unavailable",
          create_payment_failed: "Failed to create payment",

          // æ¸¸æˆè¯´æ˜è¯¦ç»†è§„åˆ™
          basic_rules_detail_1:
            "On a 15Ã—15 board, player uses black stones, AI uses white stones",
          basic_rules_detail_2:
            "Players take turns placing stones, first to connect five wins",
          basic_rules_detail_3:
            "Five stones can be connected horizontally, vertically, or diagonally",
          basic_rules_detail_4:
            "If the board is full with no winner, it's a draw",

          // å›åˆæ—¶é—´è§„åˆ™
          turn_time_rules: "â±ï¸ Turn Time Rules",
          thinking_time_rule: "Thinking time: 60 seconds per turn",
          time_warning_rule:
            "Time warning: Yellow warning at 30 seconds remaining",
          urgent_warning_rule:
            "Urgent warning: Red flashing in last 10 seconds",
          timeout_rule:
            "Timeout penalty: Timeout automatically recorded as loss",

          // æ¸¸æˆæ“ä½œè¯¦ç»†
          game_operations: "ğŸ® Game Operations",
          place_stone: "Place stone: Click empty grid to play",
          undo_move: "Undo: Can retract last move (player + AI each one step)",
          new_game_op: "New game: Restart, ongoing game recorded as loss",
          return_op: "Return: Exit game, ongoing game recorded as loss",

          // èƒœç‡æ’è¡Œç³»ç»Ÿ
          score_system: "ğŸ† Win Rate Ranking System",
          initial_score: "Ranking basis: Sorted by win rate",
          win_score: "Win: Improves win rate",
          draw_score: "Draw: Affects win rate",
          lose_score: "Loss: Reduces win rate",
          quit_score: "Quit/Timeout: Counts as loss",

          // æœˆåº¦æ’åè§„åˆ™
          monthly_ranking_rules: "ğŸ¯ Monthly Ranking Rules:",
          ranking_requirement:
            "â€¢ At least 1 game required to participate in ranking",
          ranking_criteria:
            "â€¢ Ranked by remaining points, same points sorted by win rate",
          ranking_rewards:
            "â€¢ Rewards distributed at month end based on ranking",
          anti_farming:
            "âš ï¸ Anti-farming mechanism: Players with no games or too few games don't participate in ranking",

          // æœˆåº¦å¥–åŠ±è§„åˆ™
          monthly_rewards: "ğŸ† Monthly Reward Rules",
          reward_pool_allocation: "ğŸ’° Reward Pool Allocation",
          reward_settlement:
            "Settlement on the last hour of the last day of each month",
          reward_pool_percentage:
            "Reward pool is 50% of platform's monthly profit",
          reward_example: "Example: Monthly profit 100Ï€, reward pool 50Ï€",

          // å‰ä¸‰ååˆ†é…
          top_three_distribution: "ğŸ¥‡ Top Three Distribution",
          first_place: "ğŸ¥‡ First Place",
          second_place: "ğŸ¥ˆ Second Place",
          third_place: "ğŸ¥‰ Third Place",

          // å‘æ”¾æ–¹å¼
          distribution_method: "ğŸ“‹ Distribution Method",
          wallet_distribution:
            "Distributed manually according to wallet address saved in personal center",
          valid_wallet_required:
            "Winners must ensure wallet address is correct and valid",
          next_day_distribution:
            "Rewards will be distributed the day after settlement",
          invalid_wallet_rollover:
            "If wallet address is invalid, rewards will be rolled over to next month",

          // æ’è¡Œæ¦œè§„åˆ™
          leaderboard_rules: "ğŸ“Š Leaderboard Rules",
          ranking_condition:
            "Ranking condition: Complete 60 games to be listed",
          ranking_basis: "Ranking basis: Sorted by cumulative points",
          data_statistics:
            "Data statistics: Based on historical cumulative data",
          realtime_update:
            "Real-time update: Updated immediately after each game",

          // æ¸©é¦¨æç¤º
          warm_tips:
            "ğŸ‹ Inherit thousand-year wisdom, experience classical chess beauty\nğŸ’¡ Manage time wisely, enjoy thinking pleasure",

          // æ¸¸æˆç»“æœç›¸å…³
          game_result: "Game Result",
          congratulations_win: "ğŸ‰ Congratulations! You Win!",
          sorry_lose: "ğŸ˜” Sorry, You Lost",
          draw_result: "ğŸ¤ Draw",
          current_score: "Current Score",
          win_rate_display: "Win Rate",
          total_games_display: "Total Games",
          current_rank_display: "Current Rank",
          not_ranked: "Not Ranked",
          guest_mode: "Guest Mode",
          guest_mode_desc:
            "You are currently playing as a guest, game results will not be recorded in leaderboard.",
          login_benefits: "After login, enjoy:",
          benefit_stats: "â€¢ ğŸ“Š Game data statistics",
          benefit_leaderboard: "â€¢ ğŸ† Participate in leaderboard competition",
          benefit_pi_service: "â€¢ ğŸ’° Pi coin value-added services",
          benefit_monthly_rewards: "â€¢ ğŸ Monthly reward activities",
          play_again: "Play Again",
          view_leaderboard: "View Leaderboard",
          login_now: "Login Now",

          // æ¸¸æˆç•Œé¢
          return_to_menu: "Return",
          guest_mode_short: "ğŸ® Guest Mode",
          ai_battle_title: "ğŸ§  AI Battle",
          player_label: "Player",
          ai_label: "AI",
          vs_label: "VS",
          undo_button: "Undo",
          new_game_button: "New Game",

          // æ‚”æ£‹ç›¸å…³
          undo_confirm: "Undo Confirmation",
          undo_confirm_message:
            "Undo requires 0.1 Ï€\nCurrent balance: {0} Ï€\n\nConfirm undo?",
          undo_success_title: "Undo Successful",
          undo_success_detail: "Consumed 0.1 Ï€, balance: {0} Ï€",
          undo_failed_title: "Undo Failed",
          undo_failed_message: "Payment failed",
          insufficient_balance_undo:
            "Undo requires 0.1 Ï€, current balance {0} Ï€, insufficient balance.\n\nWould you like to recharge?",
          continue_game_tip:
            "You can continue the current game, but cannot restart. Unlock this feature after recharging.",

          // å……å€¼ç›¸å…³
          recharge_dialog_title: "ğŸ’° Account Recharge",
          payment_dialog_title: "ğŸ’³ Pi Coin Payment",
          recharge_amount_display: "Recharge {0} Ï€",
          order_id_display: "Order ID: {0}",
          custom_amount_error:
            "Please enter a valid recharge amount (minimum 0.1Ï€)",

          // ä¸ªäººä¸­å¿ƒè¯¦ç»†å†…å®¹
          monthly_reward_reminder: "ğŸ† Monthly Reward Reminder",
          monthly_reward_desc:
            "50% of monthly profits will be distributed to the top three players as rewards",

          // æœˆåº¦å¥–åŠ±è¯¦ç»†è¯´æ˜
          reward_settlement_detail:
            "Settlement on the last hour of the last day of each month",
          reward_pool_50_percent:
            "Reward pool is 50% of platform's monthly profit",
          reward_example_detail:
            "Example: Monthly profit 100Ï€, reward pool 50Ï€",
          reward_distribution_manual:
            "Distributed manually according to wallet address saved in personal center",
          reward_wallet_valid:
            "Winners must ensure wallet address is correct and valid",
          reward_next_day:
            "Rewards will be distributed the day after settlement",
          reward_invalid_rollover:
            "If wallet address is invalid, rewards will be rolled over to next month",
          reward_example_calculation:
            "ğŸ’¡ Example: Monthly profit 100Ï€, reward pool 50Ï€",
          first_place_reward: "ğŸ¥‡First place: 25Ï€",
          second_place_reward: "ğŸ¥ˆSecond place: 15Ï€",
          third_place_reward: "ğŸ¥‰Third place: 10Ï€",

          // å…¨çƒæ’è¡Œæ¦œ
          global_ranking_title: "Global Ranking",
          ranking_subtitle: "ğŸ“Š Ranking based on monthly win rate",
          ranking_header_rank: "Rank",
          ranking_header_nickname: "Nickname",
          ranking_header_games: "Total Games",
          ranking_header_winrate: "Win Rate",

          // ä¸ªäººä¸­å¿ƒè¯¦ç»†æ ‡ç­¾
          personal_profile_section: "Personal Profile",
          avatar_nickname_section: "Avatar and Nickname",
          click_avatar_edit: "Click avatar to edit",
          click_nickname_edit: "Click nickname to edit",
          account_info_section: "Account Information",
          game_stats_section: "Game Statistics",
          wallet_address_label: "Wallet Address",
          account_balance_display: "Account Balance",
          refresh_balance_btn: "Refresh Balance",
          logout_btn: "Logout",

          // æ¸¸æˆç»Ÿè®¡æ ‡ç­¾
          total_games_label: "Total Games",
          wins_label: "Wins",
          win_rate_label: "Win Rate",
          current_score_label: "Current Score",
          current_rank_label: "Current Rank",

          // ä½™é¢æŸ¥è¯¢çŠ¶æ€
          balance_querying: "Querying...",
          balance_query_failed_display: "Query Failed",
          balance_tooltip: "Total Recharged: {0} Ï€\nTotal Spent: {1} Ï€",

          // æ”¯ä»˜æˆåŠŸä¿¡æ¯
          payment_success_title: "Payment Successful",
          payment_success_message: "Payment Successful!",
          purchase_success_message: "You have successfully purchased {0}",
          transaction_id: "Transaction ID: {0}",

          // ä¸ªäººä¸­å¿ƒè¾“å…¥æç¤º
          enter_avatar_emoji: "Enter emoji avatar (e.g.: ğŸ˜Š)",
          click_to_set_nickname: "Click to set nickname",
          enter_your_nickname: "Enter your nickname",
          loading_text_display: "Loading...",
          refresh_balance_text: "ğŸ”„ Refresh Balance",
          recharge_text: "ğŸ’° Recharge",
          wallet_format_hint:
            "Wallet address format: 50 uppercase letters and numbers",
          save_wallet: "ğŸ’¾ Save",
          edit_wallet: "âœï¸ Edit",
          logout_account_text: "â†©ï¸ Logout",

          // ä¸ªäººä¸­å¿ƒæç¤ºä¿¡æ¯
          enter_avatar_hint: "Please enter avatar emoji",
          single_emoji_hint: "Please enter a single emoji",
          avatar_updated: "Avatar updated!",
          nickname_updated: "Nickname updated!",
          enter_wallet_hint: "Please enter wallet address",
          wallet_length_error:
            "âŒ This is not a standard wallet address!\n\nCurrent length: {0} characters\nStandard length: 50 characters\n\nPlease enter a complete 50-character wallet address",
          wallet_format_error:
            "âŒ Wallet address format error!\n\nOnly uppercase letters (A-Z) and numbers (0-9) are allowed\nPlease check your input",
          wallet_saved_success: "âœ… Wallet address saved successfully!",
          edit_mode_title: "Edit Mode",
          edit_mode_message:
            "ğŸ’¡ Edit mode enabled\n\nPlease modify the wallet address and click save",
          success_title: "Success",
          error_title: "Error",

          // æ¸¸æˆç»“æŸç›¸å…³
          you_win: "ğŸ‰ Congratulations! You win!",
          you_lose: "ğŸ˜” AI wins, keep trying!",
          draw: "ğŸ¤ Draw!",
          game_over: "Game Over",

          // ä¸»ç•Œé¢æŒ‰é’®
          global_ranking: "Global Ranking",
          ai_battle: "AI Battle",
          personal_center: "Personal Center",
          game_instructions: "Game Instructions",

          // è¿æ¥é”™è¯¯
          connection_failed: "Connection Failed",
          connection_error_detail:
            "Unable to connect to Pi Network, please check your network connection and try again",
          login_with_pi: "Login with Pi Account",
          login_benefits_note:
            "Login to enjoy full game features and Pi coin rewards",

          // å……å€¼å¯¹è¯æ¡†
          recharge_amount_selection: "Recharge Amount Selection",
          custom_amount_placeholder: "Custom Amount",
          custom_recharge: "Custom Recharge",
          cancel: "Cancel",

          // é”™è¯¯æç¤º
          please_login_first: "Please login first",
          create_order_failed: "Failed to create order",
          network_error_retry: "Network error, please try again later",

          // æ”¯ä»˜å¯¹è¯æ¡†
          payment_method: "Payment Method",
          pi_wallet_transfer: "ğŸ“± Pi Wallet Transfer",
          transfer_instruction:
            "Please use Pi wallet to transfer to the following address:",
          transfer_amount_warning:
            "âš ï¸ Please ensure the transfer amount is <strong>{0} Ï€</strong>",
          transfer_memo: "Transfer memo: {0}",
          transaction_hash_placeholder: "Please enter transaction hash",
          transaction_hash_instruction:
            "After transfer completion, please copy the transaction hash from Pi wallet and paste it in the input box above",
          verify_payment: "Verify Payment",
          order_validity: "Order validity: 30 minutes",

          // æ”¯ä»˜éªŒè¯
          please_enter_transaction_hash: "Please enter transaction hash",
          recharge_success: "Recharge Successful",
          recharge_success_message:
            "Congratulations! Recharge {0} Ï€ successful!\nCurrent balance: {1} Ï€",
          verification_failed: "Verification Failed",

          // æ¸¸æˆæµç¨‹ç¡®è®¤
          timeout_game_over: "â° Thinking timeout, game failed!",
          login_success: "Login Successful",
          welcome_user: "Welcome, {0}",
          abandon_current_game: "Abandon Current Game",
          abandon_game_warning:
            "Current game is in progress, restarting will be recorded as a loss.\n\nAre you sure you want to abandon the current game?",
          restart_game: "Restart Game",
          restart_game_confirm: "Are you sure you want to restart?",
          abandon_game_return_warning:
            "Current game is in progress, returning to main menu will be recorded as a loss.\n\nAre you sure you want to abandon the current game?",

          // èƒœè´Ÿæ˜¾ç¤ºæ ¼å¼
          wins_losses_format: "({0}W {1}L)",
          monthly_games: "Monthly Games",
          play_again: "Play Again",
          view_leaderboard: "View Leaderboard",
          login_now: "Login Now",
          guest_mode: "Guest Mode",
          guest_mode_desc:
            "You are currently playing as a guest, game results will not be recorded on the leaderboard.",
          login_benefits: "Benefits after login:",
          benefit_stats: "â€¢ ğŸ“Š Game statistics",
          benefit_leaderboard: "â€¢ ğŸ† Participate in leaderboard competition",
          benefit_pi_service: "â€¢ ğŸ’° Pi coin value-added services",
          benefit_monthly_rewards: "â€¢ ğŸ Monthly reward activities",
          rank_position: "#{0}",
        },

        ko: {
          // ê¸°ë³¸ ì¸í„°í˜ì´ìŠ¤
          noscript:
            "ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ë ¤ë©´ JavaScriptë¥¼ í™œì„±í™”í•´ì•¼ í•©ë‹ˆë‹¤.",
          game_title: "ì˜¤ëª©",
          game_subtitle: "pinetwork ë¸”ë¡ì²´ì¸ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì˜¤ëª© ê²Œì„",
          global_ranking: "ê¸€ë¡œë²Œ ìˆœìœ„",
          ai_battle: "AI ëŒ€ì „",
          personal_center: "ê°œì¸ ì„¼í„°",
          game_instructions: "ê²Œì„ ì„¤ëª…",
          error_message: "âŒ ì˜¤ë¥˜ ë©”ì‹œì§€",
          login_with_pi: "Pi Networkë¡œ ë¡œê·¸ì¸",
          login_note:
            "ë¡œê·¸ì¸ì„ í´ë¦­í•˜ë©´ Pi Network ê³„ì •ì„ ì‚¬ìš©í•œ ì¸ì¦ì— ë™ì˜í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤",

          // ì–¸ì–´ ì˜µì…˜
          lang_zh: "ä¸­æ–‡",
          lang_en: "English",
          lang_ko: "í•œêµ­ì–´",
          lang_ja: "æ—¥æœ¬èª",
          lang_vi: "Tiáº¿ng Viá»‡t",

          // ê²Œì„ ê´€ë ¨
          current_player: "í˜„ì¬ í”Œë ˆì´ì–´",
          your_turn: "ë‹¹ì‹ ì˜ ì°¨ë¡€",
          opponent_turn: "ìƒëŒ€ë°©ì˜ ì°¨ë¡€",
          ai_thinking: "ğŸ¤– AIê°€ ìƒê° ì¤‘...",
          thinking_time: "â±ï¸ ìƒê° ì‹œê°„: {0}ì´ˆ",
          remaining_time: "âš ï¸ ë‚¨ì€ ì‹œê°„: {0}ì´ˆ",
          timeout_warning: "ğŸš¨ ì‹œê°„ ì´ˆê³¼ ê²½ê³ : {0}ì´ˆ",
          timeout: "â° ì‹œê°„ ì´ˆê³¼",

          // ê²Œì„ ê²°ê³¼
          you_win: "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ìŠ¹ë¦¬!",
          you_lose: "ğŸ˜” ì£„ì†¡í•©ë‹ˆë‹¤, íŒ¨ë°°",
          draw: "ğŸ¤ ë¬´ìŠ¹ë¶€",
          game_over: "ê²Œì„ ì¢…ë£Œ",

          // ë²„íŠ¼ ë° ì‘ì—…
          new_game: "ìƒˆ ê²Œì„",
          undo: "ë¬´ë¥´ê¸°",
          restart: "ë‹¤ì‹œ ì‹œì‘",
          back_to_menu: "ë©”ë‰´ë¡œ ëŒì•„ê°€ê¸°",
          confirm: "í™•ì¸",
          cancel: "ì·¨ì†Œ",
          close: "ë‹«ê¸°",
          save: "ì €ì¥",
          update: "ì—…ë°ì´íŠ¸",
          enter_game: "ê²Œì„ ì‹œì‘",

          // ê°œì¸ ì„¼í„°
          personal_info: "ê°œì¸ ì •ë³´",
          game_stats: "ê²Œì„ í†µê³„",
          total_games: "ì´ ê²Œì„ ìˆ˜",
          wins: "ìŠ¹ë¦¬",
          losses: "íŒ¨ë°°",
          win_rate: "ìŠ¹ë¥ ",
          current_rank: "í˜„ì¬ ìˆœìœ„",
          wallet_address: "ì§€ê°‘ ì£¼ì†Œ",
          balance: "ì”ì•¡",
          nickname: "ë‹‰ë„¤ì„",
          avatar: "ì•„ë°”íƒ€",

          // ì˜¤ë¥˜ ë° ì•Œë¦¼
          connection_failed: "ì—°ê²° ì‹¤íŒ¨",
          network_error: "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜, ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”",
          login_failed: "ë¡œê·¸ì¸ ì‹¤íŒ¨",
          insufficient_balance: "ì”ì•¡ ë¶€ì¡±",
          invalid_move: "ìœ íš¨í•˜ì§€ ì•Šì€ ìˆ˜",
          game_not_started: "ê²Œì„ì´ ì‹œì‘ë˜ì§€ ì•ŠìŒ",

          // ê²°ì œ ê´€ë ¨
          payment_confirm: "ê²°ì œ í™•ì¸",
          payment_success: "ê²°ì œ ì„±ê³µ",
          payment_failed: "ê²°ì œ ì‹¤íŒ¨",
          payment_cancelled: "ê²°ì œ ì·¨ì†Œë¨",
          recharge: "ì¶©ì „",

          // ìˆœìœ„í‘œ
          leaderboard: "ìˆœìœ„í‘œ",
          rank: "ìˆœìœ„",
          player: "í”Œë ˆì´ì–´",
          score: "ì ìˆ˜",
          games_played: "í”Œë ˆì´í•œ ê²Œì„",

          // ê¸°íƒ€
          loading: "ë¡œë”© ì¤‘...",
          connecting: "ì—°ê²° ì¤‘...",
          please_wait: "ì ì‹œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”...",
          success: "ì„±ê³µ",
          failed: "ì‹¤íŒ¨",
          connecting_pi_network: "Pi Network ì—°ê²° ì¤‘...",
          entering_game: "ê²Œì„ ì§„ì… ì¤‘...",

          // íŒì—… ë° ì•Œë¦¼
          hint: "íŒíŠ¸",
          confirm_purchase: "êµ¬ë§¤ í™•ì¸",
          confirm_payment: "ê²°ì œ í™•ì¸",
          payment_amount: "{0} Ï€",
          enter_nickname: "ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”",
          nickname_too_long: "ë‹‰ë„¤ì„ì€ 20ìë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
          nickname_forbidden:
            "ë‹‰ë„¤ì„ì— ê¸ˆì§€ëœ ë‹¨ì–´ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”",
          logout_confirm: "ë¡œê·¸ì•„ì›ƒ í™•ì¸",
          logout_message:
            "ì •ë§ ë¡œê·¸ì•„ì›ƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ëª¨ë“  ë¡œì»¬ ì €ì¥ ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤.",
          logout_success: "ë¡œê·¸ì•„ì›ƒ ì„±ê³µ",
          logout_success_message: "ì„±ê³µì ìœ¼ë¡œ ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤!",
          please_login_first: "ë¨¼ì € ë¡œê·¸ì¸í•˜ì„¸ìš”",

          // ê²Œì„ ì„¤ëª…
          game_instructions_title: "ê²Œì„ ì„¤ëª…",
          game_history_title: "ì˜¤ëª© ì—­ì‚¬",
          game_history_desc:
            'ì „ì„¤ì— ë”°ë¥´ë©´ ì˜¤ëª©ì€ 4000ì—¬ ë…„ ì „ ìš” í™©ì œ ì‹œëŒ€ì— íƒ„ìƒí–ˆìŠµë‹ˆë‹¤. ìš” í™©ì œê°€ ì•„ë“¤ ë‹¨ì£¼ë¥¼ êµìœ¡í•˜ê¸° ìœ„í•´ ëŒë°”ë‘‘ì„ ë°œëª…í–ˆê³ , í›„ì— ìˆœ í™©ì œê°€ "ì˜¤ì„±ì—°ì£¼" ë†€ì´ë¡œ ê°œëŸ‰í•˜ì—¬ ì ì°¨ í˜„ëŒ€ ì˜¤ëª©ì˜ ì›í˜•ì„ í˜•ì„±í–ˆìŠµë‹ˆë‹¤.\nìš”ìˆœ ì‹œëŒ€ì˜ ë¯¼ì† ê²Œì„ì—ì„œ ë‚¨ë¶ì¡° ì‹œëŒ€ ë™ì•„ì‹œì•„ë¡œ ì „íŒŒë˜ê³ , ì¼ë³¸ì—ì„œ ê²½ê¸° ìŠ¤í¬ì¸ ë¡œ ê°œëŸ‰ë˜ì–´ ìµœì¢…ì ìœ¼ë¡œ ì„¸ê³„ì ì¸ ë°”ë‘‘ í”„ë¡œì íŠ¸ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.',

          // ê²Œì„ ì„¤ëª… ìƒì„¸ ë‚´ìš©
          game_history_section: "ì˜¤ëª© ì—­ì‚¬ ìœ ë˜",
          game_rules_section: "ê²Œì„ ê·œì¹™",
          game_rules_title: "ğŸ¯ ê¸°ë³¸ ê·œì¹™",

          // ê°œì¸ ì„¼í„°
          personal_center_title: "ê°œì¸ ì„¼í„°",
          wallet_address_placeholder: "50ì ì§€ê°‘ ì£¼ì†Œ ì…ë ¥ (ëŒ€ë¬¸ìì™€ ìˆ«ì)",
          wallet_address_format: "ì§€ê°‘ ì£¼ì†Œ í˜•ì‹: 50ì ëŒ€ë¬¸ìì™€ ìˆ«ì",

          // ê²°ì œ ê´€ë ¨
          insufficient_balance_title: "ì”ì•¡ ë¶€ì¡±",
          insufficient_balance_message:
            "ë¬´ë¥´ê¸°ì—ëŠ” 0.1 Ï€ê°€ í•„ìš”í•˜ë©°, í˜„ì¬ ì”ì•¡ {0} Ï€, ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.\n\nì¶©ì „í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
          recharge_prompt:
            "ê²Œì„ ê³„ì •ì— Pi ì½”ì¸ì„ ì¶©ì „í•˜ê³  ë” ë§ì€ ê²Œì„ ê¸°ëŠ¥ì„ ì¦ê¸°ì„¸ìš”!",
          continue_without_recharge:
            "í˜„ì¬ ê²Œì„ì„ ê³„ì†í•  ìˆ˜ ìˆì§€ë§Œ ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì¶©ì „ í›„ ì´ ê¸°ëŠ¥ì„ ì ê¸ˆ í•´ì œí•˜ì„¸ìš”.",
          undo_success: "ë¬´ë¥´ê¸° ì„±ê³µ",
          undo_success_message: "0.1 Ï€ ì†Œëª¨, ì”ì•¡: {0} Ï€",
          undo_failed: "ë¬´ë¥´ê¸° ì‹¤íŒ¨",
          network_error_retry: "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜, ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”",
          invalid_amount: "ìœ íš¨í•œ ì¶©ì „ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš” (ìµœì†Œ 0.1Ï€)",

          // ì•„ì´í…œ ì´ë¦„
          item_hint: "íŒíŠ¸ ì•„ì´í…œ",
          item_undo: "ë¬´ë¥´ê¸° í‹°ì¼“",
          item_theme: "í…Œë§ˆ íŒ©",
          item_vip: "VIP ë©¤ë²„ì‹­",
          item_unknown: "ì•Œ ìˆ˜ ì—†ëŠ” ì•„ì´í…œ",

          // ìˆœìœ„í‘œ ë° í†µê³„
          current_ranking: "ğŸ¯ í˜„ì¬ ìˆœìœ„: #{0} | ({1}ìŠ¹{2}íŒ¨) | ìŠ¹ë¥ : {3}%",
          leaderboard_update_tip:
            "ìˆœìœ„í‘œê°€ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤. ê³„ì† ê²Œì„í•˜ì—¬ ìˆœìœ„ë¥¼ ì˜¬ë¦¬ì„¸ìš”!",

          // ìŠ¹ë¥  ìˆœìœ„ ì‹œìŠ¤í…œ
          score_system: "ğŸ† ìŠ¹ë¥  ìˆœìœ„ ì‹œìŠ¤í…œ",
          initial_score: "ìˆœìœ„ ê¸°ì¤€: ìŠ¹ë¥  ìˆœìœ¼ë¡œ ì •ë ¬",
          win_score: "ìŠ¹ë¦¬: ìŠ¹ë¥  í–¥ìƒ",
          draw_score: "ë¬´ìŠ¹ë¶€: ìŠ¹ë¥ ì— ì˜í–¥",
          lose_score: "íŒ¨ë°°: ìŠ¹ë¥  ê°ì†Œ",
          quit_score: "í¬ê¸°/íƒ€ì„ì•„ì›ƒ: íŒ¨ë°°ë¡œ ê¸°ë¡",

          // ì›”ê°„ ìˆœìœ„ ê·œì¹™
          monthly_ranking_rules: "ğŸ¯ ì›”ê°„ ìˆœìœ„ ê·œì¹™:",
          ranking_requirement: "â€¢ ìˆœìœ„ ì°¸ì—¬ì—ëŠ” ìµœì†Œ 1ê²Œì„ í•„ìš”",
          ranking_criteria: "â€¢ ìŠ¹ë¥  ìˆœìœ¼ë¡œ ìˆœìœ„ ê²°ì •, ë™ë¥  ì‹œ ìŠ¹ìˆ˜ë¡œ ì •ë ¬",

          // ê²Œì„ ì„¤ëª… ìƒì„¸ ê·œì¹™
          basic_rules_detail_1:
            "15Ã—15 ë°”ë‘‘íŒì—ì„œ í”Œë ˆì´ì–´ëŠ” í‘ëŒ, AIëŠ” ë°±ëŒì„ ì‚¬ìš©í•©ë‹ˆë‹¤",
          basic_rules_detail_2:
            "ì–‘ì¸¡ì´ ë²ˆê°ˆì•„ ëŒì„ ë†“ìœ¼ë©°, ë¨¼ì € 5ê°œë¥¼ ì—°ê²°í•˜ëŠ” ìª½ì´ ìŠ¹ë¦¬í•©ë‹ˆë‹¤",
          basic_rules_detail_3:
            "5ê°œ ëŒì€ ê°€ë¡œ, ì„¸ë¡œ, ëŒ€ê°ì„  ì–´ëŠ ë°©í–¥ì´ë“  ì—°ê²° ê°€ëŠ¥í•©ë‹ˆë‹¤",
          basic_rules_detail_4:
            "ë°”ë‘‘íŒì´ ê°€ë“ ì°¨ë„ ìŠ¹ë¶€ê°€ ë‚˜ì§€ ì•Šìœ¼ë©´ ë¬´ìŠ¹ë¶€ì…ë‹ˆë‹¤",

          // í„´ ì‹œê°„ ê·œì¹™
          turn_time_rules: "â±ï¸ í„´ ì‹œê°„ ê·œì¹™",
          thinking_time_rule: "ì‚¬ê³  ì‹œê°„: í„´ë‹¹ 60ì´ˆ ì‚¬ê³  ì‹œê°„",
          time_warning_rule: "ì‹œê°„ ì•Œë¦¼: 30ì´ˆ ë‚¨ìœ¼ë©´ ë…¸ë€ìƒ‰ ê²½ê³ ",
          urgent_warning_rule: "ê¸´ê¸‰ ì•Œë¦¼: ë§ˆì§€ë§‰ 10ì´ˆì— ë¹¨ê°„ìƒ‰ ê¹œë¹¡ì„",
          timeout_rule: "ì‹œê°„ ì´ˆê³¼ íŒ¨ë°°: ì‹œê°„ ì´ˆê³¼ ì‹œ ìë™ìœ¼ë¡œ íŒ¨ë°° ê¸°ë¡",

          // ê²Œì„ ì¡°ì‘ ìƒì„¸
          game_operations: "ğŸ® ê²Œì„ ì¡°ì‘",
          place_stone: "ëŒ ë†“ê¸°: ë¹ˆ ì¹¸ì„ í´ë¦­í•˜ì—¬ ëŒ ë†“ê¸°",
          undo_move:
            "ë¬´ë¥´ê¸°: ìµœê·¼ í•œ ìˆ˜ë¥¼ ì·¨ì†Œí•  ìˆ˜ ìˆìŒ (í”Œë ˆì´ì–´+AI ê°ê° í•œ ìˆ˜)",
          new_game_op: "ìƒˆ ê²Œì„: ë‹¤ì‹œ ì‹œì‘, ì§„í–‰ ì¤‘ì¸ ê²Œì„ì€ íŒ¨ë°°ë¡œ ê¸°ë¡",
          return_op: "ëŒì•„ê°€ê¸°: ê²Œì„ ì¢…ë£Œ, ì§„í–‰ ì¤‘ì¸ ê²Œì„ì€ íŒ¨ë°°ë¡œ ê¸°ë¡",

          // ì ìˆ˜ ì‹œìŠ¤í…œ
          score_system: "ğŸ† 100ì  ìƒëª…ë ¥ ì‹œìŠ¤í…œ",
          initial_score: "ì´ˆê¸° ì ìˆ˜: 100ì ",
          win_score: "ìŠ¹ë¦¬: +1ì ",
          draw_score: "ë¬´ìŠ¹ë¶€: ë³€í™” ì—†ìŒ",
          lose_score: "íŒ¨ë°°: -1ì  (0ì ê¹Œì§€ ì°¨ê°)",
          quit_score: "í¬ê¸°/ì‹œê°„ ì´ˆê³¼: -1ì ",

          // ì›”ê°„ ìˆœìœ„ ê·œì¹™
          monthly_ranking_rules: "ğŸ¯ ì›”ê°„ ìˆœìœ„ ê·œì¹™:",
          ranking_requirement: "â€¢ ìˆœìœ„ ì°¸ì—¬ë¥¼ ìœ„í•´ ìµœì†Œ 60ê²Œì„ í•„ìš”",
          ranking_criteria: "â€¢ ë‚¨ì€ ì ìˆ˜ ìˆœìœ¼ë¡œ ìˆœìœ„ ê²°ì •, ë™ì  ì‹œ ìŠ¹ë¥ ë¡œ ì •ë ¬",
          ranking_rewards: "â€¢ ì›”ë§ ìˆœìœ„ì— ë”°ë¼ ë³´ìƒ ì§€ê¸‰",
          anti_farming:
            "âš ï¸ ì ìˆ˜ ì¡°ì‘ ë°©ì§€: ê²Œì„ì„ í•˜ì§€ ì•Šê±°ë‚˜ ë„ˆë¬´ ì ê²Œ í•œ í”Œë ˆì´ì–´ëŠ” ìˆœìœ„ì—ì„œ ì œì™¸",

          // ì›”ê°„ ë³´ìƒ ê·œì¹™
          monthly_rewards: "ğŸ† ì›”ê°„ ë³´ìƒ ê·œì¹™",
          reward_pool_allocation: "ğŸ’° ë³´ìƒ í’€ ë°°ë¶„",
          reward_settlement: "ë§¤ì›” ë§ˆì§€ë§‰ ë‚  ë§ˆì§€ë§‰ ì‹œê°„ì— ì •ì‚°",
          reward_pool_percentage: "ë³´ìƒ í’€ì€ í”Œë«í¼ ì›”ê°„ ìˆ˜ìµì˜ 50%",
          reward_example: "ì˜ˆ: ì›”ê°„ ìˆ˜ìµ 100Ï€, ë³´ìƒ í’€ 50Ï€",

          // ìƒìœ„ 3ëª… ë°°ë¶„
          top_three_distribution: "ğŸ¥‡ ìƒìœ„ 3ëª… ë°°ë¶„ ë¹„ìœ¨",
          first_place: "ğŸ¥‡ 1ë“±",
          second_place: "ğŸ¥ˆ 2ë“±",
          third_place: "ğŸ¥‰ 3ë“±",

          // ì§€ê¸‰ ë°©ì‹
          distribution_method: "ğŸ“‹ ì§€ê¸‰ ë°©ì‹",
          wallet_distribution: "ê°œì¸ ì„¼í„°ì— ì €ì¥ëœ ì§€ê°‘ ì£¼ì†Œë¡œ ìˆ˜ë™ ì§€ê¸‰",
          valid_wallet_required:
            "ìˆ˜ìƒìëŠ” ì§€ê°‘ ì£¼ì†Œê°€ ì •í™•í•˜ê³  ìœ íš¨í•œì§€ í™•ì¸í•´ì•¼ í•¨",
          next_day_distribution: "ë³´ìƒì€ ì •ì‚° ë‹¤ìŒ ë‚  ì§€ê¸‰ë©ë‹ˆë‹¤",
          invalid_wallet_rollover:
            "ì§€ê°‘ ì£¼ì†Œê°€ ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ ë³´ìƒì€ ë‹¤ìŒ ë‹¬ë¡œ ì´ì›”ë©ë‹ˆë‹¤",

          // ìˆœìœ„í‘œ ê·œì¹™
          leaderboard_rules: "ğŸ“Š ìˆœìœ„í‘œ ê·œì¹™",
          ranking_condition: "ìˆœìœ„ ì¡°ê±´: 60ê²Œì„ ì™„ë£Œ ì‹œ ìˆœìœ„í‘œ ë“±ì¬",
          ranking_basis: "ìˆœìœ„ ê¸°ì¤€: ëˆ„ì  ì ìˆ˜ ìˆœìœ¼ë¡œ ì •ë ¬",
          data_statistics: "ë°ì´í„° í†µê³„: ì—­ì‚¬ì  ëˆ„ì  ë°ì´í„° ê¸°ë°˜",
          realtime_update: "ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸: ê° ê²Œì„ ì¢…ë£Œ í›„ ì¦‰ì‹œ ì—…ë°ì´íŠ¸",

          // ë”°ëœ»í•œ íŒ
          warm_tips:
            "ğŸ‹ ì²œë…„ì˜ ì§€í˜œë¥¼ ê³„ìŠ¹í•˜ê³ , ê³ ì „ ë°”ë‘‘ì˜ ì•„ë¦„ë‹¤ì›€ì„ ê²½í—˜í•˜ì„¸ìš”\nğŸ’¡ ì‹œê°„ì„ í•©ë¦¬ì ìœ¼ë¡œ ë°°ë¶„í•˜ê³ , ì‚¬ê³ ì˜ ì¦ê±°ì›€ì„ ë§Œë½í•˜ì„¸ìš”",

          // ê²Œì„ ê²°ê³¼ ê´€ë ¨
          game_result: "ê²Œì„ ê²°ê³¼",
          congratulations_win: "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ìŠ¹ë¦¬!",
          sorry_lose: "ğŸ˜” ì£„ì†¡í•©ë‹ˆë‹¤, íŒ¨ë°°í–ˆìŠµë‹ˆë‹¤",
          draw_result: "ğŸ¤ ë¬´ìŠ¹ë¶€",
          current_score: "í˜„ì¬ ì ìˆ˜",
          win_rate_display: "ìŠ¹ë¥ ",
          total_games_display: "ì´ ê²Œì„ ìˆ˜",
          current_rank_display: "í˜„ì¬ ìˆœìœ„",
          not_ranked: "ìˆœìœ„ ì—†ìŒ",
          guest_mode: "ê²ŒìŠ¤íŠ¸ ëª¨ë“œ",
          guest_mode_desc:
            "í˜„ì¬ ê²ŒìŠ¤íŠ¸ë¡œ ê²Œì„ ì¤‘ì´ë©°, ê²Œì„ ê²°ê³¼ëŠ” ìˆœìœ„í‘œì— ê¸°ë¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
          login_benefits: "ë¡œê·¸ì¸ í›„ í˜œíƒ:",
          benefit_stats: "â€¢ ğŸ“Š ê²Œì„ ë°ì´í„° í†µê³„",
          benefit_leaderboard: "â€¢ ğŸ† ìˆœìœ„í‘œ ê²½ìŸ ì°¸ì—¬",
          benefit_pi_service: "â€¢ ğŸ’° Pi ì½”ì¸ ë¶€ê°€ ì„œë¹„ìŠ¤",
          benefit_monthly_rewards: "â€¢ ğŸ ì›”ê°„ ë³´ìƒ í™œë™",
          play_again: "ë‹¤ì‹œ í”Œë ˆì´",
          view_leaderboard: "ìˆœìœ„í‘œ ë³´ê¸°",
          login_now: "ì§€ê¸ˆ ë¡œê·¸ì¸",

          // ê²Œì„ ì¸í„°í˜ì´ìŠ¤
          return_to_menu: "ëŒì•„ê°€ê¸°",
          guest_mode_short: "ğŸ® ê²ŒìŠ¤íŠ¸ ëª¨ë“œ",
          ai_battle_title: "ğŸ§  AI ëŒ€ì „",
          player_label: "í”Œë ˆì´ì–´",
          ai_label: "AI",
          vs_label: "VS",
          undo_button: "ë¬´ë¥´ê¸°",
          new_game_button: "ìƒˆ ê²Œì„",

          // ë¬´ë¥´ê¸° ê´€ë ¨
          undo_confirm: "ë¬´ë¥´ê¸° í™•ì¸",
          undo_confirm_message:
            "ë¬´ë¥´ê¸°ì—ëŠ” 0.1 Ï€ê°€ í•„ìš”í•©ë‹ˆë‹¤\ní˜„ì¬ ì”ì•¡: {0} Ï€\n\në¬´ë¥´ê¸°ë¥¼ í™•ì¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
          undo_success_title: "ë¬´ë¥´ê¸° ì„±ê³µ",
          undo_success_detail: "0.1 Ï€ ì†Œëª¨, ì”ì•¡: {0} Ï€",
          undo_failed_title: "ë¬´ë¥´ê¸° ì‹¤íŒ¨",
          undo_failed_message: "ê²°ì œ ì‹¤íŒ¨",
          insufficient_balance_undo:
            "ë¬´ë¥´ê¸°ì—ëŠ” 0.1 Ï€ê°€ í•„ìš”í•˜ë©°, í˜„ì¬ ì”ì•¡ {0} Ï€, ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤.\n\nì¶©ì „í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
          continue_game_tip:
            "í˜„ì¬ ê²Œì„ì„ ê³„ì†í•  ìˆ˜ ìˆì§€ë§Œ ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì¶©ì „ í›„ ì´ ê¸°ëŠ¥ì„ ì ê¸ˆ í•´ì œí•˜ì„¸ìš”.",

          // ì¶©ì „ ê´€ë ¨
          recharge_dialog_title: "ğŸ’° ê³„ì • ì¶©ì „",
          payment_dialog_title: "ğŸ’³ Pi ì½”ì¸ ê²°ì œ",
          recharge_amount_display: "ì¶©ì „ {0} Ï€",
          order_id_display: "ì£¼ë¬¸ ë²ˆí˜¸: {0}",
          custom_amount_error: "ìœ íš¨í•œ ì¶©ì „ ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš” (ìµœì†Œ 0.1Ï€)",

          // ê°œì¸ ì„¼í„° ìƒì„¸ ë‚´ìš©
          monthly_reward_reminder: "ğŸ† ì›”ê°„ ë³´ìƒ ì•Œë¦¼",
          monthly_reward_desc:
            "ì›”ê°„ ìˆ˜ìµì˜ 50%ê°€ ìƒìœ„ 3ëª… í”Œë ˆì´ì–´ì—ê²Œ ë³´ìƒìœ¼ë¡œ ë°°ë¶„ë©ë‹ˆë‹¤",

          // ì›”ê°„ ë³´ìƒ ìƒì„¸ ì„¤ëª…
          reward_settlement_detail: "ë§¤ì›” ë§ˆì§€ë§‰ ë‚  ë§ˆì§€ë§‰ ì‹œê°„ì— ì •ì‚°",
          reward_pool_50_percent: "ë³´ìƒ í’€ì€ í”Œë«í¼ ì›”ê°„ ìˆ˜ìµì˜ 50%",
          reward_example_detail: "ì˜ˆ: ì›”ê°„ ìˆ˜ìµ 100Ï€, ë³´ìƒ í’€ 50Ï€",
          reward_distribution_manual:
            "ê°œì¸ ì„¼í„°ì— ì €ì¥ëœ ì§€ê°‘ ì£¼ì†Œë¡œ ìˆ˜ë™ ì§€ê¸‰",
          reward_wallet_valid:
            "ìˆ˜ìƒìëŠ” ì§€ê°‘ ì£¼ì†Œê°€ ì •í™•í•˜ê³  ìœ íš¨í•œì§€ í™•ì¸í•´ì•¼ í•¨",
          reward_next_day: "ë³´ìƒì€ ì •ì‚° ë‹¤ìŒ ë‚  ì§€ê¸‰ë©ë‹ˆë‹¤",
          reward_invalid_rollover:
            "ì§€ê°‘ ì£¼ì†Œê°€ ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ ë³´ìƒì€ ë‹¤ìŒ ë‹¬ë¡œ ì´ì›”ë©ë‹ˆë‹¤",
          reward_example_calculation: "ğŸ’¡ ì˜ˆì‹œ: ì›”ê°„ ìˆ˜ìµ 100Ï€, ë³´ìƒ í’€ 50Ï€",
          first_place_reward: "ğŸ¥‡1ë“±: 25Ï€",
          second_place_reward: "ğŸ¥ˆ2ë“±: 15Ï€",
          third_place_reward: "ğŸ¥‰3ë“±: 10Ï€",

          // ì „ì—­ ìˆœìœ„í‘œ
          global_ranking_title: "ê¸€ë¡œë²Œ ìˆœìœ„",
          ranking_subtitle: "ğŸ“Š ì›”ê°„ ìŠ¹ë¥  ê¸°ë°˜ ìˆœìœ„",
          ranking_header_rank: "ìˆœìœ„",
          ranking_header_nickname: "ë‹‰ë„¤ì„",
          ranking_header_games: "ì´ ê²Œì„",
          ranking_header_winrate: "ìŠ¹ë¥ ",
          current_rank_not_listed: "í˜„ì¬ ìˆœìœ„: ë¯¸ë“±ì¬",
          current_rank_label: "í˜„ì¬ ìˆœìœ„",
          not_listed: "ë¯¸ë“±ì¬",
          play_one_game_to_rank:
            "ğŸ® 1ê²Œì„ ì™„ë£Œí•˜ë©´ ìˆœìœ„í‘œì— ë“±ì¬ë©ë‹ˆë‹¤! ì˜¤ëª© ì—¬í–‰ì„ ì‹œì‘í•˜ì„¸ìš”!",

          // ê°œì¸ ì„¼í„° ìƒì„¸ ë¼ë²¨
          personal_profile_section: "ê°œì¸ í”„ë¡œí•„",
          avatar_nickname_section: "ì•„ë°”íƒ€ì™€ ë‹‰ë„¤ì„",
          click_avatar_edit: "ì•„ë°”íƒ€ í´ë¦­í•˜ì—¬ í¸ì§‘",
          click_nickname_edit: "ë‹‰ë„¤ì„ í´ë¦­í•˜ì—¬ í¸ì§‘",
          account_info_section: "ê³„ì • ì •ë³´",
          game_stats_section: "ê²Œì„ í†µê³„",
          wallet_address_label: "ì§€ê°‘ ì£¼ì†Œ",
          account_balance_display: "ê³„ì • ì”ì•¡",
          refresh_balance_btn: "ì”ì•¡ ìƒˆë¡œê³ ì¹¨",
          logout_btn: "ë¡œê·¸ì•„ì›ƒ",

          // ê²Œì„ í†µê³„ ë¼ë²¨
          total_games_label: "ì´ ê²Œì„",
          wins_label: "ìŠ¹ë¦¬",
          win_rate_label: "ìŠ¹ë¥ ",
          current_score_label: "í˜„ì¬ ì ìˆ˜",
          current_rank_label: "í˜„ì¬ ìˆœìœ„",

          // ì”ì•¡ ì¡°íšŒ ìƒíƒœ
          balance_querying: "ì¡°íšŒ ì¤‘...",
          balance_query_failed_display: "ì¡°íšŒ ì‹¤íŒ¨",
          balance_tooltip: "ì´ ì¶©ì „: {0} Ï€\nì´ ì†Œë¹„: {1} Ï€",

          // ê²°ì œ ì„±ê³µ ì •ë³´
          payment_success_title: "ê²°ì œ ì„±ê³µ",
          payment_success_message: "ê²°ì œ ì„±ê³µ!",
          purchase_success_message: "{0}ì„(ë¥¼) ì„±ê³µì ìœ¼ë¡œ êµ¬ë§¤í–ˆìŠµë‹ˆë‹¤",
          transaction_id: "ê±°ë˜ ID: {0}",

          // ê°œì¸ ì„¼í„° ì…ë ¥ íŒíŠ¸
          enter_avatar_emoji: "ì´ëª¨ì§€ ì•„ë°”íƒ€ ì…ë ¥ (ì˜ˆ: ğŸ˜Š)",
          click_to_set_nickname: "ë‹‰ë„¤ì„ ì„¤ì •í•˜ë ¤ë©´ í´ë¦­",
          enter_your_nickname: "ë‹‰ë„¤ì„ì„ ì…ë ¥í•˜ì„¸ìš”",
          loading_text_display: "ë¡œë”© ì¤‘...",
          refresh_balance_text: "ğŸ”„ ì”ì•¡ ìƒˆë¡œê³ ì¹¨",
          recharge_text: "ğŸ’° ì¶©ì „",
          wallet_format_hint: "ì§€ê°‘ ì£¼ì†Œ í˜•ì‹: 50ì ëŒ€ë¬¸ìì™€ ìˆ«ì",
          save_wallet: "ğŸ’¾ ì €ì¥",
          edit_wallet: "âœï¸ í¸ì§‘",
          logout_account_text: "â†©ï¸ ê³„ì • ë¡œê·¸ì•„ì›ƒ",

          // ê°œì¸ ì„¼í„° íŒíŠ¸ ì •ë³´
          enter_avatar_hint: "ì•„ë°”íƒ€ ì´ëª¨ì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”",
          single_emoji_hint: "ë‹¨ì¼ ì´ëª¨ì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”",
          avatar_updated: "ì•„ë°”íƒ€ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤!",
          nickname_updated: "ë‹‰ë„¤ì„ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤!",
          enter_wallet_hint: "ì§€ê°‘ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”",
          wallet_length_error:
            "âŒ í‘œì¤€ ì§€ê°‘ ì£¼ì†Œê°€ ì•„ë‹™ë‹ˆë‹¤!\n\ní˜„ì¬ ê¸¸ì´: {0}ì\ní‘œì¤€ ê¸¸ì´: 50ì\n\nì™„ì „í•œ 50ì ì§€ê°‘ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”",
          wallet_format_error:
            "âŒ ì§€ê°‘ ì£¼ì†Œ í˜•ì‹ ì˜¤ë¥˜!\n\nëŒ€ë¬¸ì(A-Z)ì™€ ìˆ«ì(0-9)ë§Œ í—ˆìš©ë©ë‹ˆë‹¤\nì…ë ¥ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”",
          wallet_saved_success: "âœ… ì§€ê°‘ ì£¼ì†Œê°€ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!",
          edit_mode_title: "í¸ì§‘ ëª¨ë“œ",
          edit_mode_message:
            "ğŸ’¡ í¸ì§‘ ëª¨ë“œê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤\n\nì§€ê°‘ ì£¼ì†Œë¥¼ ìˆ˜ì •í•œ í›„ ì €ì¥ì„ í´ë¦­í•˜ì„¸ìš”",
          success_title: "ì„±ê³µ",
          error_title: "ì˜¤ë¥˜",

          // ê²Œì„ ì¢…ë£Œ ê´€ë ¨
          you_win: "ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ìŠ¹ë¦¬!",
          you_lose: "ğŸ˜” AIê°€ ìŠ¹ë¦¬í–ˆìŠµë‹ˆë‹¤, ë‹¤ì‹œ ë„ì „í•˜ì„¸ìš”!",
          draw: "ğŸ¤ ë¬´ìŠ¹ë¶€!",
          game_over: "ê²Œì„ ì¢…ë£Œ",

          // ë©”ì¸ ì¸í„°í˜ì´ìŠ¤ ë²„íŠ¼
          global_ranking: "ê¸€ë¡œë²Œ ìˆœìœ„",
          ai_battle: "AI ëŒ€ì „",
          personal_center: "ê°œì¸ ì„¼í„°",
          game_instructions: "ê²Œì„ ì„¤ëª…",

          // ì—°ê²° ì˜¤ë¥˜
          connection_failed: "ì—°ê²° ì‹¤íŒ¨",
          connection_error_detail:
            "Pi Networkì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•œ í›„ ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”",
          login_with_pi: "Pi ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸",
          login_benefits_note:
            "ë¡œê·¸ì¸ í›„ ì™„ì „í•œ ê²Œì„ ê¸°ëŠ¥ê³¼ Pi ì½”ì¸ ë³´ìƒì„ ì¦ê¸°ì„¸ìš”",

          // ì¶©ì „ ëŒ€í™”ìƒì
          recharge_amount_selection: "ì¶©ì „ ê¸ˆì•¡ ì„ íƒ",
          custom_amount_placeholder: "ì‚¬ìš©ì ì •ì˜ ê¸ˆì•¡",
          custom_recharge: "ì‚¬ìš©ì ì •ì˜ ì¶©ì „",
          cancel: "ì·¨ì†Œ",

          // ì˜¤ë¥˜ ì•Œë¦¼
          please_login_first: "ë¨¼ì € ë¡œê·¸ì¸í•˜ì„¸ìš”",
          create_order_failed: "ì£¼ë¬¸ ìƒì„± ì‹¤íŒ¨",
          network_error_retry: "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜, ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”",
          pi_login_failed: "Pi Network ë¡œê·¸ì¸ ì‹¤íŒ¨",
          login_error: "ë¡œê·¸ì¸ ì¤‘ ì˜¤ë¥˜ ë°œìƒ",
          pi_sdk_not_loaded:
            "Pi Network SDKê°€ ë¡œë“œë˜ì§€ ì•Šì•„ ê²°ì œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤",
          create_payment_failed: "ê²°ì œ ìƒì„± ì‹¤íŒ¨",

          // ê²°ì œ ëŒ€í™”ìƒì
          payment_method: "ê²°ì œ ë°©ë²•",
          pi_wallet_transfer: "ğŸ“± Pi ì§€ê°‘ ì†¡ê¸ˆ",
          transfer_instruction: "Pi ì§€ê°‘ì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ìŒ ì£¼ì†Œë¡œ ì†¡ê¸ˆí•˜ì„¸ìš”:",
          transfer_amount_warning:
            "âš ï¸ ì†¡ê¸ˆ ê¸ˆì•¡ì´ <strong>{0} Ï€</strong>ì¸ì§€ í™•ì¸í•˜ì„¸ìš”",
          transfer_memo: "ì†¡ê¸ˆ ë©”ëª¨: {0}",
          transaction_hash_placeholder: "ê±°ë˜ í•´ì‹œë¥¼ ì…ë ¥í•˜ì„¸ìš”",
          transaction_hash_instruction:
            "ì†¡ê¸ˆ ì™„ë£Œ í›„ Pi ì§€ê°‘ì—ì„œ ê±°ë˜ í•´ì‹œë¥¼ ë³µì‚¬í•˜ì—¬ ìœ„ ì…ë ¥ë€ì— ë¶™ì—¬ë„£ìœ¼ì„¸ìš”",
          verify_payment: "ê²°ì œ í™•ì¸",
          order_validity: "ì£¼ë¬¸ ìœ íš¨ê¸°ê°„: 30ë¶„",

          // ê²°ì œ í™•ì¸
          please_enter_transaction_hash: "ê±°ë˜ í•´ì‹œë¥¼ ì…ë ¥í•˜ì„¸ìš”",
          recharge_success: "ì¶©ì „ ì„±ê³µ",
          recharge_success_message:
            "ì¶•í•˜í•©ë‹ˆë‹¤! {0} Ï€ ì¶©ì „ ì„±ê³µ!\ní˜„ì¬ ì”ì•¡: {1} Ï€",
          verification_failed: "í™•ì¸ ì‹¤íŒ¨",

          // ê²Œì„ íë¦„ í™•ì¸
          timeout_game_over: "â° ì‚¬ê³  ì‹œê°„ ì´ˆê³¼, ê²Œì„ ì‹¤íŒ¨!",
          login_success: "ë¡œê·¸ì¸ ì„±ê³µ",
          welcome_user: "í™˜ì˜í•©ë‹ˆë‹¤, {0}",
          abandon_current_game: "í˜„ì¬ ê²Œì„ í¬ê¸°",
          abandon_game_warning:
            "í˜„ì¬ ê²Œì„ì´ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤. ë‹¤ì‹œ ì‹œì‘í•˜ë©´ íŒ¨ë°°ë¡œ ê¸°ë¡ë©ë‹ˆë‹¤.\n\ní˜„ì¬ ê²Œì„ì„ í¬ê¸°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
          restart_game: "ê²Œì„ ë‹¤ì‹œ ì‹œì‘",
          restart_game_confirm: "ë‹¤ì‹œ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
          abandon_game_return_warning:
            "í˜„ì¬ ê²Œì„ì´ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤. ë©”ì¸ ë©”ë‰´ë¡œ ëŒì•„ê°€ë©´ íŒ¨ë°°ë¡œ ê¸°ë¡ë©ë‹ˆë‹¤.\n\ní˜„ì¬ ê²Œì„ì„ í¬ê¸°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",

          // ìŠ¹ë¶€ í‘œì‹œ í˜•ì‹
          wins_losses_format: "({0}ìŠ¹{1}íŒ¨)",
          monthly_games: "ì›”ê°„ ê²Œì„",
          play_again: "ë‹¤ì‹œ í”Œë ˆì´",
          view_leaderboard: "ìˆœìœ„í‘œ ë³´ê¸°",
          login_now: "ì§€ê¸ˆ ë¡œê·¸ì¸",
          guest_mode: "ê²ŒìŠ¤íŠ¸ ëª¨ë“œ",
          guest_mode_desc:
            "í˜„ì¬ ê²ŒìŠ¤íŠ¸ë¡œ ê²Œì„ ì¤‘ì´ë©°, ê²Œì„ ê²°ê³¼ëŠ” ìˆœìœ„í‘œì— ê¸°ë¡ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.",
          login_benefits: "ë¡œê·¸ì¸ í›„ í˜œíƒ:",
          benefit_stats: "â€¢ ğŸ“Š ê²Œì„ í†µê³„",
          benefit_leaderboard: "â€¢ ğŸ† ìˆœìœ„í‘œ ê²½ìŸ ì°¸ì—¬",
          benefit_pi_service: "â€¢ ğŸ’° Pi ì½”ì¸ ë¶€ê°€ê°€ì¹˜ ì„œë¹„ìŠ¤",
          benefit_monthly_rewards: "â€¢ ğŸ ì›”ê°„ ë³´ìƒ í™œë™",
          rank_position: "#{0}ìœ„",
        },

        ja: {
          // åŸºæœ¬ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
          noscript:
            "ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯JavaScriptã‚’æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚",
          game_title: "äº”ç›®ä¸¦ã¹",
          game_subtitle: "pinetworkãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³ä¸Šã§å‹•ä½œã™ã‚‹äº”ç›®ä¸¦ã¹ã‚²ãƒ¼ãƒ ",
          global_ranking: "ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ©ãƒ³ã‚­ãƒ³ã‚°",
          ai_battle: "AIå¯¾æˆ¦",
          personal_center: "å€‹äººã‚»ãƒ³ã‚¿ãƒ¼",
          game_instructions: "ã‚²ãƒ¼ãƒ èª¬æ˜",
          error_message: "âŒ ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
          login_with_pi: "Pi Networkã§ãƒ­ã‚°ã‚¤ãƒ³",
          login_note:
            "ãƒ­ã‚°ã‚¤ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€Pi Networkã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ãŸèªè¨¼ã«åŒæ„ã—ãŸã“ã¨ã«ãªã‚Šã¾ã™",

          // è¨€èªã‚ªãƒ—ã‚·ãƒ§ãƒ³
          lang_zh: "ä¸­æ–‡",
          lang_en: "English",
          lang_ko: "í•œêµ­ì–´",
          lang_ja: "æ—¥æœ¬èª",
          lang_vi: "Tiáº¿ng Viá»‡t",

          // ã‚²ãƒ¼ãƒ é–¢é€£
          current_player: "ç¾åœ¨ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼",
          your_turn: "ã‚ãªãŸã®ç•ª",
          opponent_turn: "ç›¸æ‰‹ã®ç•ª",
          ai_thinking: "ğŸ¤– AIãŒè€ƒãˆä¸­...",
          thinking_time: "â±ï¸ æ€è€ƒæ™‚é–“: {0}ç§’",
          remaining_time: "âš ï¸ æ®‹ã‚Šæ™‚é–“: {0}ç§’",
          timeout_warning: "ğŸš¨ ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè­¦å‘Š: {0}ç§’",
          timeout: "â° ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ",

          // ã‚²ãƒ¼ãƒ çµæœ
          you_win: "ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼å‹åˆ©ï¼",
          you_lose: "ğŸ˜” æ®‹å¿µã€æ•—åŒ—",
          draw: "ğŸ¤ å¼•ãåˆ†ã‘",
          game_over: "ã‚²ãƒ¼ãƒ çµ‚äº†",

          // ãƒœã‚¿ãƒ³ã¨æ“ä½œ
          new_game: "æ–°ã—ã„ã‚²ãƒ¼ãƒ ",
          undo: "å¾…ã£ãŸ",
          restart: "å†é–‹",
          back_to_menu: "ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹",
          confirm: "ç¢ºèª",
          cancel: "ã‚­ãƒ£ãƒ³ã‚»ãƒ«",
          close: "é–‰ã˜ã‚‹",
          save: "ä¿å­˜",
          update: "æ›´æ–°",
          enter_game: "ã‚²ãƒ¼ãƒ é–‹å§‹",

          // å€‹äººã‚»ãƒ³ã‚¿ãƒ¼
          personal_info: "å€‹äººæƒ…å ±",
          game_stats: "ã‚²ãƒ¼ãƒ çµ±è¨ˆ",
          total_games: "ç·ã‚²ãƒ¼ãƒ æ•°",
          wins: "å‹åˆ©",
          losses: "æ•—åŒ—",
          win_rate: "å‹ç‡",
          current_rank: "ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯",
          wallet_address: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹",
          balance: "æ®‹é«˜",
          nickname: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ",
          avatar: "ã‚¢ãƒã‚¿ãƒ¼",

          // ã‚¨ãƒ©ãƒ¼ã¨é€šçŸ¥
          connection_failed: "æ¥ç¶šå¤±æ•—",
          network_error: "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã€æ¥ç¶šã‚’ç¢ºèªã—ã¦å†è©¦è¡Œã—ã¦ãã ã•ã„",
          login_failed: "ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—",
          insufficient_balance: "æ®‹é«˜ä¸è¶³",
          invalid_move: "ç„¡åŠ¹ãªæ‰‹",
          game_not_started: "ã‚²ãƒ¼ãƒ ãŒé–‹å§‹ã•ã‚Œã¦ã„ã¾ã›ã‚“",

          // æ”¯æ‰•ã„é–¢é€£
          payment_confirm: "æ”¯æ‰•ã„ç¢ºèª",
          payment_success: "æ”¯æ‰•ã„æˆåŠŸ",
          payment_failed: "æ”¯æ‰•ã„å¤±æ•—",
          payment_cancelled: "æ”¯æ‰•ã„ã‚­ãƒ£ãƒ³ã‚»ãƒ«",
          recharge: "ãƒãƒ£ãƒ¼ã‚¸",

          // ãƒ©ãƒ³ã‚­ãƒ³ã‚°
          leaderboard: "ãƒ©ãƒ³ã‚­ãƒ³ã‚°",
          rank: "ãƒ©ãƒ³ã‚¯",
          player: "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼",
          score: "ã‚¹ã‚³ã‚¢",
          games_played: "ãƒ—ãƒ¬ã‚¤ã—ãŸã‚²ãƒ¼ãƒ ",

          // ãã®ä»–
          loading: "èª­ã¿è¾¼ã¿ä¸­...",
          connecting: "æ¥ç¶šä¸­...",
          please_wait: "ãŠå¾…ã¡ãã ã•ã„...",
          success: "æˆåŠŸ",
          failed: "å¤±æ•—",
          connecting_pi_network: "Pi Networkã«æ¥ç¶šä¸­...",
          entering_game: "ã‚²ãƒ¼ãƒ é–‹å§‹ä¸­...",

          // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã¨é€šçŸ¥
          hint: "ãƒ’ãƒ³ãƒˆ",
          confirm_purchase: "è³¼å…¥ç¢ºèª",
          confirm_payment: "æ”¯æ‰•ã„ç¢ºèª",
          payment_amount: "{0} Ï€",
          enter_nickname: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          nickname_too_long: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã¯20æ–‡å­—ã‚’è¶…ãˆã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“",
          nickname_forbidden:
            "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã«ç¦æ­¢ã•ã‚ŒãŸå˜èªãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚å†å…¥åŠ›ã—ã¦ãã ã•ã„",
          logout_confirm: "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆç¢ºèª",
          logout_message:
            "æœ¬å½“ã«ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿã™ã¹ã¦ã®ãƒ­ãƒ¼ã‚«ãƒ«ä¿å­˜ãƒ‡ãƒ¼ã‚¿ãŒå‰Šé™¤ã•ã‚Œã¾ã™ã€‚",
          logout_success: "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæˆåŠŸ",
          logout_success_message: "æ­£å¸¸ã«ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸï¼",
          please_login_first: "ã¾ãšãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„",

          // ã‚²ãƒ¼ãƒ èª¬æ˜
          game_instructions_title: "ã‚²ãƒ¼ãƒ èª¬æ˜",
          game_history_title: "äº”ç›®ä¸¦ã¹ã®æ­´å²",
          game_history_desc:
            "ä¼èª¬ã«ã‚ˆã‚‹ã¨ã€äº”ç›®ä¸¦ã¹ã¯4000å¹´ä»¥ä¸Šå‰ã®å ¯å¸æ™‚ä»£ã«èª•ç”Ÿã—ã¾ã—ãŸã€‚å ¯å¸ãŒæ¯å­ã®ä¸¹æœ±ã‚’æ•™è‚²ã™ã‚‹ãŸã‚ã«çŸ³å­æ£‹ã‚’ç™ºæ˜ã—ã€å¾Œã«èˆœå¸ãŒã€Œäº”æ˜Ÿé€£ç ã€ã®éŠã³æ–¹ã«æ”¹è‰¯ã—ã¦ã€å¾ã€…ã«ç¾ä»£äº”ç›®ä¸¦ã¹ã®åŸå‹ã‚’å½¢æˆã—ã¾ã—ãŸã€‚\nå ¯èˆœæ™‚ä»£ã®æ°‘ä¿—ã‚²ãƒ¼ãƒ ã‹ã‚‰ã€å—åŒ—æœæ™‚ä»£ã«æ±ã‚¢ã‚¸ã‚¢ã«ä¼æ’­ã—ã€æ—¥æœ¬ã§ç«¶æŠ€ã‚¹ãƒãƒ¼ãƒ„ã«æ”¹è‰¯ã•ã‚Œã€æœ€çµ‚çš„ã«ä¸–ç•Œçš„ãªæ£‹é¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ãªã‚Šã¾ã—ãŸã€‚",

          // ã‚²ãƒ¼ãƒ èª¬æ˜è©³ç´°å†…å®¹
          game_history_section: "äº”ç›®ä¸¦ã¹æ­´å²ã®ç”±æ¥",
          game_rules_section: "ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«",
          game_rules_title: "ğŸ¯ åŸºæœ¬ãƒ«ãƒ¼ãƒ«",

          // å€‹äººã‚»ãƒ³ã‚¿ãƒ¼
          personal_center_title: "å€‹äººã‚»ãƒ³ã‚¿ãƒ¼",
          wallet_address_placeholder:
            "50æ–‡å­—ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ï¼ˆå¤§æ–‡å­—ã¨æ•°å­—ï¼‰",
          wallet_address_format: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ï¼š50æ–‡å­—ã®å¤§æ–‡å­—ã¨æ•°å­—",

          // æ”¯æ‰•ã„é–¢é€£
          insufficient_balance_title: "æ®‹é«˜ä¸è¶³",
          insufficient_balance_message:
            "å¾…ã£ãŸã«ã¯0.1 Ï€ãŒå¿…è¦ã§ã€ç¾åœ¨ã®æ®‹é«˜{0} Ï€ã€æ®‹é«˜ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚\n\nãƒãƒ£ãƒ¼ã‚¸ã—ã¾ã™ã‹ï¼Ÿ",
          recharge_prompt:
            "ã‚²ãƒ¼ãƒ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«Piã‚³ã‚¤ãƒ³ã‚’ãƒãƒ£ãƒ¼ã‚¸ã—ã¦ã€ã‚ˆã‚Šå¤šãã®ã‚²ãƒ¼ãƒ æ©Ÿèƒ½ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„ï¼",
          continue_without_recharge:
            "ç¾åœ¨ã®ã‚²ãƒ¼ãƒ ã‚’ç¶šã‘ã‚‹ã“ã¨ã¯ã§ãã¾ã™ãŒã€å†é–‹ã¯ã§ãã¾ã›ã‚“ã€‚ãƒãƒ£ãƒ¼ã‚¸å¾Œã«ã“ã®æ©Ÿèƒ½ã®ãƒ­ãƒƒã‚¯ã‚’è§£é™¤ã—ã¦ãã ã•ã„ã€‚",
          undo_success: "å¾…ã£ãŸæˆåŠŸ",
          undo_success_message: "0.1 Ï€æ¶ˆè²»ã€æ®‹é«˜ï¼š{0} Ï€",
          undo_failed: "å¾…ã£ãŸå¤±æ•—",
          network_error_retry: "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã€å¾Œã§ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„",
          invalid_amount: "æœ‰åŠ¹ãªãƒãƒ£ãƒ¼ã‚¸é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆæœ€ä½0.1Ï€ï¼‰",

          // ã‚¢ã‚¤ãƒ†ãƒ å
          item_hint: "ãƒ’ãƒ³ãƒˆã‚¢ã‚¤ãƒ†ãƒ ",
          item_undo: "å¾…ã£ãŸãƒã‚±ãƒƒãƒˆ",
          item_theme: "ãƒ†ãƒ¼ãƒãƒ‘ãƒƒã‚¯",
          item_vip: "VIPãƒ¡ãƒ³ãƒãƒ¼ã‚·ãƒƒãƒ—",
          item_unknown: "ä¸æ˜ãªã‚¢ã‚¤ãƒ†ãƒ ",

          // ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã¨çµ±è¨ˆ
          current_ranking: "ğŸ¯ ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯: #{0} | ({1}å‹{2}æ•—) | å‹ç‡: {3}%",
          leaderboard_update_tip:
            "ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§æ›´æ–°ã•ã‚Œã¾ã™ã€‚ã‚²ãƒ¼ãƒ ã‚’ç¶šã‘ã¦ãƒ©ãƒ³ã‚¯ã‚’ä¸Šã’ã¾ã—ã‚‡ã†ï¼",

          // ã‚²ãƒ¼ãƒ èª¬æ˜è©³ç´°ãƒ«ãƒ¼ãƒ«
          basic_rules_detail_1:
            "15Ã—15ã®ç›¤é¢ã§ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯é»’çŸ³ã€AIã¯ç™½çŸ³ã‚’ä½¿ç”¨ã—ã¾ã™",
          basic_rules_detail_2:
            "ä¸¡è€…ãŒäº¤äº’ã«çŸ³ã‚’ç½®ãã€å…ˆã«5ã¤ã‚’é€£çµã—ãŸæ–¹ãŒå‹åˆ©ã§ã™",
          basic_rules_detail_3:
            "5ã¤ã®çŸ³ã¯æ¨ªã€ç¸¦ã€æ–œã‚ã®ã„ãšã‚Œã®æ–¹å‘ã§ã‚‚é€£çµå¯èƒ½ã§ã™",
          basic_rules_detail_4:
            "ç›¤é¢ãŒæº€æ¯ã«ãªã£ã¦ã‚‚å‹è² ãŒã¤ã‹ãªã„å ´åˆã¯å¼•ãåˆ†ã‘ã§ã™",

          // ã‚¿ãƒ¼ãƒ³æ™‚é–“ãƒ«ãƒ¼ãƒ«
          turn_time_rules: "â±ï¸ ã‚¿ãƒ¼ãƒ³æ™‚é–“ãƒ«ãƒ¼ãƒ«",
          thinking_time_rule: "æ€è€ƒæ™‚é–“ï¼šã‚¿ãƒ¼ãƒ³ã”ã¨ã«60ç§’ã®æ€è€ƒæ™‚é–“",
          time_warning_rule: "æ™‚é–“è­¦å‘Šï¼šæ®‹ã‚Š30ç§’ã§é»„è‰²è­¦å‘Š",
          urgent_warning_rule: "ç·Šæ€¥è­¦å‘Šï¼šæœ€å¾Œã®10ç§’ã§èµ¤è‰²ç‚¹æ»…",
          timeout_rule: "ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ•—åŒ—ï¼šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆæ™‚ã¯è‡ªå‹•çš„ã«æ•—åŒ—è¨˜éŒ²",

          // ã‚²ãƒ¼ãƒ æ“ä½œè©³ç´°
          game_operations: "ğŸ® ã‚²ãƒ¼ãƒ æ“ä½œ",
          place_stone: "çŸ³ã‚’ç½®ãï¼šç©ºã„ã¦ã„ã‚‹ãƒã‚¹ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦çŸ³ã‚’ç½®ã",
          undo_move:
            "å¾…ã£ãŸï¼šæœ€è¿‘ã®ä¸€æ‰‹ã‚’å–ã‚Šæ¶ˆã™ã“ã¨ãŒã§ãã¾ã™ï¼ˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼+AIå„ä¸€æ‰‹ï¼‰",
          new_game_op: "æ–°ã—ã„ã‚²ãƒ¼ãƒ ï¼šå†é–‹å§‹ã€é€²è¡Œä¸­ã®ã‚²ãƒ¼ãƒ ã¯æ•—åŒ—ã¨ã—ã¦è¨˜éŒ²",
          return_op: "æˆ»ã‚‹ï¼šã‚²ãƒ¼ãƒ çµ‚äº†ã€é€²è¡Œä¸­ã®ã‚²ãƒ¼ãƒ ã¯æ•—åŒ—ã¨ã—ã¦è¨˜éŒ²",

          // ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ 
          score_system: "ğŸ† å‹ç‡ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ ",
          initial_score: "ãƒ©ãƒ³ã‚­ãƒ³ã‚°åŸºæº–ï¼šå‹ç‡é †ã§ã‚½ãƒ¼ãƒˆ",
          win_score: "å‹åˆ©ï¼šå‹ç‡å‘ä¸Š",
          draw_score: "å¼•ãåˆ†ã‘ï¼šå‹ç‡ã«å½±éŸ¿",
          lose_score: "æ•—åŒ—ï¼šå‹ç‡ä½ä¸‹",
          quit_score: "æ”¾æ£„/ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼šæ•—åŒ—ã¨ã—ã¦è¨˜éŒ²",

          // æœˆé–“ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«
          monthly_ranking_rules: "ğŸ¯ æœˆé–“ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«ï¼š",
          ranking_requirement: "â€¢ ãƒ©ãƒ³ã‚­ãƒ³ã‚°å‚åŠ ã«ã¯æœ€ä½1ã‚²ãƒ¼ãƒ ãŒå¿…è¦",
          ranking_criteria:
            "â€¢ æ®‹ã‚Šãƒã‚¤ãƒ³ãƒˆé †ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ±ºå®šã€åŒç‚¹æ™‚ã¯å‹ç‡ã§ã‚½ãƒ¼ãƒˆ",
          ranking_rewards: "â€¢ æœˆæœ«ã«ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«å¿œã˜ã¦å ±é…¬é…å¸ƒ",
          anti_farming:
            "âš ï¸ ã‚¹ã‚³ã‚¢æ“ä½œé˜²æ­¢ï¼šã‚²ãƒ¼ãƒ ã‚’ã—ãªã„ã‹å°‘ãªã™ãã‚‹ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‹ã‚‰é™¤å¤–",

          // æœˆé–“å ±é…¬ãƒ«ãƒ¼ãƒ«
          monthly_rewards: "ğŸ† æœˆé–“å ±é…¬ãƒ«ãƒ¼ãƒ«",
          reward_pool_allocation: "ğŸ’° å ±é…¬ãƒ—ãƒ¼ãƒ«é…åˆ†",
          reward_settlement: "æ¯æœˆæœ€çµ‚æ—¥ã®æœ€çµ‚æ™‚é–“ã«æ±ºç®—",
          reward_pool_percentage: "å ±é…¬ãƒ—ãƒ¼ãƒ«ã¯ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æœˆé–“åˆ©ç›Šã®50%",
          reward_example: "ä¾‹ï¼šæœˆé–“åˆ©ç›Š100Ï€ã€å ±é…¬ãƒ—ãƒ¼ãƒ«50Ï€",

          // ãƒˆãƒƒãƒ—3é…åˆ†
          top_three_distribution: "ğŸ¥‡ ãƒˆãƒƒãƒ—3é…åˆ†æ¯”ç‡",
          first_place: "ğŸ¥‡ 1ä½",
          second_place: "ğŸ¥ˆ 2ä½",
          third_place: "ğŸ¥‰ 3ä½",

          // é…å¸ƒæ–¹å¼
          distribution_method: "ğŸ“‹ é…å¸ƒæ–¹å¼",
          wallet_distribution:
            "å€‹äººã‚»ãƒ³ã‚¿ãƒ¼ã«ä¿å­˜ã•ã‚ŒãŸã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã«æ‰‹å‹•é…å¸ƒ",
          valid_wallet_required:
            "å—è³è€…ã¯ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæ­£ç¢ºã§æœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™",
          next_day_distribution: "å ±é…¬ã¯æ±ºç®—ç¿Œæ—¥ã«é…å¸ƒã•ã‚Œã¾ã™",
          invalid_wallet_rollover:
            "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ãŒç„¡åŠ¹ãªå ´åˆã€å ±é…¬ã¯ç¿Œæœˆã«ç¹°ã‚Šè¶Šã•ã‚Œã¾ã™",

          // ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«
          leaderboard_rules: "ğŸ“Š ãƒ©ãƒ³ã‚­ãƒ³ã‚°ãƒ«ãƒ¼ãƒ«",
          ranking_condition: "ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ¡ä»¶ï¼š60ã‚²ãƒ¼ãƒ å®Œäº†ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ²è¼‰",
          ranking_basis: "ãƒ©ãƒ³ã‚­ãƒ³ã‚°åŸºæº–ï¼šç´¯ç©ãƒã‚¤ãƒ³ãƒˆé †ã§ã‚½ãƒ¼ãƒˆ",
          data_statistics: "ãƒ‡ãƒ¼ã‚¿çµ±è¨ˆï¼šæ­´å²çš„ç´¯ç©ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã",
          realtime_update: "ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ï¼šå„ã‚²ãƒ¼ãƒ çµ‚äº†å¾Œå³åº§ã«æ›´æ–°",

          // æ¸©ã‹ã„ãƒ’ãƒ³ãƒˆ
          warm_tips:
            "ğŸ‹ åƒå¹´ã®çŸ¥æµã‚’ç¶™æ‰¿ã—ã€å¤å…¸çš„ãªæ£‹èŠ¸ã®ç¾ã—ã•ã‚’ä½“é¨“ã—ã¦ãã ã•ã„\nğŸ’¡ æ™‚é–“ã‚’åˆç†çš„ã«é…åˆ†ã—ã€æ€è€ƒã®æ¥½ã—ã•ã‚’æº€å–«ã—ã¦ãã ã•ã„",

          // ã‚²ãƒ¼ãƒ çµæœé–¢é€£
          game_result: "ã‚²ãƒ¼ãƒ çµæœ",
          congratulations_win: "ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼å‹åˆ©ï¼",
          sorry_lose: "ğŸ˜” ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€æ•—åŒ—ã—ã¾ã—ãŸ",
          draw_result: "ğŸ¤ å¼•ãåˆ†ã‘",
          current_score: "ç¾åœ¨ã®ã‚¹ã‚³ã‚¢",
          win_rate_display: "å‹ç‡",
          total_games_display: "ç·ã‚²ãƒ¼ãƒ æ•°",
          current_rank_display: "ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯",
          not_ranked: "ãƒ©ãƒ³ã‚¯å¤–",
          guest_mode: "ã‚²ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰",
          guest_mode_desc:
            "ç¾åœ¨ã‚²ã‚¹ãƒˆã¨ã—ã¦ã‚²ãƒ¼ãƒ ä¸­ã§ã€ã‚²ãƒ¼ãƒ çµæœã¯ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«è¨˜éŒ²ã•ã‚Œã¾ã›ã‚“ã€‚",
          login_benefits: "ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ç‰¹å…¸ï¼š",
          benefit_stats: "â€¢ ğŸ“Š ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿çµ±è¨ˆ",
          benefit_leaderboard: "â€¢ ğŸ† ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç«¶äº‰å‚åŠ ",
          benefit_pi_service: "â€¢ ğŸ’° Piã‚³ã‚¤ãƒ³ä»˜åŠ ä¾¡å€¤ã‚µãƒ¼ãƒ“ã‚¹",
          benefit_monthly_rewards: "â€¢ ğŸ æœˆé–“å ±é…¬æ´»å‹•",
          play_again: "ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤",
          view_leaderboard: "ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’è¦‹ã‚‹",
          login_now: "ä»Šã™ããƒ­ã‚°ã‚¤ãƒ³",

          // ã‚²ãƒ¼ãƒ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
          return_to_menu: "æˆ»ã‚‹",
          guest_mode_short: "ğŸ® ã‚²ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰",
          ai_battle_title: "ğŸ§  AIå¯¾æˆ¦",
          player_label: "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼",
          ai_label: "AI",
          vs_label: "VS",
          undo_button: "å¾…ã£ãŸ",
          new_game_button: "æ–°ã—ã„ã‚²ãƒ¼ãƒ ",

          // å¾…ã£ãŸé–¢é€£
          undo_confirm: "å¾…ã£ãŸç¢ºèª",
          undo_confirm_message:
            "å¾…ã£ãŸã«ã¯0.1 Ï€ãŒå¿…è¦ã§ã™\nç¾åœ¨ã®æ®‹é«˜ï¼š{0} Ï€\n\nå¾…ã£ãŸã‚’ç¢ºèªã—ã¾ã™ã‹ï¼Ÿ",
          undo_success_title: "å¾…ã£ãŸæˆåŠŸ",
          undo_success_detail: "0.1 Ï€æ¶ˆè²»ã€æ®‹é«˜ï¼š{0} Ï€",
          undo_failed_title: "å¾…ã£ãŸå¤±æ•—",
          undo_failed_message: "æ”¯æ‰•ã„å¤±æ•—",
          insufficient_balance_undo:
            "å¾…ã£ãŸã«ã¯0.1 Ï€ãŒå¿…è¦ã§ã€ç¾åœ¨ã®æ®‹é«˜{0} Ï€ã€æ®‹é«˜ãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚\n\nãƒãƒ£ãƒ¼ã‚¸ã—ã¾ã™ã‹ï¼Ÿ",
          continue_game_tip:
            "ç¾åœ¨ã®ã‚²ãƒ¼ãƒ ã‚’ç¶šã‘ã‚‹ã“ã¨ã¯ã§ãã¾ã™ãŒã€å†é–‹ã¯ã§ãã¾ã›ã‚“ã€‚ãƒãƒ£ãƒ¼ã‚¸å¾Œã«ã“ã®æ©Ÿèƒ½ã®ãƒ­ãƒƒã‚¯ã‚’è§£é™¤ã—ã¦ãã ã•ã„ã€‚",

          // ãƒãƒ£ãƒ¼ã‚¸é–¢é€£
          recharge_dialog_title: "ğŸ’° ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒãƒ£ãƒ¼ã‚¸",
          payment_dialog_title: "ğŸ’³ Piã‚³ã‚¤ãƒ³æ”¯æ‰•ã„",
          recharge_amount_display: "ãƒãƒ£ãƒ¼ã‚¸ {0} Ï€",
          order_id_display: "æ³¨æ–‡ç•ªå·ï¼š{0}",
          custom_amount_error:
            "æœ‰åŠ¹ãªãƒãƒ£ãƒ¼ã‚¸é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆæœ€ä½0.1Ï€ï¼‰",

          // å€‹äººã‚»ãƒ³ã‚¿ãƒ¼è©³ç´°å†…å®¹
          monthly_reward_reminder: "ğŸ† æœˆé–“å ±é…¬ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼",
          monthly_reward_desc:
            "æœˆé–“åˆ©ç›Šã®50%ãŒãƒˆãƒƒãƒ—3ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«å ±é…¬ã¨ã—ã¦é…åˆ†ã•ã‚Œã¾ã™",

          // æœˆé–“å ±é…¬è©³ç´°èª¬æ˜
          reward_settlement_detail: "æ¯æœˆæœ€çµ‚æ—¥ã®æœ€çµ‚æ™‚é–“ã«æ±ºç®—",
          reward_pool_50_percent: "å ±é…¬ãƒ—ãƒ¼ãƒ«ã¯ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æœˆé–“åˆ©ç›Šã®50%",
          reward_example_detail: "ä¾‹ï¼šæœˆé–“åˆ©ç›Š100Ï€ã€å ±é…¬ãƒ—ãƒ¼ãƒ«50Ï€",
          reward_distribution_manual:
            "å€‹äººã‚»ãƒ³ã‚¿ãƒ¼ã«ä¿å­˜ã•ã‚ŒãŸã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã«æ‰‹å‹•é…å¸ƒ",
          reward_wallet_valid:
            "å—è³è€…ã¯ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæ­£ç¢ºã§æœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™",
          reward_next_day: "å ±é…¬ã¯æ±ºç®—ç¿Œæ—¥ã«é…å¸ƒã•ã‚Œã¾ã™",
          reward_invalid_rollover:
            "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ãŒç„¡åŠ¹ãªå ´åˆã€å ±é…¬ã¯ç¿Œæœˆã«ç¹°ã‚Šè¶Šã•ã‚Œã¾ã™",
          reward_example_calculation: "ğŸ’¡ ä¾‹ï¼šæœˆé–“åˆ©ç›Š100Ï€ã€å ±é…¬ãƒ—ãƒ¼ãƒ«50Ï€",
          first_place_reward: "ğŸ¥‡1ä½ï¼š25Ï€",
          second_place_reward: "ğŸ¥ˆ2ä½ï¼š15Ï€",
          third_place_reward: "ğŸ¥‰3ä½ï¼š10Ï€",

          // ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ©ãƒ³ã‚­ãƒ³ã‚°
          global_ranking_title: "ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ©ãƒ³ã‚­ãƒ³ã‚°",
          ranking_subtitle: "ğŸ“Š æœˆé–“å‹ç‡ã«åŸºã¥ããƒ©ãƒ³ã‚­ãƒ³ã‚°",
          ranking_header_rank: "ãƒ©ãƒ³ã‚¯",
          ranking_header_nickname: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ",
          ranking_header_games: "ç·ã‚²ãƒ¼ãƒ æ•°",
          ranking_header_winrate: "å‹ç‡",
          current_rank_not_listed: "ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯ï¼šæœªæ²è¼‰",
          current_rank_label: "ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯",
          not_listed: "æœªæ²è¼‰",
          play_one_game_to_rank:
            "ğŸ® 1ã‚²ãƒ¼ãƒ å®Œäº†ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ²è¼‰ï¼äº”ç›®ä¸¦ã¹ã®æ—…ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼",

          // å€‹äººã‚»ãƒ³ã‚¿ãƒ¼è©³ç´°ãƒ©ãƒ™ãƒ«
          personal_profile_section: "å€‹äººãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«",
          avatar_nickname_section: "ã‚¢ãƒã‚¿ãƒ¼ã¨ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ",
          click_avatar_edit: "ã‚¢ãƒã‚¿ãƒ¼ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç·¨é›†",
          click_nickname_edit: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç·¨é›†",
          account_info_section: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±",
          game_stats_section: "ã‚²ãƒ¼ãƒ çµ±è¨ˆ",
          wallet_address_label: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹",
          account_balance_display: "ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæ®‹é«˜",
          refresh_balance_btn: "æ®‹é«˜æ›´æ–°",
          logout_btn: "ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",

          // ã‚²ãƒ¼ãƒ çµ±è¨ˆãƒ©ãƒ™ãƒ«
          total_games_label: "ç·ã‚²ãƒ¼ãƒ æ•°",
          wins_label: "å‹åˆ©",
          win_rate_label: "å‹ç‡",
          current_score_label: "ç¾åœ¨ã®ã‚¹ã‚³ã‚¢",
          current_rank_label: "ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯",

          // æ®‹é«˜ç…§ä¼šçŠ¶æ…‹
          balance_querying: "ç…§ä¼šä¸­...",
          balance_query_failed_display: "ç…§ä¼šå¤±æ•—",
          balance_tooltip: "ç·ãƒãƒ£ãƒ¼ã‚¸ï¼š{0} Ï€\nç·æ¶ˆè²»ï¼š{1} Ï€",

          // æ”¯æ‰•ã„æˆåŠŸæƒ…å ±
          payment_success_title: "æ”¯æ‰•ã„æˆåŠŸ",
          payment_success_message: "æ”¯æ‰•ã„æˆåŠŸï¼",
          purchase_success_message: "{0}ã‚’æ­£å¸¸ã«è³¼å…¥ã—ã¾ã—ãŸ",
          transaction_id: "å–å¼•IDï¼š{0}",

          // å€‹äººã‚»ãƒ³ã‚¿ãƒ¼å…¥åŠ›ãƒ’ãƒ³ãƒˆ
          enter_avatar_emoji: "çµµæ–‡å­—ã‚¢ãƒã‚¿ãƒ¼ã‚’å…¥åŠ›ï¼ˆä¾‹ï¼šğŸ˜Šï¼‰",
          click_to_set_nickname: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ è¨­å®šã¯ã‚¯ãƒªãƒƒã‚¯",
          enter_your_nickname: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          loading_text_display: "èª­ã¿è¾¼ã¿ä¸­...",
          refresh_balance_text: "ğŸ”„ æ®‹é«˜æ›´æ–°",
          recharge_text: "ğŸ’° ãƒãƒ£ãƒ¼ã‚¸",
          wallet_format_hint: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ï¼š50æ–‡å­—ã®å¤§æ–‡å­—ã¨æ•°å­—",
          save_wallet: "ğŸ’¾ ä¿å­˜",
          edit_wallet: "âœï¸ ç·¨é›†",
          logout_account_text: "â†©ï¸ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ­ã‚°ã‚¢ã‚¦ãƒˆ",

          // å€‹äººã‚»ãƒ³ã‚¿ãƒ¼ãƒ’ãƒ³ãƒˆæƒ…å ±
          enter_avatar_hint: "ã‚¢ãƒã‚¿ãƒ¼çµµæ–‡å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          single_emoji_hint: "å˜ä¸€ã®çµµæ–‡å­—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          avatar_updated: "ã‚¢ãƒã‚¿ãƒ¼ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸï¼",
          nickname_updated: "ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ãŒæ›´æ–°ã•ã‚Œã¾ã—ãŸï¼",
          enter_wallet_hint: "ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          wallet_length_error:
            "âŒ ã“ã‚Œã¯æ¨™æº–ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ï¼\n\nç¾åœ¨ã®é•·ã•ï¼š{0}æ–‡å­—\næ¨™æº–é•·ã•ï¼š50æ–‡å­—\n\nå®Œå…¨ãª50æ–‡å­—ã®ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          wallet_format_error:
            "âŒ ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹å½¢å¼ã‚¨ãƒ©ãƒ¼ï¼\n\nå¤§æ–‡å­—ï¼ˆA-Zï¼‰ã¨æ•°å­—ï¼ˆ0-9ï¼‰ã®ã¿è¨±å¯ã•ã‚Œã¦ã„ã¾ã™\nå…¥åŠ›å†…å®¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„",
          wallet_saved_success: "âœ… ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæ­£å¸¸ã«ä¿å­˜ã•ã‚Œã¾ã—ãŸï¼",
          edit_mode_title: "ç·¨é›†ãƒ¢ãƒ¼ãƒ‰",
          edit_mode_message:
            "ğŸ’¡ ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã—ãŸ\n\nã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ä¿®æ­£å¾Œã€ä¿å­˜ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„",
          success_title: "æˆåŠŸ",
          error_title: "ã‚¨ãƒ©ãƒ¼",

          // ã‚²ãƒ¼ãƒ çµ‚äº†é–¢é€£
          you_win: "ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼å‹åˆ©ï¼",
          you_lose: "ğŸ˜” AIã®å‹åˆ©ã§ã™ã€é ‘å¼µã£ã¦ï¼",
          draw: "ğŸ¤ å¼•ãåˆ†ã‘ï¼",
          game_over: "ã‚²ãƒ¼ãƒ çµ‚äº†",

          // ãƒ¡ã‚¤ãƒ³ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãƒœã‚¿ãƒ³
          global_ranking: "ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ©ãƒ³ã‚­ãƒ³ã‚°",
          ai_battle: "AIå¯¾æˆ¦",
          personal_center: "å€‹äººã‚»ãƒ³ã‚¿ãƒ¼",
          game_instructions: "ã‚²ãƒ¼ãƒ èª¬æ˜",

          // æ¥ç¶šã‚¨ãƒ©ãƒ¼
          connection_failed: "æ¥ç¶šå¤±æ•—",
          connection_error_detail:
            "Pi Networkã«æ¥ç¶šã§ãã¾ã›ã‚“ã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèªã—ã¦å†è©¦è¡Œã—ã¦ãã ã•ã„",
          login_with_pi: "Piã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³",
          login_benefits_note:
            "ãƒ­ã‚°ã‚¤ãƒ³å¾Œã€å®Œå…¨ãªã‚²ãƒ¼ãƒ æ©Ÿèƒ½ã¨Piã‚³ã‚¤ãƒ³å ±é…¬ã‚’ãŠæ¥½ã—ã¿ãã ã•ã„",

          // ãƒãƒ£ãƒ¼ã‚¸ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
          recharge_amount_selection: "ãƒãƒ£ãƒ¼ã‚¸é‡‘é¡é¸æŠ",
          custom_amount_placeholder: "ã‚«ã‚¹ã‚¿ãƒ é‡‘é¡",
          custom_recharge: "ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ£ãƒ¼ã‚¸",
          cancel: "ã‚­ãƒ£ãƒ³ã‚»ãƒ«",

          // ã‚¨ãƒ©ãƒ¼é€šçŸ¥
          please_login_first: "ã¾ãšãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„",
          create_order_failed: "æ³¨æ–‡ä½œæˆå¤±æ•—",
          network_error_retry: "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã€å¾Œã§ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„",
          pi_login_failed: "Pi Networkãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—",
          login_error: "ãƒ­ã‚°ã‚¤ãƒ³ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",
          pi_sdk_not_loaded:
            "Pi Network SDKãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„ãŸã‚ã€æ”¯æ‰•ã„æ©Ÿèƒ½ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“",
          create_payment_failed: "æ”¯æ‰•ã„ä½œæˆå¤±æ•—",

          // æ”¯æ‰•ã„ãƒ€ã‚¤ã‚¢ãƒ­ã‚°
          payment_method: "æ”¯æ‰•ã„æ–¹æ³•",
          pi_wallet_transfer: "ğŸ“± Piã‚¦ã‚©ãƒ¬ãƒƒãƒˆé€é‡‘",
          transfer_instruction:
            "Piã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚’ä½¿ç”¨ã—ã¦ä»¥ä¸‹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã«é€é‡‘ã—ã¦ãã ã•ã„ï¼š",
          transfer_amount_warning:
            "âš ï¸ é€é‡‘é‡‘é¡ãŒ<strong>{0} Ï€</strong>ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„",
          transfer_memo: "é€é‡‘ãƒ¡ãƒ¢ï¼š{0}",
          transaction_hash_placeholder: "å–å¼•ãƒãƒƒã‚·ãƒ¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          transaction_hash_instruction:
            "é€é‡‘å®Œäº†å¾Œã€Piã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‹ã‚‰å–å¼•ãƒãƒƒã‚·ãƒ¥ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä¸Šè¨˜ã®å…¥åŠ›æ¬„ã«è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„",
          verify_payment: "æ”¯æ‰•ã„ç¢ºèª",
          order_validity: "æ³¨æ–‡æœ‰åŠ¹æœŸé™ï¼š30åˆ†",

          // æ”¯æ‰•ã„ç¢ºèª
          please_enter_transaction_hash: "å–å¼•ãƒãƒƒã‚·ãƒ¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
          recharge_success: "ãƒãƒ£ãƒ¼ã‚¸æˆåŠŸ",
          recharge_success_message:
            "ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼{0} Ï€ ãƒãƒ£ãƒ¼ã‚¸æˆåŠŸï¼\nç¾åœ¨ã®æ®‹é«˜ï¼š{1} Ï€",
          verification_failed: "ç¢ºèªå¤±æ•—",

          // ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼ç¢ºèª
          timeout_game_over: "â° æ€è€ƒæ™‚é–“è¶…éã€ã‚²ãƒ¼ãƒ å¤±æ•—ï¼",
          login_success: "ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸ",
          welcome_user: "ã‚ˆã†ã“ãã€{0}",
          abandon_current_game: "ç¾åœ¨ã®ã‚²ãƒ¼ãƒ ã‚’æ”¾æ£„",
          abandon_game_warning:
            "ç¾åœ¨ã®ã‚²ãƒ¼ãƒ ãŒé€²è¡Œä¸­ã§ã™ã€‚å†é–‹å§‹ã™ã‚‹ã¨æ•—åŒ—ã¨ã—ã¦è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚\n\nç¾åœ¨ã®ã‚²ãƒ¼ãƒ ã‚’æ”¾æ£„ã—ã¾ã™ã‹ï¼Ÿ",
          restart_game: "ã‚²ãƒ¼ãƒ å†é–‹å§‹",
          restart_game_confirm: "å†é–‹å§‹ã—ã¾ã™ã‹ï¼Ÿ",
          abandon_game_return_warning:
            "ç¾åœ¨ã®ã‚²ãƒ¼ãƒ ãŒé€²è¡Œä¸­ã§ã™ã€‚ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹ã¨æ•—åŒ—ã¨ã—ã¦è¨˜éŒ²ã•ã‚Œã¾ã™ã€‚\n\nç¾åœ¨ã®ã‚²ãƒ¼ãƒ ã‚’æ”¾æ£„ã—ã¾ã™ã‹ï¼Ÿ",

          // å‹æ•—è¡¨ç¤ºå½¢å¼
          wins_losses_format: "({0}å‹{1}æ•—)",
          monthly_games: "æœˆé–“ã‚²ãƒ¼ãƒ ",
          play_again: "ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤",
          view_leaderboard: "ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚’è¦‹ã‚‹",
          login_now: "ä»Šã™ããƒ­ã‚°ã‚¤ãƒ³",
          guest_mode: "ã‚²ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰",
          guest_mode_desc:
            "ç¾åœ¨ã‚²ã‚¹ãƒˆã¨ã—ã¦ãƒ—ãƒ¬ã‚¤ã—ã¦ãŠã‚Šã€ã‚²ãƒ¼ãƒ çµæœã¯ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã«è¨˜éŒ²ã•ã‚Œã¾ã›ã‚“ã€‚",
          login_benefits: "ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ç‰¹å…¸:",
          benefit_stats: "â€¢ ğŸ“Š ã‚²ãƒ¼ãƒ çµ±è¨ˆ",
          benefit_leaderboard: "â€¢ ğŸ† ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç«¶äº‰ã¸ã®å‚åŠ ",
          benefit_pi_service: "â€¢ ğŸ’° Piã‚³ã‚¤ãƒ³ä»˜åŠ ä¾¡å€¤ã‚µãƒ¼ãƒ“ã‚¹",
          benefit_monthly_rewards: "â€¢ ğŸ æœˆé–“å ±é…¬æ´»å‹•",
          rank_position: "#{0}ä½",
        },

        vi: {
          // Giao diá»‡n cÆ¡ báº£n
          noscript: "Báº¡n cáº§n báº­t JavaScript Ä‘á»ƒ cháº¡y á»©ng dá»¥ng nÃ y.",
          game_title: "Cá» CarÃ´",
          game_subtitle: "TrÃ² chÆ¡i cá» carÃ´ cháº¡y trÃªn blockchain pinetwork",
          global_ranking: "Báº£ng Xáº¿p Háº¡ng ToÃ n Cáº§u",
          ai_battle: "Äáº¥u vá»›i AI",
          personal_center: "Trung TÃ¢m CÃ¡ NhÃ¢n",
          game_instructions: "HÆ°á»›ng Dáº«n TrÃ² ChÆ¡i",
          error_message: "âŒ ThÃ´ng BÃ¡o Lá»—i",
          login_with_pi: "ÄÄƒng nháº­p báº±ng Pi Network",
          login_note:
            "Báº±ng cÃ¡ch nháº¥p Ä‘Äƒng nháº­p, báº¡n Ä‘á»“ng Ã½ sá»­ dá»¥ng tÃ i khoáº£n Pi Network Ä‘á»ƒ xÃ¡c thá»±c",

          // TÃ¹y chá»n ngÃ´n ngá»¯
          lang_zh: "ä¸­æ–‡",
          lang_en: "English",
          lang_ko: "í•œêµ­ì–´",
          lang_ja: "æ—¥æœ¬èª",
          lang_vi: "Tiáº¿ng Viá»‡t",

          // LiÃªn quan Ä‘áº¿n trÃ² chÆ¡i
          current_player: "NgÆ°á»i ChÆ¡i Hiá»‡n Táº¡i",
          your_turn: "LÆ°á»£t Cá»§a Báº¡n",
          opponent_turn: "LÆ°á»£t Cá»§a Äá»‘i Thá»§",
          ai_thinking: "ğŸ¤– AI Ä‘ang suy nghÄ©...",
          thinking_time: "â±ï¸ Thá»i gian suy nghÄ©: {0}s",
          remaining_time: "âš ï¸ Thá»i gian cÃ²n láº¡i: {0}s",
          timeout_warning: "ğŸš¨ Cáº£nh bÃ¡o háº¿t thá»i gian: {0}s",
          timeout: "â° Háº¿t thá»i gian",

          // Káº¿t quáº£ trÃ² chÆ¡i
          you_win: "ğŸ‰ ChÃºc má»«ng! Báº¡n tháº¯ng!",
          you_lose: "ğŸ˜” Tiáº¿c quÃ¡, báº¡n thua",
          draw: "ğŸ¤ HÃ²a",
          game_over: "Káº¿t ThÃºc TrÃ² ChÆ¡i",

          // NÃºt vÃ  thao tÃ¡c
          new_game: "TrÃ² ChÆ¡i Má»›i",
          undo: "HoÃ n TÃ¡c",
          restart: "Khá»Ÿi Äá»™ng Láº¡i",
          back_to_menu: "Vá» Menu",
          confirm: "XÃ¡c Nháº­n",
          cancel: "Há»§y",
          close: "ÄÃ³ng",
          save: "LÆ°u",
          update: "Cáº­p Nháº­t",
          enter_game: "VÃ o Game",

          // Trung tÃ¢m cÃ¡ nhÃ¢n
          personal_info: "ThÃ´ng Tin CÃ¡ NhÃ¢n",
          game_stats: "Thá»‘ng KÃª TrÃ² ChÆ¡i",
          total_games: "Tá»•ng Sá»‘ Tráº­n",
          wins: "Tháº¯ng",
          losses: "Thua",
          win_rate: "Tá»· Lá»‡ Tháº¯ng",
          current_rank: "Xáº¿p Háº¡ng Hiá»‡n Táº¡i",
          wallet_address: "Äá»‹a Chá»‰ VÃ­",
          balance: "Sá»‘ DÆ°",
          nickname: "Biá»‡t Danh",
          avatar: "HÃ¬nh Äáº¡i Diá»‡n",

          // Lá»—i vÃ  thÃ´ng bÃ¡o
          connection_failed: "Káº¿t Ná»‘i Tháº¥t Báº¡i",
          network_error: "Lá»—i máº¡ng, vui lÃ²ng kiá»ƒm tra káº¿t ná»‘i vÃ  thá»­ láº¡i",
          login_failed: "ÄÄƒng Nháº­p Tháº¥t Báº¡i",
          insufficient_balance: "Sá»‘ DÆ° KhÃ´ng Äá»§",
          invalid_move: "NÆ°á»›c Äi KhÃ´ng Há»£p Lá»‡",
          game_not_started: "TrÃ² ChÆ¡i ChÆ°a Báº¯t Äáº§u",

          // LiÃªn quan Ä‘áº¿n thanh toÃ¡n
          payment_confirm: "XÃ¡c Nháº­n Thanh ToÃ¡n",
          payment_success: "Thanh ToÃ¡n ThÃ nh CÃ´ng",
          payment_failed: "Thanh ToÃ¡n Tháº¥t Báº¡i",
          payment_cancelled: "Thanh ToÃ¡n ÄÃ£ Há»§y",
          recharge: "Náº¡p Tiá»n",

          // Báº£ng xáº¿p háº¡ng
          leaderboard: "Báº£ng Xáº¿p Háº¡ng",
          rank: "Xáº¿p Háº¡ng",
          player: "NgÆ°á»i ChÆ¡i",
          score: "Äiá»ƒm",
          games_played: "Tráº­n ÄÃ£ ChÆ¡i",

          // KhÃ¡c
          loading: "Äang táº£i...",
          connecting: "Äang káº¿t ná»‘i...",
          please_wait: "Vui lÃ²ng Ä‘á»£i...",
          success: "ThÃ nh CÃ´ng",
          failed: "Tháº¥t Báº¡i",
          connecting_pi_network: "Äang káº¿t ná»‘i Pi Network...",
          entering_game: "Äang vÃ o game...",

          // Popup vÃ  thÃ´ng bÃ¡o
          hint: "Gá»£i Ã",
          confirm_purchase: "XÃ¡c Nháº­n Mua",
          confirm_payment: "XÃ¡c Nháº­n Thanh ToÃ¡n",
          payment_amount: "{0} Ï€",
          enter_nickname: "Vui lÃ²ng nháº­p biá»‡t danh",
          nickname_too_long: "Biá»‡t danh khÃ´ng Ä‘Æ°á»£c vÆ°á»£t quÃ¡ 20 kÃ½ tá»±",
          nickname_forbidden: "Biá»‡t danh chá»©a tá»« bá»‹ cáº¥m, vui lÃ²ng nháº­p láº¡i",
          logout_confirm: "XÃ¡c Nháº­n ÄÄƒng Xuáº¥t",
          logout_message:
            "Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n Ä‘Äƒng xuáº¥t? Äiá»u nÃ y sáº½ xÃ³a táº¥t cáº£ dá»¯ liá»‡u Ä‘Æ°á»£c lÆ°u cá»¥c bá»™.",
          logout_success: "ÄÄƒng Xuáº¥t ThÃ nh CÃ´ng",
          logout_success_message: "ÄÃ£ Ä‘Äƒng xuáº¥t thÃ nh cÃ´ng!",
          please_login_first: "Vui lÃ²ng Ä‘Äƒng nháº­p trÆ°á»›c",

          // HÆ°á»›ng dáº«n trÃ² chÆ¡i
          game_instructions_title: "HÆ°á»›ng Dáº«n TrÃ² ChÆ¡i",
          game_history_title: "Lá»‹ch Sá»­ Cá» CarÃ´",
          game_history_desc:
            'Truyá»n thuyáº¿t ká»ƒ ráº±ng cá» carÃ´ ra Ä‘á»i cÃ¡ch Ä‘Ã¢y hÆ¡n 4000 nÄƒm vÃ o thá»i HoÃ ng Ä‘áº¿ NghiÃªu. NghiÃªu Ä‘Ã£ phÃ¡t minh ra cá» Ä‘Ã¡ Ä‘á»ƒ giÃ¡o dá»¥c con trai Äan Chu, sau Ä‘Ã³ Ä‘Æ°á»£c Thuáº¥n cáº£i tiáº¿n thÃ nh trÃ² chÆ¡i "NgÅ© tinh liÃªn chÃ¢u", dáº§n hÃ¬nh thÃ nh nguyÃªn máº«u cá»§a cá» carÃ´ hiá»‡n Ä‘áº¡i.\nTá»« trÃ² chÆ¡i dÃ¢n gian thá»i NghiÃªu-Thuáº¥n, Ä‘áº¿n viá»‡c lan truyá»n sang ÄÃ´ng Ã vÃ o thá»i Nam Báº¯c triá»u, rá»“i Ä‘Æ°á»£c Nháº­t Báº£n cáº£i tiáº¿n thÃ nh mÃ´n thá»ƒ thao thi Ä‘áº¥u, cuá»‘i cÃ¹ng trá»Ÿ thÃ nh dá»± Ã¡n cá» vua toÃ n cáº§u.',

          // Ná»™i dung chi tiáº¿t hÆ°á»›ng dáº«n trÃ² chÆ¡i
          game_history_section: "Nguá»“n Gá»‘c Lá»‹ch Sá»­ Cá» CarÃ´",
          game_rules_section: "Luáº­t ChÆ¡i",
          game_rules_title: "ğŸ¯ Quy Táº¯c CÆ¡ Báº£n",

          // Trung tÃ¢m cÃ¡ nhÃ¢n
          personal_center_title: "Trung TÃ¢m CÃ¡ NhÃ¢n",
          wallet_address_placeholder:
            "Nháº­p Ä‘á»‹a chá»‰ vÃ­ 50 kÃ½ tá»± (chá»¯ hoa vÃ  sá»‘)",
          wallet_address_format: "Äá»‹nh dáº¡ng Ä‘á»‹a chá»‰ vÃ­: 50 chá»¯ hoa vÃ  sá»‘",

          // LiÃªn quan Ä‘áº¿n thanh toÃ¡n
          insufficient_balance_title: "Sá»‘ DÆ° KhÃ´ng Äá»§",
          insufficient_balance_message:
            "HoÃ n tÃ¡c cáº§n 0.1 Ï€, sá»‘ dÆ° hiá»‡n táº¡i {0} Ï€, sá»‘ dÆ° khÃ´ng Ä‘á»§.\n\nBáº¡n cÃ³ muá»‘n náº¡p tiá»n khÃ´ng?",
          recharge_prompt:
            "Náº¡p Pi coin vÃ o tÃ i khoáº£n game cá»§a báº¡n vÃ  táº­n hÆ°á»Ÿng nhiá»u tÃ­nh nÄƒng game hÆ¡n!",
          continue_without_recharge:
            "Báº¡n cÃ³ thá»ƒ tiáº¿p tá»¥c trÃ² chÆ¡i hiá»‡n táº¡i nhÆ°ng khÃ´ng thá»ƒ khá»Ÿi Ä‘á»™ng láº¡i. Má»Ÿ khÃ³a tÃ­nh nÄƒng nÃ y sau khi náº¡p tiá»n.",
          undo_success: "HoÃ n TÃ¡c ThÃ nh CÃ´ng",
          undo_success_message: "ÄÃ£ tiÃªu thá»¥ 0.1 Ï€, sá»‘ dÆ°: {0} Ï€",
          undo_failed: "HoÃ n TÃ¡c Tháº¥t Báº¡i",
          network_error_retry: "Lá»—i máº¡ng, vui lÃ²ng thá»­ láº¡i sau",
          invalid_amount: "Vui lÃ²ng nháº­p sá»‘ tiá»n náº¡p há»£p lá»‡ (tá»‘i thiá»ƒu 0.1Ï€)",

          // TÃªn váº­t pháº©m
          item_hint: "Váº­t Pháº©m Gá»£i Ã",
          item_undo: "VÃ© HoÃ n TÃ¡c",
          item_theme: "GÃ³i Chá»§ Äá»",
          item_vip: "ThÃ nh ViÃªn VIP",
          item_unknown: "Váº­t Pháº©m KhÃ´ng XÃ¡c Äá»‹nh",

          // Báº£ng xáº¿p háº¡ng vÃ  thá»‘ng kÃª
          current_ranking:
            "ğŸ¯ Xáº¿p háº¡ng hiá»‡n táº¡i: #{0} | ({1}T {2}B) | Tá»· lá»‡ tháº¯ng: {3}%",
          leaderboard_update_tip:
            "Báº£ng xáº¿p háº¡ng cáº­p nháº­t theo thá»i gian thá»±c, tiáº¿p tá»¥c chÆ¡i Ä‘á»ƒ cáº£i thiá»‡n xáº¿p háº¡ng cá»§a báº¡n!",

          // Quy táº¯c chi tiáº¿t trÃ² chÆ¡i
          basic_rules_detail_1:
            "TrÃªn bÃ n cá» 15Ã—15, ngÆ°á»i chÆ¡i dÃ¹ng quÃ¢n Ä‘en, AI dÃ¹ng quÃ¢n tráº¯ng",
          basic_rules_detail_2:
            "Hai bÃªn luÃ¢n phiÃªn Ä‘áº·t quÃ¢n, ai ná»‘i Ä‘Æ°á»£c 5 quÃ¢n trÆ°á»›c sáº½ tháº¯ng",
          basic_rules_detail_3:
            "5 quÃ¢n cÃ³ thá»ƒ ná»‘i theo hÆ°á»›ng ngang, dá»c hoáº·c chÃ©o",
          basic_rules_detail_4:
            "Náº¿u bÃ n cá» Ä‘áº§y mÃ  khÃ´ng cÃ³ ai tháº¯ng thÃ¬ lÃ  hÃ²a",

          // Quy táº¯c thá»i gian lÆ°á»£t
          turn_time_rules: "â±ï¸ Quy Táº¯c Thá»i Gian LÆ°á»£t",
          thinking_time_rule: "Thá»i gian suy nghÄ©: 60 giÃ¢y má»—i lÆ°á»£t",
          time_warning_rule:
            "Cáº£nh bÃ¡o thá»i gian: Cáº£nh bÃ¡o mÃ u vÃ ng khi cÃ²n 30 giÃ¢y",
          urgent_warning_rule:
            "Cáº£nh bÃ¡o kháº©n cáº¥p: Nháº¥p nhÃ¡y mÃ u Ä‘á» trong 10 giÃ¢y cuá»‘i",
          timeout_rule:
            "Thua do háº¿t thá»i gian: Háº¿t thá»i gian sáº½ tá»± Ä‘á»™ng ghi nháº­n lÃ  thua",

          // Chi tiáº¿t thao tÃ¡c trÃ² chÆ¡i
          game_operations: "ğŸ® Thao TÃ¡c TrÃ² ChÆ¡i",
          place_stone: "Äáº·t quÃ¢n: Nháº¥p vÃ o Ã´ trá»‘ng Ä‘á»ƒ Ä‘áº·t quÃ¢n",
          undo_move:
            "HoÃ n tÃ¡c: CÃ³ thá»ƒ há»§y nÆ°á»›c Ä‘i gáº§n nháº¥t (ngÆ°á»i chÆ¡i + AI má»—i bÃªn má»™t nÆ°á»›c)",
          new_game_op:
            "TrÃ² chÆ¡i má»›i: Báº¯t Ä‘áº§u láº¡i, trÃ² chÆ¡i Ä‘ang diá»…n ra sáº½ Ä‘Æ°á»£c ghi lÃ  thua",
          return_op:
            "Quay láº¡i: ThoÃ¡t trÃ² chÆ¡i, trÃ² chÆ¡i Ä‘ang diá»…n ra sáº½ Ä‘Æ°á»£c ghi lÃ  thua",

          // Há»‡ thá»‘ng Ä‘iá»ƒm sá»‘
          score_system: "ğŸ† Há»‡ Thá»‘ng Xáº¿p Háº¡ng Tá»· Lá»‡ Tháº¯ng",
          initial_score: "CÆ¡ sá»Ÿ xáº¿p háº¡ng: Sáº¯p xáº¿p theo tá»· lá»‡ tháº¯ng",
          win_score: "Tháº¯ng: Cáº£i thiá»‡n tá»· lá»‡ tháº¯ng",
          draw_score: "HÃ²a: áº¢nh hÆ°á»Ÿng tá»· lá»‡ tháº¯ng",
          lose_score: "Thua: Giáº£m tá»· lá»‡ tháº¯ng",
          quit_score: "Bá» cuá»™c/Háº¿t thá»i gian: Ghi nháº­n lÃ  thua",

          // Quy táº¯c xáº¿p háº¡ng hÃ ng thÃ¡ng
          monthly_ranking_rules: "ğŸ¯ Quy Táº¯c Xáº¿p Háº¡ng HÃ ng ThÃ¡ng:",
          ranking_requirement: "â€¢ Cáº§n tá»‘i thiá»ƒu 1 tráº­n Ä‘á»ƒ tham gia xáº¿p háº¡ng",
          ranking_criteria:
            "â€¢ Xáº¿p háº¡ng theo Ä‘iá»ƒm cÃ²n láº¡i, Ä‘iá»ƒm báº±ng nhau thÃ¬ sáº¯p xáº¿p theo tá»· lá»‡ tháº¯ng",
          ranking_rewards: "â€¢ PhÃ¡t thÆ°á»Ÿng cuá»‘i thÃ¡ng dá»±a trÃªn xáº¿p háº¡ng",
          anti_farming:
            "âš ï¸ CÆ¡ cháº¿ chá»‘ng gian láº­n: NgÆ°á»i chÆ¡i khÃ´ng chÆ¡i hoáº·c chÆ¡i quÃ¡ Ã­t sáº½ khÃ´ng tham gia xáº¿p háº¡ng",

          // Quy táº¯c thÆ°á»Ÿng hÃ ng thÃ¡ng
          monthly_rewards: "ğŸ† Quy Táº¯c ThÆ°á»Ÿng HÃ ng ThÃ¡ng",
          reward_pool_allocation: "ğŸ’° PhÃ¢n Bá»• Quá»¹ ThÆ°á»Ÿng",
          reward_settlement: "Quyáº¿t toÃ¡n vÃ o giá» cuá»‘i cá»§a ngÃ y cuá»‘i má»—i thÃ¡ng",
          reward_pool_percentage:
            "Quá»¹ thÆ°á»Ÿng lÃ  50% lá»£i nhuáº­n hÃ ng thÃ¡ng cá»§a ná»n táº£ng",
          reward_example: "VÃ­ dá»¥: Lá»£i nhuáº­n thÃ¡ng 100Ï€, quá»¹ thÆ°á»Ÿng 50Ï€",

          // PhÃ¢n bá»• top 3
          top_three_distribution: "ğŸ¥‡ Tá»· Lá»‡ PhÃ¢n Bá»• Top 3",
          first_place: "ğŸ¥‡ Háº¡ng Nháº¥t",
          second_place: "ğŸ¥ˆ Háº¡ng NhÃ¬",
          third_place: "ğŸ¥‰ Háº¡ng Ba",

          // PhÆ°Æ¡ng thá»©c phÃ¡t thÆ°á»Ÿng
          distribution_method: "ğŸ“‹ PhÆ°Æ¡ng Thá»©c PhÃ¡t ThÆ°á»Ÿng",
          wallet_distribution:
            "PhÃ¡t thÆ°á»Ÿng thá»§ cÃ´ng theo Ä‘á»‹a chá»‰ vÃ­ Ä‘Æ°á»£c lÆ°u trong trung tÃ¢m cÃ¡ nhÃ¢n",
          valid_wallet_required:
            "NgÆ°á»i tháº¯ng giáº£i pháº£i Ä‘áº£m báº£o Ä‘á»‹a chá»‰ vÃ­ chÃ­nh xÃ¡c vÃ  há»£p lá»‡",
          next_day_distribution:
            "ThÆ°á»Ÿng sáº½ Ä‘Æ°á»£c phÃ¡t vÃ o ngÃ y sau khi quyáº¿t toÃ¡n",
          invalid_wallet_rollover:
            "Náº¿u Ä‘á»‹a chá»‰ vÃ­ khÃ´ng há»£p lá»‡, thÆ°á»Ÿng sáº½ Ä‘Æ°á»£c chuyá»ƒn sang thÃ¡ng sau",

          // Quy táº¯c báº£ng xáº¿p háº¡ng
          leaderboard_rules: "ğŸ“Š Quy Táº¯c Báº£ng Xáº¿p Háº¡ng",
          ranking_condition:
            "Äiá»u kiá»‡n xáº¿p háº¡ng: HoÃ n thÃ nh 60 tráº­n Ä‘á»ƒ Ä‘Æ°á»£c lÃªn báº£ng",
          ranking_basis: "CÆ¡ sá»Ÿ xáº¿p háº¡ng: Sáº¯p xáº¿p theo Ä‘iá»ƒm tÃ­ch lÅ©y",
          data_statistics:
            "Thá»‘ng kÃª dá»¯ liá»‡u: Dá»±a trÃªn dá»¯ liá»‡u tÃ­ch lÅ©y lá»‹ch sá»­",
          realtime_update:
            "Cáº­p nháº­t thá»i gian thá»±c: Cáº­p nháº­t ngay sau má»—i tráº­n Ä‘áº¥u",

          // Lá»i khuyÃªn áº¥m Ã¡p
          warm_tips:
            "ğŸ‹ Káº¿ thá»«a trÃ­ tuá»‡ ngÃ n nÄƒm, tráº£i nghiá»‡m váº» Ä‘áº¹p cá» cá»• Ä‘iá»ƒn\nğŸ’¡ Sáº¯p xáº¿p thá»i gian há»£p lÃ½, táº­n hÆ°á»Ÿng niá»m vui suy nghÄ©",

          // LiÃªn quan Ä‘áº¿n káº¿t quáº£ trÃ² chÆ¡i
          game_result: "Káº¿t Quáº£ TrÃ² ChÆ¡i",
          congratulations_win: "ğŸ‰ ChÃºc má»«ng! Báº¡n tháº¯ng!",
          sorry_lose: "ğŸ˜” Xin lá»—i, báº¡n Ä‘Ã£ thua",
          draw_result: "ğŸ¤ HÃ²a",
          current_score: "Äiá»ƒm Hiá»‡n Táº¡i",
          win_rate_display: "Tá»· Lá»‡ Tháº¯ng",
          total_games_display: "Tá»•ng Sá»‘ Tráº­n",
          current_rank_display: "Xáº¿p Háº¡ng Hiá»‡n Táº¡i",
          not_ranked: "ChÆ°a CÃ³ Xáº¿p Háº¡ng",
          guest_mode: "Cháº¿ Äá»™ KhÃ¡ch",
          guest_mode_desc:
            "Báº¡n hiá»‡n Ä‘ang chÆ¡i vá»›i tÆ° cÃ¡ch khÃ¡ch, káº¿t quáº£ trÃ² chÆ¡i sáº½ khÃ´ng Ä‘Æ°á»£c ghi vÃ o báº£ng xáº¿p háº¡ng.",
          login_benefits: "Sau khi Ä‘Äƒng nháº­p, táº­n hÆ°á»Ÿng:",
          benefit_stats: "â€¢ ğŸ“Š Thá»‘ng kÃª dá»¯ liá»‡u trÃ² chÆ¡i",
          benefit_leaderboard: "â€¢ ğŸ† Tham gia cáº¡nh tranh báº£ng xáº¿p háº¡ng",
          benefit_pi_service: "â€¢ ğŸ’° Dá»‹ch vá»¥ giÃ¡ trá»‹ gia tÄƒng Pi coin",
          benefit_monthly_rewards: "â€¢ ğŸ Hoáº¡t Ä‘á»™ng thÆ°á»Ÿng hÃ ng thÃ¡ng",
          play_again: "ChÆ¡i Láº¡i",
          view_leaderboard: "Xem Báº£ng Xáº¿p Háº¡ng",
          login_now: "ÄÄƒng Nháº­p Ngay",

          // Giao diá»‡n trÃ² chÆ¡i
          return_to_menu: "Quay Láº¡i",
          guest_mode_short: "ğŸ® Cháº¿ Äá»™ KhÃ¡ch",
          ai_battle_title: "ğŸ§  Äáº¥u Vá»›i AI",
          player_label: "NgÆ°á»i ChÆ¡i",
          ai_label: "AI",
          vs_label: "VS",
          undo_button: "HoÃ n TÃ¡c",
          new_game_button: "TrÃ² ChÆ¡i Má»›i",

          // LiÃªn quan Ä‘áº¿n hoÃ n tÃ¡c
          undo_confirm: "XÃ¡c Nháº­n HoÃ n TÃ¡c",
          undo_confirm_message:
            "HoÃ n tÃ¡c cáº§n 0.1 Ï€\nSá»‘ dÆ° hiá»‡n táº¡i: {0} Ï€\n\nXÃ¡c nháº­n hoÃ n tÃ¡c?",
          undo_success_title: "HoÃ n TÃ¡c ThÃ nh CÃ´ng",
          undo_success_detail: "ÄÃ£ tiÃªu thá»¥ 0.1 Ï€, sá»‘ dÆ°: {0} Ï€",
          undo_failed_title: "HoÃ n TÃ¡c Tháº¥t Báº¡i",
          undo_failed_message: "Thanh toÃ¡n tháº¥t báº¡i",
          insufficient_balance_undo:
            "HoÃ n tÃ¡c cáº§n 0.1 Ï€, sá»‘ dÆ° hiá»‡n táº¡i {0} Ï€, sá»‘ dÆ° khÃ´ng Ä‘á»§.\n\nBáº¡n cÃ³ muá»‘n náº¡p tiá»n khÃ´ng?",
          continue_game_tip:
            "Báº¡n cÃ³ thá»ƒ tiáº¿p tá»¥c trÃ² chÆ¡i hiá»‡n táº¡i nhÆ°ng khÃ´ng thá»ƒ khá»Ÿi Ä‘á»™ng láº¡i. Má»Ÿ khÃ³a tÃ­nh nÄƒng nÃ y sau khi náº¡p tiá»n.",

          // LiÃªn quan Ä‘áº¿n náº¡p tiá»n
          recharge_dialog_title: "ğŸ’° Náº¡p Tiá»n TÃ i Khoáº£n",
          payment_dialog_title: "ğŸ’³ Thanh ToÃ¡n Pi Coin",
          recharge_amount_display: "Náº¡p {0} Ï€",
          order_id_display: "MÃ£ Ä‘Æ¡n hÃ ng: {0}",
          custom_amount_error:
            "Vui lÃ²ng nháº­p sá»‘ tiá»n náº¡p há»£p lá»‡ (tá»‘i thiá»ƒu 0.1Ï€)",

          // Ná»™i dung chi tiáº¿t trung tÃ¢m cÃ¡ nhÃ¢n
          monthly_reward_reminder: "ğŸ† Nháº¯c Nhá»Ÿ ThÆ°á»Ÿng HÃ ng ThÃ¡ng",
          monthly_reward_desc:
            "50% lá»£i nhuáº­n hÃ ng thÃ¡ng sáº½ Ä‘Æ°á»£c phÃ¢n phá»‘i cho 3 ngÆ°á»i chÆ¡i hÃ ng Ä‘áº§u lÃ m pháº§n thÆ°á»Ÿng",

          // Giáº£i thÃ­ch chi tiáº¿t thÆ°á»Ÿng hÃ ng thÃ¡ng
          reward_settlement_detail:
            "Quyáº¿t toÃ¡n vÃ o giá» cuá»‘i cá»§a ngÃ y cuá»‘i má»—i thÃ¡ng",
          reward_pool_50_percent:
            "Quá»¹ thÆ°á»Ÿng lÃ  50% lá»£i nhuáº­n hÃ ng thÃ¡ng cá»§a ná»n táº£ng",
          reward_example_detail: "VÃ­ dá»¥: Lá»£i nhuáº­n thÃ¡ng 100Ï€, quá»¹ thÆ°á»Ÿng 50Ï€",
          reward_distribution_manual:
            "PhÃ¡t thÆ°á»Ÿng thá»§ cÃ´ng theo Ä‘á»‹a chá»‰ vÃ­ Ä‘Æ°á»£c lÆ°u trong trung tÃ¢m cÃ¡ nhÃ¢n",
          reward_wallet_valid:
            "NgÆ°á»i tháº¯ng giáº£i pháº£i Ä‘áº£m báº£o Ä‘á»‹a chá»‰ vÃ­ chÃ­nh xÃ¡c vÃ  há»£p lá»‡",
          reward_next_day: "ThÆ°á»Ÿng sáº½ Ä‘Æ°á»£c phÃ¡t vÃ o ngÃ y sau khi quyáº¿t toÃ¡n",
          reward_invalid_rollover:
            "Náº¿u Ä‘á»‹a chá»‰ vÃ­ khÃ´ng há»£p lá»‡, thÆ°á»Ÿng sáº½ Ä‘Æ°á»£c chuyá»ƒn sang thÃ¡ng sau",
          reward_example_calculation:
            "ğŸ’¡ VÃ­ dá»¥: Lá»£i nhuáº­n thÃ¡ng 100Ï€, quá»¹ thÆ°á»Ÿng 50Ï€",
          first_place_reward: "ğŸ¥‡Háº¡ng nháº¥t: 25Ï€",
          second_place_reward: "ğŸ¥ˆHáº¡ng nhÃ¬: 15Ï€",
          third_place_reward: "ğŸ¥‰Háº¡ng ba: 10Ï€",

          // Báº£ng xáº¿p háº¡ng toÃ n cáº§u
          global_ranking_title: "Báº£ng Xáº¿p Háº¡ng ToÃ n Cáº§u",
          ranking_subtitle: "ğŸ“Š Xáº¿p háº¡ng dá»±a trÃªn tá»· lá»‡ tháº¯ng hÃ ng thÃ¡ng",
          ranking_header_rank: "Háº¡ng",
          ranking_header_nickname: "Biá»‡t danh",
          ranking_header_games: "Tá»•ng tráº­n",
          ranking_header_winrate: "Tá»· lá»‡ tháº¯ng",
          current_rank_not_listed: "Xáº¿p háº¡ng hiá»‡n táº¡i: ChÆ°a cÃ³",
          current_rank_label: "Xáº¿p háº¡ng hiá»‡n táº¡i",
          not_listed: "ChÆ°a cÃ³",
          play_one_game_to_rank:
            "ğŸ® HoÃ n thÃ nh 1 tráº­n Ä‘á»ƒ lÃªn báº£ng xáº¿p háº¡ng! Báº¯t Ä‘áº§u hÃ nh trÃ¬nh Cá» CarÃ´ cá»§a báº¡n!",

          // NhÃ£n chi tiáº¿t trung tÃ¢m cÃ¡ nhÃ¢n
          personal_profile_section: "Há»“ sÆ¡ cÃ¡ nhÃ¢n",
          avatar_nickname_section: "Avatar vÃ  biá»‡t danh",
          click_avatar_edit: "Nháº¥p avatar Ä‘á»ƒ chá»‰nh sá»­a",
          click_nickname_edit: "Nháº¥p biá»‡t danh Ä‘á»ƒ chá»‰nh sá»­a",
          account_info_section: "ThÃ´ng tin tÃ i khoáº£n",
          game_stats_section: "Thá»‘ng kÃª trÃ² chÆ¡i",
          wallet_address_label: "Äá»‹a chá»‰ vÃ­",
          account_balance_display: "Sá»‘ dÆ° tÃ i khoáº£n",
          refresh_balance_btn: "LÃ m má»›i sá»‘ dÆ°",
          logout_btn: "ÄÄƒng xuáº¥t",

          // NhÃ£n thá»‘ng kÃª trÃ² chÆ¡i
          total_games_label: "Tá»•ng tráº­n",
          wins_label: "Tháº¯ng",
          win_rate_label: "Tá»· lá»‡ tháº¯ng",
          current_score_label: "Äiá»ƒm hiá»‡n táº¡i",
          current_rank_label: "Háº¡ng hiá»‡n táº¡i",

          // Tráº¡ng thÃ¡i truy váº¥n sá»‘ dÆ°
          balance_querying: "Äang truy váº¥n...",
          balance_query_failed_display: "Truy váº¥n tháº¥t báº¡i",
          balance_tooltip: "Tá»•ng náº¡p: {0} Ï€\nTá»•ng chi: {1} Ï€",

          // ThÃ´ng tin thanh toÃ¡n thÃ nh cÃ´ng
          payment_success_title: "Thanh toÃ¡n thÃ nh cÃ´ng",
          payment_success_message: "Thanh toÃ¡n thÃ nh cÃ´ng!",
          purchase_success_message: "Báº¡n Ä‘Ã£ mua thÃ nh cÃ´ng {0}",
          transaction_id: "ID giao dá»‹ch: {0}",

          // Gá»£i Ã½ nháº­p trung tÃ¢m cÃ¡ nhÃ¢n
          enter_avatar_emoji: "Nháº­p emoji avatar (vÃ­ dá»¥: ğŸ˜Š)",
          click_to_set_nickname: "Nháº¥p Ä‘á»ƒ Ä‘áº·t biá»‡t danh",
          enter_your_nickname: "Nháº­p biá»‡t danh cá»§a báº¡n",
          loading_text_display: "Äang táº£i...",
          refresh_balance_text: "ğŸ”„ LÃ m má»›i sá»‘ dÆ°",
          recharge_text: "ğŸ’° Náº¡p tiá»n",
          wallet_format_hint: "Äá»‹nh dáº¡ng Ä‘á»‹a chá»‰ vÃ­: 50 chá»¯ cÃ¡i viáº¿t hoa vÃ  sá»‘",
          save_wallet: "ğŸ’¾ LÆ°u",
          edit_wallet: "âœï¸ Chá»‰nh sá»­a",
          logout_account_text: "â†©ï¸ ÄÄƒng xuáº¥t tÃ i khoáº£n",

          // ThÃ´ng tin gá»£i Ã½ trung tÃ¢m cÃ¡ nhÃ¢n
          enter_avatar_hint: "Vui lÃ²ng nháº­p emoji avatar",
          single_emoji_hint: "Vui lÃ²ng nháº­p má»™t emoji duy nháº¥t",
          avatar_updated: "Avatar Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t!",
          nickname_updated: "Biá»‡t danh Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t!",
          enter_wallet_hint: "Vui lÃ²ng nháº­p Ä‘á»‹a chá»‰ vÃ­",
          wallet_length_error:
            "âŒ ÄÃ¢y khÃ´ng pháº£i lÃ  Ä‘á»‹a chá»‰ vÃ­ tiÃªu chuáº©n!\n\nÄá»™ dÃ i hiá»‡n táº¡i: {0} kÃ½ tá»±\nÄá»™ dÃ i tiÃªu chuáº©n: 50 kÃ½ tá»±\n\nVui lÃ²ng nháº­p Ä‘á»‹a chá»‰ vÃ­ Ä‘áº§y Ä‘á»§ 50 kÃ½ tá»±",
          wallet_format_error:
            "âŒ Lá»—i Ä‘á»‹nh dáº¡ng Ä‘á»‹a chá»‰ vÃ­!\n\nChá»‰ cho phÃ©p chá»¯ cÃ¡i viáº¿t hoa (A-Z) vÃ  sá»‘ (0-9)\nVui lÃ²ng kiá»ƒm tra ná»™i dung nháº­p",
          wallet_saved_success: "âœ… Äá»‹a chá»‰ vÃ­ Ä‘Ã£ Ä‘Æ°á»£c lÆ°u thÃ nh cÃ´ng!",
          edit_mode_title: "Cháº¿ Ä‘á»™ chá»‰nh sá»­a",
          edit_mode_message:
            "ğŸ’¡ Cháº¿ Ä‘á»™ chá»‰nh sá»­a Ä‘Ã£ Ä‘Æ°á»£c kÃ­ch hoáº¡t\n\nVui lÃ²ng sá»­a Ä‘á»•i Ä‘á»‹a chá»‰ vÃ­ vÃ  nháº¥p lÆ°u",
          success_title: "ThÃ nh cÃ´ng",
          error_title: "Lá»—i",

          // LiÃªn quan Ä‘áº¿n káº¿t thÃºc trÃ² chÆ¡i
          you_win: "ğŸ‰ ChÃºc má»«ng! Báº¡n tháº¯ng!",
          you_lose: "ğŸ˜” AI tháº¯ng, hÃ£y cá»‘ gáº¯ng láº§n sau!",
          draw: "ğŸ¤ HÃ²a!",
          game_over: "Káº¿t thÃºc trÃ² chÆ¡i",

          // NÃºt giao diá»‡n chÃ­nh
          global_ranking: "Báº£ng xáº¿p háº¡ng toÃ n cáº§u",
          ai_battle: "Äáº¥u vá»›i AI",
          personal_center: "Trung tÃ¢m cÃ¡ nhÃ¢n",
          game_instructions: "HÆ°á»›ng dáº«n trÃ² chÆ¡i",

          // Lá»—i káº¿t ná»‘i
          connection_failed: "Káº¿t ná»‘i tháº¥t báº¡i",
          connection_error_detail:
            "KhÃ´ng thá»ƒ káº¿t ná»‘i vá»›i Pi Network, vui lÃ²ng kiá»ƒm tra káº¿t ná»‘i máº¡ng vÃ  thá»­ láº¡i",
          login_with_pi: "ÄÄƒng nháº­p báº±ng tÃ i khoáº£n Pi",
          login_benefits_note:
            "ÄÄƒng nháº­p Ä‘á»ƒ táº­n hÆ°á»Ÿng Ä‘áº§y Ä‘á»§ tÃ­nh nÄƒng trÃ² chÆ¡i vÃ  pháº§n thÆ°á»Ÿng Pi coin",

          // Há»™p thoáº¡i náº¡p tiá»n
          recharge_amount_selection: "Lá»±a chá»n sá»‘ tiá»n náº¡p",
          custom_amount_placeholder: "Sá»‘ tiá»n tÃ¹y chá»‰nh",
          custom_recharge: "Náº¡p tiá»n tÃ¹y chá»‰nh",
          cancel: "Há»§y",

          // ThÃ´ng bÃ¡o lá»—i
          please_login_first: "Vui lÃ²ng Ä‘Äƒng nháº­p trÆ°á»›c",
          create_order_failed: "Táº¡o Ä‘Æ¡n hÃ ng tháº¥t báº¡i",
          network_error_retry: "Lá»—i máº¡ng, vui lÃ²ng thá»­ láº¡i sau",
          pi_login_failed: "ÄÄƒng nháº­p Pi Network tháº¥t báº¡i",
          login_error: "Lá»—i xáº£y ra trong quÃ¡ trÃ¬nh Ä‘Äƒng nháº­p",
          pi_sdk_not_loaded:
            "Pi Network SDK chÆ°a Ä‘Æ°á»£c táº£i, khÃ´ng thá»ƒ sá»­ dá»¥ng tÃ­nh nÄƒng thanh toÃ¡n",
          create_payment_failed: "Táº¡o thanh toÃ¡n tháº¥t báº¡i",

          // Há»™p thoáº¡i thanh toÃ¡n
          payment_method: "PhÆ°Æ¡ng thá»©c thanh toÃ¡n",
          pi_wallet_transfer: "ğŸ“± Chuyá»ƒn khoáº£n vÃ­ Pi",
          transfer_instruction:
            "Vui lÃ²ng sá»­ dá»¥ng vÃ­ Pi Ä‘á»ƒ chuyá»ƒn khoáº£n Ä‘áº¿n Ä‘á»‹a chá»‰ sau:",
          transfer_amount_warning:
            "âš ï¸ Vui lÃ²ng Ä‘áº£m báº£o sá»‘ tiá»n chuyá»ƒn khoáº£n lÃ  <strong>{0} Ï€</strong>",
          transfer_memo: "Ghi chÃº chuyá»ƒn khoáº£n: {0}",
          transaction_hash_placeholder: "Vui lÃ²ng nháº­p hash giao dá»‹ch",
          transaction_hash_instruction:
            "Sau khi hoÃ n táº¥t chuyá»ƒn khoáº£n, vui lÃ²ng sao chÃ©p hash giao dá»‹ch tá»« vÃ­ Pi vÃ  dÃ¡n vÃ o Ã´ nháº­p á»Ÿ trÃªn",
          verify_payment: "XÃ¡c minh thanh toÃ¡n",
          order_validity: "Thá»i háº¡n Ä‘Æ¡n hÃ ng: 30 phÃºt",

          // XÃ¡c minh thanh toÃ¡n
          please_enter_transaction_hash: "Vui lÃ²ng nháº­p hash giao dá»‹ch",
          recharge_success: "Náº¡p tiá»n thÃ nh cÃ´ng",
          recharge_success_message:
            "ChÃºc má»«ng! Náº¡p {0} Ï€ thÃ nh cÃ´ng!\nSá»‘ dÆ° hiá»‡n táº¡i: {1} Ï€",
          verification_failed: "XÃ¡c minh tháº¥t báº¡i",

          // XÃ¡c nháº­n luá»“ng trÃ² chÆ¡i
          timeout_game_over: "â° Háº¿t thá»i gian suy nghÄ©, trÃ² chÆ¡i tháº¥t báº¡i!",
          login_success: "ÄÄƒng nháº­p thÃ nh cÃ´ng",
          welcome_user: "ChÃ o má»«ng, {0}",
          abandon_current_game: "Bá» cuá»™c trÃ² chÆ¡i hiá»‡n táº¡i",
          abandon_game_warning:
            "TrÃ² chÆ¡i hiá»‡n táº¡i Ä‘ang diá»…n ra, khá»Ÿi Ä‘á»™ng láº¡i sáº½ Ä‘Æ°á»£c ghi nháº­n lÃ  thua.\n\nBáº¡n cÃ³ cháº¯c cháº¯n muá»‘n bá» cuá»™c trÃ² chÆ¡i hiá»‡n táº¡i khÃ´ng?",
          restart_game: "Khá»Ÿi Ä‘á»™ng láº¡i trÃ² chÆ¡i",
          restart_game_confirm: "Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n khá»Ÿi Ä‘á»™ng láº¡i khÃ´ng?",
          abandon_game_return_warning:
            "TrÃ² chÆ¡i hiá»‡n táº¡i Ä‘ang diá»…n ra, quay vá» menu chÃ­nh sáº½ Ä‘Æ°á»£c ghi nháº­n lÃ  thua.\n\nBáº¡n cÃ³ cháº¯c cháº¯n muá»‘n bá» cuá»™c trÃ² chÆ¡i hiá»‡n táº¡i khÃ´ng?",

          // Äá»‹nh dáº¡ng hiá»ƒn thá»‹ tháº¯ng thua
          wins_losses_format: "({0}T {1}B)",
          monthly_games: "TrÃ² chÆ¡i hÃ ng thÃ¡ng",
          play_again: "ChÆ¡i láº¡i",
          view_leaderboard: "Xem báº£ng xáº¿p háº¡ng",
          login_now: "ÄÄƒng nháº­p ngay",
          guest_mode: "Cháº¿ Ä‘á»™ khÃ¡ch",
          guest_mode_desc:
            "Báº¡n hiá»‡n Ä‘ang chÆ¡i vá»›i tÆ° cÃ¡ch khÃ¡ch, káº¿t quáº£ trÃ² chÆ¡i sáº½ khÃ´ng Ä‘Æ°á»£c ghi vÃ o báº£ng xáº¿p háº¡ng.",
          login_benefits: "Lá»£i Ã­ch sau khi Ä‘Äƒng nháº­p:",
          benefit_stats: "â€¢ ğŸ“Š Thá»‘ng kÃª trÃ² chÆ¡i",
          benefit_leaderboard: "â€¢ ğŸ† Tham gia cáº¡nh tranh báº£ng xáº¿p háº¡ng",
          benefit_pi_service: "â€¢ ğŸ’° Dá»‹ch vá»¥ giÃ¡ trá»‹ gia tÄƒng Pi coin",
          benefit_monthly_rewards: "â€¢ ğŸ Hoáº¡t Ä‘á»™ng thÆ°á»Ÿng hÃ ng thÃ¡ng",
          rank_position: "#{0}",
        },
      };

      // å½“å‰è¯­è¨€
      let currentLanguage = localStorage.getItem("selectedLanguage") || "zh";

      // ç¿»è¯‘å‡½æ•°
      function t(key, ...args) {
        let text =
          LANGUAGES[currentLanguage]?.[key] || LANGUAGES["zh"][key] || key;

        // å¤„ç†å‚æ•°æ›¿æ¢ {0}, {1}, etc.
        if (args.length > 0) {
          args.forEach((arg, index) => {
            text = text.replace(`{${index}}`, arg);
          });
        }

        return text;
      }

      // æ›´æ–°é¡µé¢æ–‡æœ¬
      function updatePageTexts() {
        // æ›´æ–°æ‰€æœ‰å¸¦æœ‰ data-i18n å±æ€§çš„å…ƒç´ 
        document.querySelectorAll("[data-i18n]").forEach((element) => {
          const key = element.getAttribute("data-i18n");
          const translatedText = t(key);

          // ç‰¹æ®Šå¤„ç†ï¼šä¿æŒ pinetwork ä¸ºè‹±æ–‡
          const finalText = translatedText.replace(/pinetwork/gi, "pinetwork");

          if (element.tagName === "INPUT" && element.type === "text") {
            element.placeholder = finalText;
          } else {
            element.textContent = finalText;
          }
        });

        // æ›´æ–°è¯­è¨€é€‰æ‹©å™¨
        const languageSelector = document.getElementById("language-selector");
        if (languageSelector) {
          languageSelector.value = currentLanguage;
        }

        // æ›´æ–°æ¸¸æˆç•Œé¢çš„è¯­è¨€é€‰æ‹©å™¨
        const languageSelectorGame = document.getElementById(
          "language-selector-game"
        );
        if (languageSelectorGame) {
          languageSelectorGame.value = currentLanguage;
        }

        // åŠ¨æ€è°ƒæ•´å‰¯æ ‡é¢˜å­—ä½“å¤§å°
        adjustSubtitleFontSize();
      }

      // åŠ¨æ€è°ƒæ•´å‰¯æ ‡é¢˜å­—ä½“å¤§å°ä»¥é€‚åº”ä¸åŒè¯­è¨€
      function adjustSubtitleFontSize() {
        const subtitle = document.querySelector(".game-subtitle");
        if (!subtitle) return;

        // é‡ç½®å­—ä½“å¤§å°ï¼Œç¡®ä¿ä½¿ç”¨CSSé»˜è®¤å€¼
        subtitle.style.fontSize = "";

        // å¼ºåˆ¶é‡æ–°è®¡ç®—å¸ƒå±€
        subtitle.offsetHeight;

        // ä¸è¿›è¡Œä»»ä½•å®½åº¦ç›¸å…³çš„è®¡ç®—ï¼Œé¿å…å½±å“å¸ƒå±€
        // è®©CSSçš„clamp()å‡½æ•°è‡ªåŠ¨å¤„ç†å­—ä½“å¤§å°
      }

      // åˆ‡æ¢è¯­è¨€
      function changeLanguage(lang) {
        currentLanguage = lang;
        localStorage.setItem("selectedLanguage", lang);
        updatePageTexts();

        // å¦‚æœæœ‰åŠ¨æ€å†…å®¹ï¼Œä¹Ÿéœ€è¦æ›´æ–°
        updateDynamicContent();
      }

      // æ›´æ–°åŠ¨æ€å†…å®¹ï¼ˆæ¸¸æˆä¸­çš„æ–‡æœ¬ï¼‰
      function updateDynamicContent() {
        // æ›´æ–°æ¸¸æˆçŠ¶æ€æ˜¾ç¤º
        const currentPlayerDisplay = document.getElementById(
          "current-player-display"
        );
        if (currentPlayerDisplay && typeof aiCurrentPlayer !== "undefined") {
          if (aiCurrentPlayer === "black") {
            currentPlayerDisplay.textContent = t("your_turn");
          } else {
            currentPlayerDisplay.textContent = t("ai_thinking");
          }
        }

        // æ›´æ–°ä¸»é¡µç™»å½•/è¿›å…¥æ¸¸æˆæŒ‰é’®çš„æ–‡æœ¬
        updateMainPageButtonState();

        // æ›´æ–°å…¶ä»–åŠ¨æ€å…ƒç´ ...
      }

      // å…¨å±€å˜é‡
      let currentUser = null;
      let isLoading = false;
      let currentGame = null;

      // åç«¯APIé…ç½® - æ ¹æ®ç¯å¢ƒè‡ªåŠ¨æ£€æµ‹
      const API_BASE_URL = (() => {
        const hostname = window.location.hostname;
        const protocol = window.location.protocol;

        if (hostname === "localhost" || hostname === "127.0.0.1") {
          // æœ¬åœ°å¼€å‘ç¯å¢ƒ
          return "http://localhost:3001";
        } else if (hostname === "mrsong-ai.github.io") {
          // GitHub Pages + é˜¿é‡Œäº‘åç«¯
          return "http://47.79.240.129:3001";
        } else {
          // é˜¿é‡Œäº‘è‡ªéƒ¨ç½²ç¯å¢ƒ - ä½¿ç”¨ç›¸åŒåŸŸåçš„/apiè·¯å¾„
          return `${protocol}//${hostname}/api`;
        }
      })();

      // ç”¨æˆ·ç»Ÿè®¡æ•°æ®
      let userStats = null;

      // æ•°æ®åˆ·æ–°ç›¸å…³å˜é‡
      let leaderboardRefreshInterval = null;
      let lastDataRefreshTime = 0;
      const DATA_REFRESH_COOLDOWN = 5000; // 5ç§’å†·å´æ—¶é—´

      // æ£€æŸ¥Pi SDKæ˜¯å¦å¯ç”¨
      function isPiAvailable() {
        return typeof window.Pi !== "undefined";
      }

      // åˆå§‹åŒ–é¡µé¢
      function initializePage() {
        // ç§»é™¤Pi Browseræ£€æŸ¥ï¼Œå§‹ç»ˆå…è®¸ä½¿ç”¨
        const loginBtn = document.getElementById("login-btn");
        if (loginBtn) {
          loginBtn.disabled = false;
        }

        // åˆå§‹åŒ–å¤šè¯­è¨€
        updatePageTexts();

        // æ·»åŠ é’±åŒ…åœ°å€è¾“å…¥éªŒè¯
        setupWalletAddressValidation();

        // æ£€æŸ¥å¹¶æ¢å¤ç™»å½•çŠ¶æ€
        checkAndRestoreLoginState();

        // å»¶è¿Ÿæ›´æ–°ä¸»é¡µæŒ‰é’®çŠ¶æ€ï¼Œç¡®ä¿DOMå®Œå…¨åŠ è½½
        setTimeout(() => {
          updateMainPageButtonState();
        }, 200);

        // æ³¨é‡Šæ‰æµ‹è¯•æ•°æ®åˆ›å»ºï¼Œä½¿ç”¨çœŸå®æ•°æ®
        // å¦‚æœéœ€è¦æµ‹è¯•ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰‹åŠ¨è®¾ç½®æ•°æ®
      }

      // æ£€æŸ¥å¹¶æ¢å¤ç™»å½•çŠ¶æ€
      async function checkAndRestoreLoginState() {
        const restored = restoreLoginState();
        if (restored) {
          // å¦‚æœæˆåŠŸæ¢å¤ç™»å½•çŠ¶æ€ï¼Œåªæ›´æ–°æŒ‰é’®çŠ¶æ€ï¼Œä¸è‡ªåŠ¨è¿›å…¥æ¸¸æˆ
          try {
            // å°è¯•åˆ·æ–°åç«¯æ•°æ®ï¼ˆå¦‚æœå¯ç”¨ï¼‰
            if (currentUser.accessToken) {
              await authenticateWithBackend(currentUser.accessToken);
            }
          } catch (error) {
            console.error("è‡ªåŠ¨ç™»å½•æ—¶åç«¯éªŒè¯å¤±è´¥:", error);
            // å³ä½¿åç«¯å¤±è´¥ï¼Œä¹Ÿä¿æŒç™»å½•çŠ¶æ€ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®
          }

          // å»¶è¿Ÿæ›´æ–°æŒ‰é’®çŠ¶æ€ï¼Œç¡®ä¿DOMå·²åŠ è½½
          setTimeout(() => {
            updateMainPageButtonState();
          }, 100);
        }
      }

      // è®¾ç½®é’±åŒ…åœ°å€è¾“å…¥éªŒè¯
      function setupWalletAddressValidation() {
        // ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼Œå› ä¸ºé’±åŒ…è¾“å…¥æ¡†å¯èƒ½åœ¨æ¨¡æ€æ¡†ä¸­åŠ¨æ€åˆ›å»º
        document.addEventListener("input", function (e) {
          if (e.target && e.target.id === "wallet-address-input") {
            let value = e.target.value;
            // åªå…è®¸å¤§å†™å­—æ¯å’Œæ•°å­—
            value = value.replace(/[^A-Z0-9]/g, "");
            // é™åˆ¶é•¿åº¦ä¸º50ä½
            if (value.length > 50) {
              value = value.substring(0, 50);
            }
            e.target.value = value;

            // æ›´æ–°å­—ç¬¦è®¡æ•°
            updateWalletCharCount(value.length);
          }
        });
      }

      // æ›´æ–°é’±åŒ…åœ°å€å­—ç¬¦è®¡æ•°
      function updateWalletCharCount(length) {
        const countElement = document.getElementById("wallet-char-count");
        if (countElement) {
          countElement.textContent = `${length}/50`;
          // æ ¹æ®é•¿åº¦æ”¹å˜é¢œè‰²
          if (length === 50) {
            countElement.style.color = "#28a745"; // ç»¿è‰²
          } else if (length > 40) {
            countElement.style.color = "#ffc107"; // é»„è‰²
          } else {
            countElement.style.color = "#6c757d"; // ç°è‰²
          }
        }
      }

      // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
      function showError(message) {
        const errorMessage = document.getElementById("error-message");
        const errorText = document.getElementById("error-text");
        errorText.textContent = "âŒ " + message;
        errorMessage.style.display = "block";
      }

      // éšè—é”™è¯¯ä¿¡æ¯
      function hideError() {
        const errorMessage = document.getElementById("error-message");
        errorMessage.style.display = "none";
      }

      // Pi Network ç™»å½•å¤„ç†
      async function handleSignIn() {
        if (isLoading) return;

        // å¦‚æœå·²ç»ç™»å½•ï¼Œç›´æ¥è¿›å…¥æ¸¸æˆ
        if (currentUser) {
          showSimpleGameScreen();
          return;
        }

        isLoading = true;
        const loginBtn = document.getElementById("login-btn");
        loginBtn.disabled = true;

        // æ£€æŸ¥æ˜¯å¦åœ¨Pi Browserä¸­æ¥æ˜¾ç¤ºä¸åŒçš„æç¤º
        const isInPiBrowser = isPiAvailable();
        const loadingText = isInPiBrowser
          ? t("connecting_pi_network")
          : t("entering_game");

        // å®Œå…¨æ›¿æ¢æŒ‰é’®å†…å®¹ä¸ºè¿æ¥çŠ¶æ€ï¼Œéšè—åŸæœ‰çš„ç™»å½•æ–‡æœ¬
        loginBtn.innerHTML = `
                <div class="loading">
                    <div class="spinner"></div>
                    <span>${loadingText}</span>
                </div>
            `;
        loginBtn.classList.add('loading');

        try {
          hideError();

          // æ£€æŸ¥æ˜¯å¦åœ¨Pi Browserä¸­
          if (isPiAvailable()) {
            // çœŸå®çš„Pi Networkç™»å½•
            const scopes = ["username", "payments"];

            // è®¾ç½®è¶…æ—¶æœºåˆ¶ï¼Œé¿å…æ— é™ç­‰å¾…
            const authPromise = Pi.authenticate(
              scopes,
              onIncompletePaymentFound
            );
            const timeoutPromise = new Promise((_, reject) =>
              setTimeout(() => reject(new Error("Pi Networkè¿æ¥è¶…æ—¶")), 10000)
            );

            const authResult = await Promise.race([
              authPromise,
              timeoutPromise,
            ]);

            if (authResult.accessToken) {
              currentUser = authResult.user;
              currentUser.accessToken = authResult.accessToken; // ä¿å­˜è®¿é—®ä»¤ç‰Œ

              // ä¿å­˜ç™»å½•çŠ¶æ€åˆ°æœ¬åœ°å­˜å‚¨
              saveLoginState(currentUser);

              // å‘åç«¯éªŒè¯ç”¨æˆ·å¹¶è·å–ç»Ÿè®¡æ•°æ®
              await authenticateWithBackend(authResult.accessToken);

              // æ›´æ–°ä¸»é¡µæŒ‰é’®çŠ¶æ€
              updateMainPageButtonState();

              // ç¡®ä¿ç”¨æˆ·æ•°æ®è¢«ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
              if (userStats) {
                saveUserGameDataToSpecificStorage();
                refreshLocalLeaderboardData();
              }

              // è§¦å‘æ•°æ®åˆ·æ–°ï¼ˆå»¶è¿Ÿæ‰§è¡Œï¼Œç¡®ä¿åç«¯æ•°æ®å·²åŒæ­¥ï¼‰
              setTimeout(() => {
                triggerDataRefresh();
              }, 2000);

              // ç™»å½•æˆåŠŸåä¿æŒåœ¨å½“å‰ç•Œé¢ï¼Œä¸è‡ªåŠ¨è·³è½¬åˆ°æ¸¸æˆ
              showCustomAlert(
                t("login_success"),
                t("welcome_user", currentUser.username)
              );
            } else {
              showError(t("pi_login_failed"));
            }
          } else {
            // Pi SDKä¸å¯ç”¨ï¼Œæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
            showError(t("pi_sdk_not_available"));
          }
        } catch (error) {
          console.error("Sign in failed:", error);
          showError(t("login_error") + ": " + error.message);
        } finally {
          isLoading = false;
          loginBtn.disabled = false;
          loginBtn.classList.remove('loading');

          // æ¢å¤æŒ‰é’®åŸå§‹çŠ¶æ€
          if (!currentUser) {
            loginBtn.innerHTML = `
              <span class="pi-icon">Ï€</span>
              <span data-i18n="login_with_pi">${t("login_with_pi")}</span>
            `;
          }
        }
      }

      // åç«¯è®¤è¯å‡½æ•°
      async function authenticateWithBackend(accessToken) {
        try {
          const response = await fetch(`${API_BASE_URL}/api/auth/login`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              accessToken,
              userInfo: {
                uid: currentUser.uid,
                username: currentUser.username,
              },
            }),
          });

          if (response.ok) {
            const data = await response.json();
            // ä¿å­˜ç”¨æˆ·IDç”¨äºåç»­APIè°ƒç”¨
            currentUser.piUserId =
              data.user.piUserId || data.user.uid || currentUser.uid;

            // å…ˆå°è¯•æ¢å¤ç”¨æˆ·ä¸“å±çš„æ¸¸æˆæ•°æ®
            const hasLocalData = restoreUserGameData();

            // æ•°æ®å®Œæ•´æ€§æ£€æŸ¥ï¼šæ¯”è¾ƒæœ¬åœ°æ•°æ®å’Œåç«¯æ•°æ®
            const backendStats = data.user.stats;
            if (
              hasLocalData &&
              userStats &&
              userStats.totalGames > 0 &&
              backendStats.totalGames === 0
            ) {
              console.log(
                "[ç™»å½•æ•°æ®æ¢å¤] æ£€æµ‹åˆ°åç«¯æ•°æ®å¼‚å¸¸ï¼Œä¿æŒä½¿ç”¨æœ¬åœ°æ•°æ®"
              );
              // å¼‚æ­¥åŒæ­¥æœ¬åœ°æ•°æ®åˆ°åç«¯
              setTimeout(() => {
                syncLocalDataToBackend(userStats);
              }, 1000);
            } else if (!userStats || userStats.totalGames === 0) {
              // å¦‚æœæ²¡æœ‰æœ¬åœ°æ•°æ®ï¼Œæ‰ä½¿ç”¨åç«¯è¿”å›çš„åˆå§‹æ•°æ®
              userStats = backendStats;
            }
          } else {
            // å¦‚æœåç«¯è®¤è¯å¤±è´¥ï¼Œä½¿ç”¨uidä½œä¸ºpiUserId
            currentUser.piUserId = currentUser.uid;

            // å°è¯•æ¢å¤æœ¬åœ°æ•°æ®
            const restored = restoreUserGameData();
            if (!restored) {
              // å¦‚æœæ²¡æœ‰å¯æ¢å¤çš„æ•°æ®ï¼Œåˆ›å»ºé»˜è®¤æ•°æ®
              createDefaultUserStats();
            }
          }
        } catch (error) {
          // å¦‚æœåç«¯è¿æ¥å¤±è´¥ï¼Œä½¿ç”¨uidä½œä¸ºpiUserId
          currentUser.piUserId = currentUser.uid;

          // å°è¯•æ¢å¤æœ¬åœ°æ•°æ®
          const restored = restoreUserGameData();
          if (!restored) {
            // å¦‚æœæ²¡æœ‰å¯æ¢å¤çš„æ•°æ®ï¼Œåˆ›å»ºé»˜è®¤æ•°æ®
            createDefaultUserStats();
          }
        }
      }

      // æ¢å¤ç”¨æˆ·ä¸“å±çš„æ¸¸æˆæ•°æ®
      function restoreUserGameData() {
        if (!currentUser) return;

        const userId = currentUser.piUserId || currentUser.uid;
        const userDataKey = `piGomokuUserData_${userId}`;
        const savedUserData = localStorage.getItem(userDataKey);

        if (savedUserData) {
          try {
            const userData = JSON.parse(savedUserData);
            // å¦‚æœæ‰¾åˆ°ç”¨æˆ·ä¸“å±æ•°æ®ï¼Œä½¿ç”¨å®ƒ
            if (userData.gameStats) {
              userStats = userData.gameStats;
              // æ›´æ–°ç”¨æˆ·åä¸ºæœ€æ–°çš„
              userStats.username =
                currentUser.username || userStats.username || "Piç”¨æˆ·";

              // åŒæ—¶æ›´æ–°é€šç”¨å­˜å‚¨ï¼Œä¿æŒå…¼å®¹æ€§
              localStorage.setItem(
                "piGomokuGameStats",
                JSON.stringify(userStats)
              );
              return true; // è¡¨ç¤ºæˆåŠŸæ¢å¤äº†æ•°æ®
            }
          } catch (error) {
            console.error("æ¢å¤ç”¨æˆ·æ•°æ®å¤±è´¥:", error);
          }
        }

        // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç”¨æˆ·ä¸“å±æ•°æ®ï¼Œå°è¯•ä»é€šç”¨å­˜å‚¨æ¢å¤
        const generalStats = localStorage.getItem("piGomokuGameStats");
        if (generalStats) {
          try {
            const stats = JSON.parse(generalStats);
            if (stats && stats.totalGames > 0) {
              userStats = stats;
              userStats.username =
                currentUser.username || userStats.username || "Piç”¨æˆ·";
              return true; // è¡¨ç¤ºæˆåŠŸæ¢å¤äº†æ•°æ®
            }
          } catch (error) {
            console.error("æ¢å¤é€šç”¨æ•°æ®å¤±è´¥:", error);
          }
        }

        return false; // è¡¨ç¤ºæ²¡æœ‰æ‰¾åˆ°å¯æ¢å¤çš„æ•°æ®
      }

      // ä»æœ¬åœ°å­˜å‚¨åˆå§‹åŒ–ç”¨æˆ·æ•°æ®
      function initializeUserStatsFromLocal() {
        const localStats = localStorage.getItem("piGomokuGameStats");

        if (localStats) {
          try {
            userStats = JSON.parse(localStats);
            // ç¡®ä¿ç”¨æˆ·åæ˜¯æœ€æ–°çš„
            userStats.username =
              currentUser.username || userStats.username || "Piç”¨æˆ·";
          } catch (error) {
            console.error("è§£ææœ¬åœ°æ•°æ®å¤±è´¥:", error);
            createDefaultUserStats();
          }
        } else {
          createDefaultUserStats();
        }
      }

      // åˆ›å»ºé»˜è®¤ç”¨æˆ·ç»Ÿè®¡æ•°æ®
      function createDefaultUserStats() {
        userStats = {
          username: currentUser.username || "Piç”¨æˆ·",
          totalGames: 0,
          wins: 0,
          losses: 0,
          draws: 0,
          winRate: 0,
          rank: 0,
        };
        // ç«‹å³ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        localStorage.setItem("piGomokuGameStats", JSON.stringify(userStats));
      }

      // è·å–å½“å‰æ˜¾ç¤ºçš„ç”¨æˆ·åï¼ˆä¸ä¸ªäººä¸­å¿ƒä¿æŒä¸€è‡´ï¼‰
      function getCurrentDisplayUsername() {
        if (currentUser && userStats) {
          // Piç™»å½•çŠ¶æ€ï¼šä¼˜å…ˆä½¿ç”¨Piç”¨æˆ·åï¼Œç„¶åæ˜¯userStatsä¸­çš„ç”¨æˆ·å
          return currentUser.username || userStats.username || "Piç”¨æˆ·";
        } else {
          // æœªç™»å½•çŠ¶æ€ï¼šä½¿ç”¨æœ¬åœ°æ˜µç§°
          return localStorage.getItem("userNickname") || "æ¸¸å®¢";
        }
      }

      // ä¿å­˜ç™»å½•çŠ¶æ€åˆ°æœ¬åœ°å­˜å‚¨
      function saveLoginState(user) {
        const loginState = {
          user: user,
          timestamp: Date.now(),
          expiresAt: Date.now() + 7 * 24 * 60 * 60 * 1000, // 7å¤©è¿‡æœŸ
        };
        localStorage.setItem("piGomokuLoginState", JSON.stringify(loginState));
      }

      // æ¢å¤ç™»å½•çŠ¶æ€
      function restoreLoginState() {
        try {
          const savedState = localStorage.getItem("piGomokuLoginState");
          if (!savedState) return false;

          const loginState = JSON.parse(savedState);

          // æ£€æŸ¥æ˜¯å¦è¿‡æœŸ
          if (Date.now() > loginState.expiresAt) {
            localStorage.removeItem("piGomokuLoginState");
            return false;
          }

          // æ¢å¤ç”¨æˆ·çŠ¶æ€
          currentUser = loginState.user;

          // æ¢å¤ç”¨æˆ·æ•°æ®
          const restored = restoreUserGameData();
          if (!restored) {
            createDefaultUserStats();
          }

          return true;
        } catch (error) {
          console.error("æ¢å¤ç™»å½•çŠ¶æ€å¤±è´¥:", error);
          localStorage.removeItem("piGomokuLoginState");
          return false;
        }
      }

      // æ¸…é™¤ç™»å½•çŠ¶æ€
      function clearLoginState() {
        localStorage.removeItem("piGomokuLoginState");
      }

      // æ›´æ–°ä¸»é¡µæŒ‰é’®æ˜¾ç¤ºçŠ¶æ€
      function updateMainPageButtonState() {
        const loginBtn = document.getElementById("login-btn");
        if (!loginBtn) {
          return;
        }

        if (currentUser) {
          // å·²ç™»å½•çŠ¶æ€ï¼šæ˜¾ç¤º"è¿›å…¥æ¸¸æˆ"æŒ‰é’®
          loginBtn.innerHTML = `
            <span class="pi-icon">ğŸ®</span>
            <span>${t("enter_game")}</span>
          `;
          loginBtn.onclick = () => showSimpleGameScreen();
        } else {
          // æœªç™»å½•çŠ¶æ€ï¼šæ˜¾ç¤º"ç™»å½•"æŒ‰é’®
          loginBtn.innerHTML = `
            <span class="pi-icon">Ï€</span>
            <span data-i18n="login_with_pi">${t("login_with_pi")}</span>
          `;
          loginBtn.onclick = handleSignIn;
        }
      }

      // Pi SDKä¸å¯ç”¨æ—¶çš„å¤„ç†
      function handlePiSdkUnavailable() {
        showCustomAlert(
          t("error_title"),
          t("pi_sdk_required_message")
        );
      }

      // å¤„ç†æœªå®Œæˆçš„æ”¯ä»˜
      function onIncompletePaymentFound(payment) {
        console.log("å‘ç°æœªå®Œæˆçš„æ”¯ä»˜:", payment);
        // è¿™é‡Œå¯ä»¥å¤„ç†æœªå®Œæˆçš„æ”¯ä»˜ï¼Œæ¯”å¦‚é‡æ–°éªŒè¯
        handleIncompletePayment(payment);
      }

      // Piæ”¯ä»˜åŠŸèƒ½ - è´­ä¹°é“å…·
      async function buyItem(itemType, amount) {
        if (!currentUser) {
          showError(t("please_login_first"));
          return;
        }

        if (!isPiAvailable()) {
          showError(t("pi_sdk_not_loaded"));
          return;
        }

        try {
          // æ˜¾ç¤ºæ”¯ä»˜ç¡®è®¤
          const confirmed = await showPaymentConfirm(itemType, amount);
          if (!confirmed) return;

          // åˆ›å»ºæ”¯ä»˜è¯·æ±‚
          const paymentData = {
            amount: amount,
            memo: `è´­ä¹°${getItemName(itemType)}`,
            metadata: {
              itemType: itemType,
              userId: currentUser.uid,
              timestamp: Date.now(),
            },
          };

          // å‘èµ·Piæ”¯ä»˜
          const payment = await Pi.createPayment(paymentData, {
            onReadyForServerApproval: async function (paymentId) {
              console.log("æ”¯ä»˜ç­‰å¾…æœåŠ¡å™¨å®¡æ‰¹:", paymentId);
              try {
                const response = await fetch(
                  `${API_BASE_URL}/api/payment/approve`,
                  {
                    method: "POST",
                    headers: {
                      "Content-Type": "application/json",
                      Authorization: `Bearer ${currentUser.accessToken}`,
                    },
                    body: JSON.stringify({ paymentId, paymentData }),
                  }
                );

                if (response.ok) {
                  console.log("æ”¯ä»˜å®¡æ‰¹æˆåŠŸ");
                } else {
                  console.error("æ”¯ä»˜å®¡æ‰¹å¤±è´¥");
                  // å³ä½¿åç«¯å¤±è´¥ï¼Œä¹Ÿç»§ç»­æµç¨‹ï¼ˆç”¨äºæµ‹è¯•ï¼‰
                }
              } catch (error) {
                console.error("æ”¯ä»˜å®¡æ‰¹è¯·æ±‚å¤±è´¥:", error);
                // å³ä½¿åç«¯å¤±è´¥ï¼Œä¹Ÿç»§ç»­æµç¨‹ï¼ˆç”¨äºæµ‹è¯•ï¼‰
              }
            },
            onReadyForServerCompletion: async function (paymentId, txid) {
              console.log("æ”¯ä»˜ç­‰å¾…æœåŠ¡å™¨å®Œæˆ:", paymentId, txid);
              try {
                const response = await fetch(
                  `${API_BASE_URL}/api/payment/complete`,
                  {
                    method: "POST",
                    headers: {
                      "Content-Type": "application/json",
                      Authorization: `Bearer ${currentUser.accessToken}`,
                    },
                    body: JSON.stringify({ paymentId, txid, paymentData }),
                  }
                );

                if (response.ok) {
                  const data = await response.json();
                  console.log("æ”¯ä»˜å®ŒæˆéªŒè¯æˆåŠŸ:", data);
                } else {
                  console.error("æ”¯ä»˜å®ŒæˆéªŒè¯å¤±è´¥");
                }
              } catch (error) {
                console.error("æ”¯ä»˜å®Œæˆè¯·æ±‚å¤±è´¥:", error);
              }

              // æ˜¾ç¤ºæ”¯ä»˜æˆåŠŸæ¶ˆæ¯
              setTimeout(() => {
                showCustomModal(
                  "æ”¯ä»˜æˆåŠŸ",
                  `
                    <div style="text-align: center;">
                        <div style="font-size: 3em; margin-bottom: 15px;">âœ…</div>
                        <h3 style="color: #28a745;">æ”¯ä»˜æˆåŠŸï¼</h3>
                        <p style="color: #666; margin: 15px 0;">
                            æ‚¨å·²æˆåŠŸè´­ä¹° ${getItemName(
                              paymentData.metadata.itemType
                            )}
                        </p>
                        <p style="color: #007bff; font-weight: bold;">
                            äº¤æ˜“ID: ${txid.substring(0, 16)}...
                        </p>
                    </div>
                  `
                );
              }, 1000);
            },
            onCancel: function (paymentId) {
              console.log("æ”¯ä»˜è¢«å–æ¶ˆ:", paymentId);
              showError(t("payment_cancelled"));
            },
            onError: function (error, payment) {
              console.error("æ”¯ä»˜é”™è¯¯:", error, payment);
              showError(t("payment_failed") + ": " + error.message);
            },
          });
        } catch (error) {
          console.error("åˆ›å»ºæ”¯ä»˜å¤±è´¥:", error);
          showError(t("create_payment_failed") + ": " + error.message);
        }
      }

      // è·å–é“å…·åç§°
      function getItemName(itemType) {
        const keys = {
          hint: "item_hint",
          undo: "item_undo",
          theme: "item_theme",
          vip: "item_vip",
        };
        return t(keys[itemType] || "item_unknown");
      }

      // æ˜¾ç¤ºæ”¯ä»˜ç¡®è®¤å¯¹è¯æ¡†
      function showPaymentConfirm(itemType, amount) {
        return new Promise((resolve) => {
          const itemName = getItemName(itemType);
          showCustomModal(
            t("confirm_purchase"),
            `
                    <div style="text-align: center;">
                        <div style="font-size: 3em; margin-bottom: 15px;">ğŸ’°</div>
                        <h3 style="color: #333; margin-bottom: 15px;">${t(
                          "confirm_purchase"
                        )}</h3>
                        <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                            <p style="font-size: 1.1em; margin-bottom: 10px; color: #333;">
                                <strong>${itemName}</strong>
                            </p>
                            <p style="font-size: 1.3em; color: #007bff; font-weight: bold;">
                                ${t("payment_amount", amount)}
                            </p>
                        </div>
                        <div style="display: flex; gap: 10px; justify-content: center;">
                            <button onclick="closeNewModal(); resolve(false)" style="background: #6c757d; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                                ${t("cancel")}
                            </button>
                            <button onclick="closeNewModal(); resolve(true)" style="background: #007bff; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                                ${t("confirm_payment")}
                            </button>
                        </div>
                    </div>
                `,
            resolve
          );
        });
      }

      // å¤„ç†æœªå®Œæˆçš„æ”¯ä»˜
      async function handleIncompletePayment(payment) {
        try {
          // æ£€æŸ¥æ”¯ä»˜çŠ¶æ€å¹¶å¤„ç†
          // è¿™é‡Œå¯ä»¥é‡æ–°æäº¤åˆ°æœåŠ¡å™¨éªŒè¯
        } catch (error) {
          console.error("å¤„ç†æœªå®Œæˆæ”¯ä»˜å¤±è´¥:", error);
        }
      }

      // æœåŠ¡å™¨ç«¯æ”¯ä»˜å®¡æ‰¹ (éœ€è¦åç«¯API)
      async function approvePaymentOnServer(paymentId, paymentData) {
        try {
          // è¿™é‡Œéœ€è¦è°ƒç”¨æ‚¨çš„åç«¯API
          // const response = await fetch('YOUR_BACKEND_URL/api/payments/approve', {
          //     method: 'POST',
          //     headers: { 'Content-Type': 'application/json' },
          //     body: JSON.stringify({ paymentId, paymentData })
          // });
          // æ¨¡æ‹Ÿå®¡æ‰¹æˆåŠŸ
        } catch (error) {
          console.error("æœåŠ¡å™¨å®¡æ‰¹å¤±è´¥:", error);
        }
      }

      // æœåŠ¡å™¨ç«¯æ”¯ä»˜å®Œæˆ (éœ€è¦åç«¯API)
      async function completePaymentOnServer(paymentId, txid, paymentData) {
        try {
          // è¿™é‡Œéœ€è¦è°ƒç”¨æ‚¨çš„åç«¯API
          // const response = await fetch('YOUR_BACKEND_URL/api/payments/complete', {
          //     method: 'POST',
          //     headers: { 'Content-Type': 'application/json' },
          //     body: JSON.stringify({ paymentId, txid, paymentData })
          // });

          // æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸ
          setTimeout(() => {
            showCustomModal(
              t("payment_success_title"),
              `
                        <div style="text-align: center;">
                            <div style="font-size: 3em; margin-bottom: 15px;">âœ…</div>
                            <h3 style="color: #28a745;">${t(
                              "payment_success_message"
                            )}</h3>
                            <p style="color: #666; margin: 15px 0;">
                                ${t(
                                  "purchase_success_message",
                                  getItemName(paymentData.metadata.itemType)
                                )}
                            </p>
                            <p style="color: #007bff; font-weight: bold;">
                                ${t(
                                  "transaction_id",
                                  txid.substring(0, 16) + "..."
                                )}
                            </p>
                        </div>
                    `
            );
          }, 2000);
        } catch (error) {
          console.error("æœåŠ¡å™¨å®Œæˆæ”¯ä»˜å¤±è´¥:", error);
        }
      }

      // AIå¯¹æˆ˜å¤„ç†
      function handleAIGame() {
        showSimpleGameScreen();
      }

      // åŠ è½½æ’è¡Œæ¦œæ•°æ® - æ”¯æŒæœ¬åœ°æ•°æ®é™çº§
      async function loadLeaderboard(
        sortBy = "score",
        limit = 100,
        forceRefresh = false
      ) {
        try {
          const now = Date.now();
          const shouldRefresh =
            forceRefresh || now - lastDataRefreshTime > DATA_REFRESH_COOLDOWN;

          if (!shouldRefresh) {
            console.log("[æ’è¡Œæ¦œ] è·³è¿‡åˆ·æ–°ï¼Œå†·å´æ—¶é—´æœªåˆ°");
            // å¦‚æœä¸éœ€è¦åˆ·æ–°ï¼Œè¿”å›æœ¬åœ°æ’è¡Œæ¦œæ•°æ®
            return getLocalLeaderboard(limit);
          }

          // é¦–å…ˆå°è¯•ä»åç«¯è·å–æ•°æ®
          try {
            const refreshParam = forceRefresh ? "&refresh=true" : "";
            const response = await fetch(
              `${API_BASE_URL}/api/leaderboard?limit=${limit}${refreshParam}`
            );
            if (response.ok) {
              const data = await response.json();
              lastDataRefreshTime = now;
              console.log(
                `[æ’è¡Œæ¦œ] åç«¯æ•°æ®åˆ·æ–°æˆåŠŸï¼Œæ€»ç”¨æˆ·æ•°: ${data.totalUsers}, æ’è¡Œæ¦œæ¡ç›®: ${data.leaderboard.length}`
              );
              return data.leaderboard || [];
            } else {
              console.error("è·å–æ’è¡Œæ¦œå¤±è´¥:", response.status);
              throw new Error("åç«¯è¯·æ±‚å¤±è´¥");
            }
          } catch (backendError) {
            console.log("[æ’è¡Œæ¦œ] åç«¯ä¸å¯ç”¨ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®");
            return getLocalLeaderboard(limit);
          }
        } catch (error) {
          console.error("æ’è¡Œæ¦œè¯·æ±‚é”™è¯¯:", error);
          // å‘ç”Ÿä»»ä½•é”™è¯¯æ—¶ï¼Œéƒ½è¿”å›æœ¬åœ°æ’è¡Œæ¦œæ•°æ®
          return getLocalLeaderboard(limit);
        }
      }

      // è·å–çœŸå®Pi Networkç”¨æˆ·æ’è¡Œæ¦œæ•°æ®ï¼ˆæ— æ¨¡æ‹Ÿç”¨æˆ·ï¼‰
      function getLocalLeaderboard(limit = 100) {
        try {
          const allUsers = [];
          const userIdSet = new Set(); // ç”¨äºå»é‡

          console.log("[æ’è¡Œæ¦œ] å¼€å§‹æ”¶é›†çœŸå®Pi Networkç”¨æˆ·æ•°æ®...");

          // 1. æ”¶é›†localStorageä¸­çš„æ‰€æœ‰çœŸå®Pi Networkç”¨æˆ·æ•°æ®ï¼Œè¿‡æ»¤æ‰æµ‹è¯•ç”¨æˆ·
          const userDataMap = new Map(); // userId -> æœ€ä½³ç”¨æˆ·æ•°æ®

          for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);

            // æŸ¥æ‰¾ç”¨æˆ·ä¸“å±æ•°æ®
            if (key && key.startsWith('piGomokuUserData_')) {
              try {
                const userData = JSON.parse(localStorage.getItem(key));
                if (userData && userData.gameStats && userData.gameStats.totalGames > 0) {
                  const userId = userData.userId;

                  // è¿‡æ»¤æ‰æµ‹è¯•ç”¨æˆ·å’Œæ¨¡æ‹Ÿç”¨æˆ·
                  if (userId && !userId.startsWith('test_user_') && !userId.startsWith('mock_') && !userData.accessToken?.startsWith('mock_token_')) {
                    const userEntry = {
                      userId: userId,
                      username: userData.username || userData.gameStats.username || "Piç”¨æˆ·",
                      totalGames: userData.gameStats.totalGames,
                      wins: userData.gameStats.wins,
                      losses: userData.gameStats.losses,
                      draws: userData.gameStats.draws || 0,
                      winRate: userData.gameStats.winRate || 0,
                      lastUpdated: userData.lastUpdated || 0,
                      storageKey: key
                    };

                    // å¦‚æœç”¨æˆ·å·²å­˜åœ¨ï¼Œæ¯”è¾ƒå¹¶ä¿ç•™æ›´å¥½çš„æ•°æ®
                    if (userDataMap.has(userId)) {
                      const existingEntry = userDataMap.get(userId);

                      // ä¼˜å…ˆä¿ç•™æ¸¸æˆå±€æ•°æ›´å¤šçš„æ•°æ®ï¼Œå±€æ•°ç›¸åŒæ—¶ä¿ç•™æ—¶é—´æ›´æ–°çš„
                      if (userEntry.totalGames > existingEntry.totalGames ||
                          (userEntry.totalGames === existingEntry.totalGames &&
                           userEntry.lastUpdated > existingEntry.lastUpdated)) {
                        userDataMap.set(userId, userEntry);
                        console.log(`[æ’è¡Œæ¦œ] æ›´æ–°Piç”¨æˆ·æ•°æ®: ${userId} (${userEntry.username}) - æ€»å±€æ•°: ${userEntry.totalGames} (${key})`);
                      } else {
                        console.log(`[æ’è¡Œæ¦œ] ä¿ç•™ç°æœ‰Piç”¨æˆ·æ•°æ®: ${userId} - æ€»å±€æ•°: ${existingEntry.totalGames} >= ${userEntry.totalGames}`);
                      }
                    } else {
                      userDataMap.set(userId, userEntry);
                      console.log(`[æ’è¡Œæ¦œ] æ·»åŠ æ–°Piç”¨æˆ·: ${userId} (${userEntry.username}) - æ€»å±€æ•°: ${userEntry.totalGames} (${key})`);
                    }
                  } else {
                    console.log(`[æ’è¡Œæ¦œ] è·³è¿‡æµ‹è¯•ç”¨æˆ·: ${userId}`);
                  }
                }
              } catch (parseError) {
                console.error("è§£æç”¨æˆ·æ•°æ®å¤±è´¥:", parseError);
              }
            }
          }

          // è½¬æ¢ä¸ºæ•°ç»„
          userDataMap.forEach((userEntry) => {
            const isCurrentUser = currentUser &&
              (userEntry.userId === currentUser.piUserId || userEntry.userId === currentUser.uid);

            allUsers.push({
              userId: userEntry.userId,
              username: userEntry.username,
              totalGames: userEntry.totalGames,
              wins: userEntry.wins,
              losses: userEntry.losses,
              draws: userEntry.draws,
              winRate: userEntry.winRate,
              isCurrentUser: isCurrentUser
            });
            userIdSet.add(userEntry.userId);
          });

          // 2. å¦‚æœå½“å‰ç”¨æˆ·æœ‰æ•°æ®ä½†ä¸åœ¨localStorageä¸“å±å­˜å‚¨ä¸­ï¼Œä¸”æ˜¯çœŸå®Piç”¨æˆ·ï¼Œæ·»åŠ å½“å‰ç”¨æˆ·
          if (currentUser && userStats && userStats.totalGames > 0) {
            const currentUserId = currentUser.piUserId || currentUser.uid;
            // åªæ·»åŠ çœŸå®Pi Networkç”¨æˆ·ï¼Œè¿‡æ»¤æ‰æµ‹è¯•ç”¨æˆ·
            if (currentUserId && !userIdSet.has(currentUserId) &&
                !currentUserId.startsWith('test_user_') &&
                !currentUserId.startsWith('mock_') &&
                !currentUser.accessToken?.startsWith('mock_token_')) {
              userIdSet.add(currentUserId);
              allUsers.push({
                userId: currentUserId,
                username: getCurrentDisplayUsername(),
                totalGames: userStats.totalGames,
                wins: userStats.wins,
                losses: userStats.losses,
                draws: userStats.draws || 0,
                winRate: userStats.winRate || 0,
                isCurrentUser: true
              });
              console.log(`[æ’è¡Œæ¦œ] æ·»åŠ å½“å‰Piç”¨æˆ·æ•°æ®: ${currentUserId} (${getCurrentDisplayUsername()})`);
            } else if (currentUserId?.startsWith('test_user_') || currentUserId?.startsWith('mock_') || currentUser.accessToken?.startsWith('mock_token_')) {
              console.log(`[æ’è¡Œæ¦œ] è·³è¿‡å½“å‰æµ‹è¯•ç”¨æˆ·: ${currentUserId}`);
            }
          }

          // æŒ‰èƒœç‡æ’åºï¼Œèƒœç‡ç›¸åŒæ—¶æŒ‰èƒœåœºæ•°æ’åºï¼Œå†æŒ‰æ€»å±€æ•°æ’åº
          const sortedUsers = allUsers
            .sort((a, b) => {
              // 1. é¦–å…ˆæŒ‰èƒœç‡æ’åºï¼ˆé«˜åˆ°ä½ï¼‰
              if (b.winRate !== a.winRate) {
                return b.winRate - a.winRate;
              }
              // 2. èƒœç‡ç›¸åŒæ—¶ï¼ŒæŒ‰èƒœåœºæ•°æ’åºï¼ˆé«˜åˆ°ä½ï¼‰
              if (b.wins !== a.wins) {
                return b.wins - a.wins;
              }
              // 3. èƒœåœºæ•°ç›¸åŒæ—¶ï¼ŒæŒ‰æ€»å±€æ•°æ’åºï¼ˆé«˜åˆ°ä½ï¼‰
              if (b.totalGames !== a.totalGames) {
                return b.totalGames - a.totalGames;
              }
              // 4. æœ€åæŒ‰ç”¨æˆ·åæ’åºï¼ˆç¡®ä¿ç¨³å®šæ’åºï¼‰
              return a.username.localeCompare(b.username);
            })
            .slice(0, limit)
            .map((user, index) => ({
              rank: index + 1,
              userId: user.userId,
              username: user.username,
              totalGames: user.totalGames,
              wins: user.wins,
              winRate: user.winRate,
              isCurrentUser: user.isCurrentUser || false
            }));

          console.log(`[æœ¬åœ°æ’è¡Œæ¦œ] ç”Ÿæˆæ’è¡Œæ¦œæ•°æ®ï¼Œå…± ${sortedUsers.length} æ¡è®°å½•:`, sortedUsers);
          return sortedUsers;
        } catch (error) {
          console.error("ç”Ÿæˆæœ¬åœ°æ’è¡Œæ¦œå¤±è´¥:", error);
          return [];
        }
      }

      // è·å–ç”¨æˆ·æ’å - æ”¯æŒæœ¬åœ°æ•°æ®é™çº§
      async function getUserRank(userId) {
        try {
          // é¦–å…ˆå°è¯•ä»åç«¯è·å–æ’å
          try {
            const response = await fetch(
              `${API_BASE_URL}/api/leaderboard/rank?userId=${userId}`
            );
            if (response.ok) {
              const data = await response.json();
              return data.rank || 0;
            } else {
              throw new Error("åç«¯è¯·æ±‚å¤±è´¥");
            }
          } catch (backendError) {
            console.log("[ç”¨æˆ·æ’å] åç«¯ä¸å¯ç”¨ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®è®¡ç®—æ’å");
            return getLocalUserRank(userId);
          }
        } catch (error) {
          console.error("è·å–ç”¨æˆ·æ’åé”™è¯¯:", error);
          return getLocalUserRank(userId);
        }
      }

      // ä»æœ¬åœ°æ•°æ®è®¡ç®—ç”¨æˆ·æ’å
      function getLocalUserRank(userId) {
        try {
          const leaderboard = getLocalLeaderboard(1000); // è·å–å®Œæ•´æ’è¡Œæ¦œ
          const userEntry = leaderboard.find(entry => entry.userId === userId);
          return userEntry ? userEntry.rank : 0;
        } catch (error) {
          console.error("è®¡ç®—æœ¬åœ°ç”¨æˆ·æ’åå¤±è´¥:", error);
          return 0;
        }
      }

      // æ˜¾ç¤ºå®æ—¶æ’è¡Œæ¦œ
      async function showRealTimeLeaderboard(forceRefresh = false) {
        const leaderboard = await loadLeaderboard("score", 100, forceRefresh);

        // è·å–å½“å‰ç”¨æˆ·çš„çœŸå®æ’å
        let userRank = 0;
        if (currentUser && currentUser.piUserId) {
          userRank = await getUserRank(currentUser.piUserId);
        }

        // å¯åŠ¨è‡ªåŠ¨åˆ·æ–°
        startLeaderboardAutoRefresh();

        let leaderboardHTML = "";
        if (leaderboard.length === 0) {
          // æ£€æŸ¥å½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æ¸¸æˆæ•°æ®ä½†æœªæ˜¾ç¤ºåœ¨æ’è¡Œæ¦œä¸­
          const hasUserData = currentUser && userStats && userStats.totalGames > 0;

          leaderboardHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: #666;">
                        <div style="font-size: 3em; margin-bottom: 15px;">ğŸ¯</div>
                        ${hasUserData ?
                          `<p style="margin: 0; font-size: 1.1em;">æ­£åœ¨åŠ è½½æ’è¡Œæ¦œæ•°æ®...</p>
                           <p style="margin: 5px 0 0 0; font-size: 0.9em;">æ‚¨çš„æ¸¸æˆæ•°æ®ï¼š${userStats.totalGames}å±€ (${userStats.wins}èƒœ${userStats.losses}è´Ÿ) èƒœç‡${userStats.winRate}%</p>` :
                          `<p style="margin: 0; font-size: 1.1em;">æš‚æ— æ’è¡Œæ¦œæ•°æ®</p>
                           <p style="margin: 5px 0 0 0; font-size: 0.9em;">${t("play_one_game_to_rank")}</p>`
                        }
                    </div>
                `;
        } else {
          leaderboard.forEach((player, index) => {
            const isCurrentUser =
              currentUser &&
              (player.userId === currentUser.uid ||
                player.userId === currentUser.piUserId);
            const rankIcon =
              index === 0
                ? "ğŸ¥‡"
                : index === 1
                ? "ğŸ¥ˆ"
                : index === 2
                ? "ğŸ¥‰"
                : index + 1;
            const bgColor = isCurrentUser ? "background: #e3f2fd;" : "";

            leaderboardHTML += `
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px 10px; border-bottom: 1px solid #e9ecef; ${bgColor}">
                            <span style="color: ${
                              index < 3 ? "#ffd700" : "#6c757d"
                            }; font-weight: bold;">${rankIcon}</span>
                            <span style="font-weight: 500; color: ${
                              isCurrentUser ? "#1976d2" : "#333"
                            };">${player.username}</span>
                            <span style="color: #666; font-size: 0.9em;">${t(
                              "wins_losses_format",
                              player.wins,
                              player.totalGames - player.wins
                            )}</span>
                            <span style="color: #28a745;">${
                              player.winRate
                            }%</span>
                        </div>
                    `;
          });
        }

        showCustomModal(
          t("global_ranking_title"),
          `
                <div style="text-align: center;">
                    <div style="margin-bottom: 20px;">
                        <span style="font-size: 3em; margin-bottom: 10px; display: block;">ğŸ†</span>
                        <h3 style="color: #333; margin-bottom: 20px;">${t(
                          "global_ranking_title"
                        )}</h3>
                        <p style="color: #666; font-size: 0.9em; margin: 0 0 15px 0;">${t(
                          "ranking_subtitle"
                        )}</p>
                    </div>

                    <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 2px solid #e9ecef; font-weight: bold; color: #495057;">
                            <span>${t("ranking_header_rank")}</span>
                            <span>${t("ranking_header_nickname")}</span>
                            <span>${t("ranking_header_games")}</span>
                            <span>${t("ranking_header_winrate")}</span>
                        </div>
                        ${leaderboardHTML}
                    </div>

                    ${
                      userRank > 0
                        ? `
                        <div style="background: #e3f2fd; border-radius: 8px; padding: 8px; margin-bottom: 10px; margin-top: 0px;">
                            <p style="margin: 0; color: #1976d2; font-weight: 500; text-align: center;">
                                ${t(
                                  "current_ranking",
                                  userRank,
                                  userStats ? userStats.wins : 0,
                                  userStats
                                    ? userStats.totalGames - userStats.wins
                                    : 0,
                                  userStats ? userStats.winRate : 0
                                )}
                            </p>
                        </div>
                    `
                        : userStats && userStats.totalGames === 0
                        ? `
                        <div style="background: #fff3cd; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                            <p style="margin: 0; color: #856404; font-weight: 500;">
                                ${t("play_one_game_to_rank")}
                            </p>
                        </div>
                    `
                        : ""
                    }

                    <p style="color: #666; font-size: 0.9em; margin: 0;">
                        ${t("leaderboard_update_tip")}
                    </p>
                </div>
            `
        );
      }

      // å¯åŠ¨æ’è¡Œæ¦œè‡ªåŠ¨åˆ·æ–°
      function startLeaderboardAutoRefresh() {
        // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨
        if (leaderboardRefreshInterval) {
          clearInterval(leaderboardRefreshInterval);
        }

        // æ¯30ç§’è‡ªåŠ¨åˆ·æ–°ä¸€æ¬¡æ’è¡Œæ¦œ
        leaderboardRefreshInterval = setInterval(async () => {
          console.log("[æ’è¡Œæ¦œ] è‡ªåŠ¨åˆ·æ–°æ•°æ®...");
          const currentModal = document.querySelector(".modal-overlay");
          if (currentModal && currentModal.style.display !== "none") {
            // å¦‚æœæ’è¡Œæ¦œå¼¹çª—è¿˜åœ¨æ˜¾ç¤ºï¼Œåˆ™åˆ·æ–°æ•°æ®
            await showRealTimeLeaderboard(true);
          } else {
            // å¦‚æœå¼¹çª—å·²å…³é—­ï¼Œåœæ­¢è‡ªåŠ¨åˆ·æ–°
            stopLeaderboardAutoRefresh();
          }
        }, 30000); // 30ç§’
      }

      // åœæ­¢æ’è¡Œæ¦œè‡ªåŠ¨åˆ·æ–°
      function stopLeaderboardAutoRefresh() {
        if (leaderboardRefreshInterval) {
          clearInterval(leaderboardRefreshInterval);
          leaderboardRefreshInterval = null;
          console.log("[æ’è¡Œæ¦œ] åœæ­¢è‡ªåŠ¨åˆ·æ–°");
        }
      }

      // è§¦å‘æ•°æ®åˆ·æ–°ï¼ˆç”¨äºæ–°ç”¨æˆ·ç™»å½•åï¼‰
      function triggerDataRefresh() {
        console.log("[æ•°æ®åˆ·æ–°] è§¦å‘å…¨å±€æ•°æ®åˆ·æ–°");

        // é‡ç½®åˆ·æ–°å†·å´æ—¶é—´ï¼Œå¼ºåˆ¶åˆ·æ–°
        lastDataRefreshTime = 0;

        // å¦‚æœæ’è¡Œæ¦œå¼¹çª—æ­£åœ¨æ˜¾ç¤ºï¼Œç«‹å³åˆ·æ–°
        const currentModal = document.querySelector(".modal-overlay");
        if (currentModal && currentModal.style.display !== "none") {
          console.log("[æ•°æ®åˆ·æ–°] åˆ·æ–°æ’è¡Œæ¦œæ•°æ®");
          showRealTimeLeaderboard(true);
        }

        // åˆ·æ–°ä¸ªäººä¸­å¿ƒæ•°æ®ï¼ˆå¦‚æœæ­£åœ¨æ˜¾ç¤ºï¼‰
        const personalCenterModal = document.querySelector(".custom-modal");
        if (personalCenterModal) {
          console.log("[æ•°æ®åˆ·æ–°] åˆ·æ–°ä¸ªäººä¸­å¿ƒæ•°æ®");
          refreshUserStats();
        }
      }

      // æ˜¾ç¤ºå…¨çƒæ’è¡Œæ¦œ (ä½¿ç”¨çœŸå®æ•°æ®)
      async function showGlobalRanking() {
        // ç›´æ¥è°ƒç”¨çœŸå®æ’è¡Œæ¦œå‡½æ•°
        await showRealTimeLeaderboard();
        return;

        // ä»¥ä¸‹ä»£ç å·²åºŸå¼ƒï¼Œä¿ç•™ä½œä¸ºå¤‡ç”¨
        /*
        showCustomModal(
          `${t(
            "global_ranking_title"
          )}<br><span style='font-size: 0.7em; color: #ffffff; font-weight: normal;'>${t(
            "ranking_subtitle"
          )}</span>`,
          `
                <div style="text-align: center;">
                    <div style="background: #f8f9fa; border-radius: 8px; padding: 10px; margin-bottom: 8px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px; border-bottom: 2px solid #e9ecef; font-weight: bold; color: #495057;">
                            <span>${t("ranking_header_rank")}</span>
                            <span>${t("ranking_header_nickname")}</span>
                            <span>${t("ranking_header_games")}</span>
                            <span>${t("ranking_header_winrate")}</span>
                        </div>

                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #ffd700; font-weight: bold;">ğŸ¥‡ 1</span>
                            <span style="font-weight: 500;">æ£‹åœ£å¤§å¸ˆ</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;" data-i18n-format="wins_losses" data-wins="21" data-losses="1">(21èƒœ1è´Ÿ)</span>
                            <span style="color: #28a745;">95.2%</span>
                        </div>

                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #c0c0c0; font-weight: bold;">ğŸ¥ˆ 2</span>
                            <span style="font-weight: 500;">äº”å­é«˜æ‰‹</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(25èƒœ2è´Ÿ)</span>
                            <span style="color: #28a745;">92.8%</span>
                        </div>

                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #cd7f32; font-weight: bold;">ğŸ¥‰ 3</span>
                            <span style="font-weight: 500;">è¿ç è¾¾äºº</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(26èƒœ3è´Ÿ)</span>
                            <span style="color: #28a745;">89.6%</span>
                        </div>

                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #6c757d;">4</span>
                            <span style="font-weight: 500;">é»‘ç™½ä¼ è¯´</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(24èƒœ4è´Ÿ)</span>
                            <span style="color: #28a745;">87.3%</span>
                        </div>

                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #6c757d;">5</span>
                            <span style="font-weight: 500;">æ™ºæ…§ä¹‹æ˜Ÿ</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(23èƒœ4è´Ÿ)</span>
                            <span style="color: #28a745;">85.1%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #6c757d;">6</span>
                            <span style="font-weight: 500;">æ£‹é“é«˜æ‰‹</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(20èƒœ5è´Ÿ)</span>
                            <span style="color: #28a745;">80.0%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #6c757d;">7</span>
                            <span style="font-weight: 500;">äº”å­ç‹è€…</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(19èƒœ6è´Ÿ)</span>
                            <span style="color: #28a745;">76.0%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #6c757d;">8</span>
                            <span style="font-weight: 500;">è¿ç ä¸“å®¶</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(18èƒœ7è´Ÿ)</span>
                            <span style="color: #28a745;">72.0%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px; border-bottom: 1px solid #e9ecef;">
                            <span style="color: #6c757d;">9</span>
                            <span style="font-weight: 500;">é»‘ç™½ç²¾è‹±</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(17èƒœ8è´Ÿ)</span>
                            <span style="color: #28a745;">68.0%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; padding: 6px 8px;">
                            <span style="color: #6c757d;">10</span>
                            <span style="font-weight: 500;">æ£‹å±€è¾¾äºº</span>
                            <span style="color: #666; font-size: 0.9em; text-align: center;">(16èƒœ9è´Ÿ)</span>
                            <span style="color: #28a745;">64.0%</span>
                        </div>
                    </div>
                    <div style="background: #e3f2fd; border-radius: 8px; padding: 8px; margin-bottom: 10px; margin-top: 0px;">
                        <p style="margin: 0; color: #1976d2; font-weight: 500; text-align: center;">
                            ${t("current_ranking", "42", "13", "4", "76.5")}
                        </p>
                    </div>

                    <p style="color: #666; font-size: 0.9em; margin: 0;">
                        ${t("leaderboard_update_tip")}
                    </p>
                </div>
            `
        );
        */
      }

      // æ˜¾ç¤ºä¸ªäººä¸­å¿ƒ
      async function showPersonalCenter() {
        // å¦‚æœç”¨æˆ·å·²ç™»å½•ï¼Œç¡®ä¿æœ‰piUserIdå¹¶åˆ·æ–°æ•°æ®
        if (currentUser) {
          // ç¡®ä¿æœ‰piUserId
          if (!currentUser.piUserId) {
            currentUser.piUserId = currentUser.uid;
          }

          await refreshUserStats();
        }

        const stats = userStats || {
          totalGames: 0,
          wins: 0,
          losses: 0,
          winRate: 0,
          rank: 0,
        };

        // è·å–ä¿å­˜çš„ç”¨æˆ·ä¿¡æ¯
        const savedWalletAddress =
          localStorage.getItem("userWalletAddress") || "";
        const savedNickname = localStorage.getItem("userNickname") || "";

        // åˆ¤æ–­ç™»å½•çŠ¶æ€å’Œæ˜µç§°æ˜¾ç¤ºé€»è¾‘
        let displayNickname = "";
        let nicknameEditable = true;

        if (currentUser && userStats) {
          // Piç™»å½•çŠ¶æ€ï¼šæ˜¾ç¤ºPiç”¨æˆ·åï¼Œä¸å¯ç¼–è¾‘
          displayNickname =
            userStats.username || currentUser.username || "Piç”¨æˆ·";
          nicknameEditable = false;
        } else {
          // æœªç™»å½•çŠ¶æ€ï¼šæ˜¾ç¤ºæœ¬åœ°æ˜µç§°ï¼Œå¯ç¼–è¾‘
          displayNickname = savedNickname || t("click_to_set_nickname");
          nicknameEditable = true;
        }

        showCustomModal(
          t("personal_center_title"),
          `
                <div style="text-align: center; max-height: 80vh; overflow-y: auto;">
                    <!-- ä¸ªäººæ¡£æ¡ˆç¼–è¾‘ -->
                    <div style="margin-bottom: 8px;">
                        <div style="background: #f8f9fa; border-radius: 8px; padding: 10px; margin-bottom: 8px;">
                            <!-- æ˜µç§°æ˜¾ç¤º -->
                            <div style="background: white; border-radius: 8px; padding: 10px; margin-bottom: 8px;">
                                <div style="margin-bottom: 5px;">
                                    <h4
                                        style="margin: 0 0 4px 0; color: #333; ${
                                          nicknameEditable
                                            ? "cursor: pointer; transition: color 0.2s;"
                                            : "cursor: default;"
                                        } font-size: 1.2em;"
                                        id="user-nickname-display"
                                        ${
                                          nicknameEditable
                                            ? 'onclick="toggleNicknameEdit()" onmouseover="this.style.color=\'#007bff\'" onmouseout="this.style.color=\'#333\'"'
                                            : ""
                                        }
                                    >${displayNickname}</h4>
                                    ${
                                      nicknameEditable
                                        ? `
                                    <div style="display: none;" id="nickname-edit-section">
                                        <input
                                            type="text"
                                            id="nickname-input"
                                            placeholder="${t(
                                              "enter_your_nickname"
                                            )}"
                                            value="${savedNickname}"
                                            style="
                                                width: 200px;
                                                padding: 8px;
                                                border: 2px solid #e9ecef;
                                                border-radius: 6px;
                                                font-size: 14px;
                                                text-align: center;
                                                box-sizing: border-box;
                                            "
                                            maxlength="20"
                                        />
                                        <button
                                            onclick="updateNickname()"
                                            style="
                                                background: #28a745;
                                                color: white;
                                                border: none;
                                                border-radius: 6px;
                                                padding: 8px 12px;
                                                cursor: pointer;
                                                font-size: 12px;
                                                margin-left: 5px;
                                            "
                                        >
                                            âœ“
                                        </button>
                                        <button
                                            onclick="toggleNicknameEdit()"
                                            style="
                                                background: #6c757d;
                                                color: white;
                                                border: none;
                                                border-radius: 6px;
                                                padding: 8px 12px;
                                                cursor: pointer;
                                                font-size: 12px;
                                                margin-left: 5px;
                                            "
                                        >
                                            âœ•
                                        </button>
                                    </div>
                                    `
                                        : ""
                                    }
                                </div>
                            </div>

                            <!-- æ¸¸æˆç»Ÿè®¡ -->
                            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 6px; margin-bottom: 6px;">
                                <div style="background: white; border-radius: 6px; padding: 8px; text-align: center;">
                                    <div style="font-size: 1.3em; color: #007bff; font-weight: bold;">${
                                      stats.totalGames
                                    }</div>
                                    <div style="color: #666; font-size: 0.8em;">${t(
                                      "total_games_label"
                                    )}</div>
                                </div>
                                <div style="background: white; border-radius: 6px; padding: 8px; text-align: center;">
                                    <div style="font-size: 1.3em; color: #28a745; font-weight: bold;">${
                                      stats.wins
                                    }</div>
                                    <div style="color: #666; font-size: 0.8em;">${t(
                                      "wins_label"
                                    )}</div>
                                </div>
                                <div style="background: white; border-radius: 6px; padding: 8px; text-align: center;">
                                    <div style="font-size: 1.3em; color: #ffc107; font-weight: bold;">${
                                      stats.winRate
                                    }%</div>
                                    <div style="color: #666; font-size: 0.8em;">${t(
                                      "win_rate_label"
                                    )}</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- è´¦æˆ·ä½™é¢å’Œé’±åŒ…åœ°å€ -->
                    <div style="background: #f8f9fa; border-radius: 8px; padding: 8px; margin-bottom: 8px;">
                        <div style="background: white; border-radius: 8px; padding: 8px; margin-bottom: 6px; border: 2px solid #e3f2fd;">
                            <div style="font-size: 1.8em; color: #f39c12; font-weight: bold; margin-bottom: 4px;" id="account-balance">
                                ${t("loading_text_display")}
                            </div>
                            <div style="display: flex; gap: 8px; justify-content: center; margin-top: 8px;">
                                <button onclick="refreshBalance()" style="background: #17a2b8; color: white; border: none; border-radius: 4px; padding: 6px 12px; cursor: pointer; font-size: 12px;">
                                    ${t("refresh_balance_text")}
                                </button>
                                <button onclick="showRechargeDialog(t('recharge_prompt'))" style="background: #28a745; color: white; border: none; border-radius: 4px; padding: 6px 12px; cursor: pointer; font-size: 12px;">
                                    ${t("recharge_text")}
                                </button>
                            </div>
                        </div>

                        <!-- é’±åŒ…åœ°å€è¾“å…¥ -->
                        <div style="background: white; border-radius: 8px; padding: 8px;">
                            <div style="margin-bottom: 0;">
                                <input
                                    type="text"
                                    id="wallet-address-input"
                                    placeholder="${t(
                                      "wallet_address_placeholder"
                                    )}"
                                    value="${savedWalletAddress}"
                                    maxlength="50"
                                    style="
                                        width: 100%;
                                        padding: 8px;
                                        border: 2px solid #e9ecef;
                                        border-radius: 6px;
                                        font-size: 14px;
                                        box-sizing: border-box;
                                        font-family: monospace;
                                        text-transform: uppercase;
                                        background: #f8f9fa;
                                    "
                                />
                                <div style="margin-top: 8px; display: flex; justify-content: space-between; align-items: center;">
                                    <small style="color: #6c757d; font-size: 12px;">
                                        ${t("wallet_format_hint")}
                                    </small>
                                    <span id="wallet-char-count" style="color: #6c757d; font-size: 12px;">
                                        ${savedWalletAddress.length}/50
                                    </span>
                                </div>
                                <div style="margin-top: 6px; text-align: center;">
                                    <button
                                        onclick="saveWalletAddress()"
                                        style="
                                            background: #28a745;
                                            color: white;
                                            border: none;
                                            border-radius: 6px;
                                            padding: 8px 16px;
                                            cursor: pointer;
                                            font-size: 14px;
                                            margin-right: 8px;
                                        "
                                    >
                                        ${t("save_wallet")}
                                    </button>
                                    <button
                                        onclick="editWalletAddress()"
                                        style="
                                            background: #17a2b8;
                                            color: white;
                                            border: none;
                                            border-radius: 6px;
                                            padding: 8px 16px;
                                            cursor: pointer;
                                            font-size: 14px;
                                        "
                                    >
                                        ${t("edit_wallet")}
                                    </button>
                                </div>
                            </div>

                            <!-- æœˆåº¦å¥–åŠ±é‡è¦æç¤º -->
                            <div style="margin-top: 8px; padding: 8px; background: #fff3cd; border-radius: 4px; border: 1px solid #ffeaa7;">
                                <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 4px;">
                                    <span style="font-size: 14px;">ğŸ†</span>
                                    <strong style="color: #856404; font-size: 12px;">${t(
                                      "monthly_reward_reminder"
                                    )}</strong>
                                </div>
                                <p style="color: #856404; font-size: 11px; margin: 0; line-height: 1.4;">
                                    ${t("monthly_reward_desc")}
                                </p>
                            </div>
                        </div>
                    </div>



                    <div style="text-align: center; margin-top: 6px;">
                        ${
                          currentUser && userStats
                            ? `
                        <button
                            onclick="logoutUser()"
                            style="
                                background: #dc3545;
                                color: white;
                                border: none;
                                border-radius: 8px;
                                padding: 8px 16px;
                                cursor: pointer;
                                font-size: 14px;
                                font-weight: 500;
                                transition: background 0.2s;
                            "
                            onmouseover="this.style.background='#c82333'"
                            onmouseout="this.style.background='#dc3545'"
                        >
                            ${t("logout_account_text")}
                        </button>
                        `
                            : `
                        <button
                            onclick="handlePersonalCenterLogin()"
                            style="
                                background: #7b2cbf;
                                color: white;
                                border: none;
                                border-radius: 8px;
                                padding: 8px 16px;
                                cursor: pointer;
                                font-size: 14px;
                                font-weight: 500;
                                transition: background 0.2s;
                            "
                            onmouseover="this.style.background='#5a189a'"
                            onmouseout="this.style.background='#7b2cbf'"
                        >
                            ${t("login_with_pi")}
                        </button>
                        `
                        }
                    </div>
                </div>
            `
        );

        // åˆå§‹åŒ–é’±åŒ…åœ°å€çŠ¶æ€å’Œåˆ·æ–°ä½™é¢
        setTimeout(() => {
          initializeWalletAddressState();
          refreshBalance(); // è‡ªåŠ¨åˆ·æ–°ä½™é¢
        }, 100);
      }

      // åˆå§‹åŒ–é’±åŒ…åœ°å€çŠ¶æ€
      function initializeWalletAddressState() {
        const walletInput = document.getElementById("wallet-address-input");
        const savedWalletAddress =
          localStorage.getItem("userWalletAddress") || "";

        if (walletInput) {
          // æ›´æ–°å­—ç¬¦è®¡æ•°
          updateWalletCharCount(savedWalletAddress.length);

          // å¦‚æœå·²æœ‰å®Œæ•´çš„é’±åŒ…åœ°å€ï¼Œè®¾ç½®ä¸ºåªè¯»çŠ¶æ€
          if (savedWalletAddress.length === 50) {
            walletInput.style.background = "#e9ecef";
            walletInput.readOnly = true;
          } else {
            walletInput.style.background = "#f8f9fa";
            walletInput.readOnly = false;
          }
        }
      }

      // ä¸ªäººä¸­å¿ƒç™»å½•å¤„ç†
      async function handlePersonalCenterLogin() {
        // ä¿å­˜å½“å‰åœ¨ä¸ªäººä¸­å¿ƒçš„çŠ¶æ€
        const wasInPersonalCenter = true;

        // å…³é—­ä¸ªäººä¸­å¿ƒå¼¹çª—
        closePersonalCenter();

        // è°ƒç”¨ä¸»é¡µç™»å½•é€»è¾‘
        await handleSignIn();

        // ç™»å½•æˆåŠŸåé‡æ–°æ‰“å¼€ä¸ªäººä¸­å¿ƒ
        if (currentUser) {
          setTimeout(() => {
            showPersonalCenter();
          }, 1000); // ç­‰å¾…ç™»å½•æˆåŠŸæç¤ºæ˜¾ç¤ºåå†æ‰“å¼€ä¸ªäººä¸­å¿ƒ
        }
      }

      // å…³é—­ä¸ªäººä¸­å¿ƒå¼¹çª—
      function closePersonalCenter() {
        const modal = document.querySelector(".custom-modal");
        if (modal) {
          modal.remove();
        }
      }

      // åˆ‡æ¢æ˜µç§°ç¼–è¾‘æ¨¡å¼
      function toggleNicknameEdit() {
        const editSection = document.getElementById("nickname-edit-section");
        const isVisible = editSection.style.display !== "none";

        if (isVisible) {
          editSection.style.display = "none";
        } else {
          editSection.style.display = "block";
          // èšç„¦åˆ°è¾“å…¥æ¡†
          setTimeout(() => {
            document.getElementById("nickname-input").focus();
          }, 100);
        }
      }

      // æ›´æ–°ç”¨æˆ·æ˜µç§°
      function updateNickname() {
        const nicknameInput = document.getElementById("nickname-input");
        const nicknameDisplay = document.getElementById(
          "user-nickname-display"
        );
        const newNickname = nicknameInput.value.trim();

        if (!newNickname) {
          showCustomAlert(t("hint"), t("enter_nickname"));
          return;
        }

        if (newNickname.length > 20) {
          showCustomAlert(t("hint"), t("nickname_too_long"));
          return;
        }

        // è¿‡æ»¤æ•æ„Ÿè¯ï¼ˆç®€å•ç¤ºä¾‹ï¼‰
        const forbiddenWords = ["admin", "ç®¡ç†å‘˜", "ç³»ç»Ÿ", "system"];
        if (
          forbiddenWords.some((word) =>
            newNickname.toLowerCase().includes(word)
          )
        ) {
          showCustomAlert(t("hint"), t("nickname_forbidden"));
          return;
        }

        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        localStorage.setItem("userNickname", newNickname);

        // æ›´æ–°æ˜¾ç¤º
        nicknameDisplay.textContent = newNickname;

        // éšè—ç¼–è¾‘åŒºåŸŸ
        document.getElementById("nickname-edit-section").style.display = "none";

        showCustomAlert(t("success_title"), t("nickname_updated"));
      }

      // ä¿å­˜é’±åŒ…åœ°å€
      function saveWalletAddress() {
        const walletInput = document.getElementById("wallet-address-input");
        const walletAddress = walletInput.value.trim();

        if (!walletAddress) {
          showCustomAlert(t("hint"), t("enter_wallet_hint"));
          return;
        }

        // éªŒè¯é’±åŒ…åœ°å€æ ¼å¼ï¼š50ä½å¤§å†™å­—æ¯å’Œæ•°å­—
        if (walletAddress.length !== 50) {
          showCustomAlert(
            t("error_title"),
            t("wallet_length_error", walletAddress.length)
          );
          return;
        }

        if (!/^[A-Z0-9]{50}$/.test(walletAddress)) {
          showCustomAlert(t("error_title"), t("wallet_format_error"));
          return;
        }

        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        localStorage.setItem("userWalletAddress", walletAddress);

        // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
        showCustomAlert(t("success_title"), t("wallet_saved_success"));

        // è®¾ç½®è¾“å…¥æ¡†ä¸ºåªè¯»çŠ¶æ€
        walletInput.style.background = "#e9ecef";
        walletInput.readOnly = true;

        // è‡ªåŠ¨åˆ·æ–°ä½™é¢
        refreshBalance();
      }

      // ç¼–è¾‘é’±åŒ…åœ°å€
      function editWalletAddress() {
        const walletInput = document.getElementById("wallet-address-input");

        // å¯ç”¨ç¼–è¾‘æ¨¡å¼
        walletInput.style.background = "#f8f9fa";
        walletInput.readOnly = false;
        walletInput.focus();

        // é€‰ä¸­æ‰€æœ‰æ–‡æœ¬ä¾¿äºç¼–è¾‘
        walletInput.select();

        showCustomAlert(t("edit_mode_title"), t("edit_mode_message"));
      }

      // é€€å‡ºè´¦æˆ·
      function logoutUser() {
        showCustomConfirm(
          t("logout_confirm"),
          t("logout_message"),
          () => {
            // ä¿å­˜å½“å‰ç”¨æˆ·çš„æ¸¸æˆæ•°æ®åˆ°ç”¨æˆ·ä¸“å±å­˜å‚¨
            if (currentUser && userStats) {
              const userGameData = {
                userId: currentUser.piUserId || currentUser.uid,
                username: currentUser.username,
                gameStats: userStats,
                lastUpdated: new Date().toISOString(),
              };
              localStorage.setItem(
                `piGomokuUserData_${currentUser.piUserId || currentUser.uid}`,
                JSON.stringify(userGameData)
              );
            }

            // åªæ¸…é™¤ä¼šè¯ç›¸å…³çš„æ•°æ®ï¼Œä¿ç•™æ¸¸æˆç»Ÿè®¡æ•°æ®
            localStorage.removeItem("piGomokuNickname");
            localStorage.removeItem("userAvatar");
            localStorage.removeItem("userWalletAddress");
            localStorage.removeItem("piGomokuLeaderboard");
            // æ³¨æ„ï¼šä¸åˆ é™¤ piGomokuGameStatsï¼Œæ”¹ä¸ºç”¨æˆ·ä¸“å±å­˜å‚¨

            // æ¸…é™¤ç™»å½•çŠ¶æ€
            clearLoginState();

            // æ¸…é™¤å†…å­˜ä¸­çš„ç”¨æˆ·çŠ¶æ€
            currentUser = null;
            userStats = null;

            // æ˜¾ç¤ºé€€å‡ºæˆåŠŸæ¶ˆæ¯
            showCustomAlert(t("logout_success"), t("logout_success_message"));

            // å…³é—­ä¸ªäººä¸­å¿ƒ
            closePersonalCenter();

            // æ›´æ–°ä¸»é¡µæŒ‰é’®çŠ¶æ€
            updateMainPageButtonState();

            // åˆ·æ–°é¡µé¢é‡ç½®æ‰€æœ‰çŠ¶æ€
            setTimeout(() => {
              location.reload();
            }, 1000);
          },
          () => {
            // å–æ¶ˆæ—¶ä¸åšä»»ä½•æ“ä½œ
          }
        );
      }

      // åˆ·æ–°è´¦æˆ·ä½™é¢
      async function refreshBalance() {
        const balanceElement = document.getElementById("account-balance");

        if (!currentUser) {
          showCustomAlert(t("hint"), t("please_login_first"));
          return;
        }

        try {
          balanceElement.innerHTML = t("balance_querying");

          const response = await fetch(
            `${API_BASE_URL}/api/payment/balance?userId=${currentUser.uid}`
          );
          const data = await response.json();

          if (data.success) {
            balanceElement.innerHTML = `${data.balance.current.toFixed(2)} Ï€`;

            // æ˜¾ç¤ºä½™é¢è¯¦æƒ…ï¼ˆå¯é€‰ï¼‰
            if (
              data.balance.totalRecharged > 0 ||
              data.balance.totalSpent > 0
            ) {
              const tooltip = t(
                "balance_tooltip",
                data.balance.totalRecharged.toFixed(2),
                data.balance.totalSpent.toFixed(2)
              );
              balanceElement.title = tooltip;
            }
          } else {
            balanceElement.innerHTML = "0.00 Ï€";
            console.error("è·å–ä½™é¢å¤±è´¥:", data.message);
          }
        } catch (error) {
          console.error("åˆ·æ–°ä½™é¢å¤±è´¥:", error);
          balanceElement.innerHTML = t("balance_query_failed_display");
          setTimeout(() => {
            balanceElement.innerHTML = "0.00 Ï€";
          }, 2000);
        }
      }

      // è·å–ç­‰çº§åç§°
      function getLevelName(score) {
        if (score >= 2000) return "å¤§å¸ˆçº§";
        if (score >= 1500) return "ä¸“å®¶çº§";
        if (score >= 1200) return "é«˜çº§æ£‹æ‰‹";
        if (score >= 1000) return "ä¸­çº§æ£‹æ‰‹";
        if (score >= 800) return "åˆçº§æ£‹æ‰‹";
        return "æ–°æ‰‹";
      }

      // è·å–ç­‰çº§è¿›åº¦
      function getLevelProgress(score) {
        const levels = [0, 800, 1000, 1200, 1500, 2000, 3000];
        for (let i = 0; i < levels.length - 1; i++) {
          if (score >= levels[i] && score < levels[i + 1]) {
            const progress =
              ((score - levels[i]) / (levels[i + 1] - levels[i])) * 100;
            return Math.min(100, Math.max(0, progress));
          }
        }
        return 100; // æœ€é«˜çº§
      }

      // æ˜¾ç¤ºæ¸¸æˆè¯´æ˜
      function showGameInstructions() {
        showCustomModal(
          t("game_instructions_title"),
          `
                <div style="text-align: left; max-height: 500px; overflow-y: auto;">
                    <!-- å†å²æ¸Šæº -->
                    <div style="text-align: center; margin-bottom: 20px;">
                        <span style="font-size: 3em; margin-bottom: 10px; display: block;">ğŸ›ï¸</span>
                        <h3 style="color: #333; margin-bottom: 15px;">${t(
                          "game_history_section"
                        )}</h3>
                        <p style="margin: 0; line-height: 1.6; font-size: 14px; color: #666;">
                            ${t("game_history_desc")}
                        </p>
                    </div>

                    <!-- Basic Rules -->
                    <div style="background: #f8f9fa; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                        <h4 style="color: #333; margin: 0 0 12px 0; font-size: 16px;">${t(
                          "game_rules_title"
                        )}</h4>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6; font-size: 14px; color: #333;">
                            <li>${t("basic_rules_detail_1")}</li>
                            <li>${t("basic_rules_detail_2")}</li>
                            <li>${t("basic_rules_detail_3")}</li>
                            <li>${t("basic_rules_detail_4")}</li>
                        </ul>
                    </div>

                    <!-- å›åˆæ—¶é—´è§„åˆ™ -->
                    <div style="background: #fff3cd; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                        <h4 style="color: #856404; margin: 0 0 12px 0; font-size: 16px;">${t(
                          "turn_time_rules"
                        )}</h4>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6; font-size: 14px; color: #856404;">
                            <li><strong>${t("thinking_time_rule")}</strong></li>
                            <li><strong>${t("time_warning_rule")}</strong></li>
                            <li><strong>${t(
                              "urgent_warning_rule"
                            )}</strong></li>
                            <li><strong>${t("timeout_rule")}</strong></li>
                        </ul>
                    </div>

                    <!-- æ¸¸æˆæ“ä½œ -->
                    <div style="background: #e3f2fd; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                        <h4 style="color: #1976d2; margin: 0 0 12px 0; font-size: 16px;">${t(
                          "game_operations"
                        )}</h4>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6; font-size: 14px; color: #1976d2;">
                            <li><strong>${t("place_stone")}</strong></li>
                            <li><strong>${t("undo_move")}</strong></li>
                            <li><strong>${t("new_game_op")}</strong></li>
                            <li><strong>${t("return_op")}</strong></li>
                        </ul>
                    </div>

                    <!-- ç§¯åˆ†ç³»ç»Ÿ -->
                    <div style="background: #d4edda; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                        <h4 style="color: #155724; margin: 0 0 12px 0; font-size: 16px;">${t(
                          "score_system"
                        )}</h4>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6; font-size: 14px; color: #155724;">
                            <li><strong>${t("initial_score")}</strong></li>
                            <li><strong>${t("win_score")}</strong></li>
                            <li><strong>${t("draw_score")}</strong></li>
                            <li><strong>${t("lose_score")}</strong></li>
                            <li><strong>${t("quit_score")}</strong></li>
                        </ul>
                        <div style="margin-top: 10px; padding: 8px; background: #c3e6cb; border-radius: 4px; font-size: 13px; color: #155724;">
                            ${t("monthly_reset_system")}<br>
                            ${t("monthly_reset_desc")}<br>
                            ${t("historical_data_preserved")}<br>
                            ${t("monthly_ranking_only")}
                        </div>
                        <div style="margin-top: 8px; padding: 8px; background: #fff3cd; border-radius: 4px; font-size: 13px; color: #856404;">
                            ${t("anti_farming")}
                        </div>
                    </div>

                    <!-- æœˆåº¦å¥–åŠ±è§„åˆ™ -->
                    <div style="background: #fff3cd; border-radius: 8px; padding: 15px; margin-bottom: 15px; border: 2px solid #ffeaa7;">
                        <h4 style="color: #856404; margin: 0 0 12px 0; font-size: 16px;">${t(
                          "monthly_rewards"
                        )}</h4>
                        <div style="color: #856404; font-size: 14px; line-height: 1.6;">
                            <div style="background: white; border-radius: 6px; padding: 12px; margin-bottom: 12px;">
                                <h5 style="color: #d63384; margin: 0 0 8px 0; font-size: 14px;">${t(
                                  "reward_pool_allocation"
                                )}</h5>
                                <ul style="margin: 0; padding-left: 20px; font-size: 13px;">
                                    <li>${t("reward_settlement")}</li>
                                    <li>${t("reward_pool_percentage")}</li>
                                    <li>${t("reward_example")}</li>
                                </ul>
                            </div>

                            <div style="background: white; border-radius: 6px; padding: 12px; margin-bottom: 12px;">
                                <h5 style="color: #d63384; margin: 0 0 8px 0; font-size: 14px;">${t(
                                  "top_three_distribution"
                                )}</h5>
                                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; font-size: 13px;">
                                    <div style="text-align: center; background: #fff3cd; padding: 8px; border-radius: 4px;">
                                        <div style="font-weight: bold; color: #ff6b35;">${t(
                                          "first_place"
                                        )}</div>
                                        <div style="color: #856404;">50%</div>
                                    </div>
                                    <div style="text-align: center; background: #e2e3e5; padding: 8px; border-radius: 4px;">
                                        <div style="font-weight: bold; color: #6c757d;">${t(
                                          "second_place"
                                        )}</div>
                                        <div style="color: #6c757d;">30%</div>
                                    </div>
                                    <div style="text-align: center; background: #f8d7da; padding: 8px; border-radius: 4px;">
                                        <div style="font-weight: bold; color: #721c24;">${t(
                                          "third_place"
                                        )}</div>
                                        <div style="color: #721c24;">20%</div>
                                    </div>
                                </div>
                            </div>

                            <div style="background: white; border-radius: 6px; padding: 12px;">
                                <h5 style="color: #d63384; margin: 0 0 8px 0; font-size: 14px;">${t(
                                  "distribution_method"
                                )}</h5>
                                <ul style="margin: 0; padding-left: 20px; font-size: 13px;">
                                    <li>${t("wallet_distribution")}</li>
                                    <li>${t("valid_wallet_required")}</li>
                                    <li>${t("next_day_distribution")}</li>
                                    <li>${t("invalid_wallet_rollover")}</li>
                                </ul>
                            </div>

                            <div style="margin-top: 12px; padding: 8px; background: #d1ecf1; border-radius: 4px; font-size: 12px; color: #0c5460; text-align: center;">
                                ${t("reward_example_calculation")}<br>
                                ${t("first_place_reward")} | ${t(
            "second_place_reward"
          )} | ${t("third_place_reward")}
                            </div>
                        </div>
                    </div>

                    <!-- æ’è¡Œæ¦œè§„åˆ™ -->
                    <div style="background: #f3e5f5; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
                        <h4 style="color: #7b1fa2; margin: 0 0 12px 0; font-size: 16px;">${t(
                          "leaderboard_rules"
                        )}</h4>
                        <ul style="margin: 0; padding-left: 20px; line-height: 1.6; font-size: 14px; color: #7b1fa2;">
                            <li><strong>${t("ranking_condition")}</strong></li>
                            <li><strong>${t("ranking_basis")}</strong></li>
                            <li><strong>${t("data_statistics")}</strong></li>
                            <li><strong>${t("realtime_update")}</strong></li>
                        </ul>
                    </div>

                    <!-- æ¸©é¦¨æç¤º -->
                    <div style="background: #e8f5e8; border-radius: 8px; padding: 15px; text-align: center;">
                        <p style="margin: 0; color: #2e7d32; font-weight: 500; font-size: 14px; white-space: pre-line;">
                            ${t("warm_tips")}
                        </p>
                    </div>
                </div>
            `
        );
      }

      // é€šç”¨æ¨¡æ€æ¡†æ˜¾ç¤ºå‡½æ•°
      function showCustomModal(title, content, callback = null) {
        // åˆ›å»ºæ¨¡æ€æ¡†HTML
        const modalHTML = `
                <div id="custom-modal" style="
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.5);
                    display: flex;
                    justify-content: center;
                    align-items: flex-start;
                    padding-top: 5vh;
                    z-index: 1000;
                    padding: 20px;
                    box-sizing: border-box;
                ">
                    <div style="
                        background: white;
                        border-radius: 12px;
                        max-width: 500px;
                        width: 100%;
                        max-height: 90vh;
                        overflow: hidden;
                        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                    ">
                        <div style="
                            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            color: white;
                            padding: 20px;
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                        ">
                            <h3 style="margin: 0; font-size: 1.2em;">${title}</h3>
                            <button onclick="closeNewModal()" style="
                                background: none;
                                border: none;
                                color: white;
                                font-size: 1.5em;
                                cursor: pointer;
                                padding: 0;
                                width: 30px;
                                height: 30px;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                border-radius: 50%;
                                transition: background 0.2s;
                            " onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='none'">Ã—</button>
                        </div>
                        <div style="padding: 20px; overflow-y: auto; max-height: calc(90vh - 80px);">
                            ${content}
                        </div>
                    </div>
                </div>
            `;

        // æ·»åŠ åˆ°é¡µé¢
        document.body.insertAdjacentHTML("beforeend", modalHTML);

        // ç‚¹å‡»èƒŒæ™¯å…³é—­
        document
          .getElementById("custom-modal")
          .addEventListener("click", function (e) {
            if (e.target === this) {
              closeNewModal();
            }
          });
      }

      // å…³é—­æ–°çš„è‡ªå®šä¹‰æ¨¡æ€æ¡†
      function closeNewModal() {
        const modal = document.getElementById("custom-modal");
        if (modal) {
          modal.remove();
        }
        // åœæ­¢æ’è¡Œæ¦œè‡ªåŠ¨åˆ·æ–°
        stopLeaderboardAutoRefresh();
      }



      // æ›´æ–°æœ¬åœ°æ¸¸æˆç»Ÿè®¡æ•°æ®
      function updateLocalGameStats(result) {
        if (!userStats) {
          return;
        }

        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        userStats.totalGames = (userStats.totalGames || 0) + 1;

        if (result === "win") {
          userStats.wins = (userStats.wins || 0) + 1;
        } else if (result === "loss") {
          userStats.losses = (userStats.losses || 0) + 1;
        } else if (result === "draw") {
          userStats.draws = (userStats.draws || 0) + 1;
        }

        // é‡æ–°è®¡ç®—èƒœç‡
        if (userStats.totalGames > 0) {
          userStats.winRate = Math.round(
            (userStats.wins / userStats.totalGames) * 100
          );
        }

        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
        localStorage.setItem("piGomokuGameStats", JSON.stringify(userStats));

        // åŒæ—¶ä¿å­˜åˆ°ç”¨æˆ·ä¸“å±å­˜å‚¨
        saveUserGameDataToSpecificStorage();
      }

      // ä¿å­˜ç”¨æˆ·æ¸¸æˆæ•°æ®åˆ°ä¸“å±å­˜å‚¨
      function saveUserGameDataToSpecificStorage() {
        if (!currentUser || !userStats) return;

        const userGameData = {
          userId: currentUser.piUserId || currentUser.uid,
          username: getCurrentDisplayUsername(), // ä½¿ç”¨ç»Ÿä¸€çš„ç”¨æˆ·åè·å–å‡½æ•°
          gameStats: userStats,
          lastUpdated: new Date().toISOString(),
        };

        const userDataKey = `piGomokuUserData_${
          currentUser.piUserId || currentUser.uid
        }`;
        localStorage.setItem(userDataKey, JSON.stringify(userGameData));

        console.log(`[æ•°æ®ä¿å­˜] ç”¨æˆ·æ•°æ®å·²ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨: ${userDataKey}`, userGameData);
      }

      // å¼ºåˆ¶åˆ·æ–°æœ¬åœ°æ’è¡Œæ¦œæ•°æ®
      function refreshLocalLeaderboardData() {
        if (currentUser && userStats) {
          // ç¡®ä¿å½“å‰ç”¨æˆ·æ•°æ®è¢«ä¿å­˜
          saveUserGameDataToSpecificStorage();

          // é‡ç½®æ•°æ®åˆ·æ–°æ—¶é—´ï¼Œå¼ºåˆ¶ä¸‹æ¬¡è·å–æ’è¡Œæ¦œæ—¶é‡æ–°è®¡ç®—
          lastDataRefreshTime = 0;

          console.log("[æ’è¡Œæ¦œ] æœ¬åœ°æ•°æ®å·²åˆ·æ–°");
        }
      }

      // è°ƒè¯•å‡½æ•°ï¼šåˆ†ælocalStorageä¸­çš„ç”¨æˆ·æ•°æ®
      function debugLocalStorageData() {
        console.log("=== localStorage æ•°æ®åˆ†æ ===");

        const userDataKeys = [];
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);
          if (key && key.startsWith('piGomokuUserData_')) {
            userDataKeys.push(key);
          }
        }

        console.log(`æ‰¾åˆ° ${userDataKeys.length} ä¸ªç”¨æˆ·æ•°æ®é”®:`);
        userDataKeys.forEach(key => {
          try {
            const userData = JSON.parse(localStorage.getItem(key));
            console.log(`${key}:`, {
              userId: userData.userId,
              username: userData.username,
              totalGames: userData.gameStats?.totalGames,
              wins: userData.gameStats?.wins,
              winRate: userData.gameStats?.winRate
            });
          } catch (e) {
            console.error(`è§£æå¤±è´¥: ${key}`, e);
          }
        });

        console.log("å½“å‰ç”¨æˆ·:", currentUser);
        console.log("å½“å‰ç”¨æˆ·ç»Ÿè®¡:", userStats);
        console.log("=== åˆ†æç»“æŸ ===");
      }

      // å¼ºåˆ¶æ¸…ç†æ‰€æœ‰ç”¨æˆ·çš„é‡å¤æ•°æ®
      function forceCleanupAllDuplicateUsers() {
        console.log("[å¼ºåˆ¶æ¸…ç†] å¼€å§‹æ¸…ç†æ‰€æœ‰ç”¨æˆ·çš„é‡å¤æ•°æ®...");

        const userDataMap = new Map(); // userId -> æ‰€æœ‰è¯¥ç”¨æˆ·çš„æ•°æ®æ¡ç›®
        const keysToRemove = [];
        let totalCleaned = 0;

        // 1. æŒ‰ç”¨æˆ·IDåˆ†ç»„æ”¶é›†æ‰€æœ‰æ•°æ®
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);

          if (key && key.startsWith('piGomokuUserData_')) {
            try {
              const userData = JSON.parse(localStorage.getItem(key));
              if (userData && userData.userId && userData.gameStats) {
                const userId = userData.userId;

                if (!userDataMap.has(userId)) {
                  userDataMap.set(userId, []);
                }

                userDataMap.get(userId).push({
                  key: key,
                  data: userData,
                  totalGames: userData.gameStats.totalGames || 0,
                  wins: userData.gameStats.wins || 0,
                  winRate: userData.gameStats.winRate || 0,
                  lastUpdated: userData.lastUpdated || 0
                });
              } else {
                // æ ¼å¼é”™è¯¯çš„æ•°æ®ç›´æ¥åˆ é™¤
                keysToRemove.push(key);
                console.log(`[å¼ºåˆ¶æ¸…ç†] åˆ é™¤æ ¼å¼é”™è¯¯çš„æ•°æ®: ${key}`);
              }
            } catch (error) {
              console.error(`[å¼ºåˆ¶æ¸…ç†] è§£æå¤±è´¥: ${key}`, error);
              keysToRemove.push(key);
            }
          }
        }

        // 2. å¯¹æ¯ä¸ªç”¨æˆ·ï¼Œåªä¿ç•™æœ€æ­£ç¡®çš„æ•°æ®
        userDataMap.forEach((entries, userId) => {
          if (entries.length > 1) {
            console.log(`[å¼ºåˆ¶æ¸…ç†] ç”¨æˆ· ${userId} æœ‰ ${entries.length} ä¸ªé‡å¤æ•°æ®`);

            // æŒ‰æ¸¸æˆå±€æ•°æ’åºï¼Œå±€æ•°ç›¸åŒæ—¶æŒ‰æ—¶é—´æˆ³æ’åº
            entries.sort((a, b) => {
              if (b.totalGames !== a.totalGames) {
                return b.totalGames - a.totalGames; // æ¸¸æˆå±€æ•°å¤šçš„ä¼˜å…ˆ
              }
              return b.lastUpdated - a.lastUpdated; // æ—¶é—´æ–°çš„ä¼˜å…ˆ
            });

            const keepEntry = entries[0];
            console.log(`[å¼ºåˆ¶æ¸…ç†] ç”¨æˆ· ${userId} ä¿ç•™: ${keepEntry.key} (æ€»å±€æ•°: ${keepEntry.totalGames})`);

            // åˆ é™¤å…¶ä»–é‡å¤æ•°æ®
            for (let i = 1; i < entries.length; i++) {
              const entry = entries[i];
              localStorage.removeItem(entry.key);
              keysToRemove.push(entry.key);
              totalCleaned++;
              console.log(`[å¼ºåˆ¶æ¸…ç†] ç”¨æˆ· ${userId} åˆ é™¤: ${entry.key} (æ€»å±€æ•°: ${entry.totalGames})`);
            }
          }
        });

        // 3. åˆ é™¤æ ¼å¼é”™è¯¯çš„æ•°æ®
        keysToRemove.forEach(key => {
          if (localStorage.getItem(key)) { // ç¡®ä¿è¿˜å­˜åœ¨æ‰åˆ é™¤
            localStorage.removeItem(key);
          }
        });

        console.log(`[å¼ºåˆ¶æ¸…ç†] æ¸…ç†å®Œæˆï¼`);
        console.log(`[å¼ºåˆ¶æ¸…ç†] - å¤„ç†äº† ${userDataMap.size} ä¸ªç”¨æˆ·`);
        console.log(`[å¼ºåˆ¶æ¸…ç†] - åˆ é™¤äº† ${totalCleaned} ä¸ªé‡å¤æ•°æ®æ¡ç›®`);
        console.log(`[å¼ºåˆ¶æ¸…ç†] - åˆ é™¤äº† ${keysToRemove.length - totalCleaned} ä¸ªæ ¼å¼é”™è¯¯çš„æ•°æ®`);

        return totalCleaned;
      }

      // åœ¨å…¨å±€ä½œç”¨åŸŸä¸­æš´éœ²è°ƒè¯•å‡½æ•°
      window.debugLocalStorageData = debugLocalStorageData;
      window.cleanupDuplicateUserData = cleanupDuplicateUserData;
      window.forceCleanupAllDuplicateUsers = forceCleanupAllDuplicateUsers;

      // æ¸…ç†é‡å¤çš„ç”¨æˆ·æ•°æ®
      function cleanupDuplicateUserData() {
        console.log("[æ•°æ®æ¸…ç†] å¼€å§‹æ¸…ç†é‡å¤çš„ç”¨æˆ·æ•°æ®...");

        const userDataMap = new Map(); // userId -> æœ€æ–°çš„ç”¨æˆ·æ•°æ®
        const keysToRemove = [];

        // 1. æ”¶é›†æ‰€æœ‰ç”¨æˆ·æ•°æ®ï¼Œä¿ç•™æ¸¸æˆå±€æ•°æœ€å¤šçš„æ•°æ®ï¼ˆæœ€å¯èƒ½æ˜¯æ­£ç¡®çš„ï¼‰
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);

          if (key && key.startsWith('piGomokuUserData_')) {
            try {
              const userData = JSON.parse(localStorage.getItem(key));
              if (userData && userData.userId && userData.gameStats) {
                const userId = userData.userId;
                const totalGames = userData.gameStats.totalGames || 0;

                console.log(`[æ•°æ®æ¸…ç†] å‘ç°ç”¨æˆ·æ•°æ®: ${userId} (${key}) - æ€»å±€æ•°: ${totalGames}`);

                if (userDataMap.has(userId)) {
                  // å¦‚æœå·²å­˜åœ¨ï¼Œæ¯”è¾ƒæ¸¸æˆå±€æ•°ï¼Œä¿ç•™å±€æ•°æ›´å¤šçš„æ•°æ®
                  const existingData = userDataMap.get(userId);
                  const existingGames = existingData.gameStats.totalGames || 0;

                  if (totalGames > existingGames) {
                    // å½“å‰æ•°æ®æ¸¸æˆå±€æ•°æ›´å¤šï¼Œæ ‡è®°æ—§keyåˆ é™¤
                    keysToRemove.push(existingData.storageKey);
                    userDataMap.set(userId, { ...userData, storageKey: key });
                    console.log(`[æ•°æ®æ¸…ç†] ç”¨æˆ· ${userId} ä¿ç•™å±€æ•°æ›´å¤šçš„æ•°æ®: ${totalGames} > ${existingGames} (${key})`);
                  } else if (totalGames < existingGames) {
                    // æ—§æ•°æ®æ¸¸æˆå±€æ•°æ›´å¤šï¼Œæ ‡è®°å½“å‰keyåˆ é™¤
                    keysToRemove.push(key);
                    console.log(`[æ•°æ®æ¸…ç†] ç”¨æˆ· ${userId} åˆ é™¤å±€æ•°è¾ƒå°‘çš„æ•°æ®: ${totalGames} < ${existingGames} (${key})`);
                  } else {
                    // æ¸¸æˆå±€æ•°ç›¸åŒï¼Œæ¯”è¾ƒæ—¶é—´æˆ³
                    const existingTimestamp = existingData.lastUpdated || 0;
                    const currentTimestamp = userData.lastUpdated || 0;

                    if (currentTimestamp > existingTimestamp) {
                      keysToRemove.push(existingData.storageKey);
                      userDataMap.set(userId, { ...userData, storageKey: key });
                      console.log(`[æ•°æ®æ¸…ç†] ç”¨æˆ· ${userId} ä¿ç•™æ—¶é—´æ›´æ–°çš„æ•°æ® (${key})`);
                    } else {
                      keysToRemove.push(key);
                      console.log(`[æ•°æ®æ¸…ç†] ç”¨æˆ· ${userId} åˆ é™¤æ—¶é—´è¾ƒæ—§çš„æ•°æ® (${key})`);
                    }
                  }
                } else {
                  // é¦–æ¬¡é‡åˆ°è¯¥ç”¨æˆ·
                  userDataMap.set(userId, { ...userData, storageKey: key });
                  console.log(`[æ•°æ®æ¸…ç†] ç”¨æˆ· ${userId} é¦–æ¬¡è®°å½• (${key})`);
                }
              } else {
                // æ•°æ®æ ¼å¼ä¸æ­£ç¡®ï¼Œåˆ é™¤
                keysToRemove.push(key);
                console.log(`[æ•°æ®æ¸…ç†] åˆ é™¤æ ¼å¼é”™è¯¯çš„æ•°æ®: ${key}`);
              }
            } catch (error) {
              console.error(`[æ•°æ®æ¸…ç†] è§£ææ•°æ®å¤±è´¥ ${key}:`, error);
              keysToRemove.push(key); // æŸåçš„æ•°æ®ä¹Ÿåˆ é™¤
            }
          }
        }

        // 2. åˆ é™¤é‡å¤çš„æ•°æ®
        keysToRemove.forEach(key => {
          localStorage.removeItem(key);
          console.log(`[æ•°æ®æ¸…ç†] åˆ é™¤é‡å¤æ•°æ®: ${key}`);
        });

        console.log(`[æ•°æ®æ¸…ç†] æ¸…ç†å®Œæˆï¼Œåˆ é™¤äº† ${keysToRemove.length} ä¸ªé‡å¤é¡¹`);
        console.log(`[æ•°æ®æ¸…ç†] ä¿ç•™äº† ${userDataMap.size} ä¸ªå”¯ä¸€ç”¨æˆ·çš„æ•°æ®`);

        // 3. è¾“å‡ºä¿ç•™çš„æ•°æ®è¯¦æƒ…
        userDataMap.forEach((data, userId) => {
          console.log(`[æ•°æ®æ¸…ç†] ä¿ç•™ç”¨æˆ·: ${userId} - æ€»å±€æ•°: ${data.gameStats.totalGames} - å­˜å‚¨é”®: ${data.storageKey}`);
        });

        return keysToRemove.length;
      }

      // åœ¨é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ¸…ç†é‡å¤æ•°æ®
      document.addEventListener('DOMContentLoaded', function() {
        // å»¶è¿Ÿæ‰§è¡Œæ¸…ç†ï¼Œç¡®ä¿å…¶ä»–åˆå§‹åŒ–å®Œæˆ
        setTimeout(() => {
          console.log("[é¡µé¢åŠ è½½] å¼€å§‹è‡ªåŠ¨æ¸…ç†é‡å¤æ•°æ®...");
          const cleanedCount = forceCleanupAllDuplicateUsers();
          if (cleanedCount > 0) {
            console.log(`[é¡µé¢åŠ è½½] è‡ªåŠ¨æ¸…ç†å®Œæˆï¼Œåˆ é™¤äº† ${cleanedCount} ä¸ªé‡å¤æ•°æ®`);
          } else {
            console.log("[é¡µé¢åŠ è½½] æ²¡æœ‰å‘ç°é‡å¤æ•°æ®");
          }
        }, 1000);
      });



      // æ˜¾ç¤ºæ¸¸æˆç»“æœç»Ÿè®¡
      async function showGameResultStats(result, stats) {
        const resultText = {
          win: t("congratulations_win"),
          loss: t("sorry_lose"),
          draw: t("draw_result"),
        };

        // æ£€æŸ¥æ˜¯å¦ä¸ºç™»å½•ç”¨æˆ·
        const isLoggedIn = currentUser && userStats;

        // è·å–å®æ—¶æ’å
        let currentRank = 0;
        if (isLoggedIn && currentUser.piUserId) {
          try {
            currentRank = await getUserRank(currentUser.piUserId);
          } catch (error) {
            console.error("è·å–ç”¨æˆ·æ’åå¤±è´¥:", error);
          }
        }

        showCustomModal(
          t("game_result"),
          `
                <div style="text-align: center;">
                    <div style="font-size: 3em; margin-bottom: 15px;">
                        ${
                          result === "win"
                            ? "ğŸ†"
                            : result === "loss"
                            ? "ğŸ˜¢"
                            : "ğŸ¤"
                        }
                    </div>
                    <h3 style="color: #333; margin-bottom: 20px;">${
                      resultText[result]
                    }</h3>

                    ${
                      isLoggedIn
                        ? `
                    <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                            <div style="text-align: center;">
                                <div style="font-size: 1.5em; color: #28a745; font-weight: bold;">${
                                  stats.winRate
                                }%</div>
                                <div style="color: #666; font-size: 0.9em;">${t(
                                  "win_rate"
                                )}</div>
                                <div style="color: #666; font-size: 0.8em;">
                                    ${t(
                                      "wins_losses_format",
                                      stats.wins,
                                      stats.losses
                                    )}
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5em; color: #007bff; font-weight: bold;">${
                                  stats.totalGames
                                }</div>
                                <div style="color: #666; font-size: 0.9em;">${t(
                                  "ranking_header_games"
                                )}</div>
                                <div style="color: #666; font-size: 0.8em;">
                                    ${t("monthly_games")}
                                </div>
                            </div>
                        </div>

                        <div style="text-align: center; padding-top: 15px; border-top: 1px solid #e9ecef;">
                            <div style="color: #666; font-size: 0.9em;">
                                ${t("current_rank_label")}: ${
                            currentRank > 0
                              ? t("rank_position", currentRank)
                              : t("not_listed")
                          }
                            </div>
                        </div>
                    </div>
                    `
                        : `
                    <div style="background: #fff3cd; border-radius: 8px; padding: 20px; margin-bottom: 20px; border: 2px solid #ffeaa7;">
                        <div style="font-size: 2em; margin-bottom: 10px;">ğŸ®</div>
                        <h4 style="color: #856404; margin-bottom: 15px;">${t(
                          "guest_mode"
                        )}</h4>
                        <p style="color: #856404; margin: 0; line-height: 1.6;">
                            ${t("guest_mode_desc")}<br>
                            <strong>${t("login_benefits")}</strong><br>
                            ${t("benefit_stats")}<br>
                            ${t("benefit_leaderboard")}<br>
                            ${t("benefit_pi_service")}<br>
                            ${t("benefit_monthly_rewards")}
                        </p>
                    </div>
                    `
                    }



                    <div style="display: flex; gap: 10px; justify-content: center;">
                        <button onclick="closeNewModal(); resetAIGame()" style="background: #007bff; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                            ${t("play_again")}
                        </button>
                        ${
                          isLoggedIn
                            ? `
                        <button onclick="closeNewModal(); showRealTimeLeaderboard()" style="background: #28a745; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                            ${t("view_leaderboard")}
                        </button>
                        `
                            : `
                        <button onclick="closeNewModal(); handleSignIn()" style="background: #28a745; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                            ${t("login_now")}
                        </button>
                        `
                        }
                    </div>
                </div>
            `
        );
      }

      // æ˜¾ç¤ºAIå¯¹æˆ˜æ¸¸æˆç•Œé¢ - å“åº”å¼è®¾è®¡é€‚é…æ‰€æœ‰å±å¹•
      function showSimpleGameScreen() {
        const root = document.getElementById("root");
        root.innerHTML = `
                <div style="height: 100vh; background: linear-gradient(135deg, var(--pi-primary) 0%, var(--pi-secondary) 100%); display: flex; flex-direction: column; align-items: center; padding: 2px; box-sizing: border-box; overflow: hidden;" class="game-container">
                    <!-- æ¸¸æˆå¤´éƒ¨ - æåº¦ç´§å‡‘å¸ƒå±€ -->
                    <header style="width: 100%; display: flex; justify-content: flex-start; align-items: center; margin-bottom: 1px;">
                        <button onclick="backToLogin()" class="btn btn-outline btn-sm" style="height: auto; min-height: auto; padding: 4px 8px; line-height: 1.2; font-size: 14px;">
                            ${t("return_to_menu")}
                        </button>
                    </header>

                    <!-- æ¸¸æˆæ ‡é¢˜ - æåº¦ç´§å‡‘ -->
                    <h1 style="color: white; margin: 0 0 1px 0; font-size: clamp(24px, 5vw, 30px); text-align: center;">${t(
                      "ai_battle_title"
                    )}</h1>

                    <!-- ç©å®¶ä¿¡æ¯ - æåº¦ç´§å‡‘å¸ƒå±€ -->
                    <div style="text-align: center; margin-bottom: 0; color: white;">
                        <div style="display: flex; justify-content: center; align-items: center; gap: clamp(10px, 3vw, 15px); margin-bottom: 0;">
                            <div style="display: flex; align-items: center; gap: 6px; background: rgba(255,255,255,0.1); padding: 6px 12px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.3);">
                                <div class="stone black" style="width: 20px; height: 20px; margin: 0;"></div>
                                <strong style="font-size: clamp(16px, 3.5vw, 20px);">${t(
                                  "player_label"
                                )}</strong>
                            </div>
                            <div style="color: white; font-size: clamp(18px, 3.5vw, 22px); font-weight: 600;">${t(
                              "vs_label"
                            )}</div>
                            <div style="display: flex; align-items: center; gap: 6px; background: rgba(255,255,255,0.1); padding: 6px 12px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.3);">
                                <div class="stone white" style="width: 20px; height: 20px; margin: 0;"></div>
                                <strong style="font-size: clamp(16px, 3.5vw, 20px);">${t(
                                  "ai_label"
                                )}</strong>
                            </div>
                        </div>
                        <div style="font-size: clamp(16px, 3.5vw, 20px); font-weight: 600; margin-top: 2px; margin-bottom: 0;" id="current-player-display">
                            ${t("your_turn")}
                        </div>
                        <!-- å›åˆè®¡æ—¶å™¨ -->
                        <div style="font-size: clamp(14px, 3vw, 16px); margin-top: 4px; color: #ffffff;" id="turn-timer-display">
                            ${t("thinking_time", "60")}
                        </div>
                    </div>

                    <!-- æ£‹ç›˜å®¹å™¨ - æåº¦ç´§å‡‘é—´è· -->
                    <div class="game-board" style="display: flex; align-items: flex-start; justify-content: center; margin: 0; padding-top: 2px;">
                        <div class="board-container">
                            <div class="board-grid responsive-board" id="ai-game-board">
                                <!-- 15x15 æ£‹ç›˜æ ¼å­å°†é€šè¿‡JavaScriptç”Ÿæˆ -->
                            </div>
                        </div>
                    </div>

                    <!-- æ¸¸æˆæ§åˆ¶æŒ‰é’® - å›ºå®šåœ¨åº•éƒ¨ -->
                    <div style="display: flex; justify-content: center; gap: 12px; margin-top: 8px;">
                        <button onclick="undoAIMove()" class="btn btn-warning btn-sm" id="undo-btn" style="min-width: 80px; padding: 8px 16px;">
                            ${t("undo_button")}
                        </button>
                        <button onclick="resetAIGame()" class="btn btn-primary btn-sm" style="min-width: 80px; padding: 8px 16px;">
                            ${t("new_game_button")}
                        </button>
                    </div>
                </div>
            `;

        // åˆå§‹åŒ–AIæ¸¸æˆ
        initAIGame();
      }

      // AIæ¸¸æˆç›¸å…³å˜é‡
      let aiGameBoard = Array(15)
        .fill()
        .map(() => Array(15).fill(null));
      let aiCurrentPlayer = "black"; // ç©å®¶æ˜¯é»‘å­ï¼ŒAIæ˜¯ç™½å­
      let aiGameHistory = [];
      let aiGameActive = true;

      // å›åˆè¶…æ—¶ç›¸å…³å˜é‡
      let turnTimer = null;
      let turnTimeLeft = 0;
      let turnTimerDisplay = null;
      const TURN_TIME_LIMIT = 60; // 60ç§’å›åˆæ—¶é—´é™åˆ¶
      const WARNING_TIME = 30; // 30ç§’å¼€å§‹è­¦å‘Š

      // éŸ³æ•ˆç®¡ç†å™¨ - ä½¿ç”¨æ‚¨çš„è‡ªå®šä¹‰éŸ³æ•ˆæ–‡ä»¶
      class SoundManager {
        constructor() {
          this.sounds = {};
          this.enabled = true;
          this.volume = 0.5; // éŸ³é‡æ§åˆ¶
          this.initSounds();
        }

        initSounds() {
          // é¢„åŠ è½½æ‚¨çš„éŸ³æ•ˆæ–‡ä»¶ï¼Œè®¾ç½®ä¸åŒéŸ³æ•ˆçš„éŸ³é‡
          const soundFiles = {
            gameStart: { src: "./public/sounds/game-start.mp3", volume: 0.5 },
            move: { src: "./public/sounds/move.mp3", volume: 0.8 }, // æé«˜è½å­éŸ³æ•ˆéŸ³é‡
            victory: { src: "./public/sounds/victory.mp3", volume: 0.5 },
          };

          // åˆ›å»ºAudioå¯¹è±¡å¹¶é¢„åŠ è½½
          for (const [key, config] of Object.entries(soundFiles)) {
            try {
              const audio = new Audio(config.src);
              audio.volume = config.volume;
              audio.preload = "auto";

              // æ·»åŠ é”™è¯¯å¤„ç†
              audio.addEventListener("error", (e) => {
                console.log(`éŸ³æ•ˆæ–‡ä»¶åŠ è½½å¤±è´¥: ${config.src}`, e);
              });

              // æ·»åŠ åŠ è½½æˆåŠŸäº‹ä»¶
              audio.addEventListener("canplaythrough", () => {
                console.log(`éŸ³æ•ˆæ–‡ä»¶åŠ è½½æˆåŠŸ: ${config.src}`);
              });

              this.sounds[key] = audio;
            } catch (e) {
              console.log(`éŸ³æ•ˆåˆå§‹åŒ–å¤±è´¥: ${key}`, e);
            }
          }
        }

        // æ’­æ”¾éŸ³æ•ˆçš„é€šç”¨æ–¹æ³•
        playSound(soundName) {
          if (!this.enabled || !this.sounds[soundName]) {
            return;
          }

          try {
            const audio = this.sounds[soundName];
            // é‡ç½®æ’­æ”¾ä½ç½®
            audio.currentTime = 0;
            // æ’­æ”¾éŸ³æ•ˆ
            const playPromise = audio.play();

            // å¤„ç†æ’­æ”¾Promiseï¼ˆç°ä»£æµè§ˆå™¨è¦æ±‚ï¼‰
            if (playPromise !== undefined) {
              playPromise.catch((error) => {
                console.log(`éŸ³æ•ˆæ’­æ”¾å¤±è´¥: ${soundName}`, error);
              });
            }
          } catch (e) {
            console.log(`éŸ³æ•ˆæ’­æ”¾é”™è¯¯: ${soundName}`, e);
          }
        }

        playMove() {
          this.playSound("move");
        }

        playVictory() {
          this.playSound("victory");
        }

        playGameStart() {
          this.playSound("gameStart");
        }

        // è®¾ç½®éŸ³é‡
        setVolume(volume) {
          this.volume = Math.max(0, Math.min(1, volume));
          // ä¿æŒä¸åŒéŸ³æ•ˆçš„ç›¸å¯¹éŸ³é‡æ¯”ä¾‹
          const volumeRatios = {
            gameStart: 0.5,
            move: 0.8,
            victory: 0.5
          };

          for (const [key, audio] of Object.entries(this.sounds)) {
            const ratio = volumeRatios[key] || 0.5;
            audio.volume = this.volume * ratio;
          }
        }

        // å¯ç”¨/ç¦ç”¨éŸ³æ•ˆ
        toggle() {
          this.enabled = !this.enabled;
          return this.enabled;
        }
      }

      // åˆ›å»ºéŸ³æ•ˆç®¡ç†å™¨å®ä¾‹
      let soundManager = new SoundManager();

      // è‡ªå®šä¹‰å¼¹çª—å‡½æ•°
      function showCustomAlert(title, message, callback) {
        const modal = document.createElement("div");
        modal.className = "custom-modal";
        modal.innerHTML = `
                <div class="custom-modal-content">
                    <div class="custom-modal-title">${title}</div>
                    <div class="custom-modal-message">${message}</div>
                    <div class="custom-modal-buttons">
                        <button class="custom-modal-btn primary" onclick="closeCustomModal()">${t(
                          "confirm"
                        )}</button>
                    </div>
                </div>
            `;
        document.body.appendChild(modal);

        // ä¿å­˜å›è°ƒå‡½æ•°
        window.customModalCallback = callback;
      }

      function showCustomConfirm(title, message, onConfirm, onCancel) {
        const modal = document.createElement("div");
        modal.className = "custom-modal";
        modal.innerHTML = `
                <div class="custom-modal-content">
                    <div class="custom-modal-title">${title}</div>
                    <div class="custom-modal-message">${message}</div>
                    <div class="custom-modal-buttons">
                        <button class="custom-modal-btn primary" onclick="confirmCustomModal()">${t(
                          "confirm"
                        )}</button>
                        <button class="custom-modal-btn secondary" onclick="cancelCustomModal()">${t(
                          "cancel"
                        )}</button>
                    </div>
                </div>
            `;
        document.body.appendChild(modal);

        // ä¿å­˜å›è°ƒå‡½æ•°
        window.customModalConfirm = onConfirm;
        window.customModalCancel = onCancel;
      }

      function closeCustomModal() {
        const modal = document.querySelector(".custom-modal");
        if (modal) {
          modal.remove();
          if (window.customModalCallback) {
            window.customModalCallback();
            window.customModalCallback = null;
          }
        }
      }

      function confirmCustomModal() {
        const modal = document.querySelector(".custom-modal");
        if (modal) {
          modal.remove();
          if (window.customModalConfirm) {
            window.customModalConfirm();
            window.customModalConfirm = null;
            window.customModalCancel = null;
          }
        }
      }

      function cancelCustomModal() {
        const modal = document.querySelector(".custom-modal");
        if (modal) {
          modal.remove();
          if (window.customModalCancel) {
            window.customModalCancel();
          }
          window.customModalConfirm = null;
          window.customModalCancel = null;
        }
      }

      // åˆå§‹åŒ–AIæ¸¸æˆ
      function initAIGame() {
        const board = document.getElementById("ai-game-board");
        board.innerHTML = "";

        // è®¾ç½®å“åº”å¼æ£‹ç›˜å°ºå¯¸
        setupResponsiveBoard();

        // åˆ›å»º15x15æ£‹ç›˜
        for (let row = 0; row < 15; row++) {
          for (let col = 0; col < 15; col++) {
            const cell = document.createElement("div");
            cell.className = "board-cell";
            cell.dataset.row = row;
            cell.dataset.col = col;
            cell.addEventListener("click", () => makeAIMove(row, col));
            board.appendChild(cell);
          }
        }

        // é‡ç½®æ¸¸æˆçŠ¶æ€
        aiGameBoard = Array(15)
          .fill()
          .map(() => Array(15).fill(null));
        aiCurrentPlayer = "black";
        aiGameHistory = [];
        aiGameActive = true;
        window.gameStartTime = Date.now(); // è®°å½•æ¸¸æˆå¼€å§‹æ—¶é—´

        // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
        stopTurnTimer();

        updateAIGameStatus();

        // æ’­æ”¾æ¸¸æˆå¼€å§‹éŸ³æ•ˆ
        setTimeout(() => {
          soundManager.playGameStart();
        }, 300);

        // æ‰‹æœºç«¯æ¸…é™¤é˜´å½±
        setTimeout(() => {
          clearAllStoneShadows();
        }, 100);
      }

      // è®¾ç½®å“åº”å¼æ£‹ç›˜å°ºå¯¸
      function setupResponsiveBoard() {
        const board = document.getElementById("ai-game-board");
        if (!board) return;

        // æ ¹æ®å±å¹•å°ºå¯¸åŠ¨æ€è®¡ç®—æ£‹ç›˜å¤§å°
        const screenWidth = window.innerWidth;
        const screenHeight = window.innerHeight;

        // è®¡ç®—å¯ç”¨é«˜åº¦ï¼šæ€»é«˜åº¦å‡å»å¤´éƒ¨ã€æ ‡é¢˜ã€ç©å®¶ä¿¡æ¯ã€æŒ‰é’®ç­‰åŒºåŸŸ
        // é¢„ç•™ç©ºé—´ï¼šè¿”å›æŒ‰é’®(40px) + æ ‡é¢˜(35px) + ç©å®¶ä¿¡æ¯(80px) + æŒ‰é’®åŒºåŸŸ(60px) + è¾¹è·(20px)
        const reservedHeight = 235;
        const availableHeight = screenHeight - reservedHeight;
        const availableWidth = screenWidth - 16; // å‡å»å·¦å³è¾¹è·

        let cellSize;
        if (screenWidth >= 1200) {
          cellSize = 28;
        } else if (screenWidth >= 992) {
          cellSize = 26;
        } else if (screenWidth >= 768) {
          cellSize = 24;
        } else if (screenWidth >= 576) {
          cellSize = 22;
        } else {
          // æ‰‹æœºç«¯ï¼šå……åˆ†åˆ©ç”¨å±å¹•å®½åº¦
          // å‡å»è¾¹æ¡†å’Œå†…è¾¹è·ï¼Œè®¡ç®—æœ€å¤§å¯ç”¨å®½åº¦
          const availableWidth = screenWidth - 16; // 8px padding * 2
          const maxCellSize = Math.floor(availableWidth / 15);
          cellSize = Math.max(20, Math.min(24, maxCellSize)); // æœ€å°20pxï¼Œæœ€å¤§24px
        }

        // æ¡Œé¢ç«¯ç¡®ä¿æ£‹ç›˜ä¸ä¼šè¶…å‡ºå±å¹•é«˜åº¦ï¼Œä½†ä¼˜å…ˆä¿æŒå®½åº¦
        if (screenWidth >= 768) {
          const maxBoardSizeByHeight = Math.floor(availableHeight / 15);
          if (maxBoardSizeByHeight < cellSize) {
            cellSize = Math.max(20, maxBoardSizeByHeight); // æœ€å°ä¿æŒ20px
          }
        }

        // åªæœ‰å½“å°ºå¯¸çœŸæ­£æ”¹å˜æ—¶æ‰æ›´æ–°CSSå˜é‡ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“
        const currentCellSize = getComputedStyle(
          document.documentElement
        ).getPropertyValue("--cell-size");
        const newCellSizeValue = cellSize + "px";

        if (currentCellSize !== newCellSizeValue) {
          // è®¾ç½®CSSå˜é‡ - æ£‹å­å°ºå¯¸é€‚ä¸­ï¼Œç•™å‡ºåˆç†ç©ºéš™
          const stoneSize = Math.max(14, cellSize - 4); // æ£‹å­æ¯”æ ¼å­å°4pxï¼Œä¿æŒåˆç†ç©ºéš™
          document.documentElement.style.setProperty(
            "--cell-size",
            newCellSizeValue
          );
          document.documentElement.style.setProperty(
            "--stone-size",
            stoneSize + "px"
          );
        }
      }

      // é˜²æŠ–å‡½æ•°
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      // ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼ˆä½¿ç”¨é˜²æŠ–é¿å…é¢‘ç¹è°ƒç”¨ï¼‰
      window.addEventListener(
        "resize",
        debounce(() => {
          if (document.getElementById("ai-game-board")) {
            setupResponsiveBoard();
          }
        }, 250)
      );

      // ç©å®¶ä¸‹æ£‹
      function makeAIMove(row, col) {
        if (
          !aiGameActive ||
          aiGameBoard[row][col] !== null ||
          aiCurrentPlayer !== "black"
        ) {
          return;
        }

        // åœæ­¢ç©å®¶å›åˆè®¡æ—¶å™¨
        stopTurnTimer();

        // ç©å®¶ä¸‹é»‘å­
        placeAIStone(row, col, "black");
        aiGameBoard[row][col] = "black";
        aiGameHistory.push({ row, col, player: "black" });

        // æ’­æ”¾è½å­éŸ³æ•ˆ
        soundManager.playMove();

        // æ£€æŸ¥ç©å®¶æ˜¯å¦è·èƒœ
        if (checkAIWin(row, col, "black")) {
          endAIGame("black");
          return;
        }

        // æ£€æŸ¥æ˜¯å¦å¹³å±€
        if (isAIBoardFull()) {
          endAIGame(null);
          return;
        }

        // åˆ‡æ¢åˆ°AI
        aiCurrentPlayer = "white";
        updateAIGameStatus();

        // AIæ€è€ƒæ—¶é—´æ˜¾ç¤º
        const currentPlayerDisplay = document.getElementById(
          "current-player-display"
        );
        if (currentPlayerDisplay) {
          currentPlayerDisplay.textContent = t("opponent_turn");
        }

        // AIå»¶è¿Ÿä¸‹æ£‹ï¼ˆç»™ç”¨æˆ·ä¸€äº›ååº”æ—¶é—´ï¼‰
        setTimeout(() => {
          makeAIAutoMove();
        }, 800);
      }

      // AIè‡ªåŠ¨ä¸‹æ£‹
      function makeAIAutoMove() {
        if (!aiGameActive || aiCurrentPlayer !== "white") return;

        const aiMove = getAIBestMove();
        if (aiMove) {
          placeAIStone(aiMove.row, aiMove.col, "white");
          aiGameBoard[aiMove.row][aiMove.col] = "white";
          aiGameHistory.push({
            row: aiMove.row,
            col: aiMove.col,
            player: "white",
          });

          // æ’­æ”¾è½å­éŸ³æ•ˆ
          soundManager.playMove();

          // æ£€æŸ¥AIæ˜¯å¦è·èƒœ
          if (checkAIWin(aiMove.row, aiMove.col, "white")) {
            endAIGame("white");
            return;
          }

          // æ£€æŸ¥æ˜¯å¦å¹³å±€
          if (isAIBoardFull()) {
            endAIGame(null);
            return;
          }

          // åˆ‡æ¢å›ç©å®¶
          aiCurrentPlayer = "black";
          updateAIGameStatus();
        }
      }

      // å¼ºåˆ¶æ¸…é™¤æ£‹å­é˜´å½±çš„å‡½æ•° - æ‰‹æœºç«¯ä¸“ç”¨
      function clearStoneShadows(stone) {
        if (stone) {
          stone.style.boxShadow = "none";
          stone.style.filter = "none";
          stone.style.webkitFilter = "none";
          stone.style.textShadow = "none";
          stone.style.webkitBoxShadow = "none";
          stone.style.mozBoxShadow = "none";

          // å¼ºåˆ¶é‡ç»˜
          stone.offsetHeight;
        }
      }

      // å…¨å±€æ¸…é™¤æ‰€æœ‰æ£‹å­é˜´å½± - æ‰‹æœºç«¯ä¸“ç”¨
      function clearAllStoneShadows() {
        if (window.innerWidth <= 768) {
          const allStones = document.querySelectorAll(".stone");
          allStones.forEach((stone) => {
            clearStoneShadows(stone);
          });

          // ä¹Ÿæ¸…é™¤æ£‹ç›˜æ ¼å­çš„é˜´å½±
          const allCells = document.querySelectorAll(".board-cell");
          allCells.forEach((cell) => {
            cell.style.boxShadow = "none";
            cell.style.filter = "none";
            cell.style.webkitFilter = "none";
            cell.style.webkitBoxShadow = "none";
            cell.style.mozBoxShadow = "none";
          });
        }
      }

      // åœ¨æ£‹ç›˜ä¸Šæ”¾ç½®æ£‹å­
      function placeAIStone(row, col, player) {
        // ç§»é™¤æ‰€æœ‰ä¹‹å‰çš„æœ€æ–°è½å­æ ‡è¯†ï¼ˆç¡®ä¿å½»åº•æ¸…é™¤ï¼‰
        const allPreviousLatest = document.querySelectorAll(
          "#ai-game-board .stone.latest"
        );
        allPreviousLatest.forEach((stone) => {
          stone.classList.remove("latest");
          // æ‰‹æœºç«¯å¼ºåˆ¶æ¸…é™¤é˜´å½±
          if (window.innerWidth <= 768) {
            clearStoneShadows(stone);
          }
        });

        const cell = document.querySelector(
          `#ai-game-board [data-row="${row}"][data-col="${col}"]`
        );

        // ç»™æ ¼å­æ·»åŠ occupiedç±»ï¼Œé˜²æ­¢hoveræ•ˆæœ
        cell.classList.add("occupied");

        const stone = document.createElement("div");
        stone.className = `stone ${player} latest`;
        cell.appendChild(stone);

        // æ‰‹æœºç«¯å¼ºåˆ¶æ¸…é™¤æ–°æ£‹å­çš„é˜´å½±
        if (window.innerWidth <= 768) {
          setTimeout(() => {
            clearStoneShadows(stone);
          }, 0);

          // åŠ¨ç”»ç»“æŸåå†æ¬¡æ¸…é™¤
          setTimeout(() => {
            clearStoneShadows(stone);
          }, 300);
        }
      }

      // AIé…ç½®
      const AI_CONFIG = {
        MAX_DEPTH: 6, // æœç´¢æ·±åº¦
        MAX_TIME: 3000, // æœ€å¤§æ€è€ƒæ—¶é—´(æ¯«ç§’)
        CANDIDATE_LIMIT: 20, // å€™é€‰ä½ç½®æ•°é‡é™åˆ¶
      };

      // è¯„ä¼°åˆ†æ•°å¸¸é‡
      const SCORES = {
        WIN: 100000,
        LOSE: -100000,
        ALIVE_FOUR: 10000,
        RUSH_FOUR: 1000,
        ALIVE_THREE: 1000,
        SLEEP_THREE: 100,
        ALIVE_TWO: 100,
        SLEEP_TWO: 10,
        ONE: 1,
      };

      // å¼ºåŒ–AIç®—æ³• - ä½¿ç”¨Minimax + Alpha-Betaå‰ªæ
      function getAIBestMove() {
        const startTime = Date.now();

        // é¦–å…ˆæ£€æŸ¥æ˜¯å¦æœ‰ç«‹å³è·èƒœçš„æœºä¼š
        const winMove = findWinningMove("white");
        if (winMove) return winMove;

        // æ£€æŸ¥æ˜¯å¦éœ€è¦ç«‹å³é˜²å®ˆ
        const blockMove = findWinningMove("black");
        if (blockMove) return blockMove;

        // è·å–å€™é€‰ä½ç½®
        const candidates = getCandidateMoves();
        if (candidates.length === 0) {
          return { row: 7, col: 7 }; // ä¸­å¿ƒä½ç½®
        }

        let bestMove = candidates[0];
        let bestScore = -Infinity;

        // ä½¿ç”¨Minimaxç®—æ³•æœç´¢æœ€ä½³ä½ç½®
        for (const move of candidates) {
          // æ—¶é—´é™åˆ¶æ£€æŸ¥
          if (Date.now() - startTime > AI_CONFIG.MAX_TIME) break;

          aiGameBoard[move.row][move.col] = "white";
          const score = minimax(
            AI_CONFIG.MAX_DEPTH - 1,
            false,
            -Infinity,
            Infinity,
            startTime
          );
          aiGameBoard[move.row][move.col] = null;

          if (score > bestScore) {
            bestScore = score;
            bestMove = move;
          }
        }

        return bestMove;
      }

      // Minimaxç®—æ³•å®ç°
      function minimax(depth, isMaximizing, alpha, beta, startTime) {
        // æ—¶é—´é™åˆ¶æ£€æŸ¥
        if (Date.now() - startTime > AI_CONFIG.MAX_TIME) {
          return evaluateBoard();
        }

        // æ·±åº¦é™åˆ¶æˆ–æ¸¸æˆç»“æŸ
        if (depth === 0) {
          return evaluateBoard();
        }

        // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
        const gameResult = checkGameEnd();
        if (gameResult !== null) {
          if (gameResult === "white") return SCORES.WIN;
          if (gameResult === "black") return SCORES.LOSE;
          return 0; // å¹³å±€
        }

        const candidates = getCandidateMoves();
        if (candidates.length === 0) return evaluateBoard();

        if (isMaximizing) {
          let maxScore = -Infinity;
          for (const move of candidates) {
            aiGameBoard[move.row][move.col] = "white";
            const score = minimax(depth - 1, false, alpha, beta, startTime);
            aiGameBoard[move.row][move.col] = null;

            maxScore = Math.max(maxScore, score);
            alpha = Math.max(alpha, score);
            if (beta <= alpha) break; // Alpha-Betaå‰ªæ
          }
          return maxScore;
        } else {
          let minScore = Infinity;
          for (const move of candidates) {
            aiGameBoard[move.row][move.col] = "black";
            const score = minimax(depth - 1, true, alpha, beta, startTime);
            aiGameBoard[move.row][move.col] = null;

            minScore = Math.min(minScore, score);
            beta = Math.min(beta, score);
            if (beta <= alpha) break; // Alpha-Betaå‰ªæ
          }
          return minScore;
        }
      }

      // å¯»æ‰¾è·èƒœä½ç½®
      function findWinningMove(player) {
        for (let row = 0; row < 15; row++) {
          for (let col = 0; col < 15; col++) {
            if (aiGameBoard[row][col] === null) {
              aiGameBoard[row][col] = player;
              if (checkAIWinOnBoard(aiGameBoard, row, col, player)) {
                aiGameBoard[row][col] = null;
                return { row, col };
              }
              aiGameBoard[row][col] = null;
            }
          }
        }
        return null;
      }

      // è·å–å€™é€‰ä½ç½®ï¼ˆåªæœç´¢æœ‰æ„ä¹‰çš„ä½ç½®ï¼‰
      function getCandidateMoves() {
        const candidates = [];
        const visited = new Set();

        // å¦‚æœæ£‹ç›˜ä¸ºç©ºï¼Œè¿”å›ä¸­å¿ƒä½ç½®
        if (aiGameHistory.length === 0) {
          return [{ row: 7, col: 7 }];
        }

        // åœ¨å·²æœ‰æ£‹å­å‘¨å›´2æ ¼èŒƒå›´å†…å¯»æ‰¾å€™é€‰ä½ç½®
        for (let row = 0; row < 15; row++) {
          for (let col = 0; col < 15; col++) {
            if (aiGameBoard[row][col] !== null) {
              // åœ¨è¯¥æ£‹å­å‘¨å›´2æ ¼èŒƒå›´å†…æ·»åŠ å€™é€‰ä½ç½®
              for (let dr = -2; dr <= 2; dr++) {
                for (let dc = -2; dc <= 2; dc++) {
                  const newRow = row + dr;
                  const newCol = col + dc;
                  const key = `${newRow},${newCol}`;

                  if (
                    newRow >= 0 &&
                    newRow < 15 &&
                    newCol >= 0 &&
                    newCol < 15 &&
                    aiGameBoard[newRow][newCol] === null &&
                    !visited.has(key)
                  ) {
                    visited.add(key);
                    candidates.push({
                      row: newRow,
                      col: newCol,
                      score: evaluatePosition(newRow, newCol),
                    });
                  }
                }
              }
            }
          }
        }

        // æŒ‰è¯„ä¼°åˆ†æ•°æ’åºï¼Œå–å‰Nä¸ªå€™é€‰ä½ç½®
        candidates.sort((a, b) => b.score - a.score);
        return candidates.slice(0, AI_CONFIG.CANDIDATE_LIMIT);
      }

      // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
      function checkGameEnd() {
        // æ£€æŸ¥æ˜¯å¦æœ‰ç©å®¶è·èƒœ
        for (let row = 0; row < 15; row++) {
          for (let col = 0; col < 15; col++) {
            if (aiGameBoard[row][col] !== null) {
              if (
                checkAIWinOnBoard(aiGameBoard, row, col, aiGameBoard[row][col])
              ) {
                return aiGameBoard[row][col];
              }
            }
          }
        }

        // æ£€æŸ¥æ˜¯å¦å¹³å±€
        if (isAIBoardFull()) {
          return "draw";
        }

        return null;
      }

      // æ£€æŸ¥æ˜¯å¦è·èƒœï¼ˆåœ¨æŒ‡å®šæ£‹ç›˜ä¸Šï¼‰
      function checkAIWinOnBoard(board, row, col, player) {
        const directions = [
          [0, 1],
          [1, 0],
          [1, 1],
          [1, -1],
        ];

        for (let [dx, dy] of directions) {
          let count = 1;

          // æ­£æ–¹å‘
          for (let i = 1; i < 5; i++) {
            const newRow = row + dx * i;
            const newCol = col + dy * i;
            if (newRow < 0 || newRow >= 15 || newCol < 0 || newCol >= 15) break;
            if (board[newRow][newCol] !== player) break;
            count++;
          }

          // åæ–¹å‘
          for (let i = 1; i < 5; i++) {
            const newRow = row - dx * i;
            const newCol = col - dy * i;
            if (newRow < 0 || newRow >= 15 || newCol < 0 || newCol >= 15) break;
            if (board[newRow][newCol] !== player) break;
            count++;
          }

          if (count >= 5) return true;
        }

        return false;
      }

      // æ£€æŸ¥æ˜¯å¦è·èƒœï¼ˆåœ¨ä¸»æ£‹ç›˜ä¸Šï¼‰
      function checkAIWin(row, col, player) {
        return checkAIWinOnBoard(aiGameBoard, row, col, player);
      }

      // æ™ºèƒ½è¯„ä¼°å‡½æ•°
      function evaluateBoard() {
        let score = 0;

        // è¯„ä¼°æ‰€æœ‰æ–¹å‘çš„è¿å­æƒ…å†µ
        for (let row = 0; row < 15; row++) {
          for (let col = 0; col < 15; col++) {
            if (aiGameBoard[row][col] !== null) {
              score += evaluatePositionForPlayer(
                row,
                col,
                aiGameBoard[row][col]
              );
            }
          }
        }

        return score;
      }

      // è¯„ä¼°å•ä¸ªä½ç½®çš„ä»·å€¼
      function evaluatePosition(row, col) {
        let score = 0;

        // æ¨¡æ‹Ÿæ”¾ç½®ç™½å­å’Œé»‘å­ï¼Œè®¡ç®—ä»·å€¼
        aiGameBoard[row][col] = "white";
        score += evaluatePositionForPlayer(row, col, "white");
        aiGameBoard[row][col] = "black";
        score -= evaluatePositionForPlayer(row, col, "black") * 1.1; // é˜²å®ˆç¨å¾®é‡è¦ä¸€äº›
        aiGameBoard[row][col] = null;

        // ä¸­å¿ƒä½ç½®åŠ åˆ†
        const centerDistance = Math.abs(row - 7) + Math.abs(col - 7);
        score += (14 - centerDistance) * 2;

        return score;
      }

      // è¯„ä¼°ç‰¹å®šç©å®¶åœ¨ç‰¹å®šä½ç½®çš„ä»·å€¼
      function evaluatePositionForPlayer(row, col, player) {
        let score = 0;
        const directions = [
          [0, 1],
          [1, 0],
          [1, 1],
          [1, -1],
        ];

        for (const [dx, dy] of directions) {
          const pattern = getLinePattern(row, col, dx, dy, player);
          score += evaluatePattern(pattern, player);
        }

        return score;
      }

      // è·å–æŸä¸ªæ–¹å‘çš„è¿å­æ¨¡å¼
      function getLinePattern(row, col, dx, dy, player) {
        let pattern = [];

        // å‘è´Ÿæ–¹å‘æ‰«æ4æ ¼
        for (let i = -4; i <= 4; i++) {
          const newRow = row + dx * i;
          const newCol = col + dy * i;

          if (newRow < 0 || newRow >= 15 || newCol < 0 || newCol >= 15) {
            pattern.push("X"); // è¾¹ç•Œ
          } else if (aiGameBoard[newRow][newCol] === player) {
            pattern.push("O"); // å·±æ–¹æ£‹å­
          } else if (aiGameBoard[newRow][newCol] === null) {
            pattern.push("."); // ç©ºä½
          } else {
            pattern.push("X"); // å¯¹æ–¹æ£‹å­æˆ–è¾¹ç•Œ
          }
        }

        return pattern.join("");
      }

      // è¯„ä¼°è¿å­æ¨¡å¼
      function evaluatePattern(pattern, player) {
        const multiplier = player === "white" ? 1 : -1;

        // äº”è¿
        if (pattern.includes("OOOOO")) {
          return SCORES.WIN * multiplier;
        }

        // æ´»å›› (.OOOO.)
        if (pattern.includes(".OOOO.")) {
          return SCORES.ALIVE_FOUR * multiplier;
        }

        // å†²å›› (XOOOO. æˆ– .OOOOX)
        if (pattern.includes("XOOOO.") || pattern.includes(".OOOOX")) {
          return SCORES.RUSH_FOUR * multiplier;
        }

        // æ´»ä¸‰ (.OOO. ä¸”ä¸¤è¾¹éƒ½æœ‰ç©ºä½å»¶ä¼¸)
        if (pattern.includes(".OOO.")) {
          return SCORES.ALIVE_THREE * multiplier;
        }

        // çœ ä¸‰ (XOOO. æˆ– .OOOX)
        if (pattern.includes("XOOO.") || pattern.includes(".OOOX")) {
          return SCORES.SLEEP_THREE * multiplier;
        }

        // æ´»äºŒ (.OO. ä¸”ä¸¤è¾¹éƒ½æœ‰ç©ºä½å»¶ä¼¸)
        if (pattern.includes(".OO.")) {
          return SCORES.ALIVE_TWO * multiplier;
        }

        // çœ äºŒ (XOO. æˆ– .OOX)
        if (pattern.includes("XOO.") || pattern.includes(".OOX")) {
          return SCORES.SLEEP_TWO * multiplier;
        }

        // å•å­
        if (pattern.includes("O")) {
          return SCORES.ONE * multiplier;
        }

        return 0;
      }

      // æ£€æŸ¥æ£‹ç›˜æ˜¯å¦å·²æ»¡
      function isAIBoardFull() {
        for (let row = 0; row < 15; row++) {
          for (let col = 0; col < 15; col++) {
            if (aiGameBoard[row][col] === null) {
              return false;
            }
          }
        }
        return true;
      }

      // æ›´æ–°æ¸¸æˆçŠ¶æ€æ˜¾ç¤º
      function updateAIGameStatus() {
        const currentPlayerDisplay = document.getElementById(
          "current-player-display"
        );

        if (currentPlayerDisplay) {
          if (aiCurrentPlayer === "black") {
            currentPlayerDisplay.textContent = t("your_turn");
            startTurnTimer(); // å¼€å§‹ç©å®¶å›åˆè®¡æ—¶
          } else {
            currentPlayerDisplay.textContent = t("opponent_turn");
            stopTurnTimer(); // åœæ­¢è®¡æ—¶å™¨ï¼ˆAIå›åˆï¼‰
          }
        }
      }

      // å¼€å§‹å›åˆè®¡æ—¶å™¨
      function startTurnTimer() {
        // æ¸…é™¤ä¹‹å‰çš„è®¡æ—¶å™¨
        stopTurnTimer();

        // åªåœ¨ç©å®¶å›åˆå¯åŠ¨è®¡æ—¶å™¨
        if (aiCurrentPlayer !== "black" || !aiGameActive) return;

        turnTimeLeft = TURN_TIME_LIMIT;
        updateTimerDisplay();

        turnTimer = setInterval(() => {
          turnTimeLeft--;
          updateTimerDisplay();

          // æ—¶é—´åˆ°ï¼Œç©å®¶è¶…æ—¶
          if (turnTimeLeft <= 0) {
            handlePlayerTimeout();
          }
        }, 1000);
      }

      // åœæ­¢å›åˆè®¡æ—¶å™¨
      function stopTurnTimer() {
        if (turnTimer) {
          clearInterval(turnTimer);
          turnTimer = null;
        }
        // æ˜¾ç¤ºAIå›åˆçŠ¶æ€ï¼Œä¿æŒå¸ƒå±€ç¨³å®š
        const timerDisplay = document.getElementById("turn-timer-display");
        if (timerDisplay) {
          timerDisplay.style.display = "block";
          timerDisplay.style.color = "#ffffff";
          timerDisplay.style.opacity = "1";
          timerDisplay.innerHTML = t("ai_thinking");
        }
      }

      // æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
      function updateTimerDisplay() {
        const timerDisplay = document.getElementById("turn-timer-display");
        if (!timerDisplay) return;

        timerDisplay.style.display = "block";

        // æ ¹æ®å‰©ä½™æ—¶é—´æ”¹å˜æ˜¾ç¤ºæ ·å¼
        if (turnTimeLeft > WARNING_TIME) {
          // æ­£å¸¸æ—¶é—´ï¼šç™½è‰²
          timerDisplay.style.color = "#ffffff";
          timerDisplay.innerHTML = t("thinking_time", turnTimeLeft);
        } else if (turnTimeLeft > 10) {
          // è­¦å‘Šæ—¶é—´ï¼šé»„è‰²
          timerDisplay.style.color = "#ffc107";
          timerDisplay.innerHTML = t("remaining_time", turnTimeLeft);
        } else {
          // ç´§æ€¥æ—¶é—´ï¼šçº¢è‰²é—ªçƒ
          timerDisplay.style.color = "#dc3545";
          timerDisplay.innerHTML = t("timeout_warning", turnTimeLeft);

          // æœ€å10ç§’é—ªçƒæ•ˆæœ
          if (turnTimeLeft % 2 === 0) {
            timerDisplay.style.opacity = "0.5";
          } else {
            timerDisplay.style.opacity = "1";
          }
        }
      }

      // å¤„ç†ç©å®¶è¶…æ—¶
      function handlePlayerTimeout() {
        if (turnTimer) {
          clearInterval(turnTimer);
          turnTimer = null;
        }

        if (!aiGameActive) return;

        // ç»“æŸæ¸¸æˆï¼Œè®°å½•ä¸ºå¤±è´¥
        aiGameActive = false;

        // æ£€æŸ¥ç”¨æˆ·æ˜¯å¦è¿˜åœ¨æ¸¸æˆç•Œé¢
        const isInGameScreen =
          document.getElementById("current-player-display") !== null;

        if (isInGameScreen) {
          // ç”¨æˆ·è¿˜åœ¨æ¸¸æˆç•Œé¢ï¼Œæ˜¾ç¤ºè¶…æ—¶ä¿¡æ¯
          const currentPlayerDisplay = document.getElementById(
            "current-player-display"
          );
          if (currentPlayerDisplay) {
            currentPlayerDisplay.textContent = t("timeout");
          }

          // æ˜¾ç¤ºè¶…æ—¶ä¿¡æ¯
          const timerDisplay = document.getElementById("turn-timer-display");
          if (timerDisplay) {
            timerDisplay.style.display = "block";
            timerDisplay.style.color = "#dc3545";
            timerDisplay.style.opacity = "1";
            timerDisplay.innerHTML = t("timeout");
          }
        }

        // è®°å½•è¶…æ—¶å¤±è´¥
        const gameData = {
          totalMoves: aiGameHistory.length,
          gameMode: "ai",
          difficulty: 7,
          duration: Date.now() - (window.gameStartTime || Date.now()),
          timeoutReason: "player_timeout", // ç©å®¶è¶…æ—¶
        };

        // å»¶è¿Ÿä¸€ä¸‹æ˜¾ç¤ºç»“æœï¼Œè®©ç”¨æˆ·çœ‹åˆ°è¶…æ—¶æç¤º
        setTimeout(() => {
          // é‡æ–°æ£€æŸ¥ç”¨æˆ·æ˜¯å¦è¿˜åœ¨æ¸¸æˆç•Œé¢ï¼ˆå› ä¸ºå¯èƒ½åœ¨1.5ç§’å†…ç¦»å¼€äº†ï¼‰
          const stillInGameScreen =
            document.getElementById("current-player-display") !== null;

          if (currentUser && userStats) {
            if (stillInGameScreen) {
              // ç”¨æˆ·åœ¨æ¸¸æˆç•Œé¢ï¼Œæ˜¾ç¤ºæ­£å¸¸çš„æ¸¸æˆç»“æœå¼¹çª—
              recordGameResult("loss", gameData);
            } else {
              // ç”¨æˆ·å·²ç¦»å¼€æ¸¸æˆç•Œé¢ï¼Œé™é»˜è®°å½•ä¸æ˜¾ç¤ºå¼¹çª—
              recordGameResultSilent("loss", gameData);
            }
          } else {
            // æœªç™»å½•ç”¨æˆ·ï¼Œåªåœ¨æ¸¸æˆç•Œé¢æ˜¾ç¤ºæç¤º
            if (stillInGameScreen) {
              showCustomAlert(t("game_over"), t("timeout_game_over"));
            }
          }
        }, 1500);
      }

      // ç»“æŸæ¸¸æˆ
      function endAIGame(winner) {
        aiGameActive = false;

        // åœæ­¢è®¡æ—¶å™¨
        if (turnTimer) {
          clearInterval(turnTimer);
          turnTimer = null;
        }

        const currentPlayerDisplay = document.getElementById(
          "current-player-display"
        );

        // æ˜¾ç¤ºæ¸¸æˆç»“æŸçŠ¶æ€
        const timerDisplay = document.getElementById("turn-timer-display");
        if (timerDisplay) {
          timerDisplay.style.display = "block";
          timerDisplay.style.opacity = "1";
          if (winner === "black") {
            timerDisplay.style.color = "#28a745";
            timerDisplay.innerHTML = t("you_win");
          } else if (winner === "white") {
            timerDisplay.style.color = "#dc3545";
            timerDisplay.innerHTML = t("you_lose");
          } else {
            timerDisplay.style.color = "#ffc107";
            timerDisplay.innerHTML = t("draw");
          }
        }

        // æ’­æ”¾èƒœåˆ©éŸ³æ•ˆ
        setTimeout(() => {
          soundManager.playVictory();
        }, 200);

        // è®°å½•æ¸¸æˆç»“æœåˆ°åç«¯
        let gameResult;
        if (winner === "black") {
          gameResult = "win";
          currentPlayerDisplay.textContent = t("you_win");
        } else if (winner === "white") {
          gameResult = "loss";
          currentPlayerDisplay.textContent = t("you_lose");
        } else {
          gameResult = "draw";
          currentPlayerDisplay.textContent = t("draw");
        }

        // è®°å½•æ¸¸æˆæ•°æ®
        const gameData = {
          totalMoves: aiGameHistory.length,
          gameMode: "ai",
          difficulty: 7,
          duration: Date.now() - (window.gameStartTime || Date.now()),
        };

        // å¦‚æœç”¨æˆ·å·²ç™»å½•ï¼Œè®°å½•æ¸¸æˆç»“æœ
        if (currentUser && userStats) {
          recordGameResult(gameResult, gameData);
        } else {
          // å¦‚æœç”¨æˆ·å·²ç™»å½•ä½†userStatsä¸ºç©ºï¼Œå°è¯•åˆå§‹åŒ–
          if (currentUser && !userStats) {
            initializeUserStatsFromLocal();
            // é‡æ–°æ£€æŸ¥å¹¶è®°å½•
            if (userStats) {
              recordGameResult(gameResult, gameData);
              return;
            }
          }

          // æœªç™»å½•ç”¨æˆ·æˆ–åˆå§‹åŒ–å¤±è´¥ï¼Œæ˜¾ç¤ºç®€å•ç»“æœ
          setTimeout(() => {
            const resultText = {
              win: t("you_win"),
              loss: t("you_lose"),
              draw: t("draw"),
            };
            showCustomAlert(t("game_over"), resultText[gameResult]);
          }, 500);
        }
      }

      // æ‚”æ£‹åŠŸèƒ½ - ä¸´æ—¶ç§»é™¤æ‰£å¸é€»è¾‘
      async function undoAIMove() {
        if (aiGameHistory.length < 2 || !aiGameActive) {
          return;
        }

        // ç”±äºåç«¯æœåŠ¡æš‚æœªéƒ¨ç½²ï¼Œç›´æ¥æ‰§è¡Œæ‚”æ£‹
        performUndo();
      }

      // æ‰§è¡Œæ‚”æ£‹æ“ä½œ
      function performUndo() {
        // æ‚”æ£‹ä¸¤æ­¥ï¼ˆç©å®¶å’ŒAIçš„æ£‹å­ï¼‰
        for (let i = 0; i < 2 && aiGameHistory.length > 0; i++) {
          const lastMove = aiGameHistory.pop();
          aiGameBoard[lastMove.row][lastMove.col] = null;

          // ç§»é™¤UIä¸­çš„æ£‹å­
          const cell = document.querySelector(
            `#ai-game-board [data-row="${lastMove.row}"][data-col="${lastMove.col}"]`
          );
          const stone = cell.querySelector(".stone");
          if (stone) {
            stone.remove();
          }
          // ç§»é™¤occupiedç±»ï¼Œæ¢å¤hoveræ•ˆæœ
          cell.classList.remove("occupied");
        }

        // æ¸…é™¤æ‰€æœ‰latestæ ‡è®°
        const allLatestStones = document.querySelectorAll(
          "#ai-game-board .stone.latest"
        );
        allLatestStones.forEach((stone) => stone.classList.remove("latest"));

        // å¦‚æœè¿˜æœ‰æ£‹å­ï¼Œå°†æœ€åä¸€ä¸ªæ£‹å­æ ‡è®°ä¸ºlatest
        if (aiGameHistory.length > 0) {
          const lastMove = aiGameHistory[aiGameHistory.length - 1];
          const lastCell = document.querySelector(
            `#ai-game-board [data-row="${lastMove.row}"][data-col="${lastMove.col}"]`
          );
          const lastStone = lastCell.querySelector(".stone");
          if (lastStone) {
            lastStone.classList.add("latest");
          }
        }

        // é‡ç½®ä¸ºç©å®¶å›åˆ
        aiCurrentPlayer = "black";
        aiGameActive = true;
        updateAIGameStatus();
      }

      // é‡æ–°å¼€å§‹æ¸¸æˆ
      async function resetAIGame() {
        // æ£€æŸ¥å½“å‰æ¸¸æˆæ˜¯å¦æ­£åœ¨è¿›è¡Œä¸­
        const isGameInProgress = aiGameActive && aiGameHistory.length > 0;

        if (isGameInProgress) {
          // æ¸¸æˆè¿›è¡Œä¸­ï¼Œéœ€è¦æ”¯ä»˜è´¹ç”¨
          if (currentUser && userStats) {
            // ç™»å½•ç”¨æˆ·å¿…é¡»æ”¯ä»˜
            try {
              // å…ˆæ£€æŸ¥ä½™é¢
              const balanceResponse = await fetch(
                `${API_BASE_URL}/api/payment/balance?userId=${currentUser.uid}`
              );
              const balanceData = await balanceResponse.json();

              if (balanceData.success && balanceData.balance.current >= 0.1) {
                // ä½™é¢å……è¶³ï¼Œæ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
                showCustomConfirm(
                  t("restart_game"),
                  t("abandon_game_warning"),
                  async () => {
                    // ç¡®è®¤é‡æ–°å¼€å§‹ï¼Œæ‰£è´¹å¹¶æ‰§è¡Œ
                    const consumeResponse = await fetch(
                      `${API_BASE_URL}/api/payment/consume`,
                      {
                        method: "POST",
                        headers: {
                          "Content-Type": "application/json",
                        },
                        body: JSON.stringify({
                          userId: currentUser.uid,
                          amount: 0.1,
                          purpose: "newgame",
                          gameData: {
                            moveCount: aiGameHistory.length,
                            gameMode: "ai",
                            reason: "restart_in_progress",
                          },
                        }),
                      }
                    );

                    const consumeData = await consumeResponse.json();
                    if (consumeData.success) {
                      // æ‰£è´¹æˆåŠŸï¼Œè®°å½•å¤±è´¥å¹¶å¼€å§‹æ–°æ¸¸æˆ
                      recordGameAbandon();
                      initAIGame();
                      showCustomAlert(
                        t("success"),
                        t(
                          "undo_success_detail",
                          consumeData.newBalance.toFixed(2)
                        )
                      );
                    } else {
                      showCustomAlert(
                        t("error_title"),
                        consumeData.message || t("undo_failed_message")
                      );
                    }
                  },
                  () => {
                    // å–æ¶ˆæ“ä½œ
                  }
                );
              } else {
                // ä½™é¢ä¸è¶³ï¼Œæç¤ºç”¨æˆ·é€‰æ‹©æ˜¯å¦å……å€¼
                const currentBalance = balanceData.success
                  ? balanceData.balance.current.toFixed(2)
                  : "0.00";
                showCustomConfirm(
                  t("insufficient_balance_title"),
                  t("insufficient_balance_undo", currentBalance),
                  () => {
                    // ç”¨æˆ·é€‰æ‹©å……å€¼
                    showRechargeDialog(t("recharge_prompt"));
                  },
                  () => {
                    // ç”¨æˆ·é€‰æ‹©ä¸å……å€¼ï¼Œç»§ç»­æ¸¸æˆä½†ä¸èƒ½é‡æ–°å¼€å§‹
                    showCustomAlert(t("hint"), t("continue_game_tip"));
                  }
                );
              }
            } catch (error) {
              console.error("æ–°æ¸¸æˆæ”¯ä»˜æ£€æŸ¥å¤±è´¥:", error);
              showCustomAlert(t("error_title"), t("network_error_retry"));
            }
          } else {
            // æœªç™»å½•ç”¨æˆ·ï¼Œå…è´¹é‡æ–°å¼€å§‹ï¼ˆä½†ä¸å‚ä¸æ’è¡Œæ¦œï¼‰
            showCustomConfirm(
              t("abandon_current_game"),
              t("abandon_game_warning"),
              () => {
                recordGameAbandon();
                initAIGame();
              },
              () => {
                // å–æ¶ˆæ—¶ä¸åšä»»ä½•æ“ä½œ
              }
            );
          }
        } else {
          // æ¸¸æˆæœªå¼€å§‹æˆ–å·²ç»“æŸï¼Œç›´æ¥é‡æ–°å¼€å§‹
          showCustomConfirm(
            t("restart_game"),
            t("restart_game_confirm"),
            () => {
              initAIGame();
            },
            () => {
              // å–æ¶ˆæ—¶ä¸åšä»»ä½•æ“ä½œ
            }
          );
        }
      }

      // è®°å½•æ¸¸æˆæ”¾å¼ƒ
      function recordGameAbandon() {
        if (!currentUser || !userStats) return;

        // è®°å½•æ¸¸æˆæ•°æ®
        const gameData = {
          totalMoves: aiGameHistory.length,
          gameMode: "ai",
          difficulty: 7,
          duration: Date.now() - (window.gameStartTime || Date.now()),
          abandonReason: "player_restart", // ç©å®¶ä¸»åŠ¨é‡æ–°å¼€å§‹
        };

        // è®°å½•ä¸ºå¤±è´¥
        recordGameResult("loss", gameData);
      }

      // è¿”å›ç™»å½•ç•Œé¢
      function backToLogin() {
        // æ£€æŸ¥å½“å‰æ¸¸æˆæ˜¯å¦æ­£åœ¨è¿›è¡Œä¸­
        const isGameInProgress = aiGameActive && aiGameHistory.length > 0;

        if (isGameInProgress) {
          // æ¸¸æˆè¿›è¡Œä¸­ï¼Œè¯¢é—®æ˜¯å¦æ”¾å¼ƒå½“å‰æ¸¸æˆ
          showCustomConfirm(
            t("abandon_current_game"),
            t("abandon_game_return_warning"),
            () => {
              // è®°å½•å½“å‰æ¸¸æˆä¸ºå¤±è´¥ï¼ˆæ”¾å¼ƒï¼‰
              recordGameAbandonAndReturn();
            },
            () => {
              // å–æ¶ˆæ—¶ä¸åšä»»ä½•æ“ä½œ
            }
          );
          return;
        }

        // æ¸¸æˆæœªå¼€å§‹æˆ–å·²ç»“æŸï¼Œç›´æ¥è¿”å›
        performBackToLogin();
      }

      // è®°å½•æ¸¸æˆæ”¾å¼ƒå¹¶è¿”å›
      function recordGameAbandonAndReturn() {
        if (
          currentUser &&
          userStats &&
          aiGameActive &&
          aiGameHistory.length > 0
        ) {
          // è®°å½•æ¸¸æˆæ•°æ®
          const gameData = {
            totalMoves: aiGameHistory.length,
            gameMode: "ai",
            difficulty: 7,
            duration: Date.now() - (window.gameStartTime || Date.now()),
            abandonReason: "player_exit", // ç©å®¶ä¸»åŠ¨é€€å‡º
          };

          // è®°å½•ä¸ºå¤±è´¥ï¼ˆä¸æ˜¾ç¤ºç»“æœå¼¹çª—ï¼‰
          recordGameResultSilent("loss", gameData);
        }

        // è¿”å›ä¸»ç•Œé¢
        performBackToLogin();
      }

      // é™é»˜è®°å½•æ¸¸æˆç»“æœï¼ˆä¸æ˜¾ç¤ºå¼¹çª—ï¼‰
      async function recordGameResultSilent(result, gameData = {}) {
        if (!currentUser || !userStats) return;

        // å…ˆæ›´æ–°æœ¬åœ°æ•°æ®
        updateLocalGameStats(result);

        try {
          // ç¡®ä¿ä½¿ç”¨ä¸ä¸ªäººä¸­å¿ƒä¸€è‡´çš„ç”¨æˆ·å
          const displayUsername = getCurrentDisplayUsername();

          // åŒæ­¥æ›´æ–°æœ¬åœ°userStatsçš„ç”¨æˆ·å
          if (userStats) {
            userStats.username = displayUsername;
          }

          const response = await fetch(`${API_BASE_URL}/api/games`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              playerUid: currentUser.piUserId || currentUser.uid,
              result: result === 'loss' ? 'lose' : result, // 'win', 'lose', 'draw' - åç«¯æœŸæœ›çš„æ ¼å¼
              moves: gameData.moves || [],
              duration: gameData.duration || 0,
            }),
          });

          if (response.ok) {
            const data = await response.json();
            userStats = data.userStats; // æ›´æ–°æœ¬åœ°ç»Ÿè®¡æ•°æ®
          } else {
            console.error("è®°å½•æ¸¸æˆç»“æœå¤±è´¥:", response.statusText);
            // å¦‚æœåç«¯å¤±è´¥ï¼Œè‡³å°‘ä¿å­˜æœ¬åœ°æ•°æ®
            saveUserGameData();
          }
        } catch (error) {
          console.error("è®°å½•æ¸¸æˆç»“æœå¤±è´¥:", error);
          // å¦‚æœåç«¯å¤±è´¥ï¼Œè‡³å°‘ä¿å­˜æœ¬åœ°æ•°æ®
          saveUserGameData();
        }
      }

      // æ‰§è¡Œè¿”å›ç™»å½•ç•Œé¢
      function performBackToLogin() {
        // ç›´æ¥åˆ‡æ¢åˆ°ä¸»ç•Œé¢ï¼Œé¿å…é¡µé¢é‡æ–°åŠ è½½çš„å»¶è¿Ÿ
        const root = document.getElementById("root");
        root.innerHTML = `
                <div class="login-screen">
                    <div class="container">
                        <div class="login-content">
                            <div class="login-card card">
                                <!-- è¯­è¨€åˆ‡æ¢å™¨ -->
                                <div class="language-selector">
                                    <span class="globe-icon">ğŸŒ</span>
                                    <select id="language-selector-game" onchange="changeLanguage(this.value)">
                                        <option value="zh" data-i18n="lang_zh">ä¸­æ–‡</option>
                                        <option value="en" data-i18n="lang_en">English</option>
                                        <option value="ko" data-i18n="lang_ko">í•œêµ­ì–´</option>
                                        <option value="ja" data-i18n="lang_ja">æ—¥æœ¬èª</option>
                                        <option value="vi" data-i18n="lang_vi">Tiáº¿ng Viá»‡t</option>
                                    </select>
                                </div>

                                <div class="card-header text-center">
                                    <div class="title-with-icon">
                                        <div class="board-icon">
                                            <div class="stones-container">
                                                <div class="stone-jar black">
                                                    <div class="stone"></div>
                                                </div>
                                                <div class="stone-jar white">
                                                    <div class="stone"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <h1 class="game-title" data-i18n="game_title">${t(
                                          "game_title"
                                        )}</h1>
                                    </div>
                                    <p class="game-subtitle" data-i18n="game_subtitle">
                                        ${t("game_subtitle")}
                                    </p>
                                </div>

                                <div class="card-content">
                                    <div class="game-modes">
                                        <div class="game-mode-row">
                                            <button class="game-mode-btn online-mode" onclick="handleOnlineMatch()">
                                                <span class="mode-icon">ğŸŒ</span>
                                                <span class="mode-text" data-i18n="online_match">${t(
                                                  "online_match"
                                                )}</span>
                                            </button>
                                        </div>
                                        <div class="game-mode-row">
                                            <button class="game-mode-btn" onclick="showGlobalRanking()">
                                                <span class="mode-icon">ğŸ†</span>
                                                <span class="mode-text" data-i18n="global_ranking">${t(
                                                  "global_ranking"
                                                )}</span>
                                            </button>
                                        </div>
                                        <div class="game-mode-row">
                                            <button class="game-mode-btn ai-mode" onclick="handleAIGame()">
                                                <span class="mode-icon">ğŸ§ </span>
                                                <span class="mode-text" data-i18n="ai_battle">${t(
                                                  "ai_battle"
                                                )}</span>
                                            </button>
                                        </div>
                                        <div class="game-mode-row">
                                            <button class="game-mode-btn" onclick="showPersonalCenter()">
                                                <span class="mode-icon">ğŸ‘¤</span>
                                                <span class="mode-text" data-i18n="personal_center">${t(
                                                  "personal_center"
                                                )}</span>
                                            </button>
                                        </div>
                                        <div class="game-mode-row">
                                            <button class="game-mode-btn" onclick="showGameInstructions()">
                                                <span class="mode-icon">â“</span>
                                                <span class="mode-text" data-i18n="game_instructions">${t(
                                                  "game_instructions"
                                                )}</span>
                                            </button>
                                        </div>
                                    </div>

                                    <div class="error-message" id="error-message" style="display: none;">
                                        <p id="error-text" data-i18n="error_message">âŒ é”™è¯¯ä¿¡æ¯</p>
                                    </div>
                                </div>

                                <div class="card-footer">
                                    <button id="login-btn" class="btn btn-primary btn-lg pi-login-btn" onclick="handleSignIn()">
                                        <span class="pi-icon">Ï€</span>
                                        <span data-i18n="login_with_pi">${t(
                                          "login_with_pi"
                                        )}</span>
                                    </button>
                                    <p class="login-note" data-i18n="login_note">
                                        ${t("login_note")}
                                    </p>

                                    <!-- éšç§æ”¿ç­–å’ŒæœåŠ¡æ¡æ¬¾é“¾æ¥ -->
                                    <div class="legal-links" style="margin-top: 20px; text-align: center;">
                                        <a href="public/privacy-policy.html" target="_blank" style="color: #c77dff; text-decoration: none; margin: 0 10px; font-size: 14px;" data-i18n="privacy_policy">éšç§æ”¿ç­–</a>
                                        <span style="color: #ffffff80;">|</span>
                                        <a href="public/terms-of-service.html" target="_blank" style="color: #c77dff; text-decoration: none; margin: 0 10px; font-size: 14px;" data-i18n="terms_of_service">æœåŠ¡æ¡æ¬¾</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

        // é‡æ–°åˆå§‹åŒ–é¡µé¢çŠ¶æ€
        initializePage();

        // ç«‹å³è°ƒæ•´å‰¯æ ‡é¢˜å­—ä½“å¤§å°ï¼Œä¸ä½¿ç”¨å»¶è¿Ÿ
        adjustSubtitleFontSize();

        // ç¡®ä¿æŒ‰é’®çŠ¶æ€æ­£ç¡®æ›´æ–°
        updateMainPageButtonState();
      }

      // æ˜¾ç¤ºå……å€¼å¯¹è¯æ¡†
      function showRechargeDialog(message) {
        showCustomModal(
          t("recharge_dialog_title"),
          `
            <div style="text-align: center;">
              <div style="margin-bottom: 20px;">
                <div style="font-size: 2em; margin-bottom: 10px;">ğŸ’³</div>
                <p style="color: #666; margin-bottom: 15px;">${message}</p>
              </div>

              <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 style="color: #333; margin-bottom: 15px;">${t(
                  "recharge_amount_selection"
                )}</h4>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                  <button onclick="createRechargeOrder(1)" style="background: #28a745; color: white; border: none; border-radius: 6px; padding: 12px; cursor: pointer;">
                    1 Ï€
                  </button>
                  <button onclick="createRechargeOrder(5)" style="background: #17a2b8; color: white; border: none; border-radius: 6px; padding: 12px; cursor: pointer;">
                    5 Ï€
                  </button>
                  <button onclick="createRechargeOrder(10)" style="background: #ffc107; color: black; border: none; border-radius: 6px; padding: 12px; cursor: pointer;">
                    10 Ï€
                  </button>
                  <button onclick="createRechargeOrder(20)" style="background: #dc3545; color: white; border: none; border-radius: 6px; padding: 12px; cursor: pointer;">
                    20 Ï€
                  </button>
                </div>
                <div style="margin-top: 10px;">
                  <input type="number" id="custom-amount" placeholder="${t(
                    "custom_amount_placeholder"
                  )}" min="0.1" step="0.1" style="width: 120px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; margin-right: 10px;">
                  <button onclick="createCustomRechargeOrder()" style="background: #6c757d; color: white; border: none; border-radius: 4px; padding: 8px 12px; cursor: pointer;">
                    ${t("custom_recharge")}
                  </button>
                </div>
              </div>

              <div style="text-align: center;">
                <button onclick="closeNewModal()" style="background: #6c757d; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                  ${t("cancel")}
                </button>
              </div>
            </div>
          `
        );
      }

      // åˆ›å»ºå……å€¼è®¢å•
      async function createRechargeOrder(amount) {
        if (!currentUser) {
          showCustomAlert(t("error_title"), t("please_login_first"));
          return;
        }

        try {
          const response = await fetch(`${API_BASE_URL}/api/payment/create`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              userId: currentUser.uid,
              amount: amount,
              purpose: "recharge",
            }),
          });

          const data = await response.json();
          if (data.success) {
            showPaymentDialog(data.order);
          } else {
            showCustomAlert(t("create_order_failed"), data.message);
          }
        } catch (error) {
          console.error("åˆ›å»ºå……å€¼è®¢å•å¤±è´¥:", error);
          showCustomAlert(t("error_title"), t("network_error_retry"));
        }
      }

      // åˆ›å»ºè‡ªå®šä¹‰é‡‘é¢å……å€¼è®¢å•
      function createCustomRechargeOrder() {
        const amountInput = document.getElementById("custom-amount");
        const amount = parseFloat(amountInput.value);

        if (!amount || amount < 0.1) {
          showCustomAlert(t("error_title"), t("custom_amount_error"));
          return;
        }

        createRechargeOrder(amount);
      }

      // æ˜¾ç¤ºæ”¯ä»˜å¯¹è¯æ¡†
      function showPaymentDialog(order) {
        showCustomModal(
          t("payment_dialog_title"),
          `
            <div style="text-align: center;">
              <div style="margin-bottom: 20px;">
                <div style="font-size: 2em; margin-bottom: 10px;">Ï€</div>
                <h3 style="color: #333; margin-bottom: 10px;">${t(
                  "recharge_amount_display",
                  order.amount
                )}</h3>
                <p style="color: #666; font-size: 14px;">${t(
                  "order_id_display",
                  order.orderId
                )}</p>
              </div>

              <div style="background: #f8f9fa; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 style="color: #333; margin-bottom: 15px;">${t(
                  "payment_method"
                )}</h4>

                <div style="background: white; border-radius: 6px; padding: 15px; margin-bottom: 15px; border: 2px solid #e9ecef;">
                  <h5 style="color: #333; margin-bottom: 10px;">${t(
                    "pi_wallet_transfer"
                  )}</h5>
                  <p style="color: #666; font-size: 14px; margin-bottom: 10px;">
                    ${t("transfer_instruction")}
                  </p>
                  <div style="background: #f8f9fa; padding: 10px; border-radius: 4px; font-family: monospace; font-size: 12px; word-break: break-all; margin-bottom: 10px;">
                    ${order.receiverAddress}
                  </div>
                  <p style="color: #dc3545; font-size: 13px; margin-bottom: 10px;">
                    ${t("transfer_amount_warning", order.amount)}
                  </p>
                  <p style="color: #666; font-size: 13px;">
                    ${t("transfer_memo", order.qrCodeData.memo)}
                  </p>
                </div>

                <div style="margin-bottom: 15px;">
                  <input type="text" id="transaction-hash" placeholder="${t(
                    "transaction_hash_placeholder"
                  )}" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-family: monospace; font-size: 14px;">
                  <p style="color: #666; font-size: 12px; margin-top: 5px;">
                    ${t("transaction_hash_instruction")}
                  </p>
                </div>
              </div>

              <div style="display: flex; gap: 10px; justify-content: center;">
                <button onclick="verifyPayment('${
                  order.orderId
                }')" style="background: #28a745; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                  ${t("verify_payment")}
                </button>
                <button onclick="closeNewModal()" style="background: #6c757d; color: white; border: none; border-radius: 6px; padding: 10px 20px; cursor: pointer;">
                  ${t("cancel")}
                </button>
              </div>

              <p style="color: #666; font-size: 12px; margin-top: 15px;">
                ${t("order_validity")}
              </p>
            </div>
          `
        );
      }

      // éªŒè¯æ”¯ä»˜
      async function verifyPayment(orderId) {
        const transactionHashInput =
          document.getElementById("transaction-hash");
        const transactionHash = transactionHashInput.value.trim();

        if (!transactionHash) {
          showCustomAlert(t("error_title"), t("please_enter_transaction_hash"));
          return;
        }

        try {
          const response = await fetch(`${API_BASE_URL}/api/payment/verify`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              orderId: orderId,
              transactionHash: transactionHash,
            }),
          });

          const data = await response.json();
          if (data.success) {
            closeNewModal();
            showCustomAlert(
              t("recharge_success"),
              t(
                "recharge_success_message",
                data.order.amount,
                data.newBalance.toFixed(2)
              )
            );
          } else {
            showCustomAlert(t("verification_failed"), data.message);
          }
        } catch (error) {
          console.error("éªŒè¯æ”¯ä»˜å¤±è´¥:", error);
          showCustomAlert(t("error_title"), t("network_error_retry"));
        }
      }

      // Pi Network iframeç¯å¢ƒå¼ºåŠ›ä¿®å¤è¯­è¨€é€‰æ‹©å™¨ä½ç½®
      function forceFixLanguageSelectorPosition() {
        const languageSelector = document.querySelector(".language-selector");
        if (languageSelector) {
          // æ£€æµ‹æ˜¯å¦åœ¨iframeä¸­
          const isInIframe = window.self !== window.top;
          const isPiNetwork =
            window.location.hostname.includes("minepi.com") ||
            document.referrer.includes("minepi.com") ||
            isInIframe;

          // å¼ºåˆ¶åº”ç”¨æœ€é«˜ä¼˜å…ˆçº§æ ·å¼
          const styles = {
            position: "fixed",
            top: "15px",
            right: "15px",
            zIndex: "2147483647", // æœ€å¤§z-indexå€¼
            transform: "translate3d(0, 0, 0)",
            willChange: "transform",
            pointerEvents: "auto",
            margin: "0",
            left: "auto",
            bottom: "auto",
          };

          Object.assign(languageSelector.style, styles);

          // æ·»åŠ é‡è¦æ€§æ ‡è®°
          languageSelector.style.setProperty("position", "fixed", "important");
          languageSelector.style.setProperty("top", "15px", "important");
          languageSelector.style.setProperty("right", "15px", "important");
          languageSelector.style.setProperty(
            "z-index",
            "2147483647",
            "important"
          );

          if (isPiNetwork) {
            document.body.classList.add("pi-network-iframe");
          }
        }
      }

      // å¼ºåˆ¶åˆ·æ–°ç¼“å­˜æ£€æŸ¥
      function checkCacheVersion() {
        const currentVersion = "2025-06-11-22:30";
        const cachedVersion = localStorage.getItem("appVersion");

        if (cachedVersion !== currentVersion) {
          localStorage.setItem("appVersion", currentVersion);
          // å¦‚æœç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå¼ºåˆ¶åˆ·æ–°
          if (cachedVersion && "serviceWorker" in navigator) {
            navigator.serviceWorker
              .getRegistrations()
              .then(function (registrations) {
                for (let registration of registrations) {
                  registration.unregister();
                }
              });
          }
        }
      }

      // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
      document.addEventListener("DOMContentLoaded", function () {
        checkCacheVersion();
        initializePage();

        // å¼ºåŠ›ä¿®å¤è¯­è¨€é€‰æ‹©å™¨ä½ç½®
        forceFixLanguageSelectorPosition();

        // å®šæ—¶é‡å¤ä¿®å¤ï¼Œç¡®ä¿åœ¨Pi Network iframeä¸­æ­£ç¡®æ˜¾ç¤º
        setTimeout(() => {
          forceFixLanguageSelectorPosition();
        }, 500);

        setTimeout(() => {
          forceFixLanguageSelectorPosition();
        }, 1000);

        setTimeout(() => {
          forceFixLanguageSelectorPosition();
        }, 2000);

        // æ‰‹æœºç«¯é˜´å½±æ¸…é™¤
        clearAllStoneShadows();

        // ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼Œé‡æ–°æ¸…é™¤é˜´å½±å’Œè°ƒæ•´å­—ä½“
        window.addEventListener("resize", function () {
          setTimeout(() => {
            clearAllStoneShadows();
            adjustSubtitleFontSize();
          }, 100);
        });

        // ç›‘å¬è®¾å¤‡æ–¹å‘å˜åŒ–
        window.addEventListener("orientationchange", function () {
          setTimeout(() => {
            clearAllStoneShadows();
          }, 200);
        });
      });

      // å¼ºåˆ¶åˆ·æ–°ç¼“å­˜æ£€æŸ¥
      function checkCacheVersion() {
        const currentVersion = "2025-06-11-22:30";
        const cachedVersion = localStorage.getItem("appVersion");

        if (cachedVersion !== currentVersion) {
          localStorage.setItem("appVersion", currentVersion);
          // å¦‚æœç‰ˆæœ¬ä¸åŒ¹é…ï¼Œå¼ºåˆ¶åˆ·æ–°
          if (cachedVersion && "serviceWorker" in navigator) {
            navigator.serviceWorker
              .getRegistrations()
              .then(function (registrations) {
                for (let registration of registrations) {
                  registration.unregister();
                }
              });
          }
        }
      }

      // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
      document.addEventListener("DOMContentLoaded", function () {
        checkCacheVersion();
        initializePage();

        // å¼ºåŠ›ä¿®å¤è¯­è¨€é€‰æ‹©å™¨ä½ç½®
        forceFixLanguageSelectorPosition();

        // æ›´æ–°ä¸»é¡µæŒ‰é’®çŠ¶æ€
        updateMainPageButtonState();

        // æ¸…é™¤æ‰€æœ‰æ£‹å­é˜´å½±
        setTimeout(() => {
          clearAllStoneShadows();
        }, 200);
      });
    </script>
  </body>
</html>
 