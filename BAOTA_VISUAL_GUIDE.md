# 🎛️ 宝塔面板图文操作指南

## 📸 详细步骤截图说明

### 第一步：安装宝塔面板

#### 1. 连接服务器
```
阿里云控制台 → 云服务器ECS → 实例 → 远程连接 → Workbench远程连接
```

#### 2. 安装命令
```bash
wget -O install.sh https://download.bt.cn/install/install_6.0.sh && sh install.sh ed8484bec
```

#### 3. 记录登录信息
安装完成后会显示：
```
==================================================================
Congratulations! Installed successfully!
==================================================================
外网面板地址: http://你的IP:8888/xxxxxxxx
内网面板地址: http://127.0.0.1:8888/xxxxxxxx
username: xxxxxxxx
password: xxxxxxxx
```

### 第二步：登录宝塔面板

#### 1. 浏览器访问
- 打开浏览器
- 输入：`http://你的服务器IP:8888/xxxxxxxx`
- 输入用户名和密码

#### 2. 首次登录设置
- 会弹出"推荐安装套件"
- 选择：**LNMP（推荐）**
- 点击：**一键安装**

#### 3. 等待安装完成
- Nginx：选择编译安装
- MySQL：可选（项目暂不需要）
- PHP：可选（项目暂不需要）
- phpMyAdmin：可选

### 第三步：安装Node.js环境

#### 1. 进入软件商店
```
左侧菜单 → 软件商店
```

#### 2. 搜索安装Node.js
- 搜索：`Node.js版本管理器`
- 点击：**安装**

#### 3. 配置Node.js版本
- 安装完成后点击：**设置**
- 选择版本：**18.19.0**（或最新18.x版本）
- 点击：**安装**
- 安装完成后点击：**设为默认**

#### 4. 安装PM2管理器
- 搜索：`PM2管理器`
- 点击：**安装**

### 第四步：创建网站

#### 1. 添加站点
```
左侧菜单 → 网站 → 添加站点
```

#### 2. 填写站点信息
- **域名**：你的服务器IP（如：123.456.789.0）
- **备注**：Pi Network 五子棋
- **根目录**：`/www/wwwroot/pi-gomoku`
- **FTP**：不创建
- **数据库**：不创建
- **PHP版本**：纯静态

#### 3. 点击提交

### 第五步：上传项目代码

#### 1. 进入文件管理
```
左侧菜单 → 文件
```

#### 2. 进入网站目录
- 点击：`www`
- 点击：`wwwroot`
- 点击：`pi-gomoku`

#### 3. 清空默认文件
- 选中所有文件
- 点击：**删除**

#### 4. 下载项目代码
- 点击：**终端**
- 输入命令：
```bash
git clone https://github.com/mrsong-ai/pi-gomoku-backend.git .
cd houduan
npm install --production
```

### 第六步：配置PM2

#### 1. 进入PM2管理器
```
软件商店 → 已安装 → PM2管理器 → 设置
```

#### 2. 添加项目
- 点击：**添加项目**
- **项目名称**：`pi-gomoku-backend`
- **运行目录**：`/www/wwwroot/pi-gomoku/houduan`
- **启动文件**：`server.js`
- **运行模式**：`cluster`
- **实例数量**：`1`

#### 3. 启动项目
- 点击：**提交**
- 确认状态为：**online**

### 第七步：配置Nginx

#### 1. 修改网站配置
```
网站 → 找到你的网站 → 设置 → 配置文件
```

#### 2. 替换配置内容
- 删除原有内容
- 复制 `houduan/nginx-baota.conf` 的内容
- 将 `你的域名或IP` 替换为实际IP
- 点击：**保存**

### 第八步：测试访问

#### 1. 测试后端API
浏览器访问：`http://你的IP/health`
应该看到：`{"status":"ok","timestamp":"..."}`

#### 2. 测试前端页面
浏览器访问：`http://你的IP/`
应该看到五子棋游戏页面

#### 3. 测试API接口
浏览器访问：`http://你的IP/api/games`
应该看到游戏数据

## 🔧 日常管理操作

### 查看服务状态
```
软件商店 → 已安装 → PM2管理器 → 设置
```

### 查看日志
```
PM2管理器 → 找到项目 → 日志
```

### 重启服务
```
PM2管理器 → 找到项目 → 重启
```

### 更新代码
```
文件 → 进入项目目录 → 终端
git pull origin main
npm install --production
```
然后在PM2管理器中重启项目

### 查看访问日志
```
网站 → 设置 → 日志
```

## 🛡️ 安全设置

### 1. 修改面板端口
```
面板设置 → 安全设置 → 面板端口
```

### 2. 设置访问限制
```
面板设置 → 安全设置 → 授权IP
```

### 3. 开启SSL（可选）
```
网站 → 设置 → SSL → Let's Encrypt
```

## 🆘 常见问题

### 1. 无法访问面板
- 检查防火墙是否开放8888端口
- 检查安全组是否允许8888端口

### 2. Node.js安装失败
- 尝试手动安装：`curl -fsSL https://rpm.nodesource.com/setup_18.x | bash -`
- 然后：`yum install -y nodejs`

### 3. 项目启动失败
- 检查PM2日志
- 确认端口3001未被占用
- 检查环境变量配置

### 4. 前端无法访问
- 检查Nginx配置是否正确
- 确认代理地址是否正确
- 检查防火墙80端口

## 📞 获取帮助

### 宝塔官方
- 官网：https://www.bt.cn/
- 论坛：https://www.bt.cn/bbs/
- 文档：https://www.bt.cn/bbs/forum-39-1.html

### 项目相关
- GitHub：https://github.com/mrsong-ai/pi-gomoku-backend
- 问题反馈：在GitHub Issues中提交

## 🎉 完成检查清单

- [ ] 宝塔面板安装成功
- [ ] Node.js环境配置完成
- [ ] PM2管理器安装完成
- [ ] 网站创建成功
- [ ] 项目代码下载完成
- [ ] 依赖安装成功
- [ ] PM2项目启动成功
- [ ] Nginx配置完成
- [ ] 前端页面可访问
- [ ] API接口正常
- [ ] 健康检查通过

**恭喜！你已经成功使用宝塔面板部署了五子棋后端！** 🎮✨
